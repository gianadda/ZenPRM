function createStore(){var e={data:{},loaded:!1,replace:function(e){this.data=e,this.trigger("change")},set:function(e,t){this.data[e]=t,this.trigger("change")},get:function(e){return this.data[e]}};return _.extend(e,Backbone.Events),e}function generateLoremIpsum(e){for(var e=e||Math.floor(50*Math.random())+3,t=function(e,t){return-1!==a.indexOf(e,a.length-t-1)},n=function(){return r[Math.floor(Math.random()*(r.length-1))]},i=function(e){return e[0].toUpperCase()+e.slice(1)},o="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. ut labore et dolore magna aliqua. Enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip commodo consequat. Duis aute irure dolor reprehenderit voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim est laborum.",r=o.split(" "),s="",a=i(n()),l=1;e>l;l+=1)s=n(),a+=" ",a+=t(".",1)||t("?",1)?i(s):s.toLowerCase();return t(".")||t(",")||t("?")?a.slice(0,-1)+".":a+"."}if(function(){function e(e){function t(t,n,i,o,r,s){for(;r>=0&&s>r;r+=e){var a=o?o[r]:r;i=n(i,t[a],a,t)}return i}return function(n,i,o,r){i=_(i,r,4);var s=!S(n)&&y.keys(n),a=(s||n).length,l=e>0?0:a-1;return arguments.length<3&&(o=n[s?s[l]:l],l+=e),t(n,i,o,s,l,a)}}function t(e){return function(t,n,i){n=w(n,i);for(var o=T(t),r=e>0?0:o-1;r>=0&&o>r;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(i,o,r){var s=0,a=T(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=t(p.call(i,s,a),y.isNaN),r>=0?r+s:-1;for(r=e>0?s:a-1;r>=0&&a>r;r+=e)if(i[r]===o)return r;return-1}}function i(e,t){var n=V.length,i=e.constructor,o=y.isFunction(i)&&i.prototype||a,r="constructor";for(y.has(e,r)&&!y.contains(t,r)&&t.push(r);n--;)r=V[n],r in e&&e[r]!==o[r]&&!y.contains(t,r)&&t.push(r)}var o=this,r=o._,s=Array.prototype,a=Object.prototype,l=Function.prototype,c=s.push,p=s.slice,u=a.toString,d=a.hasOwnProperty,h=Array.isArray,m=Object.keys,f=l.bind,g=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var _=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?_(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};var b=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var r=arguments[o],s=e(r),a=s.length,l=0;a>l;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=r[c])}return n}},k=function(e){if(!y.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,T=C("length"),S=function(e){var t=T(e);return"number"==typeof t&&t>=0&&x>=t};y.each=y.forEach=function(e,t,n){t=_(t,n);var i,o;if(S(e))for(i=0,o=e.length;o>i;i++)t(e[i],i,e);else{var r=y.keys(e);for(i=0,o=r.length;o>i;i++)t(e[r[i]],r[i],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),o=(i||e).length,r=Array(o),s=0;o>s;s++){var a=i?i[s]:s;r[s]=t(e[a],a,e)}return r},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;return i=S(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},y.filter=y.select=function(e,t,n){var i=[];return t=w(t,n),y.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var i=!S(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return S(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=p.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,o,r=-(1/0),s=-(1/0);if(null==t&&null!=e){e=S(e)?e:y.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],i>r&&(r=i)}else t=w(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(o>s||o===-(1/0)&&r===-(1/0))&&(r=e,s=o)});return r},y.min=function(e,t,n){var i,o,r=1/0,s=1/0;if(null==t&&null!=e){e=S(e)?e:y.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],r>i&&(r=i)}else t=w(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(s>o||o===1/0&&r===1/0)&&(r=e,s=o)});return r},y.shuffle=function(e){for(var t,n=S(e)?e:y.values(e),i=n.length,o=Array(i),r=0;i>r;r++)t=y.random(0,r),t!==r&&(o[r]=o[t]),o[t]=n[r];return o},y.sample=function(e,t,n){return null==t||n?(S(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=w(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var G=function(e){return function(t,n,i){var o={};return n=w(n,i),y.each(t,function(i,r){var s=n(i,r,t);e(o,i,s)}),o}};y.groupBy=G(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=G(function(e,t,n){e[n]=t}),y.countBy=G(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?p.call(e):S(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:S(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=w(t,n);var i=[],o=[];return y.each(e,function(e,n,r){(t(e,n,r)?i:o).push(e)}),[i,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var A=function(e,t,n,i){for(var o=[],r=0,s=i||0,a=T(e);a>s;s++){var l=e[s];if(S(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=A(l,t,n));var c=0,p=l.length;for(o.length+=p;p>c;)o[r++]=l[c++]}else n||(o[r++]=l)}return o};y.flatten=function(e,t){return A(e,t,!1)},y.without=function(e){return y.difference(e,p.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var o=[],r=[],s=0,a=T(e);a>s;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&r===c||o.push(l),r=c):n?y.contains(r,c)||(r.push(c),o.push(l)):y.contains(o,l)||o.push(l)}return o},y.union=function(){return y.uniq(A(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=T(e);o>i;i++){var r=e[i];if(!y.contains(t,r)){for(var s=1;n>s&&y.contains(arguments[s],r);s++);s===n&&t.push(r)}}return t},y.difference=function(e){var t=A(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,T).length||0,n=Array(t),i=0;t>i;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,o=T(e);o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var o=n(t),r=0,s=T(e);s>r;){var a=Math.floor((r+s)/2);n(e[a])<o?r=a+1:s=a}return r},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;i>r;r++,e+=n)o[r]=e;return o};var M=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=k(e.prototype),s=e.apply(r,o);return y.isObject(s)?s:r};y.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,p.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),i=function(){return M(e,i,t,this,n.concat(p.call(arguments)))};return i},y.partial=function(e){var t=p.call(arguments,1),n=function(){for(var i=0,o=t.length,r=Array(o),s=0;o>s;s++)r[s]=t[s]===y?arguments[i++]:t[s];for(;i<arguments.length;)r.push(arguments[i++]);return M(e,n,this,this,r)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return y.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},y.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:y.now(),s=null,r=e.apply(i,o),s||(i=o=null)};return function(){var c=y.now();a||n.leading!==!1||(a=c);var p=t-(c-a);return i=this,o=arguments,0>=p||p>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(l,p)),r}},y.debounce=function(e,t,n){var i,o,r,s,a,l=function(){var c=y.now()-s;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=y.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(r,o),r=o=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var z=!{toString:null}.propertyIsEnumerable("toString"),V=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return z&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return z&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},y.mapObject=function(e,t,n){t=w(t,n);for(var i,o=y.keys(e),r=o.length,s={},a=0;r>a;a++)i=o[a],s[i]=t(e[i],i,e);return s},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var i,o=y.keys(e),r=0,s=o.length;s>r;r++)if(i=o[r],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,o,r={},s=e;if(null==s)return r;y.isFunction(t)?(o=y.allKeys(s),i=_(t,n)):(o=A(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var a=0,l=o.length;l>a;a++){var c=o[a],p=s[c];i(p,c,s)&&(r[c]=p)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(A(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=b(y.allKeys,!0),y.create=function(e,t){var n=k(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;i>r;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0};var $=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=u.call(e);if(o!==u.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!$(e[l],t[l],n,i))return!1}else{var c,p=y.keys(e);if(l=p.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=p[l],!y.has(t,c)||!$(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return $(e,t)},y.isEmpty=function(e){return null==e?!0:S(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===u.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&d.call(e,t)},y.noConflict=function(){return o._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=_(t,n,1);for(var o=0;e>o;o++)i[o]=t(o);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=y.invert(R),O=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};y.escape=O(R),y.unescape=O(E),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var I=0;y.uniqueId=function(e){var t=++I+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,P=function(e){return"\\"+N[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,function(t,n,i,s,a){return r+=e.slice(o,a).replace(L,P),o=a+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(e){return s.call(this,e,y)},c=t.variable||"obj";return l.source="function("+c+"){\n"+r+"}",l},y.chain=function(e){var t=y(e);return t._chain=!0,t};var J=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),J(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],J(this,n)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return J(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(){var e=[].slice;window.HAML=function(){function t(){}return t.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/index.html"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},t.cleanValue=function(e){switch(e){case null:case void 0:return"";case!0:case!1:return"\x93"+e;default:return e}},t.extend=function(){var t,n,i,o,r,s,a;for(o=arguments[0],s=2<=arguments.length?e.call(arguments,1):[],t=0,i=s.length;i>t;t++){r=s[t];for(n in r)a=r[n],o[n]=a}return o},t.globals=function(){return{}},t.context=function(e){return this.extend({},t.globals(),e)},t.preserve=function(e){return e.replace(/\n/g,"&#x000A;")},t.findAndPreserve=function(e){var t;return t="textarea,pre".split(",").join("|"),e=e.replace(/\r/g,"").replace(RegExp("<("+t+")>([\\s\\S]*?)<\\/\\1>","g"),function(e,t,n){return"<"+t+">"+window.HAML.preserve(n)+"</"+t+">"})},t.surround=function(e,t,n){var i;return e+(null!=(i=n.call(this))?i.replace(/^\s+|\s+$/g,""):void 0)+t},t.succeed=function(e,t){var n;return(null!=(n=t.call(this))?n.replace(/\s+$/g,""):void 0)+e},t.precede=function(e,t){var n;return e+(null!=(n=t.call(this))?n.replace(/^\s+/g,""):void 0)},t.reference=function(e,t){var n,i,o,r;return i=t?t+"_":"",i+="function"==typeof e.hamlObjectRef?e.hamlObjectRef():((null!=(o=e.constructor)?o.name:void 0)||"object").replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase(),n="function"==typeof e.to_key?e.to_key():"function"==typeof e.id?e.id():e.id?e.id:e,r="class='"+i+"'",n?r+=" id='"+i+"_"+n+"'":void 0},t}()}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agent_grid_item"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.agent.isArchived()?GrooveClient.path("settings/users/archived/"+this.agent.id):GrooveClient.path("settings/users/"+this.agent.id),n.push("<a href='"+t(e(i))+"'>\n  <div class='grid-image'>"+e(this.agentView.avatarImage({size:170,type:"original"}))+"</div>\n  <span class='grid-title'>"+t(e(this.agent.get("name")))+"</span>\n  <span class='grid-subtitle'>"+t(e(this.agent.get("email")))+"</span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agent_list_item"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=new GrooveClient.Views.User({model:this.agent}),n.push("<td class='avatar'>"),n.push("  "+e(i.avatarImage({size:30}))),n.push("</td>\n<td class='name'>"),this.agent.invited()?n.push("  <span>"+t(e(this.agent.get("name")))+"</span>"):n.push("  <a href='"+t(e(this.agent.agentContactUrl()))+"'>"+t(e(this.agent.get("name")))+"</a>"),n.push("</td>\n<td class='email'>"+t(e(this.agent.get("email")))+"</td>\n<td class='role'>"+t(e(this.agent.get("role")))+"</td>"),this.agent.invited()&&n.push("<td class='resend'>\n  <a>Resend</a>\n</td>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agent_ratings"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3>Rated Tickets</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e("Looks like "+this.agent.get("first_name")+" hasn't received any ratings yet."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='awesome tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='ok tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='bad tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agent_tickets"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=GrooveClient.path("agents/"+this.agent.id+"/tickets"),n.push("<h3>"+t(e(this.agent.possessiveFirstName()+" Ticket History"))+"</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e(this.agent.get("first_name")+" has yet to work on any tickets."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='opened tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='follow_up tickets'>\n    <a class='view-all' href='"+t(e(i))+"'>View all</a>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='pending tickets'>\n    <a class='view-all' href='"+t(e(i))+"'>View all</a>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='closed tickets'>\n    <a class='view-all' href='"+t(e(i))+"'>View all</a>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agents_and_groups"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <h1 class='h1b'>Groove Agents</h1>\n</div>\n<div class='box-c-agents-and-groups box-c-main'>"),i=this.agents.where({archived:!1}),_.isEmpty(i)||n.push("  <div class='agents grid non-archived' style='display: none'>\n    <h3 class='title'>"+t(e(i.length+" Agent"+(1===i.length?"":"s")))+"</h3>\n    <div class='items unarchived'></div>\n    <div class='add-item'>\n      <a class='invite-new-agent' href='#'>Add an Agent</a>\n    </div>\n  </div>"),i=this.agents.where({archived:!0}),_.isEmpty(i)||n.push("  <div class='agents archived grid' style='display: none'>\n    <h3 class='title'>"+t(e(i.length+" Archived Agent"+(1===i.length?"":"s")))+"</h3>\n    <div class='archived items'></div>\n  </div>"),n.push("  <div class='grid groups' style='display: none'>\n    <h3 class='title'>"+t(e(this.groups.size()+" Group"+(1===this.groups.size()?"":"s")))+"</h3>\n    <div class='items'></div>\n    <div class='add-item'>\n      <a class='fancybox' href='/groups/new'>Create a Group</a>\n    </div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/agents_list"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.invited?"Invited Users":this.archived===!0?"Archived Users":"Active Users",n.push("<div class='box-c-toolbar contacts fixed-header last'>\n  <h1 class='h1b'>"+t(e(this.agentCount+" "+i))+"</h1>\n</div>\n<div class='agents box-c-main contacts-dashboard'>\n  <table id='agents'>\n    <thead>\n      <tr>\n        <th class='avatar'>&nbsp;</th>\n        <th class='name' data-sort='string'>\n          <span>Name</span>\n        </th>\n        <th class='email' data-sort='string'>\n          <span>Email</span>\n        </th>\n        <th class='role' data-sort='string'>\n          <span>Role</span>\n        </th>"),this.invited&&n.push("        <th class='reinvite'>\n          <span></span>\n        </th>"),n.push("      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/archived"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <h1 class='h1b'>\n    Archived Agents\n  </h1>\n</div>\n<div class='box-c-billing-index'>\n  <div class='billing-block'>\n    <ul>"),a=this.archived,r=0,s=a.length;s>r;r++)i=a[r],o=new GrooveClient.Views.User({model:i}),n.push("      <li data-agent-id='"+t(e(i.id))+"'>\n        <div class='image'>"),n.push("          "+e(o.avatarImage({size:25}))),n.push("        </div>"),n.push("        "+t(e(i.get("name")))),n.push("      </li>");return n.push("    </ul>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/change_type"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>Edit Agent</h1>\n<form class='formtastic'>\n  <p>\n    Update\n    <b>"+t(e(this.agent.get("name")))+"</b>"),n.push("    "+t(e("with the following account:"))),n.push("  </p>\n  <fieldset class='inputs vertical'>\n    <ol>"),this.agent.isOwner()||n.push("      <li class='input select'>\n        <label>\n          <input class='archived' type='checkbox' name='archived'>\n          Archived\n        </label>\n      </li>"),n.push("    </ol>\n  </fieldset>\n  <fieldset class='actions'>\n    <ol>\n      <li>\n        <input type='submit' value='Update'>\n      </li>\n    </ol>\n  </fieldset>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/group_grid_item"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.group.get("user_ids").length,n.push("<a href='"+t(e(GrooveClient.path("groups/"+this.group.id)))+"'>\n  <div class='grid-image'></div>\n  <span class='grid-title'>"+t(e(this.group.get("name")))+"</span>\n  <span class='grid-subtitle'>"+t(e(i+" member"+(1===i?"":"s")))+"</span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/inspector"]=function(e){return function(){var e,t,n,i,o,r,s;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <a class='nav-back-button' href='#'>\n    <span>Back</span>\n  </a>\n  <h1 class='h1b'>Agent Profile</h1>\n</div>\n<div class='box-c-agent-profile box-c-main'>\n  <div class='agent-profile-header'>\n    <div class='agent-avatar'>"),n.push("      "+e(this.agentView.avatarImage({size:80}))),n.push("    </div>\n    <h2 class='agent-name'>"),n.push("      "+t(e(this.agent.get("name")))),this.agent.isOwner()&&n.push("      <span class='agent-label role-owner'>Account Owner</span>"),n.push("    </h2>\n    <h3 class='agent-email'>"+t(e(this.agent.get("email")))+"</h3>"),this.account.get("prefers_customer_ratings_installed")){for(n.push("    <div class='agent-ratings'>"),s=["awesome","ok","bad"],i=0,o=s.length;o>i;i++)r=s[i],n.push("      <div class='"+["rating",""+t(e(r))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"),n.push("        "+t(e(Math.round(100*this.agent.ratingsPercentage(r),0)+"%"))),n.push("        "+t(e("("+this.agent.get("ratings")[r+"_ratings"]+")"))),n.push("      </div>");n.push("    </div>")}return n.push("    <div class='agent-settings'>"),this.currentUser.isAdmin()&&!this.agent.isOwner()&&n.push("      <label>\n        <input type='checkbox' name='role'>\n        Admin\n      </label>"),n.push("      <label>\n        <input type='checkbox' name='include_in_analytics'>\n        Include in analytics\n      </label>"),this.currentUser.isAdmin()&&!this.agent.isOwner()&&this.currentUser.id!==this.agent.id&&n.push("      <label>\n        <input class='archived' type='checkbox' name='archived'>\n        Archived\n      </label>"),n.push("    </div>\n  </div>\n  <div class='agent-timeline-events'>\n    <h3>Recent Activity</h3>\n    <ul class='timeline-events'></ul>\n  </div>\n  <div class='agent-history'>\n    <ul id='menu-agent-history'>"),this.agent.hasFeature("ticketing")&&n.push("      <li class='nav-i-agent-tickets'>\n        <a data-history-type='tickets'>Tickets</a>\n      </li>"),this.account.get("prefers_customer_ratings_installed")&&this.agent.hasFeature("ticketing")&&n.push("      <li class='nav-i-agent-ratings'>\n        <a data-history-type='ratings'>Ratings</a>\n      </li>"),n.push("    </ul>\n    <div class='agent-history-content'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/invite"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<h1 class='h1'>Add New User</h1>\n<form class='formtastic invite vertical-form' id='agent_invite_form' action='/users/invitation' method='post' data-remote='true'>"),t.push("  "+e(this.csrfInput)),t.push("  <fieldset class='inputs vertical'>\n    <ol>\n      <li class='name string'>\n        <label class='label' for='agent_invite_form_name'>Name</label>\n        <input id='agent_invite_form_name' name='user[name]' type='text'>\n      </li>\n      <li class='email string'>\n        <label class='label' for='agent_invite_form_email'>E-mail Address</label>\n        <div class='inline-hints'>\n          This user will receive an email with instructions to login.\n        </div>\n        <input id='agent_invite_form_email' name='user[email]' type='email'>\n      </li>\n      <li>\n        <span>User Type:</span>\n        <div class='helpdesk-or-chat role-input-container'>\n          <input id='invite_as' type='checkbox' value='admin' name='invite_as' checked='checked'>\n          <label class='label' for='agent_invite_form_role'>Admin</label>\n        </div>\n      </li>\n    </ol>\n    <div class='actions'>\n      <fieldset class='actions'>\n        <input class='done' name='commit' type='submit' value='Done'>\n      </fieldset>\n    </div>\n  </fieldset>\n</form>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/invite_confirmation"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1 class='h1'>Agent has been invited!</h1>\n<p>"),n.push("  "+t(e(this.name))),n.push("  has been invited as a new help desk agent.\n  <br>\n  An email will be sent with instructions to login.\n</p>\n<h3>Email has been sent to:</h3>\n<p class='strong'>"),n.push("  "+t(e(this.name))),n.push("   -"),n.push("  "+t(e(this.email))),n.push("</p>\n<div class='buttons'>\n  <button class='add-another-agent'>Add another agent</button>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"");
}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/menu_agent"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a href='"+t(e(GrooveClient.path("agents/"+this.agent.id)))+"'>\n  <span>"),n.push("    "+t(e(this.agent.get("name")))),n.push("  </span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["agents/reinvite"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1 class='h1'>Resend Invite</h1>\n<form class='formtastic reinvite vertical-form' id='agent_reinvite_form'>"),n.push("  "+e(this.csrfInput)),n.push("  <fieldset class='inputs vertical'>\n    <ol>\n      <li class='invitation-url string'>\n        <label class='label' for='agent_invite_form_email'>Invitation URL</label>\n        <div class='inline-hints'>\n          This user will receive an email and this URL with instructions to login.\n        </div>\n        <input id='user_id' name='user[id]' type='hidden' value='"+t(e(this.agentId))+"'>\n        <input id='accept-url' type='text' value='"+t(e(this.acceptURL))+"'>\n      </li>\n    </ol>\n    <div class='actions'>\n      <fieldset class='actions'>\n        <input class='done' name='commit' type='submit' value='Send Email'>\n      </fieldset>\n    </div>\n  </fieldset>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/app_list_item"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.app.get("name"),this.app.get("installed")===!0?(r=i+" has already been installed",o="installed"):(r="Install "+i,o="not-installed"),n.push("<div class='"+["app",t(e(this.app.get("slug")))+" "+t(e(o))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <a class='logo-link' href='"+t(e(this.app.grooveUrl()))+"' title='"+t(e(r))+"'>\n    <img class='"+this.app.get("app_type")+"-logo' src='"+t(e(this.app.get("logo_url_small")))+"'>\n  </a>\n  <div class='details'>\n    <h3>\n      <a href='"+t(e(this.app.grooveUrl()))+"'>"+t(e(i))+"</a>\n    </h3>\n    <p class='description'>"+t(e(this.app.get("description")))+"</p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/details"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.app.get("app_type"),o=this.app.isInstalled()?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(o))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>"+t(e(this.app.get("name")))+"</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>"+t(e(this.app.get("name")))+"</h1>\n      <h2>"+t(e(this.app.get("description")))+"</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='"+t(e(i))+"'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='"+t(e(i))+"'>"),n.push("      <input class='button install' id='install-button' value='Install App' type='submit' name='install' data-app-type='"+t(e(i))+"'>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/"+t(e(i))+"/example-1.png'>\n      <img src='/assets/apps/carousels/"+t(e(i))+"/example-2.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>"),n.push("      "+e(markdown.toHTML(this.app.get("detailed_description")))),n.push("    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/batchbook_credentials"]=function(e){return function(){var e;return e=[],e.push("<div class='dark-header'>\n  <h1>Install Batchbook CRM</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='app-installation formtastic new-app-installation-creation-form' id='new_app_installation' action='/api/apps/batchbook/installations'>\n  <div class='new-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Batchbook CRM API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Batchbook Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' placeholder='Ex: acmecorp'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-batchbooks-domain' target='_blank'>How do I find my Batchbook domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Batchbook CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' placeholder='Ex: 1234567890'>\n      <a class='instructions' href=' http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-batchbook' target='_blank'>How do I find my Batchbook API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='new-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='install-button' type='submit' value='Install Batchbook CRM'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/batchbook_credentials_update"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.app.get("credentials"),i=o.api_token,r=o.site,n.push("<div class='dark-header'>\n  <h1>Update Batchbook CRM Credentials</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='formtastic update-app-installation update-app-installation-creation-form' id='update_app_installation' action='/api/apps/batchbook/installations'>\n  <div class='update-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Batchbook CRM API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Batchbook Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' value='"+t(e(r))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-batchbooks-domain' target='_blank'>How do I find my Batchbook domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Batchbook CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' value='"+t(e(i))+"'>\n      <a class='instructions' href=' http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-batchbook' target='_blank'>How do I find my Batchbook API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='update-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='update-button' type='submit' value='Update Batchbook CRM Credentials'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/capsule_credentials"]=function(e){return function(){var e;return e=[],e.push("<div class='dark-header'>\n  <h1>Install Capsule CRM</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='app-installation formtastic new-app-installation-creation-form' id='new_app_installation' action='/api/apps/capsule/installations'>\n  <div class='new-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Capsule CRM API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Capsule CRM Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' placeholder='Ex: acmecorp'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-capsule-crm-domain' target='_blank'>How do I find my Capsule domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Capsule CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' placeholder='Ex: 1234567890'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-capsule-crm' target='_blank'>How do I find my Capsule API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='new-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='install-button' type='submit' value='Install Capsule CRM'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/capsule_credentials_update"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.app.get("credentials"),i=o.api_token,r=o.site,n.push("<div class='dark-header'>\n  <h1>Update Capsule CRM Credentials</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='formtastic update-app-installation update-app-installation-creation-form' id='update_app_installation' action='/api/apps/capsule/installations'>\n  <div class='update-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Capsule CRM API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Capsule CRM Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' value='"+t(e(r))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-capsule-crm-domain' target='_blank'>How do I find my Capsule domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Capsule CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' value='"+t(e(i))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-capsule-crm' target='_blank'>How do I find my Capsule API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='update-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='update-button' type='submit' value='Update Capsule CRM Credentials'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/chat_integration"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='integration' data-id='"+t(e(this.id))+"'>\n  <input type='text' role='webhookUrl' value='"+t(e(this.webhookUrl))+"'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/custom_profile_app"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],o="http://groove.groovehq.com/knowledge_base/topics/how-to-setup-the-custom-profile-app",n.push("<h1>Custom Profile Settings</h1>\n<a id='fancybox-close' href='#'>&times;</a>\n<form class='custom-profile-app formtastic' action='/custom_profile_app'>\n  <fieldset class='inputs vertical'>\n    <ol>\n      <li class='input required string stringish'>\n        <label class='label' for='custom_profile_app_name'>\n          Headline\n          <abbr title='required'>*</abbr>\n        </label>\n        <input id='custom_profile_app_name' maxlength='255' name='name' type='text' value='"+t(e(this.app.get("name")||"Custom Profile"))+"'>\n      </li>\n      <li class='input required text'>\n        <label class='label' for='custom_profile_app_template'>\n          HTML Template\n          <abbr title='required'>*</abbr>\n        </label>\n        <p>\n          Add custom HTML to the ticket page. Insert any of the fields you're used\n          to using in tickets such as customer names or add internal fields\n          by entering a webhook URL below.\n          <a href='"+t(e(o))+"'>Learn more...</a>\n        </p>\n        <textarea id='custom_profile_app_template' name='template' rows='10'>"+i(t(e(this.app.get("template")||this.defaultTemplate)))+"</textarea>\n      </li>\n      <li class='input required string stringish'>\n        <h3>Custom Fields</h3>\n        <p>\n          Add custom fields to your profile with a webhook. Your server should\n          respond to a GET request containing the user's email address and return\n          custom fields as JSON.\n          <a href='"+t(e(o))+"'>Learn more...</a>\n        </p>\n        <label class='label' for='custom_profile_app_webhook_url'>\n          Webhook URL\n          <abbr title='required'>*</abbr>\n        </label>\n        <input id='custom_profile_app_webhook_url' name='webhook_url' type='text' value='"+t(e(this.app.get("webhook_url")))+"'>\n      </li>\n    </ol>\n    <p class='webhook-example'></p>\n  </fieldset>\n  <div class='webhook'>\n    <ul class='test'>\n      <li class='string'>\n        <input id='webhook-test-email' placeholder='joe@example.com' name='test_email'>\n      </li>\n      <li class='action button_action'>\n        <input id='webhook-test-button' type='button' value='Fetch & Render Profile'>\n        <br clear='both'>\n      </li>\n    </ul>\n    <div class='results' style='display: none'>\n      <div class='message'>\n        <h2></h2>\n        <span class='msg'></span>\n        <div class='example-profile'>\n          <ul></ul>\n        </div>\n      </div>\n      <div class='mockup'></div>\n      <br clear='both'>\n    </div>\n  </div>\n  <fieldset class='buttons full-width'>\n    <ol>\n      <li class='action button_action'>\n        <button name='button' type='submit'>Save</button>\n      </li>\n    </ol>\n  </fieldset>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/highrise_credentials"]=function(e){return function(){var e;return e=[],e.push("<div class='dark-header'>\n  <h1>Install Highrise</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='app-installation formtastic new-app-installation-creation-form' id='new_app_installation' action='/api/apps/highrise/installations'>\n  <div class='new-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Highrise API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Highrise Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' placeholder='Ex: acmecorp'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-do-i-find-my-highrise-domain' target='_blank'>How do I find my Highrise domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Highrise API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' placeholder='Ex: 1234567890'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-highrise' target='_blank'>How do I find my Highrise API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='new-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='install-button' type='submit' value='Install Highrise'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/highrise_credentials_update"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.app.get("credentials"),i=o.api_token,r=o.site,n.push("<div class='dark-header'>\n  <h1>Update Highrise Credentials</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='formtastic update-app-installation update-app-installation-creation-form' id='update_app_installation' action='/api/apps/highrise/installations'>\n  <div class='update-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Highrise API credentials</strong>\n    </li>\n    <li class='site string' id='app_installation_site_input'>\n      <label for='app_installation_site'>Highrise Domain</label>\n      <input id='app_installation_site' name='credentials[site]' autofocus='autofocus' value='"+t(e(r))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-do-i-find-my-highrise-domain' target='_blank'>How do I find my Highrise domain?</a>\n    </li>\n    <li class='api_token string' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Highrise API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' value='"+t(e(i))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-highrise' target='_blank'>How do I find my Highrise API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='update-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='update-button' type='submit' value='Update Highrise Credentials'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/hip_chat_credentials"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='dark-header'>\n  <h1>Install HipChat</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='app-installation formtastic new-app-installation-creation-form' id='new_app_installation' action='/api/apps/hipchat/installations'>\n  <div class='new-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your HipChat API Token</strong>\n    </li>\n    <li class='api_token string zoho' id='app_installation_api_token_input'>\n      <input id='app_installation_api_token' name='api_token' placeholder='Ex: 41070210020f01a17026021002' value='"+t(e(this.api_token))+"'>\n      <a class='instructions' href='https://groove.groovehq.com/knowledge_base/topics/how-to-install-the-hipchat-app' target='_blank'>How do I find my HipChat API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='new-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='install-button' type='submit' value='Install HipChat'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/hip_chat_settings"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>HipChat Settings</h1>\n<a id='fancybox-close' href='#'>&times;</a>\n<form class='formtastic' id='hip-chat-settings'>\n  <fieldset class='inputs vertical'>\n    <ol>\n      <li class='input required string stringish'>\n        <label class='label' for='api_token'>\n          Api Token\n          <abbr title='required'>*</abbr>\n        </label>\n        <input id='api_token' maxlength='100' name='api_token' type='text' value='"+t(e(this.model.get("api_token")))+"'>\n      </li>\n      <li class='input required string stringish'>\n        <label class='label' for='room_id'>\n          Room\n          <abbr title='required'>*</abbr>\n        </label>\n        <select id='room_id' maxlength='100' name='room_id' type='text' value='"+t(e(this.model.get("room_id")))+"'>"),r=this.model.rooms,i=0,o=r.length;o>i;i++)s=r[i],a=s.room_id===this.model.get("room_id")?"selected":!1,n.push("          <option value='"+t(e(s.room_id))+"' selected='"+t(e(a))+"'>"+t(e(s.name))+"</option>");return n.push("        </select>\n      </li>\n      <li class='input radio'>\n        <div>\n          <label>\n            Include Body in Notification?\n          </label>\n          <input id='include-body-yes' type='radio' name='include_comment_body' value='1' checked='"+t(e(this.model.get("include_comment_body")?"checked":!1))+"'>\n          <label for='include-body-yes'>Yes</label>\n          <input id='include-body-no' type='radio' name='include_comment_body' value='0' checked='"+t(e(this.model.get("include_comment_body")?!1:"checked"))+"'>\n          <label for='include-body-no'>No</label>\n        </div>\n        <div>\n          <label>\n            Play Sound?\n            <input id='play-sound-yes' type='radio' name='play_sound' value='1' checked='"+t(e(this.model.get("play_sound")?"checked":!1))+"'>\n            <label for='play-sound-yes'>Yes</label>\n            <input id='play-sound-no' type='radio' name='play_sound' value='0' checked='"+t(e(this.model.get("play_sound")?!1:"checked"))+"'>\n            <label for='play-sound-no'>No</label>\n          </label>\n        </div>\n      </li>\n      <li>\n        <h3 style='font-size: 16px; color: #363636;'>Mailboxes</h3>"),n.push("        "+e(this.mailboxCheckboxes())),n.push("      </li>\n      <li>\n        <h3 style='font-size: 16px; color: #363636;'>Notify us when</h3>"),n.push("        "+e(this.notificationCheckboxes())),n.push("      </li>\n    </ol>\n  </fieldset>\n  <fieldset class='buttons full-width'>\n    <ol>\n      <li class='action button_action'>\n        <button name='button' type='submit'>Save</button>\n      </li>\n    </ol>\n  </fieldset>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/olark_app"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o="http://groove.groovehq.com/knowledge_base/topics/how-to-setup-the-custom-profile-app",n.push("<h1>Olark Settings</h1>\n<a id='fancybox-close' href='#'>&times;</a>\n<h2 style='font-weight: bold; font-size: 20px'>Import chat messages directly into your Groove inbox.</h2>\n<p>\n  Select which mailbox you want to import message below to generate a Groove Webhook. Copy your Webhook URL and paste the Groove Webhook in the field below Webhook URL on the <a href=\"https://www.olark.com/crm/webhook\" target=\"_blank\">Olark Integrations Page</a>. You can also check out this\n  <a href=\"http://help.groovehq.com/knowledge_base/topics/setting-up-the-olark-integration\" target=\"_blank\">our knowledge base article</a> for step-by-step instructions.\n</p>\n<div class='box-c-comment-templates box-c-twitter-integration'>\n  <ul id='chatIntegrationSettings'>"),a=this.mailboxes,i=0,r=a.length;r>i;i++)s=a[i],n.push("    <li class='mailbox' data-id='"+t(e(s.id))+"'>\n      <div>\n        <div class='title'>\n          <strong>"+t(e(s.name))+"</strong>"),n.push("          "+t(e("("+s.email+")"))),n.push("        </div>\n        <ul>\n          <li class='switch'>\n            <div class='buttons'>\n              <input class='form-switchable' type='checkbox' checked='"+t(e(void 0!==s.integration))+"' role='toggleIntegration'>\n            </div>\n          </li>\n        </ul>\n      </div>"),s.integration&&n.push("      "+e(this._integrationTemplate(s.integration))),n.push("    </li>");return n.push("  </ul>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/snap_engage_app"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o="http://groove.groovehq.com/knowledge_base/topics/how-to-setup-the-custom-profile-app",n.push("<h1>SnapEngage Settings</h1>\n<a id='fancybox-close' href='#'>&times;</a>\n<h2 style='font-weight: bold; font-size: 20px'>Import chat messages directly into your Groove inbox.</h2>\n<p>\n  Select which mailbox you want to import message below to generate a Groove webhook. Copy your Webhook URL and paste in the SnapEngage Integrations page, right in the bar next to Post Event URL. You can also check out <a href=\"http://help.groovehq.com/knowledge_base/topics/integrating-with-snapengage\" target=\"_blank\">our knowledge base article</a> for step-by-step instructions.\n</p>\n<div class='box-c-comment-templates box-c-twitter-integration'>\n  <ul id='chatIntegrationSettings'>"),a=this.mailboxes,i=0,r=a.length;r>i;i++)s=a[i],n.push("    <li class='mailbox' data-id='"+t(e(s.id))+"'>\n      <div>\n        <div class='title'>\n          <strong>"+t(e(s.name))+"</strong>"),n.push("          "+t(e("("+s.email+")"))),n.push("        </div>\n        <ul>\n          <li class='switch'>\n            <div class='buttons'>\n              <input class='form-switchable' type='checkbox' checked='"+t(e(void 0!==s.integration))+"' role='toggleIntegration'>\n            </div>\n          </li>\n        </ul>\n      </div>"),s.integration&&n.push("      "+e(this._integrationTemplate(s.integration))),n.push("    </li>");return n.push("  </ul>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/zoho_credentials"]=function(e){return function(){var e;return e=[],e.push("<div class='dark-header'>\n  <h1>Install Zoho CRM</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='app-installation formtastic new-app-installation-creation-form' id='new_app_installation' action='/api/apps/zoho/installations'>\n  <div class='new-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Zoho CRM API credentials</strong>\n    </li>\n    <li class='api_token string zoho' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Zoho CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' placeholder='Ex: 1234567890'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-zoho' target='_blank'>How do I find my ZOHO API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='new-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='install-button' type='submit' value='Install Zoho CRM'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/forms/zoho_credentials_update"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.app.get("credentials"),i=o.api_token,n.push("<div class='dark-header'>\n  <h1>Update Zoho CRM Credentials</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='formtastic update-app-installation update-app-installation-creation-form' id='update_app_installation' action='/api/apps/zoho/installations'>\n  <div class='update-app-installation-details'>\n    <li id='app_installation_instructions'>\n      <strong>Enter your Zoho CRM API credentials</strong>\n    </li>\n    <li class='api_token string zoho' id='app_installation_api_token_input'>\n      <label for='app_installation_api_token'>Zoho CRM API Token</label>\n      <input id='app_installation_api_token' name='credentials[api_token]' value='"+t(e(i))+"'>\n      <a class='instructions' href='http://help.groovehq.com/knowledge_base/topics/how-to-find-your-api-key-in-zoho' target='_blank'>How do I find my ZOHO API token?</a>\n    </li>\n    <li id='app_installation_clearing'></li>\n  </div>\n  <div class='update-app-installation-content'>\n    <fieldset class='app_installation_bottom_actions inline'>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='app_installation_submit' name='update-button' type='submit' value='Update Zoho CRM Credentials'>\n        </fieldset>\n      </div>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"");
}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/asknicely_app_details"]=function(e){return function(){var e;return e=[],e.push("<div class='app-details'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>AskNicely</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>AskNicely</h1>\n      <h2>Automated Net Promoter Score tracking</h2>\n    </div>\n    <div class='actions'>\n      <a class='button install' href='http://www.asknice.ly/?utm_source=groove&utm_medium=integrations&utm_campaign=groovesetup' target='_blank'>Go To AskNicely</a>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='../assets/apps/carousels/asknicely/asknicely-hero.jpg'>\n      <img src='../assets/apps/carousels/asknicely/asknicely-dashboard.png'>\n      <img src='../assets/apps/carousels/asknicely/asknicely-responses.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>AskNicely automatically sends a one-click NPS survey to customers when a ticket is closed in Groove. You\u2019ll be able to:</p>\n    <ul>\n      <li>See live leaderboards of Net Promoter Score by ticket, tag, customer and agent</li>\n      <li>Route feedback to specific support staff or into Slack for immediate follow up</li>\n      <li>Publish positive comments to your website with one click</li>\n      <li>Automatically email weekly NPS results to your team</li>\n    </ul>\n    <br>\n    <h3>Setting up AskNicely integration</h3>\n    <p>The process for setting up the AskNicely integration for Groove is simple:</p>\n    <ol>\n      <li>Head over to the <strong>Apps</strong> section in Groove and select <strong>Webhooks</strong></li>\n      <li>Select <strong>Settings</strong> (top right) and copy the <strong>Private token</strong></li>\n      <li>Login to <strong>AskNicely</strong> and click <strong>Settings</strong> (cog top right)</li>\n      <li>Under the <strong>Groove</strong> tab, paste the Groove Private Token and click <strong>Save</strong></li>\n      <li>Copy the <strong>\u201cticket_closed\u201d webhook URL</strong></li>\n      <li>In Groove, under Settings \u2192 API, <strong>add a webhook</strong> for \u201cticket_closed\u201d and paste the URL from AskNicely</li>\n    </ol>\n    <p>Now, whenever a ticket is closed in Groove, the customer, agent and ticket details will be sent to AskNicely to automatically trigger a survey.</p>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/campaign_monitor_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("prefers_campaign_monitor_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Campaign Monitor App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Campaign Monitor</h1>\n      <h2>Manage your Campaign Monitor subscriptions right from Groove.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' href='/groove_client/settings/campaign-monitor'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/campaign_monitor/integration.jpg'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Groove\u2019s Campaign Monitor integration lets you connect your help desk with your email marketing software. You\u2019ll be able to:\n    </p>\n    <p>\n      <ul>\n        <li>See customer mailing list subscriptions next to every ticket</li>\n        <li>Subscribe or unsubscribe a customer from a Campaign Monitor list without leaving Groove</li>\n      </ul>\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/constant_contact_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("prefers_constant_contact_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Constant Contact App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Constant Contact</h1>\n      <h2>Manage your Constant Contact subscriptions right from Groove.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' href='/groove_client/settings/constant-contact'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='../assets/apps/carousels/constant_contact/integration.jpg'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Groove\u2019s Constant Contact integration lets you connect your help desk with your email marketing software. You\u2019ll be able to:\n    </p>\n    <p>\n      <ul>\n        <li>See customer contact list subscriptions next to every ticket</li>\n        <li>Subscribe or unsubscribe a customer from a Constant Contact list without leaving Groove</li>\n      </ul>\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/custom_profile_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("prefers_custom_profile_app_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Custom Profile</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Custom Profile</h1>\n      <h2>Add your internal data and links next to every ticket.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='customer-customer-profile' href='/custom_profile_app/new'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='customer-customer-profile'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='customer-customer-profile'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='../assets/apps/carousels/custom-profile/custom-profile.jpg'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How It Works</h3>\n    <p>With just a bit of code, Custom Profiles let you see customer data from your CRM, billing software, internal CMS or any other third-party app, right inside Groove. That means that you can set up Groove to display a customer\u2019s:</p>\n    <ul>\n      <li>Most recent invoices</li>\n      <li>Account type or status</li>\n      <li>App usage activity</li>\n      <li>&hellip;or just about anything else.</li>\n    </ul>\n    <p>If you\u2019re tracking it internally, you can set it up to appear in Groove right next to each customer\u2019s tickets.</p>\n    <h3>Setting Up Custom Profiles</h3>\n    <p>\n      All you\u2019ll need to do is setup a webhook that returns your fields as JSON. Check out our\n      <a href='https://help.groovehq.com/knowledge_base/topics/how-to-setup-the-custom-profile-app' target='_blank'>step-by-step guide</a>\n      to get started.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/customer_ratings_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("prefers_customer_ratings_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Customer Satisfaction Ratings</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Customer Satisfaction Ratings</h1>\n      <h2>Let your customers rate your replies and give you feedback.</h2>\n    </div>\n    <div class='actions'>\n      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='customer-ratings' href='/ratings/settings'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='customer-ratings'>\n      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='customer-ratings'>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/customer-ratings/example-1.png'>\n      <img src='/assets/apps/carousels/customer-ratings/example-2.png'>\n      <img src='/assets/apps/carousels/customer-ratings/example-3.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Show your customers how much you care and motivate your agents to be awesome with Groove's Customer Satisfaction Ratings app. Once you've installed the app your customers will be able to rate your replies and give you feedback after a ticket has been closed.\n    </p>\n    <p>\n      To start receiving ratings, just click\n      <i>Install,</i>\n      and that's it. You're done.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/delighted_app_details"]=function(e){return function(){var e;return e=[],e.push("<div class='app-details'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Delighted</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Delighted</h1>\n      <h2>Gather actionable feedback from your customers.</h2>\n    </div>\n    <div class='actions'>\n      <a class='button install' href='https://delighted.com/' target='_blank'>Go To Delighted</a>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='../assets/apps/carousels/delighted/dashboard.png'>\n      <img src='../assets/apps/carousels/delighted/groove-integration.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>Delighted uses the Net Promoter System&reg; to gather real feedback from your customers in minutes.</p>\n    <ul>\n      <li>Customers take a single question survey.</li>\n      <li>They rate your product/service and provide feedback in their own words.</li>\n      <li>Feedback appears instantly in your dashboard.</li>\n    </ul>\n    <h3>Setting Up the Delighted Integration</h3>\n    <p>The process for setting up the <a href=\"https://help.groovehq.com/knowledge_base/topics/setting-up-the-delighted-integration\" target=\"_blank\">Delighted integration for Groove</a> is simple:</p>\n    <ol>\n      <li>Log into both your Groove and Delighted accounts</li>\n      <li>Go into your Delighted Settings &rarr; Integrations and locate Groove</li>\n      <li>Connect your Groove account to Delighted</li>\n      <li>Select which of your survey responses you want to create tickets in Groove</li>\n    </ol>\n    <p>Now tickets will automatically be created with the details of the survey included as a private note.</p>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/facebook_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("has_facebook_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Facebook</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Facebook</h1>\n      <h2>Turn Facebook posts into tickets and respond to customers from your Groove dashboard.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='facebook' href='/facebook_account'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='facebook'>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/facebook/example-1.png'>\n      <img src='/assets/apps/carousels/facebook/example-2.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Over 20% of customer support requests are served via social media. What customers are saying about your brand is becoming more and more public \u2013 and it simply can\u2019t be ignored.\n    </p>\n    <p>\n      With Groove\u2019s Facebook integration, nothing falls through the cracks. Catch every Facebook mention and easily turn these interactions into support tickets. You can reply right from your dashboard, too.\n    </p>\n    <p>\n      To start using the Facebook app, just click\n      <i>Install App.</i>\n      Once you've installed the app, just follow the Oauth steps and you'll be good to go.\n    </p>\n    <p>\n      Now when someone posts on your company Facebook wall, you'll receive an email to follow up with that person. In Groove, you can reply, add notes, and assign these posts.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/google_apps_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("google_apps_domain")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Google Apps</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Google Apps</h1>\n      <h2>Access your Groove account with just one click from Google Apps.</h2>\n    </div>\n    <div class='actions'>"),this.account.get("google_apps_domain")||n.push("      <a class='button install' id='install-button' href='https://www.google.com/enterprise/marketplace/viewListing?productListingId=24486+9317984069784968761' target='_blank'>Install App</a>"),n.push("    </div>\n  </div>\n  <div class='google-apps inline-image-list'>\n    <img src='/assets/apps/carousels/google-apps/example-1.png'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Your agents already have plenty of usernames, emails, passwords...  The list is endless.  We can ease some of that pain when you integrate Groove with Google Apps.\n    </p>\n    <p>\n      With Google Apps single sign-on (SSO), your agents can easily login to Groove directly from Google Apps.  Agent doesn't have a Groove account yet?  No problem.  We'll create one for them based on their Google Apps information when they login.  It couldn't be easier.\n    </p>\n    <p>\n      Just click\n      <i>Install,</i>\n      and you\u2019ll be taken to the Google Marketplace, where you can install the Groove app on your Google Apps Domain.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/hip_chat_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.app.isNew()?"not-installed":"installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>HipChat</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>HipChat</h1>\n      <h2>Real-time Team Chat</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall'>"),n.push("      <a class='button install' id='install-button' href='' target='_blank'>Install App</a>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/hipchat/example-1.png'>\n      <img src='/assets/apps/carousels/hipchat/example-2.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>HipChat is a real-time group chat and instant messaging. You can have group conversations, one-on-one chats, even talk with people via video and voice if you want. It's avaiable via a web app, desktop client or mobile app. All in all, it's a really fantastic way for small businesses to communicate.</p>\n    <p>By installing the HipChat App, you can post any number of events from Groove (New tickets, customer replies, assignments, etc.) instantly to the chat room of your choice. This enables you to quickly see new messages and have one-click access to the conversation in Groove.</p>\n    <!-- %p -->\n    <!--   Just click -->\n    <!--   %i Install, -->\n    <!--   and you\u2019ll be taken to the Google Marketplace, where you can install the Groove app on your Google Apps Domain. -->\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/knowledge_base_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("prefers_knowledge_base_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Knowledge Base</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Knowledge Base</h1>\n      <h2>Software to help your customers find answers, anytime.</h2>\n    </div>\n    <div class='actions'>\n      <input class='button visit' id='visit-button' value='Visit your KB' type='submit' name='visit' data-app-type='knowledge-base'>"),this.agent.isAdmin()&&n.push("      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='knowledge-base'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='knowledge-base'>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/knowledge-base/example-1.png'>\n      <img src='/assets/apps/carousels/knowledge-base/example-2.png'>\n      <img src='/assets/apps/carousels/knowledge-base/example-3.png'>\n      <img src='/assets/apps/carousels/knowledge-base/example-4.png'>\n      <img src='/assets/apps/carousels/knowledge-base/example-5.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      58% of customers prefer to help themselves, so let them!\n    </p>\n    <p>\n      Offer your customers a quick easy way to find the answer they want with knowledge base articles. More answers at your customers fingertips means less support requests in your inbox.\n    </p>\n    <p>\n      Groove\u2019s Knowledge Base allows you to offer instant answers to frequently asked questions for your customers. And as you resolve support tickets, you\u2019ll be able to easily turn them into knowledge base articles.\n    </p>\n    <p>\n      To start using the Knowledge Base app, just click\n      <i>Install</i>\n      , and you\u2019re done. You'll have full access the Knowledge Base app from your account dropdown.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/mail_chimp_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("prefers_mail_chimp_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>MailChimp App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>MailChimp</h1>\n      <h2>Manage your MailChimp subscriptions right from Groove.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' href='/groove_client/settings/mail-chimp'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/mail_chimp/integration.jpg'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Groove\u2019s MailChimp integration lets you connect your help desk with your email marketing software. You\u2019ll be able to:\n    </p>\n    <p>\n      <ul>\n        <li>See customer mailing list subscriptions next to every ticket</li>\n        <li>View a customer\u2019s profile for any mailing list</li>\n        <li>Subscribe or unsubscribe a customer from a Mailchimp list without leaving Groove</li>\n      </ul>\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/olark_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("prefers_olark_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Olark App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Olark</h1>\n      <h2 style='max-width: 560px'>\n        We\u2019ve partnered with Olark to deliver the best live support tool for your website, embedded right inside your Groove widget.\n      </h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <a class='button settings' href='/groove_client/settings/olark'>Settings</a>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='customer-customer-profile'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='customer-customer-profile'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/olark/example-1.png'>\n  </div>\n  <div class='detailed-description'>\n    <p>\n      Our new partnership with Olark lets you add live chat to Groove, right inside your Groove support widget.\n    </p>\n    <p>\n      Live chat customer service helps you reduce support emails, increase customer happiness and retention, and make help even easier for your customers to get.\n    </p>\n    <p>\n      To start using the Olark integration, just follow the instructions <a href=\"https://help.groovehq.com/knowledge_base/topics/integrating-olark-live-chat-with-groove\">here</a>.\n    </p>\n    <p>\n      For helpful tips on how to deliver amazing support via live chat, <a href=\"https://www.groovehq.com/support/live-chat-support-tips\">click here</a>.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/slack_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e("Slack::App"===this.account.get("prefers_team_chat_app")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Slack App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Slack</h1>\n      <h2>Receive notifications and collaborate in realtime.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' href='/groove_client/settings/slack'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/slack/example-1.png'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Your team already stopped using email to talk to each other. Why not use Slack for customer support too? Create a #groove channel and receive notifications after every email, note, and more.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/snap_engage_app_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["app-details",""+t(e(this.account.get("prefers_snap_engage_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>SnapEngage App</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>SnapEngage</h1>\n      <h2>Import chat transcripts and offline messages directly into Groove.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='customer-customer-profile' href='/custom_profile_app/new'>\n      <input class='button uninstall' id='uninstall-button' value='Uninstall' type='submit' name='uninstall' data-app-type='customer-customer-profile'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='customer-customer-profile'>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/snap_engage/example-1.png'>\n  </div>\n  <div class='detailed-description'>\n    <p>\n      SnapEngage is a sophisticated Live Chat service that offers complete customization for multiple chat widgets, proactive invitations, and an\n      <a href='http://snapengage.com/live-chat-features/' target='_blank'>impressive feature set</a>\n      providing everything you need to deliver amazing live chat support to your customers. You know that sigh of relief when you get through to an actual person? We love that feeling. That\u2019s why we integrated SnapEngage with Groove so you can provide that same experience to your customers.\n    </p>\n    <p>\n      Use a webhook from Groove to pull in chat transcripts form completed chat sessions, or answer offline messages sent through the SnapEngage chat widget alongside the rest of your Groove tickets. You can use chat as a channel for rules and folders to organize your chat transcripts or automate follow-up emails to completed chats. Our Chat integration with SnapEngage allows you to utilize their premier chat services while keeping all of your customer support communication elegantly housed under one roof.\n    </p>\n  </div>\n</div>"),
n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/support_widget_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("prefers_support_widget_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Support Widget</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Support Widget</h1>"),this.account.get("prefers_new_widget")?n.push("      <h2>Offer great customer support from any page of your site.</h2>"):n.push("      <h2>Support users and get feedback on your site.</h2>"),n.push("    </div>\n    <div class='actions'>"),console.log(this.account),this.account.get("prefers_new_widget")?n.push("      <a class='button downgrade settings' id='downgrade-button' href='/widgets/downgrade'>Downgrade</a>"):n.push("      <a class='button settings upgrade' id='upgrade-button' href='/widgets/upgrade'>Upgrade</a>\n      <input class='button widget-code' id='widget-code-button' value='Widget Code' type='submit' name='settings' data-app-type='support-widget' href='/widgets/install'>"),this.agent.isAdmin()&&(this.account.get("prefers_new_widget")?n.push("      <a class='button settings' href='/groove_client/settings/widget'>Settings</a>"):n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='support-widget' href='"+t(e(GrooveClient.data.currentWidgetPath))+"'>")),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='support-widget'>\n    </div>\n  </div>\n  <div id='samples-carousel'>"),this.account.get("prefers_new_widget")?n.push("    <div class='image_list'>\n      <img src='/assets/apps/carousels/support-widget/new/example-1.png'>\n      <img src='/assets/apps/carousels/support-widget/new/example-2.png'>\n      <img src='/assets/apps/carousels/support-widget/new/example-3.png'>\n      <img src='/assets/apps/carousels/support-widget/new/example-4.png'>\n    </div>"):n.push("    <div class='image_list'>\n      <img src='/assets/apps/carousels/support-widget/example-1.png'>\n      <img src='/assets/apps/carousels/support-widget/example-2.png'>\n      <img src='/assets/apps/carousels/support-widget/example-3.png'>\n    </div>"),n.push("    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Offer your customers a quick and easy way to contact your support team or provide feedback without ever having to leave your site or sign into another system.\n    </p>\n    <p>\n      To start using the Support Widget, just click\n      <i>Install App.</i>\n      Once you've installed the app, just copy and paste the code onto your website, directly above the\n      <span class='head'>&lt;/head&gt;</span>\n      tag in the HTML.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/talkdesk_app_details"]=function(e){return function(){var e;return e=[],e.push("<div class='app-details'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Talkdesk</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Talkdesk</h1>\n      <h2>Create, update and close tickets and notes in Groove from Talkdesk,<br>the world's leading browser-based call center software.</h2>\n    </div>\n    <div class='actions'>\n      <a class='button install' href='http://support.talkdesk.com/hc/en-us/articles/204218479-Groove-Integration-Activation' target='_blank'>Go To Talkdesk</a>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='../assets/apps/carousels/talkdesk/talkdesk-mac.png'>\n      <img src='../assets/apps/carousels/talkdesk/talkdesk-groove.png'>\n      <img src='../assets/apps/carousels/talkdesk/talkdesk-automatedtasks.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>Talkdesk is the world's leading browser-based call center software. With one click, it integrates with Groove, Salesforce, Shopify, LiveChat and others to provide comprehensive information about the caller.</p>\n    <p>With this integration you can create, update and close tickets and notes in Groove from Talkdesk. Send custom fields from Groove contact profiles to Talkdesk. Automatically populate voicemails in Groove and synchronize ticket and contact information between both systems.</p>\n    <ul>\n      <li>One-click setup process</li>\n      <li>Automatic contact synchronization between both systems</li>\n      <li>Create notes and tickets in Groove from Talkdesk</li>\n      <li>Create and reply to messages, while on the phone, directly from the Talkdesk interface</li>\n      <li>Two-way continuous synchronization of data</li>\n      <li>Click-to-call from any phone number in Groove</li>\n    </ul>\n    <br>\n    <h3>Setting up Talkdesk integration</h3>\n    <p>The process for setting up the <a href=\"http://support.talkdesk.com/hc/en-us/articles/204218479-Groove-Integration-Activation\" target=\"_blank\">Talkdesk integration for Groove</a> is simple:</p>\n    <ol>\n      <li>Click <strong>\u201cSettings\u201d</strong> at the top right of the page</li>\n      <li>Click <strong>\u201cAPI\u201d</strong> in the \u201cCompany\u201d section</li>\n      <li>Copy <strong>\u201cPrivate Token\u201d</strong></li>\n      <li>Log in to your Talkdesk account as an Administrator</li>\n      <li>Click on the <strong>\u201cAdmin\u201d</strong> tab at the top of the page</li>\n      <li>Select <strong>\u201cIntegrations\u201d</strong> tab</li>\n      <li>Click on the Groove <strong>\u201cConnect\u201d</strong> button</li>\n      <li>Paste your private Groove token into <strong>\u201cWebhook Key\u201d</strong> field</li>\n      <li>Select the appropriate boxes to customize the configuration in order to synchronize contacts, notes and orders</li>\n      <li>Click <strong>\u201cSave\u201d</strong> and that's it!</li>\n    </ol>\n    <p>Once you complete these steps the Talkdesk and Groove Integration is activated and information will now automatically synchronize between both systems.</p>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/twitter_app_details"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.account.get("has_twitter_installed")?"installed":"not-installed",n.push("<div class='"+["app-details",""+t(e(i))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Twitter</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Twitter</h1>\n      <h2>Turn Tweets into tickets and respond to customers from your Groove dashboard.</h2>\n    </div>\n    <div class='actions'>"),this.agent.isAdmin()&&n.push("      <input class='button settings' id='settings-button' value='Settings' type='submit' name='settings' data-app-type='twitter' href='/twitter_accounts'>"),n.push("      <input class='button install' id='install-button' value='Install' type='submit' name='install' data-app-type='twitter'>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='/assets/apps/carousels/twitter/example-1.png'>\n      <img src='/assets/apps/carousels/twitter/example-2.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      Over 20% of customer support requests are served via social media. What customers are saying about your brand is becoming more and more public \u2013 and it simply can\u2019t be ignored.\n    </p>\n    <p>\n      With Groove\u2019s Twitter integration, nothing falls through the cracks. Catch every Twitter mention and easily turn these interactions into support tickets. You can reply right from your dashboard, too.\n    </p>\n    <p>\n      To start using the Twitter app, just click\n      <i>Install App.</i>\n      Once you've installed the app, just follow the Oauth steps and you'll be good to go.\n    </p>\n    <p>\n      Now when someone @mention's your company, you'll receive an email to follow up with that person. In Groove, you can reply, add notes, and assign Tweets.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/vextras_app_details"]=function(e){return function(){var e;return e=[],e.push("<div class='app-details'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Vextras</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Vextras</h1>\n      <h2>View order details alongside your Groove support tickets for Bigcommerce,<br>3dcart &amp; Volusion powered shopping carts.</h2>\n    </div>\n    <div class='actions'>\n      <a class='button install' href='https://www.vextras.com/setup-groove' target='_blank'>Go To Vextras</a>\n    </div>\n  </div>\n  <div id='samples-carousel'>\n    <div class='image_list'>\n      <img src='../assets/apps/carousels/vextras/vextras-groove.jpg'>\n      <img src='../assets/apps/carousels/vextras/vextras-overview.png'>\n      <img src='../assets/apps/carousels/vextras/vextras-html-snippet.png'>\n      <img src='../assets/apps/carousels/vextras/vextras-webhook-url.png'>\n      <img src='../assets/apps/carousels/vextras/vextras-log.png'>\n    </div>\n    <div class='clear-carousel'></div>\n    <a class='prev' id='prev-button'>\n      <span>Prev</span>\n    </a>\n    <a class='next' id='next-button'>\n      <span>Next</span>\n    </a>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>The Vextras integration lets you connect your Bigcommerce, 3dcart or Volusion powered shopping cart with Groove. You\u2019ll be able to:</p>\n    <ul>\n      <li>View recent order details in the Groove sidebar</li>\n      <li>Quickly access past orders and customer details</li>\n      <li>Keep your team in sync with any customer conversations</li>\n    </ul>\n    <br>\n    <h3>Setting up Vextras integration</h3>\n    <p>The process for setting up the <a href=\"https://www.vextras.com/e-commerce-tools/groove\" target=\"_blank\">Vextras integration for Groove</a> is simple:</p>\n    <ol>\n      <li>Login to your\n        <a href='https://account.vextras.com/'>Vextras dashboard</a>\n      </li>\n      <li>Confirm your store is active &amp; configured correctly</li>\n      <li>Go to the <strong>\u201cApps\u201d</strong> tab</li>\n      <li>Click <strong>\u201cAdd New App\u201d</strong></li>\n      <li>Select <strong>\u201cGroove\u201d</strong></li>\n      <li>Link your store with the Groove app</li>\n      <li>Copy both the <strong>\u201cHTML\u201d</strong> &amp; <strong>\u201cWebhook URL\u201d</strong> data to a clipboard</li>\n      <li>Login to your\n        <a href='https://www.groovehq.com/users/sign_in'>Groove dashboard</a>\n      </li>\n      <li>Choose the <strong>\u201cApps\u201d</strong> tab in the top left corner of Groove</li>\n      <li>Select the <strong>\u201cCustom Profile\u201d</strong> app</li>\n      <li>Next, click the <strong>\u201cSettings\u201d</strong> button in the Custom Profile app</li>\n      <li>Paste in the HTML &amp; web hook URL copied in step 7 in their respective fields</li>\n      <li>Save changes &amp; you\u2019re done!</li>\n    </ol>\n    <p>Once the HTML snippet &amp; web hook URL are loaded, you won\u2019t have to do anything else. When a new ticket comes into Groove, the integration will populate data in your sidebar with previous customer &amp; order history.</p>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/webhooks_app_details"]=function(e){return function(){var e;return e=[],e.push("<div class='app-details installed'>\n  <div class='breadcrumbs'>\n    <span class='root'>\n      <a href='/groove_client/apps'>Apps</a>\n    </span>\n    <span class='separator'>\n      >\n    </span>\n    <span class='current'>Webhooks</span>\n  </div>\n  <div class='details-header'>\n    <div class='description'>\n      <h1>Webhooks</h1>\n      <h2>Add Groove functionality to any app.</h2>\n    </div>\n    <div class='actions'>\n      <a class='button settings' href='/groove_client/settings/api'>Settings</a>\n    </div>\n  </div>\n  <div class='inline-image-list'>\n    <img src='/assets/apps/carousels/webhooks/logo.png'>\n  </div>\n  <div class='detailed-description'>\n    <h3>How it works</h3>\n    <p>\n      <small>\n        <i>(Pssst&hellip; non-developers: you can still integrate Groove with your favorite apps using <a href=\"https://zapier.com/help/groove/#how-get-started-groove-zapier\" target=\"_blank\">our Zapier integration</a>.)</i>\n      </small>\n    </p>\n    <p>If you\u2019d prefer to do your own coding or use your own servers, our webhooks make it easy to post data to your server whenever a Groove event has happened.</p>\n    <p>That means that you could&hellip;</p>\n    <ul>\n      <li>Trigger alerts in your own app whenever a Groove ticket is created or acted on</li>\n      <li>Have new customers created in Groove get added directly to your CRM or other database</li>\n      <li>Create to-do\u2019s from your tickets inside your task management software</li>\n      <li>&hellip;and much more.</li>\n    </ul>\n    <p>For more info, <a href='https://www.groovehq.com/docs/webhooks' target='_blank'>check out the Webhooks Docs</a>.</p>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/groove_apps/zapier_app_details"]=function(e){return function(){var e;return e=[],e.push('<div class=\'app-details\'>\n  <div class=\'breadcrumbs\'>\n    <span class=\'root\'>\n      <a href=\'/groove_client/apps\'>Apps</a>\n    </span>\n    <span class=\'separator\'>\n      >\n    </span>\n    <span class=\'current\'>Zapier</span>\n  </div>\n  <div class=\'details-header\'>\n    <div class=\'description\'>\n      <h1>Zapier</h1>\n      <h2>Integrate Groove with more than 350 popular apps.</h2>\n    </div>\n  </div>\n  <div class=\'inline-image-list\'>\n    <img src=\'/assets/apps/carousels/zapier/trello-groove-zap.jpg\'>\n  </div>\n  <div class=\'detailed-description\'>\n    <h3>How it works</h3>\n    <p>Zapier enables anyone (marketing, support, legal, HR, ops, product, etc&hellip;) to connect together the web apps they use to run their business, without writing code.</p>\n    <p>With the Groove/Zapier integration, you can integrate Groove with hundreds of different apps, and the possibilities are endless:</p>\n    <ul>\n      <li>SMS alerts or push notifications for new Groove tickets</li>\n      <li>Create JIRA issues or Trello cards from Groove tickets</li>\n      <li>Create Salesforce cases from Groove tickets</li>\n      <li>Create Groove tickets via Gravity Forms</li>\n      <li>Create Basecamp to-dos from Groove tickets</li>\n      <li>Create Github issues from Groove tickets</li>\n      <li>and many, many more&hellip;</li>\n    </ul>\n    <p>The process for setting up Zapier is simple. All you need to do is log in to your Groove account from Zapier, and you can create any Zaps you\u2019d like.</p>\n    <p>For detailed instructions, check out our <a href="https://help.groovehq.com/knowledge_base/topics/setting-up-the-zapier-integration" target="_blank">Knowledge Base article</a> on setting up the Zapier integration.</p>\n    <p>You can also install any of the Zaps below with just a few clicks:</p>\n    <script type="text/javascript">function zapierOpenDialog(e) {e.preventDefault();var button = e.target;window.open(button.getAttribute(\'href\'), \'zapierModalWindow\', \'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=980,height=700\');return false;};</script><div id="zap-widget-EQJj2uEW" class="zap-widget zap-container" style="overflow: hidden; background: #f1f4f5; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; border: 1px solid #ddd; padding: 1em"><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Jira" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/da5002b1159f30c91f91763349ff5425.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new JIRA issues from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="809" href="https://zapier.com/app/min/809/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate GitHub" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/5a67ba06cd2c1c87baadac29145f18a2.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new GitHub issues from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="814" href="https://zapier.com/app/min/814/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Pivotal Tracker" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/84172dde558de382873cf72a00c92818.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Pivotal Tracker stories from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="836" href="https://zapier.com/app/min/836/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Highrise" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/31d237b9fddf9513424a766ce5cbdce1.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create Highrise contact from new Groove ticket</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="839" href="https://zapier.com/app/min/839/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Highrise" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/31d237b9fddf9513424a766ce5cbdce1.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Save new Groove tickets as Highrise contact notes</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="808" href="https://zapier.com/app/min/808/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Salesforce" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/bb3c23b830c02a995f4e263a6ba5c470.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Salesforce cases from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="837" href="https://zapier.com/app/min/837/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Basecamp 2" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/be7e9ab77293a5f77811b74aef431779.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Basecamp to-dos from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="813" href="https://zapier.com/app/min/813/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Trello" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/4f24d34956c5686aadb79bd84755fbc0.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Trello cards from new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="810" href="https://zapier.com/app/min/810/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Wufoo" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/7df95849379828699d44e060fc412661.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Groove tickets from new Wufoo form entries</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="811" href="https://zapier.com/app/min/811/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Gravity Forms" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/4cb202fcc0ed1018d3f1a80b1d46ebcf.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Groove tickets from new Gravity Forms submissions</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="840" href="https://zapier.com/app/min/840/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Unbounce" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/68b0aa200cd47f4ce2ff4afd4e658a4b.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Create new Groove tickets from new Unbounce landing page form submissions</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="838" href="https://zapier.com/app/min/838/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><div class="zap" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #fff; border-radius: 3px; border: 1px solid #ddd; margin-bottom: 1em; padding: 1em\'><div class="zap-inner-container" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table; overflow: auto; table-layout: fixed; width: 100%\'><div class="zap-services" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; vertical-align: middle; width: 105px\'><div class="zap-service" title="Automate Groove" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/2aae5f6448b6cbf6d25aeaac063917f0.32x32.png);\'></div></div><div class="zap-chevron" style=\'background-color: transparent; padding: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAMAAADu4HshAAAAM1BMVEUAAABNZmZeaW9da3FeanFea3Jea3FeanFea3Jfa3FfbHFea3JebHJea3Fea3Jfa3FfbHIjfQjfAAAAEHRSTlMACi5YaneIkLi/wsPT5O76IE833wAAAFRJREFUeNptyLcRgDAQADCTk4Hff1pKnd+oVBnrs5TsjIg15x22TSuttNL2aaWVVlppZbfSSiuZJZdk+8ljkOGkk0466aSTTjrpmnTSSUd1TG/s+T63/haiXDk3jgAAAABJRU5ErkJggg=="); background-repeat: no-repeat; background-size: 100%; color: #5f6c72; display: inline-block; height: 8px; margin: 0 0.7em; vertical-align: middle; width: 5px\'></div><div class="zap-service" title="Automate SMS by Zapier" style=\'padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; border: 1px solid #eee; background-color: #f6f6f6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; display: inline-block; vertical-align: middle\'><div class="zap-service-image" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background-repeat: no-repeat; height: 36px; width: 36px; background-position: center; background-size: 26px 26px; background-image: url(https://zapier.cachefly.net/storage/services/b523efd94dc14a7c82d2033a8c16c6dd.32x32.png);\'></div></div></div><div class="zap-description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #5F6c72; display: table-cell; font-size: 0.95em; font-weight: 600; padding: 0 1em; vertical-align: middle\'>Get an SMS for new Groove tickets</div><div class="zap-cta" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: table-cell; text-align: right; vertical-align: middle; width: 105px\'><a class="zap-button" onclick="zapierOpenDialog(event)" data-use-min="815" href="https://zapier.com/app/min/815/start?utm_source=widget&amp;utm_medium=embed&amp;utm_campaign=Widget" style=\'background-color: transparent; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: #ff5c1a; border-radius: 3px; border: none; color: #fff; cursor: pointer; display: inline-block; font-size: 0.9em; font-weight: 600; margin: 0; overflow: hidden; padding: 0.78em 0.9em 0.75em 0.9em; text-decoration: none; white-space: nowrap; vertical-align: middle; -webkit-transition: all 0.1s ease; transition: all 0.1s ease\'>Use this Zap</a></div></div></div><!-- zaps are good! --><div class="zap-power-bar" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin-top: -5px; overflow: visible; text-align: right\'><span class="zap-power-bar__description" style=\'background-color: transparent; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #969ea2; display: inline-block; font-size: 11px; overflow: visible; padding: 6px 6px 0 0; vertical-align: middle\'> See more <a class="zap-power-bar__link" href="https://zapier.com/zapbook/groove/" style=\'background-color: transparent; padding: 0; margin: 0; font: normal normal 400 14px/1.5em "Open Sans", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; vertical-align: baseline; list-style: none; border: 0; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; color: #499df3; font-size: 11px; text-decoration: none\'>Groove integrations</a> powered by </span><a class="zap-power-bar__link" href="https://zapier.com/" class="zap-zapier-logo" title="Zapier lets you move data between hundreds of web apps." style="background-color: transparent; padding: 0; margin: 0; text-decoration: none; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-transform: none; list-style: none; -webkit-outline: 0; -moz-outline: 0; -ms-outline: 0; -o-outline: 0; outline: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; background: url(https://zapier.cachefly.net/static/CKnuuh/images/widget-logo.png) no-repeat; border: 0; font: 0/0 a; color: transparent; display: inline-block; height: 30px; vertical-align: middle; width: 65px">Zapier</a></div></div>\n  </div>\n</div>'),
e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/hip_chat/mailbox_checkboxes"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],r=0,p=this.mailboxes.models,o=0,s=p.length;s>o;o++)c=p[o],r++,a=this.mailbox_links.findWhere({mailbox_id:c.id}),l=null!=a?a.id:void 0,i=a?"checked":!1,n.push("<div>\n  <input class='hip-chat-setting' id='mailbox-"+r+"' type='checkbox' name='mailbox_links["+t(e(c.id))+"].mailbox_id' value='"+t(e(c.id))+"' checked='"+t(e(i))+"' data-value-id='"+t(e(l))+"'>\n  <label for='mailbox-"+t(e(r))+"'>"+t(e(c.get("name")))+"</label>"),l&&n.push("  <input type='hidden' name='mailbox_links["+t(e(c.id))+"].id' value='"+t(e(l))+"'>\n  <input class='destroy' type='hidden' name='mailbox_links["+t(e(c.id))+"]._destroy' value='"+t(e(0))+"'>"),n.push("</div>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/hip_chat/notification_checkboxes"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=0,a=this.notificationTypes;for(l in a)c=a[l],o++,r=this.notifications.findWhere({type:l}),s=null!=r?r.id:void 0,i=r?"checked":!1,n.push("<div>\n  <input class='hip-chat-setting' id='notification-"+o+"' type='checkbox' name='notifications["+t(e(l))+"].type' value='"+t(e(l))+"' data-value-id='"+t(e(s))+"' checked='"+t(e(i))+"'>\n  <input type='hidden' name='notifications["+t(e(l))+"].id' value='"+t(e(null!=r?r.id:void 0))+"'>\n  <input class='destroy' type='hidden' name='notifications["+t(e(l))+"]._destroy' value='"+t(e(0))+"'>\n  <label for='notification-"+t(e(o))+"'>"+t(e(c))+"</label>\n</div>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='apps' id='app-store'>\n  <h1>Get even more out of Groove.</h1>\n  <h2>Extend your help desk with add-ons and third-party integrations.</h2>\n  <hr>\n  <div id='apps'>\n    <div class='apps-group' id='groove-apps'>\n      <h2>Groove Apps</h2>\n      <div class='"+["app","knowledge-base",""+t(e(this.account.get("prefers_knowledge_base_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/knowledge-base")))+"' title='Groove Knowledge Base'>\n          <img src='/assets/apps/sources/knowledge_base_icon.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/knowledge-base")))+"'>Knowledge Base</a>\n          </h3>\n          <p class='description'>Help your customers help themselves with a knowledge base.</p>\n        </div>\n      </div>\n      <div class='"+["app","support-widget",""+t(e(this.account.get("prefers_support_widget_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/support-widget")))+"' title='Groove Support Widget'>\n          <img src='/assets/apps/sources/support_widget_icon.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/support-widget")))+"'>Support Widget</a>\n          </h3>\n          <p class='description'>Support users and get feedback on your website and in your web app.</p>\n        </div>\n      </div>\n      <div class='"+["app","twitter",""+t(e(this.account.get("has_twitter_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/twitter")))+"' title='Groove Twitter'>\n          <img src='/assets/apps/sources/twitter_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/twitter")))+"'>Twitter</a>\n          </h3>\n          <p class='description'>Turn Tweets into tickets and respond to customers from your Groove dashboard.</p>\n        </div>\n      </div>\n      <div class='"+["app","facebook",""+t(e(this.account.get("has_facebook_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/facebook")))+"' title='Groove Facebook'>\n          <img src='/assets/apps/sources/facebook_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/facebook")))+"'>Facebook</a>\n          </h3>\n          <p class='description'>Turn Facebook posts on your timeline into tickets and respond to customers from your Groove dashboard.</p>\n        </div>\n      </div>\n      <div class='"+["app","customer-ratings",""+t(e(this.account.get("prefers_customer_ratings_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/customer-ratings")))+"' title='Groove Customer Ratings'>\n          <img src='/assets/apps/sources/customer_ratings_icon.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/customer-ratings")))+"'>Customer Satisfaction Ratings</a>\n          </h3>\n          <p class='description'>Let your customers rate your replies and give you feedback.</p>\n        </div>\n      </div>\n      <div class='"+["app","custom-profile",""+t(e(this.account.get("prefers_custom_profile_app_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/custom-profile")))+"' title='Groove Custom Profile'>\n          <img src='/assets/apps/sources/custom_profile_icon.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/custom-profile")))+"'>Custom Profile</a>\n          </h3>\n          <p class='description'>Add internal data or links to 3rd-party services like Stripe and access them directly from a ticket.</p>\n        </div>\n      </div>\n      <div class='"+["app","customer-ratings",""+t(e(this.account.get("prefers_webhooks_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/webhooks")))+"' title='Groove Webhooks'>\n          <img src='/assets/apps/sources/webhooks.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/webhooks")))+"'>Webhooks</a>\n          </h3>\n          <p class='description'>Comfortable with code? Add Groove functionality to any app with our easy-to-use webhooks.</p>\n        </div>\n      </div>\n    </div>\n    <div class='apps-group' id='third-party-integrations'>\n      <h2>3rd Party Integrations</h2>\n      <div class='"+["app","slack",""+t(e("Slack::App"===this.account.get("prefers_team_chat_app")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/slack")))+"' title='Slack'>\n          <img src='/assets/apps/sources/slack_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/slack")))+"'>Slack</a>\n          </h3>\n          <p class='description'>Collaborate on support tickets in realtime in Slack.</p>\n        </div>\n      </div>\n      <div class='"+["app","olark",""+t(e(this.account.get("prefers_olark_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/olark")))+"' title='Olark'>\n          <img src='/assets/apps/sources/olark_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/olark")))+"'>Olark</a>\n          </h3>\n          <p class='description'>Deliver real-time support from Groove using Olark live chat.</p>\n        </div>\n      </div>\n      <div class='"+["app","hip-chat",""+t(e(this.account.get("has_hipchat_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/hipchat")))+"' title='Groove Hip Chat'>\n          <img class='hipchat-logo' src='/assets/apps/sources/hipchat_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/hipchat")))+"'>HipChat</a>\n          </h3>\n          <p class='description'>Send Groove notifications directly to your HipChat room.</p>\n        </div>\n      </div>\n      <div class='"+["app","snap-engage",""+t(e(this.account.get("prefers_snap_engage_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/snap-engage")))+"' title='SnapEngage'>\n          <img src='/assets/apps/sources/snap_engage_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/snap-engage")))+"'>SnapEngage</a>\n          </h3>\n          <p class='description'>Keep a record of your SnapEngage Live Chat transcripts and get offline chat messages as tickets.</p>\n        </div>\n      </div>\n      <div class='app talkdesk'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/talkdesk")))+"' title='Talkdesk'>\n          <img src='/assets/apps/sources/talkdesk_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/talkdesk")))+"'>Talkdesk</a>\n          </h3>\n          <p class='description'>Create, update and close tickets and notes in Groove from Talkdesk, the world's leading browser-based call center software.</p>\n        </div>\n      </div>\n      <div class='app zapier'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/zapier")))+"' title='Zapier'>\n          <img src='/assets/apps/sources/zapier_logo.png' style='max-height:110px'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/zapier")))+"'>Zapier</a>\n          </h3>\n          <p class='description'>Integrate Groove with hundreds of apps that you already use without writing a single line of code.</p>\n        </div>\n      </div>\n      <div class='app vextras'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/vextras")))+"' title='Vextras'>\n          <img src='/assets/apps/sources/vextras_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/vextras")))+"'>Vextras</a>\n          </h3>\n          <p class='description'>View order details alongside your Groove support tickets for Bigcommerce, 3dcart &amp; Volusion powered shopping carts.</p>\n        </div>\n      </div>\n      <div class='app asknicely'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/delighted")))+"' title='Delighted'>\n          <img src='/assets/apps/sources/delighted_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/delighted")))+"'>Delighted</a>\n          </h3>\n          <p class='description'>Delighted uses the Net Promoter System&reg; to gather real feedback from your customers in minutes.</p>\n        </div>\n      </div>\n      <div class='app asknicely'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/asknicely")))+"' title='AskNicely'>\n          <img src='/assets/apps/sources/asknicely_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/asknicely")))+"'>AskNicely</a>\n          </h3>\n          <p class='description'>Send Net Promoter Score surveys when a ticket is closed.</p>\n        </div>\n      </div>\n      <div class='"+["app","mailchimp",""+t(e(this.account.get("prefers_mail_chimp_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/mail-chimp")))+"' title='MailChimp'>\n          <img src='/assets/apps/sources/mailchimp_logo.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/mail-chimp")))+"' title='MailChimp'>MailChimp</a>\n          </h3>\n          <p class='description'>See subscriber profiles alongside your tickets, and subscribe or unsubscribe any customer without leaving Groove.</p>\n        </div>\n      </div>\n      <div class='"+["app","campaign-monitor",""+t(e(this.account.get("prefers_campaign_monitor_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/campaign-monitor")))+"' title='Campaign Monitor'>\n          <img src='/assets/apps/sources/campaign_monitor.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/campaign-monitor")))+"' title='Campaign Monitor'>Campaign Monitor</a>\n          </h3>\n          <p class='description'>Subscribe or unsubscribe any customer without leaving Groove.</p>\n        </div>\n      </div>\n      <div class='"+["app","constantcontact",""+t(e(this.account.get("prefers_constant_contact_installed")?"installed":"not-installed"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n        <a class='logo-link' href='"+t(e(GrooveClient.path("apps/constant-contact")))+"' title='Constant Contact'>\n          <img src='/assets/apps/sources/constant-contact.png'>\n        </a>\n        <div class='details'>\n          <h3>\n            <a href='"+t(e(GrooveClient.path("apps/constant-contact")))+"' title='Constant Contact'>Constant Contact</a>\n          </h3>\n          <p class='description'>Subscribe or unsubscribe any customer without leaving Groove.</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["apps/non_admin_message"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='dark-header'>\n  <h1>"+t(e("Oops! You'll need "+this.owner_name+" to do that"))+"</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<div class='message'>\n  <p>\n    Please ask"),this.owner_email?n.push("    <a href='mailto:"+t(e(this.owner_email))+"'>"+t(e(this.owner_email))+"</a>"):n.push("    "+t(e(this.owner_name))),n.push("    to install"),n.push("    "+t(e(this.app_name))),n.push("    to your Groove account. Even better, see if they'll make you an admin and skip this step next time.\n  </p>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["attachments/form"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='comment_attachments_container'>\n  <form class='comment_upload_form' accept-charset='UTF-8' action='"+t(e(this.attachmentUrl))+"' enctype='multipart/form-data' method='post'>"),n.push("    "+e(this.csrfInput)),n.push("    <p class='attach-instructions'>\n      To attach files drag &amp; drop here or\n      <a class='attach-button' href='#'>select files from your computer...</a>\n    </p>\n    <input class='detached' multiple='' name='attachment[attachment]' type='file'>\n  </form>\n  <table class='comment_attachments'></table>\n  <div class='attachments'></div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/account_cancel"]=function(e){return function(){var e;return e=[],e.push("<h3 class='h3'>Cancel account:</h3>\n<p>\n  Need to cancel your account? We'd hate to see you go,\n  <a id='account-cancel'>but here you are.</a>\n</p>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/agents_block"]=function(e){return function(){var e,t,n,i,o,r,s,a,l;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='title'>\n  <h2>"),n.push("    "+t(e(this.title))),this.priceTag&&n.push("    <small>"+t(e("("+this.priceTag+")"))+"</small>"),n.push("  </h2>\n</div>\n<ul>"),l=this.agents.models,s=0,a=l.length;a>s;s++)i=l[s],r=new GrooveClient.Views.User({model:i}),o=i.isOwner()&&!this.ownerEditable?"":"editable",n.push("  <li class='"+t(e(o))+"' data-agent-id='"+t(e(i.id))+"'>\n    <div class='image'>"),n.push("      "+e(r.avatarImage({size:25}))),n.push("    </div>"),n.push("    "+t(e(i.get("name")))),n.push("    <div class='info'>"),n.push("      "+e(this.view.agentPricingTag(i))),n.push("    </div>\n  </li>");return n.push("</ul>\n<div class='subtotal'>\n  Sub-total monthly\n  <div class='amount'>"),n.push("    "+t(e(this.price(this.subtotal)))),n.push("  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/change_account_owner"]=function(e){return function(){var e,t,n,i,o,r;for(e=window.HAML.cleanValue,t=[],t.push("<h3 class='h3'>Account owner:</h3>\n<p>\n  The account owner is the only person who can access this account page,\n  upgrade, downgrade, change billing information, access invoices, and\n  cancel account.\n</p>\n<form>\n  <select>"),r=this.agents.models,i=0,o=r.length;o>i;i++)n=r[i],t.push("    "+e($("<option>",{value:n.id,selected:n.isOwner(),text:n.get("name")}).outerHTML()));return t.push("  </select>\n  <input class='blue-button' type='submit' value='Update'>\n</form>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/credit_card"]=function(e){return function(){var e;return e=[],e.push("<div class='box-c-card-edit'>\n  <h3 class='h3'>PAYMENT INFORMATION</h3>\n  <h4 class='h4'>CARD ON FILE:</h4>\n  <form class='credit_card formtastic vertical-form'>\n    <li class='input string stringish'>\n      <input id='card_number' type='text' data-name='number' placeholder='Card number'>\n    </li>\n    <fieldset class='inputs vertical'>\n      <ol>\n        <li class='input string stringish'>\n          <input id='card_code' type='text' data-name='cvc' placeholder='CVC'>\n        </li>\n        <li class='input select'>\n          <select id='card_month' data-name='exp_month'></select>\n        </li>\n        <li class='input select'>\n          <select id='card_year' data-name='exp_year'></select>\n        </li>\n      </ol>\n    </fieldset>\n    <div class='actions'>\n      <fieldset class='actions'>\n        <input class='done' name='commit' type='submit' value='Done'>\n      </fieldset>\n    </div>\n  </form>\n</div>\n<div class='box-c-accepted-cards'>\n  <h3 class='h3'>WE ACCEPT</h3>\n  <img src='../assets/creditcardlogos.gif'>\n  <p>\n    We accept Visa, Mastercard, American Express. We don't accept PayPal, checks, or POs, sorry.\n  </p>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/cycle"]=function(e){return function(){var e;return e=[],e.push("<div class='title'>\n  <h2>Billing Cycle</h2>\n</div>\n<div>\n  <form>\n    <label>\n      <input name='billing_cycle' type='radio' value='monthly'>/</input>\n      Monthly\n    </label>\n    <label>\n      <input name='billing_cycle' type='radio' value='annual'>/</input>\n      Annual\n    </label>\n    <span class='save'>\n      Save 10%\n    </span>\n    <span class='contract'>\n      (Still no contract)\n    </span>\n  </form>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/edit_billing_address"]=function(e){return function(){var e;return e=[],e.push("<h1 class='h1'>Edit Billing Address</h1>\n<form class='billing-address formtastic vertical-form'>\n  <fieldset class='inputs vertical'>\n    <ol>\n      <li class='name string'>\n        <label class='label' for='billing_address_company_name'>Company Name</label>\n        <input id='billing_address_company_name' name='billing_company_name' type='text'>\n      </li>\n      <li class='name string'>\n        <label class='label' for='billing_address_name'>Name</label>\n        <input id='billing_address_name' name='billing_name' type='text'>\n      </li>\n      <li class='name string'>\n        <label class='label' for='billing_address_line_1'>Address line 1</label>\n        <input id='billing_address_line_1' name='billing_address1' type='text'>\n      </li>\n      <li class='name string'>\n        <label class='label' for='billing_address_line_2'>Address line 2</label>\n        <input id='billing_address_line_2' name='billing_address2' type='text'>\n      </li>\n    </ol>\n    <div class='actions'>\n      <fieldset class='actions'>\n        <input class='done' name='commit' type='submit' value='Done'>\n      </fieldset>\n    </div>\n  </fieldset>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/edit_billing_address_link"]=function(e){return function(){var e;return e=[],e.push("<a href='#'>Edit Billing Address</a>"),e.join("\n")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/index"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,o=function(e){return function(t,n,i){return window.HAML.surround.call(e,t,n,i)}}(this),i=function(e){return function(t,n,i){return window.HAML.succeed.call(e,t,n,i)}}(this),n=[],this.account.isTrial()&&this.account.missingPaymentCredentials()&&(n.push("<div class='box-c-toolbar box-c-toolbar-trial'>\n  You have"),n.push("  "+t(e(this.account.get("trial_days_left")))),n.push("  days left in your trial.\n  Enter payment information on the right side to keep your plan.\n</div>")),n.push("<div class='box-c-toolbar'>\n  <h1 class='h1b'>\n    Account and Billing Info -"),n.push("    "+t(e(this.currentDate.format("MMMM YYYY")))),this.account.discount()&&n.push("    "+t(e(o("(",")",function(){var n;return n=[],n.push("    "+t(e(this.account.discount()))),n.join("\n")})))),n.push("  </h1>\n</div>\n<div class='box-c-billing-index'>\n  <div class='billing-block billing-total'>\n    <div class='title'>\n      <h2>\n        Total Amount"),this.account.get("fixed_price")?n.push("        <small>(fixed price)</small>"):(n.push("        <small class='discount'>"),this.account.discount()&&(n.push("          (with"),n.push("          "+t(e(this.account.discount()))),n.push("          discount)")),n.push("        </small>")),n.push("      </h2>"),this.account.isFree()||(n.push("      <div class='bill-date'>\n        You will be billed on"),n.push("        "+t(e(moment(this.account.get("next_payment_at")).format("MMM D, YYYY")))),n.push("      </div>")),n.push("    </div>\n    <div class='amount'>"),n.push("      "+t(e(this.price(this.account.get("outstanding_balance_total"))))),n.push("      <div class='last-bill'>"),this.account.get("paid_at")&&(n.push("        "+t(e(i(",",function(){var n;return n=[],n.push("        "+t(e(moment(this.account.get("paid_at")).format("MMM")))),n.join("\n")})))),n.push("        last bill: $172.00")),n.push("      </div>\n    </div>\n    <div class='save-changes'>\n      <input class='form-button sky-blue' type='submit' value='Save Changes'>\n      <p>\n        Changes to your subscription will be reflected on your next billing statement.\n      </p>\n    </div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/invoice"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <a class='nav-back-button' href='#'>\n    <span>Back</span>\n  </a>\n  <h1 class='h1b'>\n    Invoice"),n.push("    "+t(e(this.invoice.id))),n.push("  </h1>\n  <a class='billing-print-invoice' href='#'>Print Invoice</a>\n</div>\n<div class='box-c-billing-invoice'></div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/invoice_data"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='invoice-billed-to'>\n  <h2>Billed to</h2>"),s=this.addressFields,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <p>"+t(e(i))+"</p>");return n.push("  "+t(e("XXXX-XXXX-XXXX-"+this.invoice.get("last4")))),n.push("</div>\n<div class='invoice-data'>\n  <div class='invoice-date'>\n    <h2>Date</h2>"),n.push("    "+t(e(moment(this.invoice.get("created_at")).format("D MMM YYYY")))),n.push("  </div>"),this.invoice.get("title")&&(n.push("  <div class='invoice-title'>\n    <h2>Description</h2>"),n.push("    "+t(e(this.invoice.get("title")))),n.push("  </div>")),n.push("  <div class='invoice-amount'>\n    <h2>Amount</h2>\n    <table>\n      <tr>\n        <th></th>\n        <td>"+t(e(this.price(this.invoice.get("amount"))))+"</td>\n      </tr>\n      <tr>\n        <th>Subtotal</th>\n        <td>"+t(e(this.price(this.invoice.get("amount"))))+"</td>\n      </tr>\n      <tr>\n        <th>Paid</th>\n        <td>"+t(e(this.price(this.invoice.get("amount"))))+"</td>\n      </tr>\n    </table>\n  </div>\n</div>\n<div class='invoice-footer'>\n  <h2>Thank you for using Groove</h2>\n  <strong>Groove</strong>\n  2 Dearborn St.\n  <br>\n  Newport, RI 02840\n  <br>\n  USA\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/invoice_list_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<tr>\n  <td class='date'>\n    <a href='"+t(e(GrooveClient.path("settings/billing/invoices/"+this.invoice.id)))+"'>"),n.push("      "+t(e(moment(this.invoice.get("created_at")).format("YYYY-MM-DD")))),n.push("    </a>\n  </td>\n  <td class='card'>"),n.push("    "+t(e("XXXX-XXXX-XXXX-"+this.invoice.get("last4")))),n.push("  </td>\n  <td class='amount'>"),n.push("    "+t(e(this.price(this.invoice.get("amount"))))),n.push("  </td>\n</tr>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/invoices"]=function(e){return function(){var e;return e=[],e.push("<div class='box-c-toolbar'>\n  <h1 class='h1b'>\n    Billing History\n  </h1>\n</div>\n<div class='box-c-billing-invoices'>\n  <table id='invoices-list'>\n    <thead>\n      <tr>\n        <td class='date'>Date</td>\n        <td class='card'>Card Number</td>\n        <td class='amount'>Amount</td>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/manage_account"]=function(e){return function(){var e;return e=[],e.push("<h1 class='h1'>Manage Account</h1>\n<ul class='sections'></ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["billing/sidebar_menu"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul>\n  <li class='billing'>\n    <a class='summary' href='"+t(e(GrooveClient.path("billing")))+"'>\n      <span>Billing Summary</span>\n    </a>\n  </li>\n  <li>\n    <a class='manage-account'>\n      <span>Manage Account</span>\n    </a>\n  </li>"),this.archived&&n.push("  <li class='archived nav-i-agents'>\n    <a href='"+t(e(GrooveClient.path("billing/archived-agents")))+"'>\n      <span>Archived Users</span>\n    </a>\n  </li>"),n.push("  <li class='invoices'>\n    <a class='invoices' href='"+t(e(GrooveClient.path("billing/invoices")))+"'>\n      <span>Invoices</span>\n    </a>\n  </li>"),this.account.isActive()&&n.push("  <li>\n    <a class='invite-new-agent'>\n      <span>Add new user</span>\n    </a>\n  </li>"),n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_template_categories/category"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],this.template.isNew()||n.push("<input name='account[comment_template_categories_attributes]["+t(e(this.index))+"][id]' type='hidden' value='"+t(e(this.template.id))+"'>\n<input class='destroy' name='account[comment_template_categories_attributes]["+t(e(this.index))+"][_destroy]' type='hidden'>"),n.push("<fieldset class='name'>\n  <ol>\n    <li class='input required string stringish'>\n      <input class='full-width name' maxlength='255' name='account[comment_template_categories_attributes]["+t(e(this.index))+"][name]' type='text'>\n    </li>\n  </ol>\n</fieldset>\n<fieldset class='buttons'>\n  <ol>\n    <li>\n      <a class='add_fields_dummy' href='#'>Add</a>\n      <a class='remove_fields' href='#'>Delete</a>\n    </li>\n  </ol>\n</fieldset>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_template_categories/editor"]=function(e){return function(){var e;return e=[],e.push("<div class='index'>\n  <div class='box-c-reply-add'>\n    <div class='box-c-email-templates'>\n      <h3 class='h3-common'>Editing canned replies categories</h3>\n    </div>\n  </div>\n  <div class='box-c-comment-template-categories'>\n    <form class='account formtastic' accept-charset='UTF-8' novalidate='novalidate' action='/api/comment_template_categories/reset' method='post' data-remote='true'>\n      <div class='controls'>\n        <fieldset class='buttons full-width'>\n          <ol>\n            <li class='action input_action' id='account_submit_action'>\n              <input name='commit' type='submit' value='Update Categories'>\n            </li>\n            <span class='or'>or</span>\n            <a class='cancel-categories-edit cancel_rule' id='cancel_comment_template_categories' href='#'>Cancel</a>\n          </ol>\n        </fieldset>\n      </div>\n    </form>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e));
}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_templates/comment_template"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='title'>"),n.push("  "+t(e(this.template.get("title")))),n.push("</div>\n<div class='buttons'>\n  <ul class='edit-toolbar switcher'>\n    <li>\n      <a class='edit' href='#'>\n        <span>Edit</span>\n      </a>\n    </li>\n    <li>\n      <a class='delete' href='#'>\n        <span>Delete</span>\n      </a>\n    </li>\n  </ul>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_templates/edit_form"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='comment-templates-content edit-comment-template'>\n  <h3 class='h3-common'>Editing a Canned Reply</h3>\n  <form class='comment-template comment_template formtastic vertical-form' data-template-id='"+t(e(this.template.id))+"'>\n    <li class='input required string stringish'>\n      <label class='label' for='comment_template_title'>Title</label>\n      <input id='comment_template_title' maxlength='255' name='comment_template[title]' type='text'>\n    </li>\n    <li class='input optional text variable-insertable'>\n      <label class='label' for='comment_template_body'>Body</label>\n      <select class='variable-inserter'>\n        <option value=''>Insert variable</option>"),s=this.variables;for(c in s)l=s[c],n.push("        <option value='"+t(e(c))+"'>"+t(e(l))+"</option>");for(n.push("      </select>\n      <textarea id='comment_template_body' rows='10' name='comment_template[body]'></textarea>\n    </li>\n    <div class='categories'>\n      <li class='big-selector input optional select'>\n        <label class='label' for='comment_template_category_id'>Category</label>\n        <select class='canned_category_select' id='comment_template_category_id' name='comment_template[category_id]'>\n          <option value=''>Select a category...</option>"),a=this.categories.models,o=0,r=a.length;r>o;o++)i=a[o],n.push("          <option value='"+t(e(i.id))+"'>"+t(e(i.get("name")))+"</option>");return n.push("          <option value='add'>Create a new category</option>\n        </select>\n      </li>\n      <a class='button edit-categories' id='edit_canned_reply_categories' href='#'>Edit categories</a>\n    </div>\n    <fieldset class='actions'>\n      <ol>\n        <li class='action input_action' id='comment_template_submit_action'>\n          <input name='commit' type='submit' value='Update Canned Reply'>\n          <span class='or'>or</span>\n          <a class='cancel_comment_template' href='#'>Cancel</a>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_templates/editor"]=function(e){return function(){var e;return e=[],e.push("<div class='comment-templates-content'>\n  <div class='index'>\n    <div class='box-c-reply-add'>\n      <div class='box-c-email-templates'>\n        <h3 class='h3-common'>What are Canned Replies?</h3>\n        <p>\n          Canned replies for tickets save you time by ensuring that you don\u2019t have to type the same reply over and over again. Once you create a canned reply, you\u2019ll be able to access it with a single click directly from the tickets page.\n          <a class='link-learn-more' href='http://help.groovehq.com/knowledge_base/topics/understanding-canned-replies--9' target='_blank'>Learn More</a>\n        </p>\n      </div>\n    </div>\n    <div class='box-c-comment-templates'>\n      <div class='settings-actions'>\n        <p class='links'>\n          <a class='blue-button new-canned-reply' href='#'>Create Canned Reply</a>\n        </p>\n        <div class='big-selector right-actions'>\n          <h3 class='h3-common' id='category_filter_label'>Showing:</h3>\n          <select id='category_filter'></select>\n        </div>\n      </div>\n      <ul class='templates'></ul>\n    </div>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_templates/picker"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1 class='h1'>Select a Canned Reply</h1>\n<div class='box-c-tab-lists'>\n  <div class='tabs'>\n    <ul class='nav-tab-tabs'>\n      <li>\n        <a href='#template-category-all'>All</a>\n      </li>"),d=this.commentTemplateCategories.models,o=0,l=d.length;l>o;o++)i=d[o],n.push("      <li>\n        <a href='#template-category-"+t(e(i.id))+"'>"+t(e(i.get("name")))+"</a>\n      </li>");for(n.push("    </ul>\n    <div class='tab' id='template-category-all'>\n      <ul>"),h=this.commentTemplates.models,r=0,c=h.length;c>r;r++)g=h[r],n.push("        "+e(this.view.renderCommentTemplate(g)));for(n.push("      </ul>\n    </div>"),m=this.commentTemplateCategories.models,s=0,p=m.length;p>s;s++){for(i=m[s],n.push("    <div class='tab' id='template-category-"+i.id+"'>\n      <ul>"),f=this.commentTemplates.where({category_id:i.id}),a=0,u=f.length;u>a;a++)g=f[a],n.push("        "+e(this.view.renderCommentTemplate(g)));n.push("      </ul>\n    </div>")}return n.push("  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comment_templates/picker_template"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<li>\n  <div class='title'>"),n.push("    "+t(e(this.template.get("title")))),n.push("  </div>\n  <div class='buttons'>\n    <span class='insert'>\n      <a href='#' data-template-id='"+t(e(this.template.id))+"'>Insert</a>\n    </span>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comments/comment_edit_form"]=function(e){return function(){var e;return e=[],e.push("<h1 class='h1'>Edit this note</h1>\n<div class='box-c-comment-edit'>\n  <form class='comment formtastic' novalidate='novalidate'>\n    <li class='required text' id='comment_body_input'>\n      <textarea class='autogrow full-width placeholder-label' id='comment_body' name='body'></textarea>\n    </li>\n    <fieldset class='actions'>\n      <ol>\n        <li class='action input_action' id='comment_submit_action'>\n          <input name='commit' type='submit' value='Update'>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["comments/comment_read_at"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='TicketCellar_info'>"+t(e(this.readAt))+"</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/companies_list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar contacts fixed-header last'>\n  <h1 class='h1b'>"+t(e(this.companyCount+" Companies"))+"</h1>\n</div>\n<div class='box-c-main companies contacts-dashboard'>\n  <table id='companies'>\n    <thead>\n      <tr>\n        <th class='name' data-sort='string'>\n          <span>Name</span>\n        </th>\n        <th class='user-count' data-sort='int'>\n          <span># of Customers</span>\n        </th>\n        <th class='total-tickets' data-sort='int'>\n          <span>Total Tickets</span>\n        </th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/companies_list_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<td class='name'>\n  <a href='"+t(e(this.company.companyContactUrl()))+"'>"+t(e(this.company.get("name")))+"</a>\n</td>\n<td class='user-count'>"+t(e(this.company.get("user_count")))+"</td>\n<td class='total-tickets'>"+t(e(this.company.get("total_ticket_count")))+"</td>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/company_contacts_sidebar"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3 class='h3'>Company Contacts</h3>"),s=this.people,i=0,o=s.length;o>i;i++)r=s[i],n.push("<div class='contact person sidebar'>\n  <div class='avatar'>\n    <img src='"+t(e(r.get("avatar_thumb_url")))+"' title='"+t(e(r.get("name")))+"'>\n  </div>\n  <div class='details'>\n    <p class='name'>\n      <a href='"+t(e(r.personContactUrl()))+"'>"+t(e(r.get("name")))+"</a>\n    </p>\n    <p class='email'>\n      <a href='mailto:"+t(e(r.get("email")))+"'>"+t(e(Groove.Util.truncateString(r.get("email"),25)))+"</a>\n    </p>\n  </div>\n</div>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/company_inspector"]=function(e){return function(){var e;return e=[],e.push("<div class='box-c-toolbar'>\n  <a class='nav-back-button' href='#'>\n    <span>Back</span>\n  </a>\n  <h1 class='h1b'>"+this.company.get("name")+" Company Profile</h1>\n</div>\n<div class='box-c-main company-dashboard company-inspector'>\n  <div class='company-timeline-events'>\n    <h3>Recent Activity</h3>\n    <ul class='timeline-events'></ul>\n  </div>\n  <div class='company-history'>\n    <ul id='menu-company-history'>"),this.agent.hasFeature("ticketing")&&e.push("      <li class='nav-i-company-tickets'>\n        <a data-history-type='tickets'>Tickets</a>\n      </li>"),this.agent.hasFeature("ticketing")&&e.push("      <li class='nav-i-company-ratings'>\n        <a data-history-type='ratings'>Ratings</a>\n      </li>"),e.push("    </ul>\n  </div>\n  <div class='company-history'>\n    <div class='company-history-content'></div>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/company_ratings"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3>Rated Tickets</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e("Looks like "+this.company.get("name")+" doesn't have any rated tickets yet."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='awesome tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='ok tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='bad tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/company_tickets"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3>Companies' Tickets</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e(this.company.get("name")+" has yet to create any tickets."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='opened tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='follow_up tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='pending tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='closed tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/people_dashboard_list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar contacts fixed-header last'>\n  <h1 class='h1b'>"+t(e(this.totalCustomerCount+" Customers"))+"</h1>\n</div>\n<div class='box-c-main contacts-dashboard people'>\n  <table id='people'>\n    <thead>\n      <tr>\n        <th class='avatar'>&nbsp;</th>\n        <th class='current name' sort-by='name' sort-direction='asc'>\n          <span>Name</span>\n        </th>\n        <th class='company' sort-by='company' sort-direction='asc'>\n          <span>Company</span>\n        </th>\n        <th class='email' sort-by='email' sort-direction='asc'>\n          <span>Email</span>\n        </th>\n        <th class='created-at' sort-by='created' sort-direction='asc'>\n          <span>Created</span>\n        </th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/people_dashboard_list_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<td class='avatar'>\n  <img src='"+t(e(this.person.get("avatar_thumb_url")))+"' title='"+t(e(this.person.get("name")))+"'>\n</td>\n<td class='name'>\n  <a href='"+t(e(this.person.personContactUrl()))+"'>"+t(e(this.person.get("name")))+"</a>\n</td>\n<td class='company'>\n  <a href='"+t(e(this.person.companyContactUrl()))+"'>"+t(e(this.person.get("company")))+"</a>\n</td>\n<td class='email'>"+t(e(this.person.get("email")))+"</td>\n<td class='created-at' data-sort-value='"+t(e(this.person.get("created_at")||0))+"'>"+t(e(this.person.createdAtDisplay(!0)))+"</td>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/person_info_sidebar"]=function(e){return function(){var e,t,n,i,o,r,s;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='header-links'>\n  <a id='edit-user-info' href='#'>Edit</a>\n</div>\n<h3 class='h3'>Customer Profile</h3>\n<p class='name'>"+t(e(this.person.get("name")))+"</p>\n<p class='email'>\n  <a href='mailto:"+t(e(this.person.get("email")))+"'>"+t(e(this.person.get("email")))+"</a>\n</p>"),i=this.person.get("company"),s=this.person.get("phone_number"),o=i&&i.length>0,r=s&&s.length>0,(o||r)&&(n.push("<dl>"),o&&n.push("  <dt>Company Name</dt>\n  <dd>"+t(e())+"\n    <a class='company_name' href='"+t(e(this.person.companyContactUrl()))+"'>"+t(e(i))+"</a>\n  </dd>"),r&&n.push("  <dt>Phone #</dt>\n  <dd>"+t(e(s))+"</dd>"),n.push("</dl>")),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/person_inspector"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <a class='nav-back-button' href='#'>\n    <span>Back</span>\n  </a>\n  <h1 class='h1b'>Customer Profile</h1>\n</div>\n<div class='box-c-main person-dashboard person-inspector'>\n  <div class='person-profile-header'>\n    <div class='avatar person-avatar'>\n      <img src='"+t(e(this.avatarUrl))+"' title='"+t(e(this.person.get("name")))+"'>\n    </div>\n    <div class='details'>\n      <div class='name-and-company'>\n        <span class='person-name'>"+t(e(this.person.get("name")))+"</span>"),i=this.person.get("company"),null!=i&&n.push("        <span class='at'>at</span>\n        <span class='person-company'>\n          <a class='company-link' href='"+t(e(this.person.companyContactUrl()))+"'>"+t(e(i))+"</a>\n        </span>"),n.push("      </div>\n      <div class='email-address'>\n        <span class='email'>"+t(e(this.person.get("email")))+"</span>\n      </div>\n      <div class='open-tickets'>\n        <span class='open-ticket-count'></span>\n      </div>\n    </div>\n  </div>\n  <div class='person-timeline-events'>\n    <h3>Recent Activity</h3>\n    <ul class='timeline-events'></ul>\n  </div>\n  <div class='person-history'>\n    <ul id='menu-person-history'>"),this.agent.hasFeature("ticketing")&&n.push("      <li class='nav-i-person-tickets'>\n        <a data-history-type='tickets'>Tickets</a>\n      </li>"),this.account.get("prefers_customer_ratings_installed")&&this.agent.hasFeature("ticketing")&&n.push("      <li class='nav-i-person-ratings'>\n        <a data-history-type='ratings'>Ratings</a>\n      </li>"),n.push("    </ul>\n  </div>\n  <div class='person-history'>\n    <div class='person-history-content'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/person_ratings"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3>Rated Tickets</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e("Looks like "+this.person.get("name")+" hasn't rated any tickets yet."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='awesome tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='ok tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='bad tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/person_tickets"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3>"+t(e(this.person.possessiveFirstName()+" Tickets"))+"</h3>\n<div class='blank-state box-c-blank-slate'>\n  <p>"+t(e(this.person.get("name")+" has yet to create any tickets."))+"</p>\n</div>\n<div class='non-blank-state'>\n  <div class='opened tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='follow_up tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='pending tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n  <div class='closed tickets'>\n    <h4 class='title'></h4>\n    <div class='simple-list'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["contacts/sidebar_menu"]=function(e){return function(){var e,t,n,i,o,r,s;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.agents.where({archived:!0}).length,s=this.agents.where({archived:!1}).length,r=this.invitedAgents.length,o=this.groups.length,n.push("<ul class='contacts-menu'>\n  <li class='contacts-folders nav-i-contacts'>\n    <a class='contacts' href='"+t(e(GrooveClient.path("agents")))+"'>\n      <span>Users</span>\n    </a>\n    <ul class='contacts-folders list'>"),GrooveClient.data.currentUser.isAdmin()&&(n.push("      <li class='folder nav-i-contact-unarchived-agents nav-i-custom-filter unarchived'>\n        <a href='"+t(e(GrooveClient.path("agents")))+"'>\n          <span>"),s>0&&n.push("            <span class='num'>"+t(e(s))+"</span>"),n.push("            Active Users\n          </span>\n        </a>\n      </li>\n      <li class='folder invited nav-i-contact-invited-agents nav-i-custom-filter'>\n        <a href='"+t(e(GrooveClient.path("agents/invited")))+"'>\n          <span>"),r>0&&n.push("            <span class='num'>"+t(e(r))+"</span>"),n.push("            Invited Users\n          </span>\n        </a>\n      </li>\n      <li class='archived folder nav-i-contact-archived-agents nav-i-custom-filter'>\n        <a href='"+t(e(GrooveClient.path("agents/archived")))+"'>\n          <span>"),i>0&&n.push("            <span class='num'>"+t(e(i))+"</span>"),n.push("            Archived Users\n          </span>\n        </a>\n      </li>\n      <li class='folder groups nav-i-contact-groups nav-i-custom-filter'>\n        <a href='"+t(e(GrooveClient.path("groups")))+"'>\n          <span>"),o>0&&n.push("            <span class='num'>"+t(e(o))+"</span>"),n.push("            Groups\n          </span>\n        </a>\n      </li>")),n.push("    </ul>\n  </li>"),GrooveClient.data.currentUser.isAdmin()&&(n.push("  <li class='agent nav-i-add'>\n    <a href='#'>Add a User</a>\n  </li>"),this.currentUser.hasFeature("ticketing")&&n.push("  <li class='nav-i-add'>\n    <a class='fancybox' href='/groups/new'>Create a Group</a>\n  </li>")),n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["filters/filters_list_menu"]=function(e){return function(){var e;return e=[],e.push("<a href='../groove_client/index.html'>\n  <span>Tickets</span>\n</a>\n<ul></ul>"),e.join("\n")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["filters/menu_filter"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a href='"+t(e(this.filter.url()))+"'>\n  <span>"+t(e(this.filter.get("name")))+"</span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["groups/agents"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar'>\n  <a class='nav-back-button' href='#'>\n    <span>Back</span>\n  </a>\n  <h1 class='h1b'>"+t(e(this.group.get("name")+" Group"))+"</h1>\n  <div class='box-c-toolbar-right'>\n    <a class='edit-group fancybox' href='/groups/"+t(e(this.group.id))+"/edit'>Edit this group</a>"),this.currentUser.isAdmin()&&n.push("    <a class='button delete-button delete-group' href='#'>Delete</a>"),n.push("  </div>\n</div>\n<div class='box-c-group-agents box-c-main'>\n  <div class='agents grid'>\n    <h3 class='title'>"+t(e(this.group.users.size()+" Agent"+(1===this.group.users.size()?"":"s")))+"</h3>\n    <div class='items'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["groups/group_list_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<td class='name'>\n  <a href='"+t(e(this.group.contactUrl()))+"'>"+t(e(this.group.get("name")))+"</a>\n</td>\n<td class='agent-count'>"+t(e(this.group.agentCount()))+"</td>\n<td class='agents-list'></td>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["groups/groups_list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar contacts fixed-header last'>\n  <h1 class='h1b'>"+t(e(this.groupCount+" Groups"))+"</h1>\n</div>\n<div class='box-c-main contacts-dashboard groups'>\n  <table id='groups'>\n    <thead>\n      <tr>\n        <th class='name' data-sort='string'>\n          <span>Name</span>\n        </th>\n        <th class='agent-count' data-sort='int'>\n          <span>#</span>\n        </th>\n        <th class='agents-list' data-sort='string'>\n          <span>Agents</span>\n        </th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["groups/menu_group"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a href='"+t(e(GrooveClient.path("groups/"+this.group.id)))+"'>\n  <span>"),n.push("    "+t(e(this.group.get("name")))),n.push("  </span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["labels/edit_form"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<form class='formtastic label'>\n  <ul>\n    <li class='input required string stringish'>\n      <input type='text' name='name' maxlength='"+t(e(255))+"'>\n    </li>\n  </ul>\n  <fieldset class='actions'>\n    <input class='action input_action' name='commit' type='submit' value='"+t(e(this.submitCaption))+"'>\n    <span class='or'>or</span>\n    <a class='cancel' href='#'>Cancel</a>\n  </fieldset>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["labels/editor"]=function(e){return function(){var e;return e=[],e.push("<div class='box-c-reply-add'>\n  <div class='box-c-email-templates box-c-labels'>\n    <h3 class='h3-common'>What are Labels?</h3>\n    <p>\n      Labels help you organize your tickets into categories like questions, issues or suggestions. Adding labels makes it easy to search, find and respond to tickets by category. You can add more than one label to a ticket.\n      <a class='link-learn-more' href='http://help.groovehq.com/knowledge_base/topics/understanding-labels' target='_blank'>Learn More</a>\n    </p>\n    <div class='settings-actions'>\n      <p class='links'>\n        <a class='blue-button create-new-label' href='#'>Create label</a>\n      </p>\n    </div>\n    <ul class='labels sortable-labels-list'></ul>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["labels/editor_label"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='title'>"),(i=this.label.get("labelings_count"))?(n.push("  <a class='unstyled' href='"+t(e(this.label.path()))+"'>"),n.push("    "+t(e(this.label.get("name")))),n.push("    "+t(e("("+i+")"))),n.push("  </a>")):n.push("  "+t(e(this.label.get("name")))),n.push("</div>\n<div class='buttons manage'>\n  <span class='enable'>\n    <label>\n      <input type='checkbox' name='public'>\n      Include in Help Widget\n    </label>\n  </span>\n  <ul class='edit-toolbar switcher'>\n    <li>\n      <a class='edit label_rename' href='#'>\n        <span>Rename</span>\n      </a>\n    </li>\n    <li>\n      <a class='delete'>\n        <span>Delete</span>\n      </a>\n    </li>\n  </ul>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["labels/label"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<strong>"+t(e(this.model.get("name")))+"</strong>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["layouts/base"]=function(e){return function(){var e;return e=[],e.push("<div class='clear-header'>&nbsp;</div>\n<div class='box-b-main'></div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["layouts/left_sidebar"]=function(e){return function(){var e;return e=[],e.push("<div class='clear-header'>&nbsp;</div>\n<div class='box-b-sidebar-left'></div>\n<div class='box-b-main'></div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["layouts/two_sidebars"]=function(e){return function(){var e;return e=[],e.push("<div class='clear-header'>&nbsp;</div>\n<div class='box-b-sidebar-left'></div>\n<div class='box-b-main'></div>\n<div class='box-b-sidebar-right-fake'></div>\n<div class='box-b-sidebar-right'></div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["mailboxes/menu_mailbox"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a class='"+["mailbox",""+t(e(this.klass))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='"+t(e(this.mailbox.filters.first().url()))+"'>\n  <span>"+t(e(this.mailbox.get("name")))+"</span>\n</a>\n<ul></ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["mentions/agent_list"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],r=this.usernames,i=0,o=r.length;o>i;i++)s=r[i],n.push("<li class='"+["Agent",""+t(e(this.isSelected(s)))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-username='"+t(e(s.get("text")))+"'>\n  <div class='Agent_avatar'>"),n.push("    "+e(s.agent().avatarUrl())),n.push("  </div>\n  <div class='Agent_username'>"+s.get("text")+"</div>\n  <div class='Agent_name'>"+s.agent().firstNameAndLastInitial()+"</div>\n</li>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/api"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>API Settings</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings'>\n      <fieldset>\n        <div>\n          <label>Private Token</label>\n          <div id='private-access-token'>\n            <input value='"+t(e(this["private"].token))+"'>\n            <p class='help-block'>\n              Use to connect your internal apps to Groove. Do not share with others.\n              <br>\n              See our\n              <a href='https://www.groovehq.com/docs#authentication'>docs</a>\n              for more information.\n            </p>\n          </div>\n        </div>\n      </fieldset>"),
!_.isEmpty(this.thirdParty)){for(n.push("      <fieldset id='third-party-access-tokens'>\n        <div>\n          <label>3rd Party Tokens</label>\n          <div>"),l=this.thirdParty,i=o=0,s=l.length;s>o;i=++o){for(u=l[i],n.push("            <label class='row' data-id='"+t(e(u.id))+"' data-index='"+t(e(i))+"'>\n              <span class='name'>"+t(e(u.name))+"</span>\n              <span class='addedBy'>"+t(e(this.addedBy(u.resource_owner_id)))+"</span>\n              <a class='action' role='destroy'>revoke</a>\n              <ul class='scopes'>"),c=u.scopes,r=0,a=c.length;a>r;r++)p=c[r],n.push("                <li>"+t(e(p))+"</li>");n.push("              </ul>\n            </label>")}n.push("            <p class='help-block'>\n              The apps above have been given access to your account by you\n              or another admin.\n            </p>\n          </div>\n        </div>\n      </fieldset>")}return n.push("    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/api/webhooks"]=function(e){return function(){var e,t,n,i,o,r,s;for(e=window.HAML.cleanValue,t=[],t.push("<div>\n  <label>Webhooks</label>\n  <div>"),r=this.webhooks,i=n=0,o=r.length;o>n;i=++n)s=r[i],t.push("    "+e(this._rowTemplate(_.extend({index:i},s))));return t.push("    <div class='addRow'>\n      <select class='not-chosen' id='webhook-event' name='event'>\n        <option value='blank'>Add Webhook</option>\n        <option>ticket_started</option>\n        <option>ticket_opened</option>\n        <option>ticket_state_changed</option>\n        <option>ticket_closed</option>\n        <option>ticket_assigned</option>\n        <option>ticket_priority_changed</option>\n        <option>ticket_deleted</option>\n        <option>ticket_moved</option>\n        <option>ticket_tagged</option>\n        <option>customer_replied</option>\n        <option>note_added</option>\n        <option>agent_replied</option>\n        <option>customer_added</option>\n        <option>agent_invited</option>\n        <option>agent_archived</option>\n      </select>\n    </div>\n    <p class='help-block'>\n      Setup custom webhooks to be alerted to activity in your account.\n      <br>\n      See our\n      <a href='https://www.groovehq.com/docs/webhooks'>docs</a>\n      for a full list of events and integration details.\n    </p>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/api/webhooks/form"]=function(e){return function(){var e;return e=[],e.push("<div id='webhook-details'>\n  <input id='webhook-url' type='text' name='url' placeholder='https://example.com/webhook'>\n  <a class='button' role='create'>Add Webhook</a>\n  <a class='secondary' role='removeForm'>cancel</a>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/api/webhooks/row"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<label class='row' data-id='"+t(e(this.id))+"' data-index='"+t(e(this.index))+"'>\n  <a class='action' role='destroy'>delete</a>\n  <span class='name'>"+t(e(this.event))+"</span>\n  <span class='url'>"+t(e(this.url))+"</span>\n</label>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/billing_account"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Manage Account</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings'>\n      <fieldset>\n        <div>\n          <label for='owner'>Account Owner</label>\n          <div>\n            <select id='owner' name='owner'>"),r=this.activeUsers,i=0,o=r.length;o>i;i++)s=r[i],n.push("              <option value='"+t(e(s.id))+"' selected='"+t(e(s.isOwner()))+"'>"+t(e(s.get("name")))+"</option>");return n.push("            </select>\n            <a class='help qtip-tipsy' href='#' title='The account owner is the only person who can access this account page, upgrade, downgrade, change billing information, access invoices, and cancel account.'>?</a>\n          </div>\n        </div>\n        <div class='actions'>\n          <input class='form-button sky-blue' type='submit' value='Update'>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/campaign_monitor"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Campaign Monitor Settings</h1>\n    <form class='settings'>\n      <fieldset>\n        <div id='mailbox-settings'>\n          <label for='email'>Mailboxes</label>\n          <div>"),l=this.mailboxes;for(o in l)c=l[o],r=c.id,a=c.name,i=c.email,s=c.isSelected,p=c.settings,n.push("            <label class='row' for='mailbox_settings["+t(e(o))+"][mailbox_id]' data-id='"+t(e(null!=p?p.id:void 0))+"'>\n              <input id='mailbox_settings["+o+"][mailbox_id]' type='checkbox' name='mailbox_settings["+t(e(o))+"][mailbox_id]' value='"+t(e(r))+"' checked='"+t(e(s))+"' role='update-mailbox-setting'>"),n.push("              "+t(e(a))),n.push("              <span class='emailAddress'>"+t(e(i))+"</span>"),p&&n.push("              <input type='hidden' name='mailbox_settings["+t(e(o))+"][id]' value='"+t(e(p.id))+"'>"),n.push("            </label>");return n.push("          </div>\n        </div>\n      </fieldset>\n      <fieldset class='danger-zone'>\n        <legend>Danger Zone</legend>\n        <div>\n          <label for='uninstall-campaign-monitor'>Uninstall Campaign Monitor</label>\n          <a class='danger form-button' id='uninstall-campaign-monitor' href='#' role='uninstall'>Uninstall Campaign Monitor Now</a>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/canned_replies"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar fixed-header full-width'>\n  <h1 class='h1b'>"),null!=this.categoryId?n.push("    <div class='edit-in-place' id='category-name-label'></div>"):n.push("    All Canned Replies\n    <span class='secondary'>"+t(e("("+this.cannedReplies.length+")"))+"</span>"),n.push("  </h1>"),null!=this.categoryId&&n.push("  <div id='sortSearchResults'>\n    <ul class='unstyled'>\n      <li>\n        <a id='delete-category' href='#' title='Delete this category' data-category-id='"+t(e(this.categoryId))+"'>Delete</a>\n      </li>\n    </ul>\n  </div>"),n.push("</div>\n<div class='box-c-main'>\n  <table class='many-simple-things'>\n    <tbody>"),r=this.cannedReplies,i=0,o=r.length;o>i;i++)s=r[i],n.push("      <tr>\n        <td class='name'>\n          <a href='/groove_client/settings/ticketing/canned-replies/"+t(e(s.id))+"'>"+t(e(s.get("title")))+"</a>\n        </td>\n        <td class='usage'>&nbsp;</td>\n        <td class='actions'>\n          <a class='delete' href='#' title='Permanently delete this reply' data-canned-reply-id='"+t(e(s.id))+"'>Delete</a>\n        </td>\n      </tr>");return n.push("    </tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/canned_replies/categories_select"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div id='category-field'>\n  <label for='category_id'>Category</label>\n  <div>\n    <select id='categories-select' name='category_id'>\n      <option value=''>Select a category</option>"),s=this.categories,o=0,r=s.length;r>o;o++)i=s[o],a=i.id===this.categoryId?"selected":!1,n.push("      <option value='"+t(e(i.id))+"' selected='"+t(e(a))+"'>"+t(e(i.get("name")))+"</option>");return n.push("      <option id='new-category' value=''>Create a new category</option>\n    </select>\n  </div>\n</div>\n<div id='new-category-field' style='display: none'>\n  <label for='category.name'>Category</label>\n  <div>\n    <input id='new-category' type='text' name='category.name'>\n    <a class='side-actions' id='cancel-new-category' href='#'>cancel</a>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/canned_reply"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>"),this.model.isNew()?n.push("      New Canned Reply"):n.push("      Edit Canned Reply"),n.push("    </h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' method='POST'>\n      <fieldset id='reply-categories'></fieldset>\n      <fieldset>\n        <div>\n          <label for='title'>Template Name</label>\n          <div>\n            <input id='title' type='text' name='title' value='"+t(e(this.model.get("title")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='subject'>Email Subject</label>\n          <div>\n            <input id='subject' type='text' name='subject' value='"+t(e(this.model.get("subject")))+"'>\n            <a class='help qtip-tipsy' title=\"Inserting a canned reply into an existing email thread doesn't change the subject line. This subject will only be used when you create a new outgoing email.\">?</a>\n          </div>\n        </div>\n        <div>\n          <label for='body'>Body</label>\n          <div>\n            <textarea id='canned-reply-body' name='body' rows='15'>"+i(t(e(this.model.get("body"))))+"</textarea>"),n.push("            "+e(this.variablesSelect({target:"body"}))),n.push("          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Canned Reply'>\n        <span>&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;</span>\n        <a class='cancel-save' href='#cancel'>Cancel</a>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/company"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Company Profile</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings'>\n      <fieldset>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value='"+t(e(this.model.get("name")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='subdomain'>Subdomain</label>\n          <div>\n            <div class='InputAppend' data-append='.groovehq.com'>\n              <input id='subdomain' type='text' name='subdomain' value='"+t(e(this.model.get("subdomain")))+"'>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='timezone'>Timezone</label>\n          <div>\n            <select id='timezone' name='timezone'>"),r=this.timezones,i=0,o=r.length;o>i;i++)s=r[i],n.push("              <option value='"+t(e(s.name))+"'>"+t(e(s.name_with_offset))+"</option>");return n.push("            </select>\n            <p class='help-block'>\n              The default for everyone. Users can also customize their\n              <a href='./profile'>profile</a>\n            </p>\n          </div>\n        </div>\n      </fieldset>"),this.showBusinessHours&&n.push("      <fieldset>\n        <div>\n          <label for='business_day_starts_at'>Business Hours</label>\n          <div class='inline-checkbox'>\n            <label for='business_day_0'>\n              <input id='business_day_0' type='checkbox' name='business_day_0'>\n              Sun\n            </label>\n            <label for='business_day_1'>\n              <input id='business_day_1' type='checkbox' name='business_day_1'>\n              Mon\n            </label>\n            <label for='business_day_2'>\n              <input id='business_day_2' type='checkbox' name='business_day_2'>\n              Tues\n            </label>\n            <label for='business_day_3'>\n              <input id='business_day_3' type='checkbox' name='business_day_3'>\n              Wed\n            </label>\n            <label for='business_day_4'>\n              <input id='business_day_4' type='checkbox' name='business_day_4'>\n              Thurs\n            </label>\n            <label for='business_day_5'>\n              <input id='business_day_5' type='checkbox' name='business_day_5'>\n              Fri\n            </label>\n            <label for='business_day_6'>\n              <input id='business_day_6' type='checkbox' name='business_day_6'>\n              Sat\n            </label>\n          </div>\n          <div class='sentence'>\n            <span class='start'>\n              <select class='auto-width' id='business_day_starts_at' name='business_day_starts_at'>\n                <option value=''>-- Start Time --</option>\n                <option value='00:00'>12:00 AM</option>\n                <option value='01:00'>1:00 AM</option>\n                <option value='02:00'>2:00 AM</option>\n                <option value='03:00'>3:00 AM</option>\n                <option value='04:00'>4:00 AM</option>\n                <option value='05:00'>5:00 AM</option>\n                <option value='06:00'>6:00 AM</option>\n                <option value='07:00'>7:00 AM</option>\n                <option value='08:00'>8:00 AM</option>\n                <option value='09:00'>9:00 AM</option>\n                <option value='10:00'>10:00 AM</option>\n                <option value='11:00'>11:00 AM</option>\n                <option value='12:00'>12:00 PM</option>\n                <option value='13:00'>1:00 PM</option>\n                <option value='14:00'>2:00 PM</option>\n                <option value='15:00'>3:00 PM</option>\n                <option value='16:00'>4:00 PM</option>\n                <option value='17:00'>5:00 PM</option>\n                <option value='18:00'>6:00 PM</option>\n                <option value='19:00'>7:00 PM</option>\n                <option value='20:00'>8:00 PM</option>\n                <option value='21:00'>9:00 PM</option>\n                <option value='22:00'>10:00 PM</option>\n                <option value='23:00'>11:00 PM</option>\n              </select>\n            </span>\n            <label for='business_day_ends_at'>to</label>\n            <select class='auto-width' id='business_day_ends_at' name='business_day_ends_at'>\n              <option value=''>-- End Time --</option>\n              <option value='00:00'>12:00 AM</option>\n              <option value='01:00'>1:00 AM</option>\n              <option value='02:00'>2:00 AM</option>\n              <option value='03:00'>3:00 AM</option>\n              <option value='04:00'>4:00 AM</option>\n              <option value='05:00'>5:00 AM</option>\n              <option value='06:00'>6:00 AM</option>\n              <option value='07:00'>7:00 AM</option>\n              <option value='08:00'>8:00 AM</option>\n              <option value='09:00'>9:00 AM</option>\n              <option value='10:00'>10:00 AM</option>\n              <option value='11:00'>11:00 AM</option>\n              <option value='12:00'>12:00 PM</option>\n              <option value='13:00'>1:00 PM</option>\n              <option value='14:00'>2:00 PM</option>\n              <option value='15:00'>3:00 PM</option>\n              <option value='16:00'>4:00 PM</option>\n              <option value='17:00'>5:00 PM</option>\n              <option value='18:00'>6:00 PM</option>\n              <option value='19:00'>7:00 PM</option>\n              <option value='20:00'>8:00 PM</option>\n              <option value='21:00'>9:00 PM</option>\n              <option value='22:00'>10:00 PM</option>\n              <option value='23:00'>11:00 PM</option>\n            </select>\n          </div>\n        </div>\n      </fieldset>"),n.push("      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Profile'>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/constant_contact"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Constant Contact Settings</h1>\n    <form class='settings'>\n      <fieldset>\n        <div id='mailbox-settings'>\n          <label for='email'>Mailboxes</label>\n          <div>"),l=this.mailboxes;for(o in l)c=l[o],r=c.id,a=c.name,i=c.email,s=c.isSelected,p=c.settings,n.push("            <label class='row' for='mailbox_settings["+t(e(o))+"][mailbox_id]' data-id='"+t(e(null!=p?p.id:void 0))+"'>\n              <input id='mailbox_settings["+o+"][mailbox_id]' type='checkbox' name='mailbox_settings["+t(e(o))+"][mailbox_id]' value='"+t(e(r))+"' checked='"+t(e(s))+"' role='update-mailbox-setting'>"),n.push("              "+t(e(a))),n.push("              <span class='emailAddress'>"+t(e(i))+"</span>"),p&&n.push("              <input type='hidden' name='mailbox_settings["+t(e(o))+"][id]' value='"+t(e(p.id))+"'>"),n.push("            </label>");return n.push("          </div>\n        </div>\n      </fieldset>\n      <fieldset class='danger-zone'>\n        <legend>Danger Zone</legend>\n        <div>\n          <label for='uninstall-constant-contact'>Uninstall Constant Contact</label>\n          <a class='danger form-button' id='uninstall-constant-contact' href='#' role='uninstall'>Uninstall Constant Contact Now</a>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/folder"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>"+t(e(this.pageTitle()))+"</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' enctype='multipart/form-data' method='POST'>\n      <fieldset>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value='"+t(e(this.model.get("name")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='description'>Description</label>\n          <div>\n            <textarea id='rule-description' name='description' rows='5'>\x92"),n.push("            "+t(e(this.model.get("description")))),n.push("            \x91</textarea>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset class='folder-conditions'></fieldset>\n      <fieldset class='folder-permissions'></fieldset>\n      <fieldset class='folder-mailboxes'></fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Folder'>\n        <span>&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;</span>\n        <a class='cancel-save' href='#cancel'>Cancel</a>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/folders"]=function(e){return function(){var e,t,n,i,o,r,s,a;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar fixed-header full-width'>\n  <h1 class='h1b'>All Folders</h1>\n  <div id='sortSearchResults'>\n    <span>Sorted by</span>\n    <ul class='unstyled'>\n      <li>\n        <span>A-Z</span>\n      </li>\n    </ul>\n  </div>\n</div>\n<div class='box-c-main'>\n  <table class='folders many-simple-things'>\n    <tbody>"),this.folders&&this.folders.length>0)for(s=this.folders,o=0,r=s.length;r>o;o++)i=s[o],n.push("      <tr class='"+["folder","sortable",""+t(e(i.get("active")?void 0:"weak"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+t(e(i.get("id")))+"'>\n        <td class='name'>\n          <a href='/groove_client/settings/ticketing/folders/"+t(e(i.id))+"'>\n            <strong>"+t(e(i.get("name")))+"</strong>\n          </a>\n        </td>\n        <td class='actions tall'>"),a=i.toggleText(),1!==this.activeFolderCount?n.push("          <a class='toggle' href='#' title='"+t(e(a))+" this folder'>"+t(e(a))+"</a>\n          <a class='delete' href='#' title='Permanently delete this folder'>Delete</a>"):(n.push("          <!-- only let them show hidden folders to they don't get into situation with zero folders -->"),i.get("active")||n.push("          <a class='toggle' href='#' title='"+t(e(a))+" this folder'>"+t(e(a))+"</a>")),n.push("        </td>\n      </tr>");return n.push("    </tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/folders/condition"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<span class='start'>\n  <select class='condition-parameter' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"].param'>\n    <option value=''>Select a condition...</option>"),n.push("    "+e(this.selectOptions({options:null!=(i=this.variables)?i.get("parameters"):void 0,selected:null!=(o=this.model)?o.param:void 0}))),n.push("  </select>\n</span>\n<select class='condition-operator' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"].operator' style='display:none;'></select>\n<select class='condition-value' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"].value' style='display:none;'></select>\n<input class='condition-value' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"].value' style='display: none;'>\n<input class='condition-id' type='hidden' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"].id' value='"+t(e(null!=(r=this.model)?r.id:void 0))+"'>\n<a class='delete' href='#' title='Remove this condition'>Delete</a>\n<input class='condition-destroy' type='hidden' name='filter_conditions_attributes["+t(e(this.conditionsIndex))+"]._destroy' value='"+t(e(0))+"'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/folders/conditions"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div>\n  <label for='match_type'>Include</label>\n  <div class='match-type sentence'>\n    <label for='match_type'>tickets matching</label>\n    <select id='match_type' name='match_type'>"+e(this.matchTypeOptions)+"</select>\n    <label for='match_type'>of the following:</label>\n    <!-- conditions are rendered here with before('#add-condition-container') -->\n  </div>\n  <div id='add-condition-container'>\n    <button class='form-button' id='add-condition' href='#'>Add Condition</button>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/folders/folder_mailboxes"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <label for='mailbox_ids'>Show</label>\n  <div>\n    <div class='sentance'>\n      <label>this folder in the following mailboxes</label>\n    </div>\n    <div class='check-columns'>\n      <input type='hidden' name='mailbox_ids' value=''>"),c=this.columns,o=0,s=c.length;s>o;o++){for(i=c[o],n.push("      <div class='column'>"),r=0,a=i.length;a>r;r++)l=i[r],n.push("        <label for='"+t(e(l.input_id))+"'>\n          <input id='"+t(e(l.input_id))+"' type='checkbox' name='mailbox_ids[]' value='"+t(e(l.id))+"' checked='"+t(e(l.checked))+"'>"),n.push("          "+t(e(l.name))),n.push("        </label>");n.push("      </div>")}return n.push("    </div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/index"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div id='master-settings'>\n  <section id='person-settings'>\n    <h2>My Settings</h2>\n    <ul>\n      <li>\n        <a href='/groove_client/settings/profile'>\n          <img src='/assets/settings/person-profile.png' alt='Person profile icon' size='52x52'>\n          Profile\n        </a>\n      </li>\n      <li>\n        <a href='/groove_client/settings/notifications'>\n          <img src='/assets/settings/notifications.png' alt='Notifications icon' size='52x52'>\n          Notifications\n        </a>\n      </li>\n      <li>\n        <a href='/groove_client/settings/preferences'>\n          <img src='/assets/settings/preferences.png' alt='Preferences icon' size='52x52'>\n          Preferences\n        </a>\n      </li>\n    </ul>\n  </section>"),this.currentUser.isAdmin()&&(n.push("  <section id='company-settings'>\n    <h2>Company</h2>\n    <ul>\n      <li>\n        <a href='/groove_client/settings/company'>\n          <img src='/assets/settings/company-profile.png' alt='Company profile icon' size='52x52'>\n          Profile\n        </a>\n      </li>\n      <li>\n        <a href='/groove_client/settings/users'>\n          <img src='/assets/settings/users.png' alt='Users icon' size='52x52'>\n          Users\n        </a>\n      </li>\n      <li>\n        <a href='#groups'>\n          <img src='/assets/settings/groups.png' alt='Groups icon' size='52x52'>\n          Groups\n        </a>\n      </li>"),this.currentUser.isOwner()&&n.push("      <li>\n        <a href='/groove_client/settings/billing'>\n          <img src='/assets/settings/billing.png' alt='Billing icon' size='52x52'>\n          Billing\n        </a>\n      </li>"),n.push("      <li>\n        <a href='/groove_client/settings/api'>\n          <img src='/assets/settings/preferences-alt.png' alt='API icon' size='52x52'>\n          API\n        </a>\n      </li>\n    </ul>\n  </section>")),n.push("  <section id='ticketing-settings'>\n    <h2>Ticketing</h2>\n    <ul>"),this.currentUser.isAdmin()&&n.push("      <li>\n        <a href='/groove_client/settings/mailboxes'>\n          <img src='/assets/settings/mailboxes.png' alt='Mailboxes icon' size='52x52'>\n          Mailboxes\n        </a>\n      </li>"),GrooveClient.data.mailboxes.length>0&&(n.push("      <li>\n        <a href='/groove_client/settings/ticketing/canned-replies'>\n          <img src='/assets/settings/canned-replies.png' alt='Canned replies icon' size='52x52'>\n          Canned&nbsp;Replies\n        </a>\n      </li>\n      <li>\n        <a href='/groove_client/settings/ticketing/labels'>\n          <img src='/assets/settings/labels.png' alt='Labels icon' size='52x52'>\n          Labels\n        </a>\n      </li>"),this.currentUser.isAdmin()&&n.push("      <li>\n        <a href='/groove_client/settings/ticketing/rules'>\n          <img src='/assets/settings/rules.png' alt='Rules icon' size='52x52'>\n          Rules\n        </a>\n      </li>\n      <li>\n        <a href='/groove_client/settings/ticketing/folders'>\n          <img src='/assets/settings/folders.png' alt='Folders icond' size='52x52'>\n          Folders\n        </a>\n      </li>"),this.currentUser.isAdmin()&&GrooveClient.data.mailboxes.length&&n.push("      <li>\n        <a href='/groove_client/settings/ticketing/preferences'>\n          <img src='/assets/settings/preferences.png' alt='Preferences icon' size='52x52'>\n          Preferences\n        </a>\n      </li>")),n.push("    </ul>\n  </section>"),c=(null!=(s=this.otherApps)?s.length:void 0)||this.account.get("prefers_olark_installed")||this.account.get("prefers_new_widget"),this.currentUser.isAdmin()&&c){for(n.push("  <section id='ticketing-settings'>\n    <h2>Other Apps</h2>\n    <ul>"),this.account.get("prefers_new_widget")&&n.push("      <li>\n        <a href='/groove_client/settings/widget'>\n          <img src='/assets/settings/support-widget.png' alt='Widget icon' size='52x52'>\n          Support Widget\n        </a>\n      </li>"),a=this.otherApps,i=0,o=a.length;o>i;i++)l=a[i],r=l.name,p=l.slug,n.push("      <li>\n        <a href='/groove_client/settings/"+t(e(p))+"'>\n          <img src='/assets/settings/"+t(e(p))+".png' size='52x52'>"),n.push("          "+t(e(r))),n.push("        </a>\n      </li>");this.account.get("prefers_olark_installed")&&this.account.get("prefers_new_widget_chat_access")&&n.push("      <li>\n        <a href='/groove_client/settings/olark'>\n          <img src='/assets/settings/olark.png' alt='Widget icon' size='52x52'>\n          Olark\n        </a>\n      </li>"),n.push("    </ul>\n  </section>")}return n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/labels"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar fixed-header full-width'>\n  <h1 class='h1b'>"),n.push("    "+t(e(this.pageTitle()))),n.push("    <span class='secondary'>"+t(e("("+this.labels.length+")"))+"</span>\n  </h1>\n  <div id='sortSearchResults'>\n    <span>Sorted by</span>\n    <ul class='unstyled'>\n      <li>\n        <span>A-Z</span>\n      </li>\n    </ul>\n  </div>\n</div>\n<div class='box-c-main'>\n  <table class='many-simple-things'>\n    <tbody>"),s=this.labels,i=0,r=s.length;r>i;i++)o=s[i],n.push("      <tr>\n        <td class='name'>"+t(e(o.get("name")))+"</td>\n        <td class='usage'>&nbsp;</td>\n        <td class='actions'>\n          <a class='delete' href='#' title='Permanently delete this label' data-label-id='"+t(e(o.id))+"'>Delete</a>\n        </td>\n      </tr>");return n.push("    </tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"");
}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mail_chimp"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>MailChimp Settings</h1>\n    <form class='settings'>\n      <fieldset>\n        <div id='mailbox-settings'>\n          <label for='email'>Mailboxes</label>\n          <div>"),l=this.mailboxes;for(o in l)c=l[o],r=c.id,a=c.name,i=c.email,s=c.isSelected,p=c.settings,n.push("            <label class='row' for='mailbox_settings["+t(e(o))+"][mailbox_id]' data-id='"+t(e(null!=p?p.id:void 0))+"'>\n              <input id='mailbox_settings["+o+"][mailbox_id]' type='checkbox' name='mailbox_settings["+t(e(o))+"][mailbox_id]' value='"+t(e(r))+"' checked='"+t(e(s))+"' role='update-mailbox-setting'>"),n.push("              "+t(e(a))),n.push("              <span class='emailAddress'>"+t(e(i))+"</span>"),p&&n.push("              <input type='hidden' name='mailbox_settings["+t(e(o))+"][id]' value='"+t(e(p.id))+"'>"),n.push("            </label>");return n.push("          </div>\n        </div>\n      </fieldset>\n      <fieldset class='danger-zone'>\n        <legend>Danger Zone</legend>\n        <div>\n          <label for='uninstall-mail-chimp'>Uninstall MailChimp</label>\n          <a class='danger form-button' id='uninstall-mail-chimp' href='#' role='uninstall'>Uninstall MailChimp Now</a>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>"),n.push("      "+e(this.pageTitle())),n.push("    </h1>\n  </div>\n  <div class='has-fixed-header'>"),this.needsSetup&&n.push("    <div id='needs-setup'>\n      <strong>This mailbox is not setup to receive emails yet.</strong>\n      <a id='setup-mailbox' href='#'>Click here to complete setup.</a>\n    </div>"),n.push("    <form class='settings' method='POST'>\n      <fieldset>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value='"+t(e(this.model.get("name")))+"'>"),this.isFirstMailbox&&n.push("            <input type='hidden' name='default' value='1'>"),n.push("          </div>\n        </div>\n        <div>\n          <label for='email'>Email</label>\n          <div>\n            <input id='email' type='text' name='email' value='"+t(e(this.model.get("email")))+"'>\n            <p class='help-block'>"),this.model.isNew()?n.push("              The email address you monitor for customer questions."):this.model.get("oauth")?n.push("              Connected via OAuth"):(n.push("              Forwarded to"),n.push("              "+t(e(this.model.get("forward_email_address"))))),n.push("            </p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset id='smtp-settings'>\n        <!-- / Renders GrooveClient.Views.OutgoingEmailServer here -->\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='use_agent_name'>From</label>\n          <div>\n            <select id='use_agent_name' name='use_agent_name'>\n              <option value='true' selected='"+t(e(this.useAgentName))+"'>Agent Name</option>\n              <option value='false' selected='"+t(e(!this.useAgentName))+"'>Mailbox Name</option>\n            </select>\n            <p class='help-block'>What your customers will see when they read your email.</p>\n          </div>\n        </div>\n        <div id='mailbox-email-signature'>\n          <label for='email-signature-on'>Signature</label>\n          <div>\n            <textarea id='email-signature-body' name='signature' rows='15'>"+i(t(e(this.model.get("signature"))))+"</textarea>"),n.push("            "+e(this.variablesSelect({variables:this.model.get("signature_variables"),target:"signature"}))),n.push("          </div>\n        </div>\n      </fieldset>\n      <fieldset id='mailbox-auto-reply'></fieldset>\n      <fieldset id='mailbox-auto-bcc-address'></fieldset>\n      <fieldset id='mailbox-permissions'></fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Mailbox'>\n      </div>"),!this.model.isNew()&&(null!=(o=this.mailboxes)?o.length:void 0)>1&&n.push("      <fieldset class='danger-zone'>\n        <legend>Danger Zone</legend>\n        <div>\n          <label for='cancel_account'>Delete Mailbox</label>\n          <a class='danger delete-mailbox form-button' href='#'>Delete Mailbox Now</a>\n        </div>\n      </fieldset>"),n.push("    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/auto_bcc_email_address"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <label for='auto-bcc'>Auto Bcc</label>\n  <div class='inline-radio'>\n    <label for='auto-bcc-on'>\n      <input id='auto-bcc-on' type='radio' name='auto_bcc_address.auto_bcc_selected' checked='"+t(e(this.autoBccIsOn()))+"' value='enabled'>\n      On\n    </label>\n    <label for='auto-bcc-off'>\n      <input id='auto-bcc-off' type='radio' name='auto_bcc_address.auto_bcc_selected' checked='"+t(e(!this.autoBccIsOn()))+"' value='disabled'>\n      Off\n    </label>\n    <a class='help qtip-tipsy' href='#' title='Great for use with a CRM, setup Auto Bcc to copy all your replies to another system'>?</a>\n  </div>\n  <div class='toggle' style='"+t(e(this.templateContentStyles()))+"'>\n    <label class='secondary' for='auto_bcc_address.email'>Bcc Address</label>\n    <input id='bcc-address-email' type='email' name='auto_bcc_address.email' value='"+t(e(this.email))+"'>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/auto_reply"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<div>\n  <label for='template-body'>Auto Reply</label>\n  <div class='inline-radio'>\n    <label for='auto-reply-on'>\n      <input id='auto-reply-on' type='radio' name='email_template.state' checked='"+t(e(this.autoReplyIsOn()))+"' value='enabled'>\n      On\n    </label>\n    <label for='auto-reply-off'>\n      <input id='auto-reply-off' type='radio' name='email_template.state' checked='"+t(e(!this.autoReplyIsOn()))+"' value='disabled'>\n      Off\n    </label>\n  </div>\n  <div class='toggle' style='"+t(e(this.templateContentStyles()))+"'>\n    <label class='secondary' for='email_template.subject'>Subject</label>\n    <input id='template-subject' type='text' name='email_template.subject' value='"+t(e(null!=(o=this.emailTemplate)?o.subject:void 0))+"'>"),n.push("    "+e(this.variablesSelect({variables:this.subject_variables,target:"email_template.subject"}))),n.push("  </div>\n  <div class='toggle' style='"+t(e(this.templateContentStyles()))+"'>\n    <label class='secondary' for='email_template.body'>Body</label>\n    <textarea id='template-body' name='email_template.body' rows='"+t(e(15))+"'>"+i(t(e(null!=(r=this.emailTemplate)?r.body:void 0)))+"</textarea>"),n.push("    "+e(this.variablesSelect({variables:this.body_variables,target:"email_template.body"}))),n.push("  </div>\n  <input type='hidden' name='email_template.purpose' value='new_ticket_notification'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/dns_check"]=function(e){return function(){var e,t,n,i,o,r;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.model.get("email").replace(/.*@/,""),r=function(){switch(this.model.get("spf_state")){case"active":return"OK";case"inactive":return"invalid";default:return"not found"}}.call(this),i=function(){switch(this.model.get("dkim_state")){case"active":return"OK";case"inactive":return"invalid";default:return"not found"}}.call(this),n.push("<div class='dnsCheck_info'>"),n.push("  "+t(e("To make Groove completely invisible to your customers, you can setup special DNS records on "+o))),n.push("  <a href='https://help.groovehq.com/knowledge_base/topics/how-to-add-groove-to-your-spf-records' target='_blank'>More info</a>\n</div>\n<div class='dnsCheck_indicators'>\n  <div class='"+t(e(r))+"' id='spf'>"+t(e("SPF record "+r))+"</div>\n  <div class='"+t(e(i))+"' id='dkim'>"+t(e("DKIM record "+i))+"</div>\n  <button class='form-button' id='check_dns'>Check DNS</button>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/everyone"]=function(e){return function(){var e;return e=[],e.push("<input type='hidden' name='user_ids' value=''>\n<input type='hidden' name='group_ids' value=''>"),e.join("\n")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/groups"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='check-columns'>"),u=this.groupings,a=0,c=u.length;c>a;a++){for(s=u[a],n.push("  <div class='column'>"),l=0,p=s.length;p>l;l++)o=s[l],r="group-"+o.id,i=this.inArray(this.ids,o.id)?"checked":!1,n.push("    <label for='"+t(e(r))+"'>\n      <input id='"+t(e(r))+"' type='radio' name='group_ids' value='"+t(e(o.id))+"' checked='"+t(e(i))+"'>"),n.push("      "+t(e(o.name))),n.push("    </label>");n.push("    <input type='hidden' name='"+t(e(this.hiddenType))+"_ids' value=''>\n  </div>")}return n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/me"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input type='hidden' name='user_ids' value='"+t(e(this.agentID))+"'>\n<input type='hidden' name='group_ids' value=''>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/outgoing_email_server"]=function(e){return function(){var e;return e=[],e.push("<div id='send_email'>\n  <label for='has_custom_outgoing'>Send Email</label>\n  <div>\n    <div id='smtp_meta'></div>\n    <select id='has_custom_outgoing'>\n      <option value='0'>via Groove's SMTP servers powered by SendGrid</option>\n      <option value='1'>via my own custom SMTP servers</option>\n    </select>\n    <a class='help qtip-tipsy' href='http://groove.groovehq.com/knowledge_base/topics/applying-custom-smtp-settings-to-your-mailbox' title='Click here to view the SMTP guide' target='_blank'>?</a>\n  </div>\n</div>\n<div class='dnsCheck' id='dns_check'></div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/outgoing_email_server_form"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input type='text' readonly='readonly' style='display:none;'>\n<input type='password' readonly='readonly' style='display:none;'>\n<div id='smtp_address_control'>\n  <label for='smtp_host'>Domain</label>\n  <div>\n    <input id='smtp_address' type='text' name='outgoing_email_server_attributes.address' value='"+t(e(this.address))+"' style='width: 260px;'>\n    &nbsp;&nbsp;Port"),""===(i=this.port)||"465"===i||"587"===i?n.push("    "+e(this.portDropdown({port:this.port,isPort:this.isPort}))):n.push("    "+e(this.portInput({port:this.port}))),n.push("  </div>\n</div>\n<div id='smtp_login_control'>\n  <label for='smtp_username'>Login</label>\n  <div>\n    <input id='smtp_login' type='text' name='outgoing_email_server_attributes.user_name' value='"+t(e(this.user_name))+"' autocomplete='off'>\n  </div>\n</div>\n<div id='smtp_pass_control'>\n  <label for='smtp_pass'>Password</label>\n  <div>\n    <input id='smtp_password' type='password' name='outgoing_email_server_attributes.password' value='"+t(e(this.password))+"' autocomplete='off'>\n  </div>\n</div>\n<div id='smtp_authentication_mechanism'>\n  <label for='smtp_authentication'>Authentication</label>\n  <div>\n    <select id='smtp_authentication' name='outgoing_email_server_attributes.authentication'>\n      <option value='plain' selected='"+t(e(this.isAuthentication("plain")))+"'>PLAIN</option>\n      <option value='login' selected='"+t(e(this.isAuthentication("login")))+"'>LOGIN</option>\n      <option value='cram_md5' selected='"+t(e(this.isAuthentication("cram_md5")))+"'>CRAM MD5</option>\n      <option value='digest_md5' selected='"+t(e(this.isAuthentication("digest_md5")))+"'>DIGEST MD5</option>\n    </select>\n    <label id='smtp_authentication_control' for='smtp_ssl_checkbox'>\n      <input id='smtp_ssl' type='hidden' name='outgoing_email_server_attributes.use_ssl' value='0'>\n      <input id='smtp_ssl_checkbox' type='checkbox'>\n      Connect using SSL\n    </label>\n  </div>\n</div>\n<div id='smtp_test_connection'>\n  <div>\n    <button class='form-button' id='smtp_test' href='#'>Test Connection</button>\n    <input id='smtp_verified' type='hidden' name='outgoing_email_server_attributes.verified' value='0'>\n    <div id='smtp_test_result'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/outgoing_email_server_meta"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input id='smtp_id' name='outgoing_email_server_attributes.id' value='"+t(e(this.id))+"' type='hidden'>\n<input id='destroy_email_server' name='outgoing_email_server_attributes._destroy' value='0' type='hidden'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/outgoing_email_server_port_dropdown"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<select id='smtp_port' name='outgoing_email_server_attributes.port' style='width: 80px;'>\n  <option value='587' selected='"+t(e(this.isPort("587")))+"'>587</option>\n  <option value='465' selected='"+t(e(this.isPort("465")))+"'>465</option>\n  <option value='custom'>Enter custom port</option>\n</select>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/outgoing_email_server_port_input"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input id='smtp_port' type='text' name='outgoing_email_server_attributes.port' value='"+t(e(this.port))+"' style='width:80px'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/permissions"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div>\n  <label>Who can see this?</label>\n  <div>"),t.push("    "+e(this.restrictionSelect())),t.push("    <div id='permissions'></div>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/restriction_select"]=function(e){return function(){var e,t,n,i,o,r,s;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<select id='restriction_type' name='restriction_type'>"),o=this.restrictionOptions;for(i in o)s=o[i],r=i===this.restrictionType?"selected":!1,n.push("  <option value='"+t(e(i))+"' selected='"+t(e(r))+"'>"+t(e(s))+"</option>");return n.push("</select>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/mailbox/users"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='check-columns'>"),c=this.groupings,r=0,a=c.length;a>r;r++){for(o=c[r],n.push("  <div class='column'>"),s=0,l=o.length;l>s;s++)p=o[s],u="user-"+p.id,i=this.inArray(this.ids,p.id)?"checked":!1,n.push("    <label for='"+t(e(u))+"'>\n      <input id='"+t(e(u))+"' type='checkbox' name='user_ids' value='"+t(e(p.id))+"' checked='"+t(e(i))+"'>"),n.push("      "+t(e(p.name))),n.push("    </label>");n.push("    <input type='hidden' name='"+t(e(this.hiddenType))+"_ids' value=''>\n  </div>")}return n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/notifications"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Email Me When</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' method='POST'>\n      <fieldset>\n        <div>\n          <label>\n            Ticketing\n          </label>\n          <div class='deep-check'>\n            <p>\n              <label>\n                A ticket is created by\n              </label>\n              <span class='deep'>"),t.push("                "+e(this.checkbox({name:"new_ticket",label:"anyone"}))),t.push("              </span>\n            </p>\n            <p>\n              <label>\n                A ticket is assigned to\n              </label>\n              <span class='deep'>"),t.push("                "+e(this.checkbox({name:"ticket_assigned_to_me",label:"me"}))),t.push("                "+e(this.checkbox({name:"ticket_assigned_to_my_group",label:"my group"}))),t.push("                "+e(this.checkbox({name:"ticket_assigned_to_other_agent",label:"another agent"}))),t.push("              </span>\n            </p>\n            <p>\n              <label>\n                A customer replies to a ticket assigned to\n              </label>\n              <span class='deep'>"),t.push("                "+e(this.checkbox({name:"enduser_replies_to_my_ticket",label:"me"}))),t.push("                "+e(this.checkbox({name:"enduser_replies_to_ticket_assigned_to_my_group",label:"my group"}))),t.push("                "+e(this.checkbox({name:"enduser_replies_to_ticket_assigned_to_other_agent",label:"another agent"}))),t.push("                "+e(this.checkbox({name:"enduser_replies_to_unassigned_ticket",label:"anyone"}))),t.push("              </span>\n            </p>\n            <p>\n              <label>\n                An agent replies or adds a note to a ticket assigned to\n              </label>\n              <span class='deep'>"),t.push("                "+e(this.checkbox({name:"agent_replies_to_my_ticket",label:"me"}))),t.push("                "+e(this.checkbox({name:"agent_replies_to_ticket_assigned_to_my_group",label:"my group"}))),t.push("                "+e(this.checkbox({name:"agent_replies_to_ticket_assigned_to_other_agent",label:"another agent"}))),t.push("                "+e(this.checkbox({name:"agent_replies_to_unassigned_ticket",label:"anyone"}))),t.push("              </span>\n            </p>\n            <p>\n              <label>\n                A customer rates a ticket assigned to\n              </label>\n              <span class='deep'>"),t.push("                "+e(this.checkbox({name:"enduser_rates_ticket_assigned_to_me",label:"me"}))),t.push("                "+e(this.checkbox({name:"enduser_rates_ticket_assigned_to_my_group",label:"my group"}))),t.push("                "+e(this.checkbox({name:"enduser_rates_ticket_assigned_to_other_agent",label:"another agent"}))),t.push("              </span>\n            </p>\n          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Notification Settings'>\n      </div>\n    </form>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/preferences"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>My Preferences</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' method='POST'>\n      <fieldset>\n        <div>\n          <label>\n            Status\n          </label>\n          <div class='sentence' style='margin-top: 2px;'>\n            <span style='margin-right: -0.5em;'>I am</span>\n            <select class='auto-width' id='available' name='availability'>\n              <option value='available' selected='"+t(e("available"===this.availability))+"'>available</option>\n              <option value='unavailable' selected='"+t(e("unavailable"===this.availability))+"'>not available</option>\n            </select>\n            <span style='margin-left: -0.5em;'>to answer tickets.</span>\n            <p class='help-block'>Change to <b>not available</b> and tickets assigned to you that need attention will be unassigned.</p>\n          </div>\n        </div>\n        <div>\n          <label>\n            Tickets\n          </label>\n          <div class='deep-check'>\n            <p>\n              <label>\n                After I reply or add a note to a ticket\n              </label>\n              <span class='deep'>"),n.push("                "+e(this.checkbox({name:"reassign_ticket_on_reply",label:"assign it to me"}))),n.push("                "+e(this.checkbox({name:"open_folder_on_ticket_reply",label:"take me back to all tickets"}))),n.push("              </span>\n            </p>\n            <p>\n              <label>\n                After I update a ticket without replying or adding a note\n              </label>\n              <span class='deep'>"),n.push("                "+e(this.checkbox({name:"open_folder_on_ticket_save",label:"take me back to all tickets"}))),n.push("              </span>\n            </p>\n          </div>\n        </div>\n        <div>\n          <label>\n            Undo send\n          </label>\n          <div class='sentence'>\n            <input class='ProgressiveDisclosure' id='undo_send' type='checkbox'>\n            <label for='undo_send'>Delay sending my replies</label>\n            <span class='ProgressiveDisclosure-secondary'>\n              <span style='margin-right: -0.5em;'>for</span>\n              <select class='auto-width' id='undo_send_delay' name='undo_send_delay'>"),s=[5,10,15,30],o=0,r=s.length;r>o;o++)i=s[o],i===this.undoDelay?n.push("                <option value='"+t(e(i))+"' selected>"+i+" seconds</option>"):n.push("                <option value='"+t(e(i))+"'>"+i+" seconds</option>");return n.push("              </select>\n            </span>\n          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Preferences'>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/profile"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Edit Your Profile</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' enctype='multipart/form-data' method='POST'>\n      <fieldset>\n        <div class='avatar'>\n          <label for='avatar'>\n            <image src='/assets/settings/avatar-placeholder.png' width='50' height='50'></image>\n          </label>\n          <div>\n            <input id='avatar' type='file' name='profile[avatar]'>\n            <p class='help-block'>Will be resized to 50x50. PNG, JPG & GIF accepted.</p>\n          </div>\n        </div>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value='"+t(e(this.profile.get("name")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='title'>Title</label>\n          <div>\n            <input id='title' type='text' name='title' placeholder='(optional)' value='"+t(e(this.profile.get("title")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='email'>Email</label>\n          <div>\n            <input id='email' type='email' name='email' value='"+t(e(this.profile.get("email")))+"'>\n          </div>\n        </div>"),GrooveClient.data.agents.length>1&&n.push("        <div>\n          <label for='username_text'>Username</label>\n          <div>\n            <input id='username_text' type='text' name='username_text' value='@"+t(e(this.profile.get("username_text")))+"' placeholder='@username'>\n            <p class='help-block'>So other agents can @mention you in notes.</p>\n          </div>\n        </div>"),n.push("      </fieldset>\n      <fieldset>\n        <div>\n          <label for='alternate-emails'>Alternate Emails</label>\n          <div>\n            <input id='alternate_emails_list' type='text' name='alternate_emails_list' value='"+t(e(this.profile.get("alternate_emails_list")))+"'>\n            <p class='help-block'>Other email addresses that you might use when forwarding or replying to notifications. Comma separated.</p>\n          </div>\n        </div>\n        <div>\n          <label for='twitter_username'>Twitter</label>\n          <div>\n            <input id='twitter_username' type='text' name='twitter_username' value='@"+t(e(this.profile.get("twitter_username")))+"' placeholder='@username'>\n            <p class='help-block'>Your Twitter account handle</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='timezone'>Timezone</label>\n          <div>\n            <select id='timezone' name='timezone'>"),r=this.timezones,i=0,o=r.length;o>i;i++)s=r[i],n.push("              <option value='"+t(e(s.name))+"'>"+t(e(s.name_with_offset))+"</option>");return n.push("            </select>\n            <p class='help-block'>Used to personalize all times displayed in the app.</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='password'>Password</label>\n          <div>\n            <input id='password' type='password' name='password' placeholder='Enter a new password' autocomplete='off'>\n          </div>\n        </div>\n        <div>\n          <label for='password_confirmation'>Confirmation</label>\n          <div>\n            <input id='password_confirmation' type='password' name='password_confirmation' placeholder='Confirm your new password' autocomplete='off'>\n          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Profile'>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/rule"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>"+t(e(this.pageTitle()))+"</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' enctype='multipart/form-data' method='POST'>\n      <fieldset>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value='"+t(e(this.model.get("name")))+"'>\n          </div>\n        </div>\n        <div>\n          <label for='description'>Description</label>\n          <div>\n            <textarea id='rule-description' name='description' rows='5'>"+i(t(e(this.model.get("description"))))+"</textarea>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset id='rule-conditions'></fieldset>\n      <fieldset id='rule-actions'></fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Rule'>\n        <span>&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;</span>\n        <a class='cancel-save' href='#cancel'>Cancel</a>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/rules"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar fixed-header full-width'>\n  <h1 class='h1b'>All Rules</h1>\n  <div id='sortSearchResults'>\n    <ul class='unstyled'>\n      <li>\n        <span id='rules-info'>Note: Keep rules in the order that you want them processed.</span>\n      </li>\n    </ul>\n  </div>\n</div>\n<div class='box-c-main'>\n  <table class='many-simple-things rules'>\n    <tbody>"),r=this.rules,i=0,o=r.length;o>i;i++)s=r[i],n.push("      <tr class='"+["rule","sortable",""+t(e(s.get("active")?!1:"weak"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-rule-id='"+t(e(s.id))+"'>\n        <td class='name'>\n          <a href='/groove_client/settings/ticketing/rules/"+t(e(s.id))+"'>\n            <strong>"+t(e(s.get("name")))+"</strong>\n          </a>\n        </td>\n        <td class='actions tall'>\n          <a class='toggle' href='#' title='Disable this rule' data-rule-id='"+t(e(s.id))+"'>"),n.push("            "+t(e(s.get("active")?"Disable":"Activate"))),n.push("          </a>\n          <a class='delete' href='#' title='Permanently delete this rule' data-rule-id='"+t(e(s.id))+"'>Delete</a>\n        </td>\n      </tr>");return n.push("    </tbody>\n  </table>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/rules/action"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,
e=window.HAML.cleanValue,n=[],n.push("<span class='start'>\n  <select class='action-type' name='actions["+t(e(this.index))+"].type'>\n    <option value=''>Select an action...</option>"),n.push("    "+e(this.selectOptions({options:null!=(i=this.variables)?i.actions:void 0,selected:this.model.get("type")}))),n.push("  </select>\n</span>\n<select class='action-value' name='actions["+t(e(this.index))+"].value' style='display: none'></select>\n<input class='action-value' type='text' name='actions["+t(e(this.index))+"].value' style='display: none'>\n<select class='action-agent' name='actions["+t(e(this.index))+"].to_agent' style='display: none'></select>\n<input type='hidden' name='actions["+t(e(this.index))+"].id' value='"+t(e(this.model.get("id")))+"'>\n<a class='delete' href='#' title='Remove this action' style='display: none'>Delete</a>\n<div class='blocked'>\n  <textarea class='action-value' id='email-body-"+this.index+"' name='actions["+t(e(this.index))+"].value' rows='"+t(e(5))+"' style='display: none' placeholder='Type email body here&hellip;'></textarea>"),n.push("  "+e(this.variablesSelect({target:"actions["+this.index+"].value",target_id:"email-body-"+this.index}))),n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/rules/actions"]=function(e){return function(){var e;return e=[],e.push("<div>\n  <label for='then'>Then</label>\n  <div id='add-actions-container'>\n    <button class='form-button' id='add-action' href='#'>Add Action</button>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/rules/condition"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<span class='start'>\n  <select class='rule-condition' name='conditions["+t(e(this.index))+"].param'>\n    <option value=''>Select a condition..."),n.push("      "+e(this.selectOptions({options:null!=(i=this.variables)?i.conditions:void 0,selected:this.model.get("param")}))),n.push("    </option>\n  </select>\n</span>\n<select class='rule-operator' name='conditions["+t(e(this.index))+"].operator' style='display: none'></select>\n<select class='rule-value' name='conditions["+t(e(this.index))+"].value' style='display: none'></select>\n<input class='rule-value' type='text' name='conditions["+t(e(this.index))+"].value' style='display: none'>\n<input type='hidden' name='conditions["+t(e(this.index))+"].id' value='"+t(e(this.model.get("id")))+"'>\n<a class='delete' href='#' title='Remove this condition'>Delete</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/checkbox"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i=this.attributes[this.name]?"checked":!1,o=i?1:0,n.push("<label for='"+t(e(this.name))+"'>\n  <input id='"+t(e(this.name))+"' type='checkbox' name='"+t(e(this.namePrefix))+t(e(this.name))+"' checked='"+t(e(i))+"' value='"+t(e(o))+"'>"),n.push("  "+t(e(this.label))),n.push("</label>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/conditions"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div>\n  <label for='match_type'>When</label>\n  <div class='sentence'>\n    <label for='match_type'>a ticket matches</label>\n    <select id='match_type' name='match_type'>"+e(this.matchTypeOptions)+"</select>\n    <label for='match_type'>of the following:</label>\n  </div>\n  <div id='add-condition-container'>\n    <button class='form-button' id='add-condition' href='#'>Add Condition</button>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/destroy"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input class='destroy' type='hidden' name='"+t(e(this.name))+"[_destroy]' value='"+t(e(1))+"' role='destroy'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/edit_in_place"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push(""+t(e(this.title))),n.push("<a class='edit-in-place-link'>edit</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/hidden_input"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input id='"+t(e(this.name))+"' type='hidden' name='"+t(e(this.name))+"' value='"+t(e(this.attributes[this.name]?1:0))+"'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/permissions/checkbox_columns"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='check-columns'>\n  <input type='hidden' name='"+t(e(this.permittableType))+"_ids' value=''>\n  <input type='hidden' name='"+t(e(this.removePermittableType))+"_ids' value=''>"),u=this.columns,r=0,a=u.length;a>r;r++){for(o=u[r],n.push("  <div class='column'>"),s=0,l=o.length;l>s;s++)c=o[s],p=this.permittableType+"_"+c.id,i=_.contains(this.ids,c.id)?"checked":!1,n.push("    <label for='"+t(e(p))+"'>\n      <input id='"+t(e(p))+"' type='checkbox' name='"+t(e(this.permittableType))+"_ids[]' value='"+t(e(c.id))+"' checked='"+t(e(i))+"'>"),n.push("      "+t(e(c.get("name")))),n.push("    </label>");n.push("  </div>")}return n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/permissions/everyone"]=function(e){return function(){var e;return e=[],e.push("<input type='hidden' name='user_ids' value=''>\n<input type='hidden' name='group_ids' value=''>"),e.join("\n")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/permissions/me"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input type='hidden' name='user_ids' value='"+t(e(this.userId))+"'>\n<input type='hidden' name='group_ids' value=''>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/permissions/permissions"]=function(e){return function(){var e,t,n,i,o,r,s;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <label for='the-who'>Who can see this?</label>\n  <div>\n    <select id='restriction_type' name='restriction_type'>"),o=this.restrictionOptions;for(i in o)s=o[i],r=i===this.restrictionType?"selected":!1,n.push("      <option value='"+t(e(i))+"' selected='"+t(e(r))+"'>"+t(e(s))+"</option>");return n.push("    </select>\n    <div class='permission-suboptions'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/select_options"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.options,i=0,o=s.length;o>i;i++)r=s[i],a=String(r.value)===String(this.selected)?"selected":!1,n.push("<option value='"+t(e(r.value))+"' selected='"+t(e(a))+"'>"+t(e(r.name))+"</option>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/shared/variables_select"]=function(e){return function(){var e,t,n,i,o,r;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul class='side-actions'>\n  <li>\n    <select class='variable-inserter' id='insert-subject' name='insert-subject' data-target='"+t(e(this.target))+"' data-target-id='"+t(e(this.target_id))+"'>\n      <option value=''>Insert Variable</option>"),i=this.variables;for(r in i)o=i[r],n.push("      <option value='"+t(e(r))+"'>"+t(e(o))+"</option>");return n.push("    </select>\n  </li>\n</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Slack Settings</h1>\n  </div>\n  <div class='has-fixed-header'>"),this.needsSetup&&n.push("    "+e(this.setupMessage())),n.push("    <form class='settings'>\n      <fieldset>\n        <div>\n          <label for='slack-channels'>Channel</label>\n          <div id='channel-dropdown-container' data-id='"+t(e(null!=(c=this.channel)?c.id:void 0))+"'>\n            <select id='slack-channels' name='channels[0][slack_id]' data-original='"+t(e(null!=(p=this.channel)?p.slack_id:void 0))+"'>\n              <option>Loading channels from Slack...</option>\n            </select>"),this.channel&&n.push("            <input id='slack-channel-id' type='hidden' name='channels[0][id]' value='"+t(e(this.channel.id))+"'>"),n.push("          </div>\n        </div>\n        <div id='mailbox-settings'>\n          <label for='email'>Mailboxes</label>\n          <div>"),u=this.mailboxes;for(o in u)d=u[o],r=d.id,l=d.name,i=d.email,s=d.isSelected,f=d.settings,n.push("            <label class='row' for='mailbox_settings["+t(e(o))+"][mailbox_id]' data-id='"+t(e(null!=f?f.id:void 0))+"'>\n              <input id='mailbox_settings["+o+"][mailbox_id]' type='checkbox' name='mailbox_settings["+t(e(o))+"][mailbox_id]' value='"+t(e(r))+"' checked='"+t(e(s))+"'>"),n.push("              "+t(e(l))),n.push("              <span class='emailAddress'>"+t(e(i))+"</span>"),f&&n.push("              <input type='hidden' name='mailbox_settings["+t(e(o))+"][id]' value='"+t(e(f.id))+"'>"),n.push("            </label>");n.push("          </div>\n        </div>\n      </fieldset>\n      <fieldset id='slack-notifications'>\n        <div>\n          <label for='slack-notifications'>Notifications</label>\n          <div>"),h=this.notifications;for(o in h)m=h[o],r=m.id,g=m.type,a=m.label,s=m.isSelected,n.push("            <label for='notifications["+t(e(o))+"][type]' data-id='"+t(e(r))+"'>\n              <input id='notifications["+o+"][type]' type='checkbox' name='notifications["+t(e(o))+"][type]' value='"+t(e(g))+"' checked='"+t(e(s))+"'>"),n.push("              "+t(e(a))),r&&n.push("              <input type='hidden' name='notifications["+t(e(o))+"][id]' value='"+t(e(r))+"'>"),n.push("            </label>");return n.push("          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Changes'>\n      </div>\n      <fieldset class='danger-zone'>\n        <legend>Danger Zone</legend>\n        <div>\n          <label for='uninstall-slack'>Uninstall Slack</label>\n          <a class='danger form-button' id='uninstall-slack' href='#'>Uninstall Slack Now</a>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack/channel_options"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<option>Select Slack Channel</option>"),s=this.channels,o=0,r=s.length;r>o;o++)i=s[o],c=i.get("slack_id"),l=c===(null!=(a=this.original_channel)?a.slack_id:void 0)?"selected":!1,n.push("<option value='"+t(e(c))+"' selected='"+t(e(l))+"'>"+t(e("#"+i.get("name")))+"</option>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack/destroy_profile"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<input type='hidden' name='profiles["+t(e(this.index))+"][id]' value='"+t(e(this.id))+"' role='destroy'>\n<input type='hidden' name='profiles["+t(e(this.index))+"][_destroy]' value='"+t(e(1))+"' role='destroy'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack/error"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Slack Error</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <div id='slack-error'>"),t.push("      "+e(this.error())),t.push("    </div>\n  </div>\n</div>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack/selected_profile"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='username' data-cid='"+t(e(this.cid))+"'>"),n.push("  "+t(e("@"+this.username))),this.id||n.push("  <input type='hidden' name='profiles["+t(e(this.index))+"][username]' value='"+t(e(this.username))+"'>\n  <input type='hidden' name='profiles["+t(e(this.index))+"][slack_id]' value='"+t(e(this.slack_id))+"'>"),n.push("  <a href='#deselect'>reset</a>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack/setup_message"]=function(e){return function(){var e;return e=[],e.push("<div id='needs-setup'>"),"archived_channel"===this.reason?e.push("  <strong>The Slack channel you were using has been archived.  Please update your channel.</strong>"):"inactive_account"===this.reason?e.push("  <strong>The Slack account you were using is inactive. Please update your account details.</strong>"):e.push("  <strong>Your Slack app has been disabled and will need to be reauthorized.</strong>\n  <a id='setup-mailbox' href='/slack/auth'>Click here to reauthorize.</a>"),e.push("</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack_profiles"]=function(e){return function(){var e,t,n,i,o,r;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <label for='profiles'>Agents</label>\n  <div>"),r=this.profiles;for(i in r)o=r[i],n.push("    <label class='profile row' data-index='"+t(e(i))+"'>\n      <span class='name'>"+t(e(o.name))+"</span>"),o.id?n.push("      "+e(this._selectedProfileTemplate(o))):n.push("      "+e(this.dropdown)),n.push("      <input type='hidden' name='profiles["+t(e(i))+"][agent_id]' role='agent_id' value='"+t(e(o.agent_id))+"' disabled>\n    </label>");return n.push("    <p class='help-block'>\n      Link everyone to their @name, and they'll receive @mentions in Slack. We linked everyone that uses the same email in both apps for you.\n    </p>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/slack_profiles_dropdown"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='username' role='selectUsername'>\n  <select>\n    <option>Select Slack Name</option>"),s=this.profiles,i=0,o=s.length;o>i;i++)r=s[i],n.push("    <option value='"+t(e(r.cid))+"'>"+t(e("@"+r.username))+"</option>");return n.push("  </select>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/style_guide"]=function(e){return function(){var e;return e=[],e.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <a class='nav-back-button' href='#'>\n      <span>Back</span>\n    </a>\n    <h1 class='h1b'>Edit Your Profile</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' data-remote method='post'>\n      <fieldset>\n        <div class='avatar'>\n          <label for='avatar'>\n            <img src='/assets/settings/avatar-placeholder.png' width='50' height='50' alt='Your avatar goes here' title='Your avatar goes here'>\n          </label>\n          <div>\n            <label class='form-button sky-blue' for='avatar'>Upload avatar</label>\n            <input id='avatar' type='file' name='avatar' style='display: none'>\n            <p class='help-block'>Avatar will be resized to 50x50. JPG, PNG, GIF accepted.</p>\n          </div>\n        </div>\n        <div>\n          <label for='name'>Name</label>\n          <div>\n            <input id='name' type='text' name='name' value:='Joe Existing'>\n          </div>\n        </div>\n        <div>\n          <label for='title'>Title</label>\n          <div>\n            <input id='title' type='text' name='title' placeholder='(optional)'>\n            <a class='help qtip-tipsy' href='#' title='Some helpful text goes here'>?</a>\n          </div>\n        </div>\n        <div class='error'>\n          <label for='email'>Email Address</label>\n          <div>\n            <input id='email' type='email' name='email'>\n            <p class='error-block'>can't be blank</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='alternate-emails'>Alternate Emails</label>\n          <div>\n            <input id='alternate-emails' type='text' name='alternate-emails'>\n            <p class='help-block'>Other email addresses that you might use when forwarding or replying to notifications. Comma separated.</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='email-signature-on'>Email Signature</label>\n          <div class='inline-radio toggle-switch'>\n            <label for='email-signature-on'>\n              <input class='toggle-on' id='email-signature-on' type='radio' name='email-signature-toggle' checked='checked'>\n              On\n            </label>\n            <label for='email-signature-off'>\n              <input class='toggle-off' id='email-signature-off' type='radio' name='email-signature-toggle'>\n              Off\n            </label>\n          </div>\n          <div class='toggle'>\n            <label class='secondary' for='email-signature-subject'>Subject</label>\n            <input id='email-signature-subject' type='text' name='email-signature-subject'>\n            <ul class='side-actions'>\n              <li>\n                <select id='insert-variable' name='insert-variable'>\n                  <option value=''>Insert Variable</option>\n                  <option value=''>First name</option>\n                  <option value=''>Last name</option>\n                  <option value=''>Full name</option>\n                </select>\n              </li>\n            </ul>\n          </div>\n          <div class='toggle'>\n            <label class='secondary' for='email-signature-body'>Body</label>\n            <textarea id='email-signature-body' name='email-signature-body' rows='5'></textarea>\n            <ul class='side-actions'>\n              <li>\n                <select id='insert-variable' name='insert-variable'>\n                  <option value=''>Insert Variable</option>\n                  <option value=''>First name</option>\n                  <option value=''>Last name</option>\n                  <option value=''>Full name</option>\n                </select>\n              </li>\n              <li>\n                <a href='#'>Another Action</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='logo'>Logo</label>\n          <div>\n            <input id='logo' type='file' name='logo'>\n            <p class='help-block'>PNG, JPG, or GIF. Maximum of 5mb.</p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='after-reply'>Tickets</label>\n          <div class='sentence'>\n            <label for='after-reply'>After I reply</label>\n            <select class='auto-width' id='after-reply' name='after-reply'>\n              <option value=''>assign it to me</option>\n              <option value=''>do nothing</option>\n            </select>\n            <label for='after-reply-redirect'>and take me</label>\n            <select class='auto-width' id='after-reply-redirect' name='after-reply-redirect'>\n              <option value=''>to all tickets</option>\n              <option value=''>to the full conversation</option>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='hours-start'>Business Hours</label>\n          <div class='inline-checkbox'>\n            <label for='mon'>\n              <input id='mon' type='checkbox' name='mon' checked='checked'>\n              Mon\n            </label>\n            <label for='tues'>\n              <input id='tues' type='checkbox' name='tues' checked='checked'>\n              Tues\n            </label>\n            <label for='wed'>\n              <input id='wed' type='checkbox' name='wed'>\n              Wed\n            </label>\n            <label for='thurs'>\n              <input id='thurs' type='checkbox' name='thurs' checked='checked'>\n              Thurs\n            </label>\n            <label for='fri'>\n              <input id='fri' type='checkbox' name='fri' checked='checked'>\n              Fri\n            </label>\n            <label for='sat'>\n              <input id='sat' type='checkbox' name='sat' checked='checked'>\n              Sat\n            </label>\n            <label for='sun'>\n              <input id='sun' type='checkbox' name='sun' checked='checked'>\n              Sun\n            </label>\n          </div>\n          <div class='sentence'>\n            <span class='start'>\n              <select class='auto-width' id='hours-start' name='hours-start'>\n                <option value='1:00'>1:00 AM</option>\n                <option value='2:00'>2:00 AM</option>\n                <option value='3:00'>3:00 AM</option>\n                <option value='4:00'>4:00 AM</option>\n                <option value='5:00' selected>5:00 AM</option>\n                <option value='6:00'>6:00 AM</option>\n                <option value='7:00'>7:00 AM</option>\n                <option value='8:00'>8:00 AM</option>\n                <option value='9:00'>9:00 AM</option>\n                <option value='10:00'>10:00 AM</option>\n                <option value='11:00'>11:00 AM</option>\n                <option value='12:00'>12:00 PM</option>\n                <option value='13:00'>1:00 PM</option>\n                <option value='14:00'>2:00 PM</option>\n                <option value='15:00'>3:00 PM</option>\n                <option value='16:00'>4:00 PM</option>\n                <option value='17:00'>5:00 PM</option>\n                <option value='18:00'>6:00 PM</option>\n                <option value='19:00'>7:00 PM</option>\n                <option value='20:00'>8:00 PM</option>\n                <option value='21:00'>9:00 PM</option>\n                <option value='22:00'>10:00 PM</option>\n                <option value='23:00'>11:00 PM</option>\n                <option value='24:00'>12:00 AM</option>\n              </select>\n            </span>\n            <label for='hours-end'>to</label>\n            <select class='auto-width' id='hours-end' name='hours-end'>\n              <option value='1:00'>1:00 AM</option>\n              <option value='2:00'>2:00 AM</option>\n              <option value='3:00'>3:00 AM</option>\n              <option value='4:00'>4:00 AM</option>\n              <option value='5:00'>5:00 AM</option>\n              <option value='6:00'>6:00 AM</option>\n              <option value='7:00'>7:00 AM</option>\n              <option value='8:00'>8:00 AM</option>\n              <option value='9:00'>9:00 AM</option>\n              <option value='10:00'>10:00 AM</option>\n              <option value='11:00'>11:00 AM</option>\n              <option value='12:00'>12:00 PM</option>\n              <option value='13:00'>1:00 PM</option>\n              <option value='14:00'>2:00 PM</option>\n              <option value='15:00'>3:00 PM</option>\n              <option value='16:00'>4:00 PM</option>\n              <option value='17:00'>5:00 PM</option>\n              <option value='18:00'>6:00 PM</option>\n              <option value='19:00'>7:00 PM</option>\n              <option value='20:00'>8:00 PM</option>\n              <option value='21:00' selected>9:00 PM</option>\n              <option value='22:00'>10:00 PM</option>\n              <option value='23:00'>11:00 PM</option>\n              <option value='24:00'>12:00 AM</option>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='offline-timeout'>Chat</label>\n          <div class='sentence'>\n            <label for='offline-timeout'>Appear offline when I am inactive for</label>\n            <input id='offline-timeout' type='text' name='offline-timeout' value='15' style='width: 50px'>\n            minutes\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <div>\n            <label for='admin'>\n              <input id='admin' type='checkbox' name='admin'>\n              This person is an admin\n            </label>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label>\n            Notify Me When&hellip;\n            <a class='help qtip-tipsy' href='#' title='Some helpful text goes here'>?</a>\n          </label>\n          <div>\n            <label for='notification-1'>\n              <input id='notification-1' type='checkbox' name='notification-1'>\n              We receive a new support ticket\n            </label>\n            <label for='notification-2'>\n              <input id='notification-2' type='checkbox' name='notification-2'>\n              A support ticket is assigned to me\n            </label>\n            <label for='notification-3'>\n              <input id='notification-3' type='checkbox' name='notification-3'>\n              A ticket receives a reply\n            </label>\n            <label for='notification-4'>\n              <input id='notification-4' type='checkbox' name='notification-4'>\n              I get tagged in a private note\n            </label>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label>\n            Email Me When A Ticket&hellip;\n          </label>\n          <div class='deep-check'>\n            <p>\n              <label for='notify-1'>\n                <input id='notify-1' type='checkbox' name='notify-1' checked='checked'>\n                is created\n              </label>\n            </p>\n            <p>\n              <label>is assigned to</label>\n              <span class='deep'>\n                <label for='notify-2-1'>\n                  <input id='notify-2-1' type='checkbox' name='notify-2-1'>\n                  me\n                </label>\n                <label for='notify-2-2'>\n                  <input id='notify-2-2' type='checkbox' name='notify-2-2'>\n                  my group\n                </label>\n                <label for='notify-2-3'>\n                  <input id='notify-2-3' type='checkbox' name='notify-2-3'>\n                  another agent\n                </label>\n              </span>\n            </p>\n            <p>\n              <label>has new customer response to</label>\n              <span class='deep'>\n                <label for='notify-3-1'>\n                  <input id='notify-3-1' type='checkbox' name='notify-3-1'>\n                  me\n                </label>\n                <label for='notify-3-2'>\n                  <input id='notify-3-2' type='checkbox' name='notify-3-2'>\n                  my group\n                </label>\n                <label for='notify-3-3'>\n                  <input id='notify-3-3' type='checkbox' name='notify-3-3'>\n                  another agent long label\n                </label>\n              </span>\n            </p>\n            <p>\n              <label>has a new agent reply or note</label>\n              <span class='deep'>\n                <label for='notify-4-1'>\n                  <input id='notify-4-1' type='checkbox' name='notify-4-1'>\n                  me\n                </label>\n                <label for='notify-4-2'>\n                  <input id='notify-4-2' type='checkbox' name='notify-4-2'>\n                  my group\n                </label>\n                <label for='notify-4-3'>\n                  <input id='notify-4-3' type='checkbox' name='notify-4-3'>\n                  another agent\n                </label>\n              </span>\n            </p>\n            <p>\n              <label>is rated when assigned to</label>\n              <span class='deep'>\n                <label for='notify-5-1'>\n                  <input id='notify-5-1' type='checkbox' name='notify-5-1'>\n                  me\n                </label>\n                <label for='notify-5-2'>\n                  <input id='notify-5-2' type='checkbox' name='notify-5-2'>\n                  my group\n                </label>\n              </span>\n            </p>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='timezone'>Timezone</label>\n          <div>\n            <select id='timezone' name='timezone'>\n              <option value='-12.0'>(GMT -12:00) Eniwetok, Kwajalein</option>\n              <option value='-11.0'>(GMT -11:00) Midway Island, Samoa</option>\n              <option value='-10.0'>(GMT -10:00) Hawaii</option>\n              <option value='-9.0'>(GMT -9:00) Alaska</option>\n              <option value='-8.0'>(GMT -8:00) Pacific Time (US & Canada)</option>\n              <option value='-7.0'>(GMT -7:00) Mountain Time (US & Canada)</option>\n              <option value='-6.0'>(GMT -6:00) Central Time (US & Canada), Mexico City</option>\n              <option value='-5.0'>(GMT -5:00) Eastern Time (US & Canada), Bogota, Lima</option>\n              <option value='-4.0'>(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz</option>\n              <option value='-3.5'>(GMT -3:30) Newfoundland</option>\n              <option value='-3.0'>(GMT -3:00) Brazil, Buenos Aires, Georgetown</option>\n              <option value='-2.0'>(GMT -2:00) Mid-Atlantic</option>\n              <option value='-1.0'>(GMT -1:00 hour) Azores, Cape Verde Islands</option>\n              <option value='0.0'>(GMT) Western Europe Time, London, Lisbon, Casablanca</option>\n              <option value='1.0'>(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris</option>\n              <option value='2.0'>(GMT +2:00) Kaliningrad, South Africa</option>\n              <option value='3.0'>(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg</option>\n              <option value='3.5'>(GMT +3:30) Tehran</option>\n              <option value='4.0'>(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi</option>\n              <option value='4.5'>(GMT +4:30) Kabul</option>\n              <option value='5.0'>(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent</option>\n              <option value='5.5'>(GMT +5:30) Bombay, Calcutta, Madras, New Delhi</option>\n              <option value='5.75'>(GMT +5:45) Kathmandu</option>\n              <option value='6.0'>(GMT +6:00) Almaty, Dhaka, Colombo</option>\n              <option value='7.0'>(GMT +7:00) Bangkok, Hanoi, Jakarta</option>\n              <option value='8.0'>(GMT +8:00) Beijing, Perth, Singapore, Hong Kong</option>\n              <option value='9.0'>(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk</option>\n              <option value='9.5'>(GMT +9:30) Adelaide, Darwin</option>\n              <option value='10.0'>(GMT +10:00) Eastern Australia, Guam, Vladivostok</option>\n              <option value='11.0'>(GMT +11:00) Magadan, Solomon Islands, New Caledonia</option>\n              <option value='12.0'>(GMT +12:00) Auckland, Wellington, Fiji, Ka</option>\n            </select>\n            <a class='help qtip-tipsy' href='#' title='Your timezone makes the times we display on this website accurate to your local timezone.'>?</a>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='the-who'>Who can see this?</label>\n          <div>\n            <select id='the-who' name='the-who'>\n              <option value='everyone'>Everyone</option>\n            </select>\n            <div class='check-columns'>\n              <div class='column'>\n                <label for='kevin'>\n                  <input id='kevin' type='checkbox' name='kevin'>\n                  Kevin Holesh\n                </label>\n                <label for='chris'>\n                  <input id='chris' type='checkbox' name='chris'>\n                  Chris Kilmer\n                </label>\n                <label for='alex'>\n                  <input id='alex' type='checkbox' name='alex'>\n                  Alex Turnbull\n                </label>\n                <label for='jordan'>\n                  <input id='jordan' type='checkbox' name='jordan'>\n                  Jordan Glasner\n                </label>\n              </div>\n              <div class='column'>\n                <label for='longwell'>\n                  <input id='longwell' type='checkbox' name='longwell'>\n                  Jack Longwell With A Long Name\n                </label>\n                <label for='alex-p'>\n                  <input id='alex-p' type='checkbox' name='alex-p'>\n                  Alex Parker\n                </label>\n                <label for='bartek'>\n                  <input id='bartek' type='checkbox' name='bartek'>\n                  Bartek Grinkiewicz\n                </label>\n                <label for='len'>\n                  <input id='len' type='checkbox' name='len'>\n                  Len Markidan\n                </label>\n              </div>\n              <div class='column'>\n                <label for='adam'>\n                  <input id='adam' type='checkbox' name='adam'>\n                  Adam Pennacchio\n                </label>\n                <label for='john'>\n                  <input id='john' type='radio' name='john'>\n                  John Meyers-Rogers-Smith-Jones\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='password'>Password</label>\n          <div>\n            <input id='password' type='password' name='password' placeholder='Enter a new password'>\n          </div>\n        </div>\n        <div>\n          <div>\n            <input id='confirm-password' type='password' name='confirm-password' placeholder='Confirm your new password'>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='when'>When</label>\n          <div class='sentence'>\n            <label for='when'>a ticket matches</label>\n            <select class='auto-width' id='when' name='when'>\n              <option value='1'>all</option>\n            </select>\n            <label for='when'>of the following:</label>\n          </div>\n          <div class='sentence separated short'>\n            <span class='start'>\n              <select id='status' name='status'>\n                <option value='1'>Status</option>\n              </select>\n            </span>\n            <select id='direction' name='direction'>\n              <option value='1'>less than or equal to</option>\n            </select>\n            <select id='status' name='status'>\n              <option value='1'>Open</option>\n              <option value='2'>Closed</option>\n            </select>\n            <a class='delete' href='#' title='Remove this condition'>Delete</a>\n          </div>\n          <div class='sentence separated short'>\n            <span class='start'>\n              <select id='status' name='status'>\n                <option value='1'>Customer</option>\n              </select>\n            </span>\n            <select id='direction' name='direction'>\n              <option value='1'>is</option>\n            </select>\n            <select id='status' name='status'>\n              <option value='1'>Important</option>\n              <option value='2'>Closed</option>\n            </select>\n            <a class='delete' href='#' title='Remove this condition'>Delete</a>\n          </div>\n          <div class='sentence separated short'>\n            <span class='start'>\n              <select id='status' name='status'>\n                <option value='1'>Mailbox</option>\n              </select>\n            </span>\n            <select id='direction' name='direction'>\n              <option value='1'>is</option>\n            </select>\n            <select id='status' name='status'>\n              <option value='1'>Support</option>\n              <option value='2'>Closed</option>\n            </select>\n            <a class='delete' href='#' title='Remove this condition'>Delete</a>\n          </div>\n          <div>\n            <button class='form-button' id='add-condition' href='#'>Add Condition</button>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='then'>Then</label>\n          <div class='first sentence separated short'>\n            <span class='start'>\n              <select id='assign' name='assign'>\n                <option value='1'>Assign to agent</option>\n              </select>\n            </span>\n            <select id='to' name='to'>\n              <option value='1'>Adam Pennacchio</option>\n            </select>\n            <a class='delete' href='#' title='Remove this action'>Delete</a>\n          </div>\n          <div class='sentence separated short'>\n            <span class='start'>\n              <select id='label' name='label'>\n                <option value='1'>Add label</option>\n              </select>\n            </span>\n            <input id='label' type='text' name='label'>\n            <a class='delete' href='#' title='Remove this action'>Delete</a>\n          </div>\n          <div class='sentence separated short'>\n            <span class='start'>\n              <select id='email-to' name='email-to'>\n                <option value='1'>Send email to&hellip;</option>\n              </select>\n            </span>\n            <select id='to' name='to'>\n              <option value='1'>Adam Pennacchio</option>\n            </select>\n            <a class='delete' href='#' title='Remove this action'>Delete</a>\n            <div class='blocked'>\n              <textarea id='email-signature-body' name='email-signature-body' rows='5' placeholder='Type email body here&hellip;'></textarea>\n              <ul class='side-actions'>\n                <li>\n                  <select id='insert-variable' name='insert-variable'>\n                    <option value=''>Insert Variable</option>\n                    <option value=''>First name</option>\n                    <option value=''>Last name</option>\n                    <option value=''>Full name</option>\n                  </select>\n                </li>\n                <li>\n                  <a href='#'>Another Action</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div>\n            <button class='form-button' id='add-action' href='#'>Add Action</button>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset class='danger-zone'>\n        <legend>Danger zone</legend>\n        <div>\n          <label for='transfer-to'>Transfer account to&hellip;</label>\n          <div>\n            <select id='transfer-to' name='transfer-to'>\n              <option value='1'>Kevin Holesh</option>\n              <option value='2'>Jordan Glasner</option>\n              <option value='3'>Alex Parker</option>\n            </select>\n          </div>\n        </div>\n        <div>\n          <label for='cancel-account'>Manage your account</label>\n          <div>\n            <button class='danger form-button' id='cancel-account' href='#' name='cancel-account'>Cancel your account forever</button>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='long-label'>I am a field with a really really long label and I want to see how it looks when the label lines break</label>\n          <div>\n            <input id='long-label' type='text' name='long-label'>\n          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Profile'>\n        <a class='danger form-button' href='#'>Delete Everything</a>\n        <button class='form-button' href='#'>Cancel</button>\n      </div>\n    </form>\n  </div>\n</div>"),
e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["settings/ticketing"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<div class='tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <h1>Ticketing Preferences</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form class='settings' method='POST'>"),this.mailboxCount>1&&n.push("      <fieldset>\n        <div>\n          <label for='prefers_grouping_filters_by_mailbox'>Default View</label>\n          <div class='sentence'>\n            <label for='prefers_grouping_filters_by_mailbox'>Show mailboxes as</label>\n            <select class='auto-width' name='prefers_grouping_filters_by_mailbox'>\n              <option value='1' selected='"+t(e(this.groupAsSeparateInboxes))+"'>separate inboxes</option>\n              <option value='0' selected='"+t(e(!this.groupAsSeparateInboxes))+"'>a single inbox</option>\n            </select>\n          </div>\n        </div>\n      </fieldset>"),n.push("      <fieldset>\n        <div>\n          <label for='prefers_reply_button'>Reply Button</label>\n          <div class='sentence'>\n            <label for='prefers_reply_button'>defaults to</label>\n            <select class='auto-width' name='prefers_reply_button'>"),s=this.replyStates,o=0,r=s.length;r>o;o++)a=s[o],n.push("              <option value='"+t(e(a[1]))+"' selected='"+t(e(a[1]===this.replyButton))+"'>"+t(e(a[0]))+"</option>");return n.push("            </select>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n        <div>\n          <label for='spammer_emails'>Blacklist</label>\n          <div>\n            <textarea class='autogrow' id='spammer_emails' name='spammer_emails' rows='"+t(e(5))+"'>"+i(t(e(this.spammerEmails)))+"</textarea>\n            <p class='help-block'>\n              Sick of spammers? Add their emails here to zap them before they reach your inbox.\n            </p>\n          </div>\n        </div>\n      </fieldset>\n      <div class='actions'>\n        <input class='form-button sky-blue' type='submit' value='Save Preferences'>\n      </div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/add_labels_dropdown_form"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<form class='add-label-dropdown-form formtastic'>\n  <div class='arrow'>\n    <div class='inner'>\n      <input class='label-tokens param' name='name' placeholder='Add a label...' type='text' value='' data-all-labels='"+t(e(JSON.stringify(this.labels)))+"'>\n      <input class='submit' type='submit' value='Update'>\n    </div>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/comments_drop_down"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],null!=this.selectedValue&&n.push("<input type='hidden' value='"+t(e(this.selectedValue))+"' name='"+t(e(this.name))+"'>"),n.push("<a class='pretty-selector'>\n  <strong>\n    <span>"+t(e(this.selectedName))+"</span>\n  </strong>\n</a>\n<div class='pretty-options'>\n  <div class='pretty-options-inner'>\n    <ul>"),s=this.options,i=0,o=s.length;o>i;i++)a=s[i],r=a[0],c=a[1],l=a[2],n.push("      <li>\n        <a href='"+t(e(l))+"' target='_blank'>"+t(e(r))+"</a>\n      </li>");return n.push("    </ul>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/confirmation_modal"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-confirmation-modal'>\n  <h1 class='h1'>"),n.push("    "+t(e(this.title))),n.push("  </h1>\n  <p>"),n.push("    "+t(e(this.content))),n.push("  </p>\n  <div class='buttons'>\n    <button class='blue-button execute-callback'>"),n.push("      "+t(e(this.button))),n.push("    </button>\n    <a class='close-modal' href='#'>Cancel</a>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/drop_down"]=function(e){return function(){var e,t,n,i,o,r,s,a,l;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],null!=this.selectedValue&&n.push("<input type='hidden' value='"+t(e(this.selectedValue))+"' name='"+t(e(this.name))+"'>"),n.push("<a class='pretty-selector'>\n  <strong>\n    <span>"+t(e(this.selectedName))+"</span>\n  </strong>\n</a>\n<div class='pretty-options'>\n  <div class='pretty-options-inner'>\n    <ul>"),s=this.options,i=0,o=s.length;o>i;i++)a=s[i],r=a[0],l=a[1],n.push("      <li>\n        <a href='#' data-value='"+t(e(l))+"'>"+t(e(r))+"</a>\n      </li>");return n.push("    </ul>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/feedback_form"]=function(e){return function(){var e;return e=[],e.push("<form id='new-feedback'>\n  <textarea class='autogrow' id='content' placeholder='How can we make reports better?' name='body'></textarea>\n  <input type='submit' value='SEND FEEDBACK'>\n</form>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/flash_message"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='wrapper'>\n  <div class='"+this.message.type+"'>"),n.push("    "+t(e(this.message.body))),n.push("  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/mentions"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='InlineDropdown_header'>\n  Mention another agent\n  <div class='InlineDropdown_close'>cancel</div>\n</div>\n<ol class='AgentsList' reversed='reversed'></ol>\n<div class='InlineDropdown_input InlineDropdown_input-agents'>\n  <input id='mentionsInput' type='text' value='@"+t(e(this.text))+"'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/notification"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<div class='notification-popup-content'>\n  <h3 class='notification-popup-title'>"+e(this.title)+"</h3>"),this.message&&t.push("  <p class='notification-popup-message'>"+e(this.message)+"</p>"),t.push("</div>\n<a class='notification-close-button' href='#'>&times;</a>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/agent_menu"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul>\n  <li class='nav-i-agents unarchived'>\n    <a href='"+t(e(GrooveClient.path("agents")))+"'>Agents</a>\n    <ul></ul>\n  </li>\n  <li class='archived nav-i-agents'>\n    <a href='"+t(e(GrooveClient.path("agents")))+"'>Archived Agents</a>\n    <ul></ul>\n  </li>"),this.currentUser.hasFeature("ticketing")&&n.push("  <li id='nav-i-groups'>\n    <span>Groups</span>\n    <ul></ul>\n  </li>"),n.push("  <li class='agent nav-i-add'>\n    <a href='#'>Add an Agent</a>\n  </li>"),this.currentUser.hasFeature("ticketing")&&n.push("  <li class='nav-i-add'>\n    <a class='fancybox' href='/groups/new'>Create a Group</a>\n  </li>"),n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/customer_apps"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],u=this.app_installations,s=0,l=u.length;l>s;s++)a=u[s],i=a.get("app_name"),o=a.get("app_type"),r=a.get("app_user_champion")===!0?"champion":"",n.push("<h3 class='h3'>"+t(e(i))+"</h3>\n<p class='app-email'>"),a.get("api_linked")===!0?(c="linked",p=this.enduser.get("name")||"Groove User",d=a.get("api_user_url")):(c="not-linked",p="Add to "+i,d="/api/apps/"+a.get("app_slug")+"/users"),n.push("  <a class='api-link "+c+" "+o+"' href='"+t(e(d))+"' data-user-id='"+t(e(this.enduser.id))+"' target='_blank'>\n    <span class='user "+r+"'>"+t(e(p))+"</span>\n  </a>\n</p>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/customer_history"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3 class='h3'>Other Tickets</h3>\n<ul>"),r=this.tickets,i=0,o=r.length;o>i;i++)s=r[i],n.push("  <li data-cid='"+t(e(s.cid))+"'>\n    <a class='ticket' href='"+t(e(s.path()))+"'>"),n.push("      "+t(e(s.get("title")||"No Subject"))),n.push("    </a>\n  </li>");return n.push("</ul>"),this.showAll()&&n.push("<a class='show-all' href='#' role='showAll'>Show All</a>"),n.push("<div class='loading-more'></div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/customer_info"]=function(e){return function(){var e,t,n;switch(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a class='customer-profile-link' href='"+t(e(this.profileUrl))+"'>\n  <span class='roundAvatar' style='background-image: url("+t(e(this.avatarUrl))+")'></span>"),n.push("  "+t(e(this.name))),n.push("</a>\n<p class='email'>"),this.ticketType){case"TwitterTicket":n.push("  <a class='twitter-follow' href='#'>Follow on Twitter</a>");break;case"FacebookTicket":n.push("  <a class='fb-enduser' href='"+t(e(this.facebook.url))+"' target='_blank'>View on Facebook</a>");break;default:this.invalidEmail||n.push("  <a href='mailto:"+t(e(this.email))+"'>"+t(e(this.email))+"</a>")}return n.push("</p>"),this.phoneNumber&&n.push("<p class='phoneNumber'>"+t(e(this.phoneNumber))+"</p>"),n.push("<ul>"),this.companyName&&(n.push("  <li>"),this.title&&n.push("    "+t(e(this.title+","))),n.push("    "+t(e(this.companyName))),n.push("  </li>")),this.location&&n.push("  <li>"+t(e(this.location))+"</li>"),this.website.url&&n.push("  <li>\n    <a href='"+t(e(this.website.url))+"' target='_blank'>"+t(e(this.website.label))+"</a>\n  </li>"),n.push("</ul>"),this.legacy.about&&n.push("<p>"+e(this.legacy.about)+"</p>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/email_marketing/integration"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3 class='h3'>"+t(e(this.headline))+"</h3>\n<a class='refresh' role='refresh'>refresh</a>\n<ul>"),this.subscriptions.length)for(l=this.subscriptions,i=0,r=l.length;r>i;i++)p=l[i],n.push("  <li>"),p.url?n.push("    <a href='"+t(e(p.url))+"' target='_blank'>"+t(e(p.name))+"</a>"):n.push("    <span>"+t(e(p.name))+"</span>"),n.push("    <a class='unsubscribe' data-cid='"+t(e(p.cid))+"' style='display: none' role='unsubscribe'>Remove</a>"),p.subscribedAt&&(n.push("    <span class='subscribedAt'>\n      Subscribed"),n.push("      "+t(e(p.subscribedAt))),n.push("    </span>")),n.push("  </li>");else n.push("  <li role='empty'>No subscriptions yet :(</li>");if(n.push("</ul>"),this.lists.length){for(n.push("<select class='not-chosen'>\n  <option value=''>Add Subscription</option>"),c=this.lists,o=0,s=c.length;s>o;o++)a=c[o],n.push("  <option value='"+t(e(a.id))+"'>"+t(e(a.name))+"</option>");n.push("</select>")}return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/email_marketing_integrations"]=function(e){return function(){var e;return e=[],e.push("<div id='email-marketing-integrations'></div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/history_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a href='"+t(e(this.historyItem.path()))+"'>"),n.push("  "+e(this.historyItem.get("description"))),n.push("  <span class='remove'>\n    &times;\n  </span>\n</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/history_items"]=function(e){return function(){var e;return e=[],e.push("<ul>\n  <li id='nav-i-recent-tickets'>\n    <a>Working Tickets</a>\n    <ul></ul>\n  </li>\n</ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/other_social_profiles"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.profiles,i=0,o=s.length;o>i;i++)r=s[i],n.push("<li>\n  <a class='"+t(e(r.type))+"' href='"+t(e(r.url))+"' target='_blank'></a>\n</li>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/popular_labels"]=function(e){return function(){var e;return e=[],e.push("<div class='header-links'>\n  <a class='fancybox' href='/labels/list'>View all</a>\n</div>\n<h3 class='h3'>Popular Labels</h3>\n<ul class='nav-labels'></ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/recent_activity"]=function(e){return function(){var e;return e=[],e.push("<h3 class='h3'>Recent Activity</h3>\n<div class='timeline-events'>\n  <div class='empty'>\n    Looks like you don't have any recent activity yet.\n  </div>\n  <ul></ul>\n  <div class='loading-more'></div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/right_sidebar"]=function(e){return function(){var e;return e=[],e.push("<div class='isolated-scroll scroll-pane'>\n  <div class='box-b-wrap'></div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/settings/canned_reply_category_list"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul class='canned-reply-categories'>"),s=this.categories,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <li class='selectable'>\n    <a href='/groove_client/settings/ticketing/canned-replies/for-category/"+t(e(i.id))+"'>"+t(e(i.get("name")))+"</a>\n  </li>");return n.push("  <li class='selectable'>\n    <a href='/groove_client/settings/ticketing/canned-replies/new'>+ Add Canned Reply</a>\n  </li>\n</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/settings/labels_mailbox_list"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul class='mailboxes'>\n  <li class='selectable'>\n    <a href='/groove_client/settings/ticketing/labels'>All Mailboxes</a>\n  </li>"),s=this.mailboxes,i=0,o=s.length;o>i;i++)r=s[i],n.push("  <li class='selectable'>\n    <a href='/groove_client/settings/ticketing/labels/for-mailbox/"+t(e(r.id))+"'>"+t(e(r.get("name")))+"</a>\n  </li>");return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/settings/mailbox_list"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul class='mailboxes'>"),s=this.mailboxes,i=0,o=s.length;o>i;i++)r=s[i],n.push("  <li class='selectable'>\n    <a href='/groove_client/settings/mailboxes/"+t(e(r.id))+"'>"+t(e(r.get("name")))+"</a>\n  </li>");return n.push("  <li class='selectable'>\n    <a href='/groove_client/settings/mailboxes/new'>+ Add Mailbox</a>\n  </li>\n</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/tickets_menu"]=function(e){return function(){var e;return e=[],e.push("<ul class='folders'></ul>"),location.pathname.match("/tickets/new")||e.push("<ul class='tools'>\n  <li class='nav-i-add' id='nav-i-new-ticket'>\n    <a href='#'>\n      <span>New Ticket</span>\n    </a>\n  </li>\n</ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/tickets_search_sidebar"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g,v,y,_,w;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["dateRange","filter",""+t(e(this.rangeClass))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' id='updatedAt'>Show:\n  <select>\n    <option value='day' selected='"+t(e(this.isSelectedRange("day")))+"'>Last Day</option>\n    <option value='week' selected='"+t(e(this.isSelectedRange("week")))+"'>Last 7 Days</option>\n    <option value='month' selected='"+t(e(this.isSelectedRange("month")))+"'>Last 30 Days</option>\n    <option value='year' selected='"+t(e(this.isSelectedRange("year")))+"'>Last Year</option>\n    <option value='anytime' selected='"+t(e(this.isSelectedRange("anytime")))+"'>All Results</option>\n  </select>\n</div>"),this.mailboxes.length>1){for(n.push("<hr>\n<ul class='filter' id='mailboxes' data-filter='mailbox_id'>"),f=this.mailboxes,o=0,c=f.length;c>o;o++)h=f[o],n.push("  <li class='"+t(e(this.isSelected("mailbox_id",h.id)))+"' data-value='"+t(e(h.id))+"'>"+t(e(h.name))+"</li>");n.push("</ul>")}if(this.states.length>1){for(n.push("<hr>\n<ul class='filter' id='states' data-filter='state'>"),g=this.states,r=0,p=g.length;p>r;r++)v=g[r],m=v.name,w=v.value,"unread"!==w&&n.push("  <li class='"+w+" "+this.isSelected("state",w)+"' data-value='"+t(e(w))+"'>"+t(e(m))+"</li>");n.push("</ul>")}if(this.agents.length>1){for(n.push("<hr>\n<ul class='filter' id='agents' data-filter='assignee_id'>"),y=this.agents,s=0,u=y.length;u>s;s++)i=y[s],n.push("  <li class='"+t(e(this.isSelected("assignee_id",i.id)))+"' data-value='"+t(e(i.id))+"'>"),n.push("    "+e(i.avatar)),n.push("    "+t(e(i.name))),n.push("  </li>");n.push("</ul>")}for(n.push("<hr>\n<ul class='filter' id='labels' data-filter='label_ids'>"),_=this.labels,a=0,d=_.length;d>a;a++)l=_[a],n.push("  <li class='"+t(e(this.isSelected("label_ids",l.id)))+"' data-value='"+t(e(l.id))+"'>"),n.push("    "+t(e(l.name))),n.push("  </li>");return n.push("</ul>\n<a href='#clearFilters' style='display: none;'>Clear All Filters</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/tracking_details"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h3 class='h3'>Tracking details</h3>\n<dl>"),this.ticket.get("city")&&n.push("  <dt>City</dt>\n  <dd>"+t(e(this.ticket.get("city")))+"</dd>"),this.ticket.get("country")&&n.push("  <dt>Country</dt>\n  <dd>"+t(e(this.ticket.get("country")))+"</dd>"),this.ticket.get("page_title")&&n.push("  <dt>Page Title</dt>\n  <dd>"+t(e(this.ticket.get("page_title")))+"</dd>"),this.ticket.get("page_url")&&n.push("  <dt>URL</dt>\n  <dd>\n    <a class='no-ajaxify' href='"+t(e(this.ticket.get("page_url")))+"' target='_blank'>"+t(e(this.ticket.get("page_url")))+"</a>\n  </dd>"),this.ticket.get("referrer")&&n.push("  <dt>Referrer</dt>\n  <dd>\n    <a class='no-ajaxify' href='"+t(e(this.ticket.get("referrer")))+"' target='_blank'>"+t(e(this.ticket.get("referrer")))+"</a>\n  </dd>"),n.push("  <dt>Browser</dt>\n  <dd>"+t(e(this.ticket.get("browser")))+"</dd>\n  <dt>Platform</dt>\n  <dd>"+t(e(this.ticket.get("platform")))+"</dd>\n</dl>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/twitter_profile"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='header-links'>\n  <a href='"+t(e(this.twitterUrl))+"' target='_blank'>View</a>\n</div>\n<h3 class='h3'>Twitter Profile</h3>\n<p class='description'>"+t(e(this.description))+"</p>\n<ul id='twitterProfileStats'>\n  <li>\n    <span class='count'>"+t(e(this.following_count))+"</span>\n    FOLLOWING\n  </li>\n  <li>\n    <span class='count'>"+t(e(this.follower_count))+"</span>\n    FOLLOWERS\n  </li>\n</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sidebars/user_settings_menu"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<ul class='settings'>\n  <li class='nav-settings-person selectable settings-section'>\n    <a href='/groove_client/settings/profile'>My Settings</a>\n    <ul>\n      <li class='selectable'>\n        <a href='/groove_client/settings/profile'>Profile</a>\n      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/notifications'>Notifications</a>\n      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/preferences'>Preferences</a>\n      </li>\n    </ul>\n  </li>"),this.agent.isAdmin()&&(n.push("  <li class='nav-settings-company-profile selectable settings-section'>\n    <a href='/groove_client/settings/company'>Company</a>\n    <ul>\n      <li class='selectable'>\n        <a href='/groove_client/settings/company'>Profile</a>\n      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/users'>Users</a>\n        <ul>\n          <li class='selectable'>\n            <a href='../groove_client/settings/users/index.html'>Active</a>\n          </li>\n          <li class='selectable'>\n            <a href='/groove_client/settings/users/invited'>Invited</a>\n          </li>\n          <li class='selectable'>\n            <a href='/groove_client/settings/users/archived'>Archived</a>\n          </li>\n          <li>\n            <a class='new-user' href='#'>+ Add User</a>\n          </li>\n        </ul>\n      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/groups'>Groups</a>\n        <ul>\n          <li class='group'>\n            <a class='new-group' href='/groups/new'>+ Add Group</a>\n          </li>\n        </ul>\n      </li>"),this.agent.isOwner()&&n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/billing'>Billing</a>\n        <ul>\n          <li class='selectable'>\n            <a href='/groove_client/settings/billing'>Billing Summary</a>\n          </li>\n          <li class='selectable'>\n            <a href='/groove_client/settings/billing/account'>Manage Account</a>\n          </li>\n          <li class='selectable'>\n            <a href='/groove_client/settings/billing/invoices'>Invoices</a>\n          </li>\n        </ul>\n      </li>"),n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/api'>API</a>\n      </li>\n    </ul>\n  </li>")),n.push("  <li class='nav-settings-ticketing selectable settings-section'>\n    <a href='"+t(e(this.ticketingLink()))+"'>Ticketing</a>"),(null!=(s=this.mailboxes)?s.length:void 0)>0&&(n.push("    <ul>"),this.agent.isAdmin()&&(n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/mailboxes'>Mailboxes</a>"),n.push("        "+e(this.mailboxList())),n.push("      </li>")),n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/ticketing/canned-replies'>Canned Replies</a>"),n.push("        "+e(this.cannedReplyCategoryList())),n.push("      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/ticketing/labels'>Labels</a>"),n.push("        "+e(this.mailboxList({templateName:"shared/sidebars/settings/labels_mailbox_list"}))),n.push("      </li>"),this.agent.isAdmin()&&n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/ticketing/rules'>Rules</a>\n        <ul>\n          <li class='selectable'>\n            <a href='/groove_client/settings/ticketing/rules/new'>+ Add Rule</a>\n          </li>\n        </ul>\n      </li>\n      <li class='selectable'>\n        <a href='/groove_client/settings/ticketing/folders'>Folders</a>\n        <ul>\n          <li class='selectable'>\n            <a href='/groove_client/settings/ticketing/folders/new'>+ Add Folder</a>\n          </li>\n        </ul>\n      </li>"),this.agent.isAdmin()&&(null!=(a=this.mailboxes)?a.length:void 0)&&n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/ticketing/preferences'>Preferences</a>\n      </li>"),n.push("    </ul>")),n.push("  </li>"),u=(null!=(l=this.otherApps)?l.length:void 0)||this.account.get("prefers_olark_installed")||this.account.get("prefers_new_widget"),this.currentUser.isAdmin()&&u){for(n.push("  <li class='nav-settings-apps selectable settings-section'>\n    <a href='/groove_client/settings/slack'>Other Apps</a>\n    <ul>"),this.account.get("prefers_new_widget")&&n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/widget'>Support Widget</a>\n      </li>"),c=this.otherApps,i=0,o=c.length;o>i;i++)p=c[i],r=p.name,d=p.slug,n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/"+t(e(d))+"'>"+t(e(r))+"</a>\n      </li>");this.account.get("prefers_olark_installed")&&this.account.get("prefers_new_widget_chat_access")&&n.push("      <li class='selectable'>\n        <a href='/groove_client/settings/olark'>Olark</a>\n      </li>"),n.push("    </ul>\n  </li>")}return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/sorter"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("Sorted by\n<a class='order-by'>"+t(e(this.selected.name))+"</a>\n<div class='sortables' style='display: none'>\n  <div class='sortables-content'>\n    <ul>"),r=this.sortables,i=0,o=r.length;o>i;i++)s=r[i],n.push("      <li class='sortable'>\n        <a class='"+s.column+" "+s.direction+"' href='#' data-column='"+t(e(s.column))+"' data-direction='"+t(e(s.direction))+"'>"),n.push("          "+t(e(s.name))),n.push("        </a>\n      </li>");return n.push("    </ul>\n  </div>\n  <div class='sortables-footer'></div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["shared/system_announcement"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>System Announcement</h1>\n<a id='announcement_close' href='#'></a>\n<div class='body'>\n  <h2>\n    <a href='"+t(e(this.announcement.url))+"' target='_blank'>"),n.push("      "+t(e(this.announcement.title))),n.push("    </a>\n  </h2>\n  <p>"),n.push("    "+t(e(this.announcement.body))),n.push("  </p>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/assignee"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<li class='assign_to label'>\n  <label>Assign to</label>\n</li>"),!this.groups.isEmpty()){for(n.push("<li class='assignee-group-selector optional select' id='public-reply_ticket_assignee_group_input'>\n  <label for='ticket_assignee_group_id'>Group</label>\n  <select id='#public-reply_ticket_assignee_group_id' name='assignee_group_id' tabindex='"+t(e(15))+"'>\n    <option value=' '>Any</option>"),c=this.groups.models,r=0,a=c.length;a>r;r++)o=c[r],n.push("    "+e(this.form.selectOption(o.get("name"),o.id,this.ticket.get("assignee_group_id"))));n.push("  </select>\n</li>")}for(n.push("<li class='assignee-selector optional select' id='public-reply_ticket_assignee_input'>\n  <label for='ticket_assignee_id'>"+t(e(this.label))+"</label>\n  <select id='#public-replyticket_assignee_id' name='assignee_id' tabindex='"+t(e(16))+"'>\n    <option value=' '>Anyone</option>"),p=this.agents.where({archived:!1}),s=0,l=p.length;l>s;s++)i=p[s],n.push("    "+e(this.form.selectOption(i.get("name"),i.id,this.ticket.get("assignee_id"))));return n.push("  </select>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/canned_replies/variables_select"]=function(e){return function(){var e,t,n,i,o,r;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<select class='variable-inserter'>\n  <option value=''>Insert variable</option>"),i=this.variables;for(r in i)o=i[r],n.push("  <option value='"+t(e(r))+"'>"+t(e(o))+"</option>");return n.push("</select>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e));
}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/canned_replies_dropdown"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a class='more' data-direction='up'>Scroll Up</a>\n<div class='body'>\n  <div class='template-search-container'>\n    <span id='cancel-template-search'>x</span>\n    <input id='template-search' placeholder='Search'>\n  </div>\n  <div class='empty-search-results'>\n    <h3>No results found</h3>\n  </div>"),p=this.categoryKeys,o=0,a=p.length;a>o;o++)if(i=p[o],"Other"!==i){for(n.push("  <div class='category'>\n    <h3>"+t(e(i))+"</h3>\n    <ul>"),u=this.categories[i],r=0,l=u.length;l>r;r++)h=u[r],n.push("      <li data-id='"+t(e(h.id))+"'>"+t(e(h.get("title")))+"</li>");n.push("    </ul>\n  </div>")}if(this.categories.Other){for(n.push("  <div class='"+["category","other",""+t(e(this.otherIsOnlyCategory?"active only":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n    <h3>Other</h3>\n    <ul>"),d=this.categories.Other,s=0,c=d.length;c>s;s++)h=d[s],n.push("      <li data-id='"+t(e(h.id))+"'>"+t(e(h.get("title")))+"</li>");n.push("    </ul>\n  </div>")}return n.push("</div>\n<a class='more' data-direction='down'>Scroll Down</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/canned_reply_form"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<h1>"+t(e("Save as Canned Reply"))+"</h1>\n<a id='fancybox-close' style='display:'></a>\n<div class='comment-templates-content edit-comment-template'>\n  <form class='comment-template comment_template formtastic vertical-form'>\n    <li class='input required string stringish'>\n      <label class='label' for='comment_template_title'>Title</label>\n      <input id='comment_template_title' maxlength='255' name='comment_template[title]' type='text'>\n    </li>\n    <li class='input optional text variable-insertable'>\n      <label class='label' for='comment_template_body'>Body</label>\n      <textarea id='comment_template_body' rows='10' name='comment_template[body]'>"+i(t(e(this.body)))+"</textarea>\n    </li>\n    <div class='categories'>\n      <li class='big-selector input optional select'>\n        <label class='label' for='comment_template_category_id'>Category</label>\n        <select class='canned_category_select' id='comment_template_category_id' name='comment_template[category_id]'>\n          <option value=''>Select a category...</option>"),a=this.categories.models,r=0,s=a.length;s>r;r++)o=a[r],n.push("          <option value='"+t(e(o.id))+"'>"+t(e(o.get("name")))+"</option>");return n.push("          <option value='add'>Create a new category</option>\n        </select>\n      </li>\n    </div>\n    <fieldset class='actions'>\n      <ol>\n        <li class='action input_action' id='comment_template_submit_action'>\n          <input name='commit' type='submit' value='Save Reply'>\n          <span class='or'>or</span>\n          <a class='cancel_comment_template' href='#'>Cancel</a>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/comment_item"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='author-image'>"),this.isNote&&n.push("  <div class='button-ico-message'></div>"),null!=this.authorView?n.push("  "+e(this.authorView.avatarImage({size:50}))):n.push("  <img src='/avatars/original/missing.png' width='"+t(e(50))+"' height='"+t(e(50))+"'>"),n.push("</div>\n<div class='author-date'>\n  <div class='author'>"),null!=this.comment.author?n.push("    "+t(e(this.comment.author.get("name")||this.comment.author.get("email")))):n.push("    <em>Deleted Agent</em>"),n.push("  </div>"),this.isMergeComment?n.push("  <span>merged this ticket with ticket</span>\n  <span>"+e(this.comment.get("body"))+"</span>"):this.isForward?n.push("  <span>forwarded to</span>\n  <span class='comment-to'>"+t(e(this.to))+"</span>"):this.to&&n.push("  <span>replied to</span>\n  <span class='comment-to'>"+t(e(this.to))+"</span>"),n.push("  <div class='date'>"),n.push("    "+t(e(this.formattedDate))),n.push("    <div class='comment-actions-dropdown'></div>\n  </div>\n</div>"),this.isNote||(o=this.comment.get("reply_cc_address"),i=this.comment.get("reply_bcc_address"),(null!=o||null!=i)&&(n.push("<div class='cc_bcc'>"),o&&n.push("  <div class='cc'>\n    <span class='title'>\n      <strong>Cc:</strong>\n    </span>\n    <span class='emails'>"+t(e(Groove.Util.truncateString(o,120)))+"</span>\n  </div>"),i&&n.push("  <div class='bcc'>\n    <span class='title'>\n      <strong>Bcc:</strong>\n    </span>\n    <span class='emails'>"+t(e(Groove.Util.truncateString(i,120)))+"</span>\n  </div>"),n.push("</div>"))),this.isMergeComment||(n.push("<div class='description'>"),n.push("  "+e(this.comment.sanitizedBody())),n.push("</div>")),n.push("<div class='Clear'></div>\n<div class='attachments'></div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/form"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='dark-header'>\n  <h1>Create a new ticket</h1>\n  <a class='cancel done-button' href='#'>&times;</a>\n</div>\n<form class='formtastic new-ticket-creation-form ticket' id='new_ticket' action='/tickets'>\n  <div class='new-ticket-user-details'>\n    <li class='boolean optional' id='ticket_send_copy_to_enduser_input'>\n      <strong>What do you want to do with this ticket?</strong>\n      <label>\n        <input name='send_copy_to_enduser' type='radio' value='1' checked='checked'>/</input>\n        Send it as a message to the customer\n      </label>\n      <label>\n        <input name='send_copy_to_enduser' type='radio' value='0'>/</input>\n        Log it, no need to send a message\n      </label>\n    </li>\n    <li class='autocompleted_string optional' id='ticket_enduser_name_input'>\n      <label for='ticket_enduser_name'>Customer Name</label>\n      <input class='ui-autocomplete-input' id='ticket_enduser_name' data-autocomplete='/users/autocomplete_by_name' id_element='#ticket_enduser_name' label='Customer Name' name='enduser_name' size='30' type='text' autofocus></input>\n    </li>\n    <li class='autocompleted_string optional' id='ticket_enduser_email_input'>\n      <label for='ticket_enduser_email'>Customer Email</label>\n      <input class='ui-autocomplete-input' id='ticket_enduser_email' data-autocomplete='/users/autocomplete_by_email' id_element='#ticket_enduser_id' label='Customer Email' name='enduser_email' size='30' type='text'></input>\n    </li>\n    <li id='ticket_add_additional_details'>\n      <a href='#'>Add additional details</a>\n    </li>\n    <div class='new-ticket-additional-details' style='display: none'>\n      <li class='optional string' id='ticket_enduser_company_name_input'>\n        <label for='ticket_enduser_company_name'>Company Name</label>\n        <input id='ticket_enduser_company_name' label='Company Name' name='enduser_company_name' size='30' type='text'></input>\n      </li>\n      <li class='optional string' id='ticket_enduser_phone_number_input'>\n        <label for='ticket_enduser_phone_number'>Phone #</label>\n        <input id='ticket_enduser_phone_number' label='Phone #' name='enduser_phone_number' size='30' type='text'></input>\n      </li>\n    </div>\n    <input id='ticket_enduser_id' name='enduser_id' type='hidden'>/</input>\n  </div>\n  <div class='new-ticket-content'>"),this.mailboxes.length>1){for(n.push("    <li id='ticket_mailbox_id'>\n      <select name='mailbox_id'>\n        <option>Select a mailbox</option>"),u=this.mailboxes.models,o=0,a=u.length;a>o;o++)p=u[o],n.push("        <option value='"+t(e(p.id))+"'>"+t(e(p.get("name")))+"</option>");n.push("      </select>\n    </li>")}if(n.push("    <li class='optional placeholder-input string' id='ticket_title_input'>\n      <label for='ticket_title'>\n        <span class='for-comment'>Subject</span>\n        <span class='for-note for-note'>Title</span>\n      </label>\n      <input class='placeholder-label' id='ticket_title' maxlength='255' name='title' type='text'>/</input>\n    </li>"),!this.commentTemplates.isEmpty()){n.push("    <li class='for-comment'>\n      <select id='comment_template_id'>\n        <option>Insert Canned Reply</option>"),d=this.commentTemplates.byCategoryName();for(i in d){for(g=d[i],n.push("        <optgroup label='"+t(e(i))+"'>"),r=0,l=g.length;l>r;r++)f=g[r],n.push("          <option value='"+t(e(f.id))+"'>"+t(e(f.get("title")))+"</option>");n.push("        </optgroup>")}n.push("      </select>\n    </li>")}for(n.push("    <li class='optional placeholder-input text' id='ticket_comments_attributes_0_body_input'>\n      <!-- %label(for=\"ticket_comments_attributes_0_body\") -->\n      <!--   %span.for-comment Compose a message -->\n      <!--   %span.for-note Log the ticket details as a note -->\n      <textarea class='autogrow placeholder-label' id='ticket_comments_attributes_0_body' name='comments_attributes[0].html_body' rows='5'></textarea>\n    </li>\n    <fieldset class='inline ticket_bottom_actions'>\n      <ul>\n        <li class='optional string ticket-labels' id='ticket_label_string_input'></li>\n      </ul>\n      <div class='actions tour-footer'>\n        <fieldset class='buttons'>\n          <input id='ticket_submit' name='commit' type='submit' value='Send Message'>/</input>\n        </fieldset>\n        <ul class='grouped'>\n          <li id='ticket_assignee'>\n            <ul class='assignee grouped' id='reply-assignee-dropdowns'></ul>\n          </li>\n          <li class='optional select' id='ticket_state_input'>\n            <label for='ticket_state'>Status</label>\n            <select class='chzn-drop-up' id='ticket_state' name='state'>"),h=this.ticketReplyStates,s=0,c=h.length;c>s;s++)m=h[s],n.push("              "+e(this.view.selectOption(m[0],m[1],this.ticket.get("state"))));return n.push("            </select>\n          </li>\n        </ul>\n      </div>\n    </fieldset>\n  </div>\n</form>\n<div class='comment_attachments_wrapper'></div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/form/state_selector"]=function(e){return function(){var e,t,n,i,o,r,s,a,l;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.states,o=0,r=s.length;r>o;o++)a=s[o],i=a.humanized,l=a.value,n.push("<li class='"+t(e(this.classFor(l)))+"' data-value='"+t(e(l))+"' data-humanized='"+t(e(i))+"'>\n  <a href='#'>"+t(e(i))+"</a>\n</li>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/inspector"]=function(e){return function(){var e,t,n,i,o,r,s;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='box-c-toolbar fixed-header ticket-actions'>\n  <a class='nav-back-button' href='"+t(e(this.view.goBackUrl()))+"'>\n    <span>Back</span>\n  </a>\n  <div class='ticket-status'></div>\n  <div id='assignee-dropdowns'></div>\n  <div id='snooze-dropdown'></div>\n  <div class='box-c-toolbar-right'>"),this.ticket.get("account_ticket_number")&&n.push("    <div class='ticket-number'>"+t(e("#"+this.ticket.get("account_ticket_number")))+"</div>"),(o=null!=(r=this.ticket.enduser)?r.id:void 0)&&n.push("    <a class='author-reply' data-editor-tab='reply' data-id='"+t(e(o))+"' title='Reply'>Reply</a>"),n.push("    <a class='add-note' data-editor-tab='note' title='Add Note'>Add Note</a>\n    <div class='box-c-dropdowns box-c-ticket-actions' id='ticket-actions-dropdown'></div>\n  </div>\n  <div id='priority-toggle'></div>\n</div>"),!this.ticket.enduser.hasInvalidEmail()||this.ticket.isFacebookTicket()||this.ticket.isTwitterTicket()||n.push("<div class='box-c-toolbar box-c-toolbar-alert fixed-header'>\n  <strong>Invalid customer email:</strong>\n  to reply, please\n  <a class='edit-enduser-info' href='#'>update the email address</a>\n</div>"),n.push("<div class='box-c-ticket-show'>\n  <div id='ticket-banner'></div>\n  <div class='snooze-state'></div>\n  <div class='box-c-tickets-show'>\n    <div class='Ticket'>\n      <div class='Ticket_avatar'>"),this.ticket.creator?(i=new GrooveClient.Views.User({model:this.ticket.creator}),n.push("        "+e(i.avatarImage({size:50})))):(null!=(s=this.enduserView)?s.hasAvatar():void 0)&&n.push("        "+e(this.enduserView.avatarImage(50))),n.push("      </div>\n      <div class='Ticket_content'>\n        <div class='Ticket_subject' id='ticket-subject'>"),this.ticket.get("title")?n.push("          "+t(e(this.ticket.get("title")))):this.ticket.isFacebookTicket()||this.ticket.isTwitterTicket()||n.push("          <span class='is-empty'>\n            Add Subject\n          </span>"),n.push("        </div>\n      </div>\n    </div>\n    <div id='activity'></div>\n  </div>\n  <div class='tabs tabs-reply'>\n    <div class='tab ticket-reply-form' id='tab-reply'></div>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/labels"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],this.ticket.isNew()?n.push("<input class='label-tokens' id='ticket_label_string' data-all-labels='"+t(e(JSON.stringify(this.labels)))+"' data-pre='"+t(e(JSON.stringify(this.ticket.labels)))+"' name='label_string' placeholder='Add a label...' style='display: none;' type='text' value=''>"):n.push("<input class='label-tokens' id='public-reply-add_ticket_label_string' data-all-labels='"+t(e(JSON.stringify(this.labels)))+"' data-pre='"+t(e(JSON.stringify(this.ticket.labels)))+"' data-save-url='/api/tickets/"+t(e(this.ticket.id))+"' name='ticket[label_string]' placeholder='Add a label...' style='display: none;' type='text' value=''>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='blank-state box-c-blank-slate'>\n  <p class='header'>"+t(e(this.emptyTitle||"No tickets found"))+"</p>\n  <p>"+t(e(this.emptyMessage))+"</p>\n</div>\n<div class='non-blank-state tabs-views'>\n  <div class='box-c-toolbar fixed-header last tickets-toolbar'>\n    <div class='mass-selector' id='selectAll'>\n      <input type='checkbox'>\n    </div>\n    <h1>"+t(e(this.title))+"</h1>\n  </div>\n  <div class='has-fixed-header'>\n    <form id='ticket-selection' data-remote='true' method='post'>\n      <div class='"+["box-c-tickets-index","type-expanded",""+t(e(this.withReminder))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' id='expanded-tickets'></div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/mass_actions"]=function(e){return function(){var e;return e=[],this.collection.filter instanceof GrooveClient.Models.Filter&&this.collection.filter.get("drafts")?e.push("<a class='button discard-drafts mass-actions-tabs'>Discard Drafts</a>"):(e.push("<div class='box-c-ticket-actions'>\n  <div class='assign-to-dropdown'></div>\n  <div class='assign-to-group-dropdown'></div>\n  <div class='change-status-dropdown'></div>\n  <div class='add-labels-dropdown'></div>"),GrooveClient.data.mailboxes.length>1&&e.push("  <div class='change-mailbox-dropdown'></div>"),this.currentUser.isAdmin()&&e.push("  <a class='action-delete qtip-tipsy ticket-action' title='Delete'>\n    <span>Delete</span>\n  </a>"),e.push("</div>")),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/merge_form"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>"),n.push("  "+t(e("Merge Ticket:  "+Groove.Util.truncateString(this.ticket.get("title"),50)))),n.push("</h1>\n<a id='fancybox-close' style='display:'></a>\n<div class='item'></div>\n<div class='separator'>\n  <img class='left' src='../assets/icons/ico_merge_separator.png'>\n  <img class='right' src='../assets/icons/ico_merge_separator.png'>\n</div>\n<h2>Merge the above ticket into the following ticket:</h2>\n<form class='formtastic merge-ticket-search-form'>\n  <input id='merge-ticket-search' name='ticket[merge_id]' placeholder='Search by ticket title or ID'>\n</form>\n<form class='formtastic merge-ticket vertical-form' id='search-results'>\n  <input id='parent-ticket-id' type='hidden' value='"+t(e(this.ticket.get("id")))+"'>\n  <div class='results'></div>\n  <div class='actions merge-ticket-buttons'>\n    <fieldset class='actions'>\n      <input id='merge-ticket-button' type='submit' value='Merge Ticket'>\n    </fieldset>\n  </div>\n</form>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/merge_previous"]=function(e){return function(){var e,t,n,i,o,r,s,a;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>"+t(e("Merge this ticket into the ticket behind the popup"))+"</h1>\n<a id='fancybox-close' style='display:'></a>\n<div class='box-c-ticket-show'>\n  <div class='box-c-tickets-show'>\n    <div class='author-image'>"),this.ticket.creator?(r=new GrooveClient.Views.User({model:this.ticket.creator}),n.push("      "+e(r.avatarImage({size:50})))):(null!=(a=this.enduserView)?a.hasAvatar():void 0)&&n.push("      "+e(this.enduserView.avatarImage(50))),n.push("    </div>"),this.ticket.get("title")?(n.push("    <h1 class='ticket-title'>"),n.push("      "+t(e(this.ticket.get("title")))),n.push("    </h1>")):this.ticket.isFacebookTicket()||this.ticket.isTwitterTicket()||n.push("    <a class='edit-blank-ticket-title'>Add Subject</a>"),n.push("    <div class='author-date'>"),this.ticket.creator&&"enduser"!==this.ticket.creator.get("role")?(n.push("      <div class='author'>"),n.push("        "+t(e(this.ticket.creator.get("name")))),n.push("      </div>"),this.ticket.startsWithNote()?n.push("      created a ticket on behalf of"):n.push("      emailed"),n.push("      <div class='author'>"+t(e(this.ticket.enduser.get("name")))+"</div>")):(n.push("      <div class='author'>"),this.ticket.enduser&&n.push("        "+t(e(this.ticket.enduser.get("name")))),n.push("      </div>"),this.account.get("prefers_grouping_filters_by_mailbox")||this.ticket.mailbox&&(n.push("      <span>\n        to"),n.push("        "+t(e(this.ticket.mailbox.labelName()))),n.push("      </span>"))),n.push("      <div class='date'>"),n.push("        "+t(e(this.formattedDate))),n.push("      </div>\n    </div>"),s=this.ticket.comments.first(),o=null!=s?s.get("reply_cc_address"):void 0,i=null!=s?s.get("reply_bcc_address"):void 0,(null!=o||null!=i)&&(n.push("    <div class='cc_bcc'>"),o&&n.push("      <div class='cc'>\n        <span class='title'>\n          <strong>Cc:</strong>\n        </span>\n        <span class='emails'>"+t(e(Groove.Util.truncateString(o,120)))+"</span>\n      </div>"),i&&n.push("      <div class='bcc'>\n        <span class='title'>\n          <strong>Bcc:</strong>\n        </span>\n        <span class='emails'>"+t(e(Groove.Util.truncateString(i,120)))+"</span>\n      </div>"),n.push("    </div>")),n.push("    <div class='description'>"),n.push("      "+e(this.view.firstCommentBody())),n.push("    </div>\n    <div class='attachments'></div>\n    <div class='Clear'></div>\n  </div>\n  <div class='box-c-comments-feed' id='comments-feed'></div>\n</div>\n<div class='merge-actions'>\n  <button class='blue-button' role='merge'>"+t(e("Merge into Ticket #"+this.parentTicket.get("account_ticket_number")))+"</button>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new"]=function(e){return function(){var e;return e=[],e.push("<div class='box-c-toolbar'>\n  <h1 class='h1b'>Create New Ticket</h1>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new/cc_bcc_address"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<label for='"+t(e(this.type))+"'>"+t(e(this.label))+"</label>\n<div>\n  <input type='text' name='reply_"+t(e(this.type))+"_address'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new/customer_info"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div id='customer-info'>\n  <label for='ticket_enduser_name'>To</label>"),p=[{type:"name",placeholder:"Customer Name"},{type:"email",placeholder:"customer@example.com"}],o=0,a=p.length;a>o;o++)i=p[o],d=i.type,r="ticket_enduser_"+d,l="enduser_"+d,s=".ui-autocomplete-input",c="/users/autocomplete_by_"+d,u="Customer "+this.titleize(d),n.push("  <div id='ticket_enduser_"+d+"_wrapper'>\n    <input class='"+t(e(s))+"' id='"+t(e(r))+"' type='text' name='"+t(e(l))+"' placeholder='"+t(e(i.placeholder))+"' autocomplete='off' data-autocomplete='"+t(e(c))+"' tabindex='"+t(e(10))+"'>\n  </div>");return n.push("  <ul class='cc_bcc side-actions'>\n    <li>\n      <a id='cc' href='#' tabindex='-1'>Cc</a>"),GrooveClient.data.account.isTrial()||n.push("      <a id='bcc' href='#' tabindex='-1'>Bcc</a>"),n.push("    </li>\n  </ul>\n  <input id='ticket_enduser_id' name='enduser_id' type='hidden'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new/mailboxes"]=function(e){return function(){var e,t,n,i,o,r,s,a;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div>\n  <label for='mailbox_id'>From</label>\n  <div>\n    <select name='mailbox_id' tabindex='"+t(e(11))+"'>"),s=this.mailboxes,i=0,o=s.length;o>i;i++)r=s[i],a=parseInt(r.id)===parseInt(this.preferred_mailbox_id),n.push("      <option value='"+t(e(r.id))+"' selected='"+t(e(a))+"'>"+t(e(r.get("name")+" ("+r.get("email")+")"))+"</option>");return n.push("    </select>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new/phone_number"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],i="enduser_phone_number",n.push("<label for='"+t(e(i))+"'>Phone</label>\n<div>\n  <input id='ticket_"+i+"' type='text' name='"+t(e(i))+"' value='"+t(e(this.phone_number))+"' placeholder='(910) 867-5309'>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new/select_box"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='select-container'>\n  <label for='"+t(e(this.select_name))+"'>"+t(e(this.label))+"</label>\n  <select name='"+t(e(this.select_name))+"'>"),this.default_option&&n.push("    <option value='"+t(e(this.default_option.value))+"'>"+t(e(this.default_option.name))+"</option>"),s=this.models,i=0,o=s.length;o>i;i++)r=s[i],n.push("    <option value='"+t(e(r.id))+"'>"+t(e(r.get("name")))+"</option>");return n.push("  </select>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/new_ticket_form"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='attachments-box tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last'>\n    <a class='nav-back-button' href='#'>\n      <span>Back</span>\n    </a>\n    <h1>New Ticket</h1>\n  </div>\n  <form class='settings' id='new-ticket' method='POST'>\n    <fieldset>\n      <div id='ticket_type'>\n        <label for='send_copy'>Type</label>\n        <div class='inline-radio'>\n          <label for='send_copy'>\n            <input id='send_copy' type='radio' name='send_copy_to_enduser' value='1' checked='checked'>\n            Email\n          </label>\n          <label for='do_not_send_copy'>\n            <input id='do_not_send_copy' type='radio' name='send_copy_to_enduser' value='0'>\n            Phone Call\n          </label>\n        </div>\n      </div>"),n.push("      "+e(this.customerInfo())),n.push("      <div id='phone-number'></div>\n      <div id='cc-bcc-addresses'></div>"),n.push("      "+e(this.mailboxes())),n.push("    </fieldset>\n    <fieldset>\n      <div>\n        <label for='ticket_title'>Subject</label>\n        <div>\n          <input id='ticket_title' type='text' name='title' tabindex='"+t(e(12))+"'>\n        </div>\n      </div>\n      <div id='new_ticket_body'>\n        <label for='name'>Body</label>\n        <div id='editor-container'>\n          <textarea id='ticket_body' name='comments_attributes[0].html_body' tabindex='"+t(e(13))+"'></textarea>\n          <div class='comment_attachments_wrapper'></div>\n          <div id='ticket-bottom-toolbar'>\n            <a id='attachments-button'></a>\n            <div id='ticket-labels'></div>\n          </div>\n        </div>\n        <ul class='"+["side-actions",""+t(e(this.hasTemplates?"with-dropdown":""))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' id='canned-replies'>"),i=this.hasTemplates?"inline-block":"none",n.push("          <li>\n            <a href='#show-dropdown' style='display: "+t(e(i))+";'>Insert Message</a>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <div id='comment-errors'></div>\n      </div>\n      <input type='hidden' name='enduser_populate_profile_now' value>\n      <div id='actions'>\n        <div id='ticket-state-button'>\n          <input id='ticket_submit' name='commit' type='submit' value='Send as "+t(e(this.defaultReplyState.text))+"' tabindex='"+t(e(17))+"'>\n          <a id='ticket-state-changer' href='#'></a>\n        </div>\n        <input id='ticket_state' name='state' type='hidden' value='"+t(e(this.defaultReplyState.value))+"'>\n        <ul id='assignment-dropdowns'></ul>\n      </div>\n    </fieldset>\n  </form>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/preview"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>"),n.push("  "+t(e("Ticket #"+this.ticket.get("account_ticket_number")+" "+(this.ticket.has("ticket_type")?"- "+this.ticket.get("ticket_type"):"")))),n.push("</h1>\n<div class='ticket-content'>\n  <div class='box-c-comments-feed'></div>\n</div>\n<div class='ticket-footer'>\n  <span class='status'>\n    <strong>"+t(e(this.ticket.state()))+"</strong>\n  </span>\n  <span class='assigned'>\n    <strong>"),this.ticket.assignee?n.push("      "+t(e(this.ticket.assignee.get("name")))):n.push("      Unassigned"),n.push("    </strong>\n  </span>\n  <span class='priority'>\n    <strong>"+t(e(this.view.priorityLabel()))+"</strong>\n  </span>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/priority"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+["PriorityToggle",""+t(e(this.priority?"PriorityToggle-checked":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></div>\n<input type='input' name='priority' value='"+t(e(this.priorityInt))+"'>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/reply_form"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='attachments-box box-c-reply-add-wrap view-mode'>\n  <div class='box-c-view-mode'>\n    <div class='author-image'>"),n.push("      "+e(new GrooveClient.Views.User({model:this.currentUser}).avatarImage({size:50}))),n.push("    </div>\n    <div class='exit-view-mode faux-text-box'>\n      Click here to\n      <a class='exit-view-mode' href='#'>Reply</a>\n      or\n      <a class='exit-view-mode' href='#' data-private='true'>Post a Private Note</a>\n    </div>\n  </div>\n  <div class='box-c-edit-mode'>\n    <form class='formtastic reply ticket' id='ticket_edit'>\n      <fieldset class='inline reply-form ticket_top_actions'>\n        <ul class='right' id='reply-type-switcher'>\n          <li class='reply selected'>\n            <a class='public-reply' data-editor-tab='reply'>Reply</a>\n          </li>"),this.ticket.isTwitterTicket()||this.ticket.isFacebookTicket()||n.push("          <li class='forward'>\n            <a class='public-forward' data-editor-tab='forward'>Forward</a>\n          </li>"),n.push("          <li class='note'>\n            <a class='note' data-editor-tab='note'>Add Note</a>\n          </li>\n          <div class='for-assign grouped'>\n            <ul class='assignee'></ul>\n          </div>\n        </ul>"),r=0!==this.commentTemplates.length,n.push("        <input class='draft-attribute' id='comment_template_id' name='comments_attributes[0].comment_template_id' type='hidden' value=''>\n        <ul id='reply-top-actions'>"),this.ticket.isTwitterTicket()||n.push("          <li id='toggle-editor-toolbar'>\n            <a class='show' href='#'>Format Text</a>\n            <a class='hide' href='#'>Show Tabs</a>\n          </li>"),n.push("          <li class='"+t(e(r?"with-dropdown":""))+"' id='canned-replies'>\n            <a href='#show-dropdown' style='display: "+t(e(o))+";'>Insert Reply</a>\n            <a id='save-canned-reply'></a>"),o=r?"inline-block":"none",n.push("          </li>\n        </ul>\n      </fieldset>\n      <div class='clear'></div>\n      <li class='required text' id='public-reply-add_ticket_comments_attributes_0_body_input'>"),this.ticket.isTwitterTicket())n.push("        <span class='reply_char_counter'>\n          <span class='total'>140</span>\n        </span>");else if(!this.ticket.isFacebookTicket()){for(n.push("        <ul class='inactive reply-recipients'>\n          <li class='gear'></li>\n          <li class='from'>\n            From\n          </li>\n          <li class='cc'>\n            Cc\n          </li>\n          <li class='bcc'>\n            Bcc\n          </li>\n        </ul>\n        <a id='attachments-button'></a>\n        <ul class='reply-addresses-list'>\n          <li id='public-reply-to'>\n            <div class='to-address'>\n              <label class='heading'>To:</label>\n              <select class='add-to draft-attribute' id='recipient_id' name='comments_attributes[0].to'>"+e(this.toDropdownOptions)+"</select>\n            </div>\n          </li>\n          <li class='add-from change-from public-reply-only' id='public-reply-add_ticket_reply_from'>\n            <div class='from-address'>\n              <label class='heading'>From:</label>\n              <select id='mailbox_id' name='mailbox_id' tabindex='"+t(e(1))+"'>"),
u=this.mailboxes.models,s=0,l=u.length;l>s;s++)p=u[s],n.push("                "+e(this.view.selectOption(p.get("name")+" ("+p.get("email")+")",p.id,this.ticket.get("mailbox_id"))));n.push("              </select>\n              <span class='current-mailbox'></span>\n            </div>\n          </li>\n          <li class='add-forwarding optional public-reply-only string' id='public-reply-add_ticket_reply_forwarding_address_input'>\n            <div class='forwarding-address'>\n              <label class='heading' for='public-reply-add_ticket_reply_forwarding_address'>To:</label>\n              <input class='draft-attribute' id='public-reply-add_ticket_reply_forwarding_address' maxlength='255' name='forwarding_address' type='text' tabindex='"+t(e(1))+"'>\n            </div>\n          </li>\n          <li class='add-cc optional public-reply-only string' id='public-reply-add_ticket_reply_cc_address_input'>\n            <div class='cc-address'>\n              <label class='heading' for='public-reply-add_ticket_reply_cc_address'>Cc:</label>\n              <input class='draft-attribute' id='public-reply-add_ticket_reply_cc_address' maxlength='255' name='reply_cc_address' type='text' value='"+t(e(this.ccField))+"' tabindex='"+t(e(1))+"'>\n            </div>\n          </li>\n          <li class='add-bcc optional public-reply-only string' id='public-reply-add_ticket_reply_bcc_address_input'>\n            <div class='bcc-address'>\n              <label class='heading' for='public-reply-add_ticket_reply_bcc_address'>Bcc:</label>\n              <input class='draft-attribute' id='public-reply-add_ticket_reply_bcc_address' maxlength='255' name='reply_bcc_address' type='text' value='"+t(e(this.bccField))+"' tabindex='"+t(e(1))+"'>\n            </div>\n          </li>\n        </ul>")}for(n.push("        <textarea class='autogrow draft-attribute full-width placeholder-label reply' id='public-reply-add_ticket_comments_attributes_0_body' name='comments_attributes[0].html_body' rows='5' tabindex='"+t(e(1))+"'>\x92"),n.push("        "+t(e(this.view.commentPlainText()))),n.push("        \x91</textarea>\n        <div class='comment_attachments_wrapper'></div>\n        <div class='ticket-labels' id='public-reply-add_ticket_label_string_input'></div>\n      </li>\n      <div class='clear'></div>\n      <fieldset class='inline reply ticket_bottom_actions'>\n        <fieldset class='actions'>\n          <div id='reply-assignee-dropdowns'></div>\n          <div id='ticket-state-button'>\n            <input id='ticket_submit' name='commit' type='submit' value='Submit as closed' tabindex='"+t(e(16))+"'>\n            <a id='ticket-state-changer' href='#'></a>\n          </div>"),i=this.ticket.isUnread()?"opened":this.ticket.state(),n.push("          <input id='ticket_state' name='state' type='hidden' value='closed'>\n          <ul class='submit-states' style='display: none'>"),d=this.ticketReplyStates,a=0,c=d.length;c>a;a++)h=d[a],n.push("            <li class='"+h[1]+" "+(h[1]===i?"selected":"")+"' data-value='"+t(e(h[1]))+"'>\n              <a href='#'>"+t(e(h[0]))+"</a>\n            </li>");return n.push("          </ul>\n        </fieldset>\n      </fieldset>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/reply_form/to"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.users,i=0,o=s.length;o>i;i++)r=s[i],n.push("<option value='"+t(e(r.id))+"' data-role='"+t(e(r.get("role")))+"' selected='"+t(e(r.get("email")===this.replyToEmail))+"'>"+t(e(r.emailWithName()))+"</option>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/search_results"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='blank-state box-c-blank-slate'>\n  <p class='header'>"+t(e(this.emptyTitle||"No tickets found"))+"</p>\n  <p>"+t(e(this.emptyMessage))+"</p>\n</div>\n<div class='non-blank-state tabs-views'>\n  <div class='box-c-toolbar fixed-header-no-sidebar last tickets-toolbar' id='searchToolbar'>\n    <div class='mass-selector' id='selectAll'>\n      <input type='checkbox'>\n    </div>\n    <h1>\n      <span id='totalCount'>"+t(e(this.totalCount))+"</span>"),n.push("      "+t(e(this.title))),this.isSecondPass&&n.push("      <span id='second-pass'>Could not find an exact match.  Showing partial matches.</span>"),n.push("    </h1>\n    <div id='sortSearchResults'>\n      <span>Sorted by</span>\n      <ul class='unstyled'>\n        <li class='"+t(e(this.isOrder("relevance")))+"'>\n          <a href='#' data-field='relevance'>Best Match</a>\n        </li>\n        <li class='"+t(e(this.isOrder("updated_at")))+"'>\n          <a href='#' data-field='updated_at'>Most Recently Updated</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class='has-fixed-header'>\n    <form id='ticket-selection' data-remote='true' method='post'>\n      <div class='box-c-tickets-index type-expanded' id='expanded-tickets'></div>\n    </form>\n  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/snooze_state"]=function(e){return function(){var e;return e=[],this.isSnoozed&&e.push("<div class='snoozed'>\n  <span>Unless you get a reply, this ticket will be "+this.action+" "+this.snoozedUntil+".</span>\n  <a class='unsnooze'>Cancel</a>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/ticket_item"]=function(e){return function(){var e,t,n,i,o,r,s,a;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='check item-selector'>\n  <input id='ticket_checkbox_"+this.ticket.id+"' name='ticket_ids[]' type='checkbox' value='"+t(e(this.ticket.id))+"'>\n</div>\n<div id='priority-toggle'></div>\n<a class='avatar-link unstyled' href='#'>\n  <div class='author-image'>"),this.enduserView&&n.push("    "+e(this.enduserView.avatarImage({size:36}))),n.push("    <div class='Badge'></div>\n  </div>\n</a>\n<div class='conversation'>\n  <div class='details'></div>\n  <div class='author'>"),n.push("    "+t(e(null!=(s=this.ticket.enduser)?s.get("name"):void 0))),this.ticket.get("comments_count")>0&&n.push("    <span class='counts'>"+t(e("("+this.ticket.get("comments_count")+")"))+"</span>"),this.ticket.hasAttachments()&&n.push("    <img class='attachment-indicator' src='../assets/icons/ico_paperclip-d69a9daeddebba5e8cf6cf8595cf63eb.png'>"),this.ticket.labels&&this.ticket.labels.length)for(a=this.ticket.labels.models,i=0,r=a.length;r>i;i++)o=a[i],n.push("    <span class='label'>"+t(e(o.get("name")))+"</span>");switch((null!=this.ticket.assignee||null!=this.ticket.assigneeGroup)&&(n.push("    <span class='assignee'>"),n.push("      "+t(e(this.ticket.assigneeAndGroup()))),n.push("    </span>")),this.ticket.hasDraft()&&n.push("    <span class='draft'>Draft</span>"),n.push("  </div>\n  <a class='ticket-link unstyled' href='"+t(e(this.ticket.path()))+"'>"),GrooveClient.data.account.get("prefers_grouping_filters_by_mailbox")||n.push("    <span class='"+["mailbox-label",""+t(e(this.view.mailboxRestrictedClass()))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+t(e(this.view.mailboxLabel()))+"</span>"),n.push("    <span class='title'>"),this.ticket.get("type")){case"TwitterTicket":n.push("      Twitter Mention");break;case"FacebookTicket":n.push("      Facebook Post");break;default:n.push("      "+t(e(this.ticket.get("title"))))}return n.push("    </span>\n    <span class='body'>"),n.push("      "+e(this.view.body())),n.push("    </span>\n  </a>\n</div>\n<div class='secondary'>\n  <span class='updated-at'>"+t(e(this.view.ticketListDateFormat()))+"</span>\n  <span class='ticket-number'>"+t(e("#"+this.ticket.get("account_ticket_number")))+"</span>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/ticket_list_item"]=function(e){return function(){var e,t,n,i,o,r,s;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='status_tag'>\n  <span>"),n.push("    "+t(e(this.view.statusLabel()))),n.push("  </span>\n</div>\n<div class='check'>\n  <div class='selectable'></div>\n  <input name='ticket_ids[]' type='checkbox' value='"+t(e(this.ticket.id))+"'>\n</div>\n<div class='inner'>\n  <div class='author'>"),this.ticket.enduser&&(n.push("    <a href='"+t(e(this.ticket.path()))+"'>"),n.push("      "+t(e(this.ticket.enduser.get("name")))),n.push("    </a>")),n.push("    <span class='comments'>"),n.push("      "+t(e("("+this.ticket.get("comments_count")+")"))),n.push("    </span>\n  </div>\n  <div class='description'>\n    <div class='attachments'></div>\n    <span class='comments'>"+t(e(this.ticket.get("comments_count")))+"</span>"),this.ticket.labels&&this.ticket.labels.length){for(n.push("    <span class='labels'>"),s=this.ticket.labels.models,i=0,r=s.length;r>i;i++)o=s[i],n.push("      <a class='styled-label' href='"+t(e(o.path()))+"'>\n        <strong class='label-name'>"+t(e(o.get("name")))+"</strong>\n      </a>");n.push("    </span>")}return n.push("    <strong class='account-ticket-number'>"+t(e("#"+this.ticket.get("account_ticket_number")))+"</strong>"),(this.ticket.assignee||this.ticket.assigneeGroup)&&n.push("    ("+this.view.assignees()+")"),n.push("    <a class='unstyled' href='"+t(e(this.ticket.path()))+"'>"),null!=this.ticket.has("title")&&(n.push("      <span class='subject'>"),n.push("        "+t(e(this.ticket.get("title")))),n.push("      </span>")),n.push("      "+t(e(this.ticket.get("snippet")))),n.push("    </a>"),this.ticket.hasDraft()&&n.push("    <span class='draft'>Draft</span>"),n.push("  </div>\n  <div class='date'>"),n.push("    "+t(e(this.view.createdAtHuman()))),n.push("  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/ticket_simple_item"]=function(e){return function(){var e,t,n,i,o,r,s;if(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='inner'>\n  <div class='user'>"),this.ticket.enduser&&(n.push("    <a href='"+t(e(this.ticket.path()))+"'>"),n.push("      "+t(e(this.ticket.enduser.get("name")))),n.push("    </a>")),n.push("  </div>\n  <div class='description'>"),this.ticket.labels&&this.ticket.labels.length){for(n.push("    <span class='labels'>"),s=this.ticket.labels.models,i=0,r=s.length;r>i;i++)o=s[i],n.push("      <a class='styled-label' href='"+t(e(o.path()))+"'>\n        <strong class='label-name'>"+t(e(o.get("name")))+"</strong>\n      </a>");n.push("    </span>")}return n.push("    <a class='unstyled' href='"+t(e(this.ticket.path()))+"'>"),null!=this.ticket.has("title")&&(n.push("      <span class='subject'>"),n.push("        "+t(e(this.ticket.get("title")))),n.push("      </span>")),n.push("      "+t(e(this.ticket.get("snippet")))),n.push("    </a>\n  </div>\n  <div class='date'>"),n.push("    "+t(e(this.view.createdAtHuman()))),n.push("  </div>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/ticket_to_merge_item"]=function(e){return function(){var e,t,n,i;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='result'>\n  <span class='radio'>\n    <input class='to-merge' type='radio' name='to-merge' value='"+t(e(this.ticket.get("id")))+"'>\n  </span>\n  <span class='name'>"+t(e(Groove.Util.truncateString(this.ticket.enduser.get("name"),12)))+"</span>"),this.ticket.labels&&this.ticket.labels.length&&(i=this.ticket.labels.models[0],n.push("  <span class='labels'>\n    <a class='styled-label'>\n      <strong class='label-name'>"+t(e(i.get("name")))+"</strong>\n    </a>\n  </span>")),n.push("  <span class='ticket-number'>"+t(e("#"+this.ticket.get("account_ticket_number")))+"</span>\n  <span class='title'>"),n.push("    "+t(e(Groove.Util.truncateString(this.ticket.get("title"),20)))),n.push("  </span>\n  <span class='description'>"+t(e(Groove.Util.truncateString(this.ticket.get("body"),22)))+"</span>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["tickets/ticket_update_notification"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push(""+t(e(this.message))),n.push("<a class='show-changes' href='#'>Show</a>\nthe changes or\n<a class='ignore-changes' href='#'>ignore.</a>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/new_account"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\ncreated a new shared inbox at Groove. But can you beat the record of fastest reply sent? (23 seconds)"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/new_comment_rating"]=function(e){return function(){var e,t,n,i,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.timelineEvent.get("changed_fields").grade,(i=o&&o[1])&&(n.push("<span class='rating "+i+"'>\n  <span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\n  gave"),n.push("  "+e(this.view.timelineUserLink(this.timelineEvent.secondarySubject))),n.push("  "+t(e("bad"===i?"a":"an"))),n.push("  "+t(e(i))),n.push("  rating for Ticket"),n.push("  "+e(this.view.ticketLink(this.timelineEvent.subject))),n.push("</span>")),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/new_ticket_assignee"]=function(e){return function(){var e,t,n,i,o;return e=window.HAML.cleanValue,t=[],o=this.timelineEvent.secondarySubject,n=this.agents.get(this.timelineEvent.get("changed_fields").assignee_id[0]),t.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>"),null==o?(t.push("unassigned Ticket"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),null!=n&&(t.push("from"),t.push(""+e(this.view.timelineUserLink(n))))):(null!=o?o.id:void 0)!==(null!=(i=this.timelineEvent.actor)?i.id:void 0)?(t.push("assigned Ticket"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),t.push("to"),t.push(""+e(this.view.timelineUserLink(o)))):(t.push("took ownership of Ticket"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject)))),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/new_ticket_comment"]=function(e){return function(){var e,t,n,i;return e=window.HAML.cleanValue,t=[],i=null!=(n=this.timelineEvent.secondarySubject)?n.to:void 0,t.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\nreplied to"),null!=i&&(t.push(""+e(this.view.timelineUserLink(i))),t.push("re:")),t.push("Ticket"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/new_ticket_note"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\nposted a note to Ticket"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/ticket_forwarded"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\nforwarded ticket"),n.push(""+t(e(this.timelineEvent.get("subject_string")))),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/ticket_merged"]=function(e){return function(){var e,t;return e=window.HAML.cleanValue,t=[],t.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>\nmerged a ticket into"),t.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/event_types/ticket_priority_changed"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<span class='actor'>"+e(this.view.timelineUserLink(this.timelineEvent.actor,!0))+"</span>"),n.push(""+t(e(this.view.priorityToStar(this.timelineEvent.get("changed_fields").priority[1])))),n.push("ticket"),n.push(""+e(this.view.ticketLink(this.timelineEvent.subject))),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["timeline_events/timeline_event"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a>\n  <div class='author-image'>"),null!=this.actorView&&n.push("    "+e(this.actorView.avatarImage({size:27}))),n.push("  </div>\n</a>\n<span class='activity-date'>"+t(e(moment(this.timelineEvent.get("created_at")).format("MMM Do \\a\\t h:mma")+":"))+"</span>\n<span class='activity-description'></span>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/average_first_reply_time_by_time_elapsed"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h2>Duration</h2>\n<ul>"),s=this.groups,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <li>\n    <span class='label' style='"+t(e(i.style))+"'>"+t(e(i.label))+"</span>\n    <span class='percentage'>"+t(e(i.percentage))+"</span>\n    <span class='value'>"+t(e(i.first_reply_count))+"</span>\n  </li>");return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/average_handle_time_by_elapsed"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h2>Duration</h2>\n<ul>"),s=this.groups,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <li>\n    <span class='label' style='"+t(e(i.style))+"'>"+t(e(i.label))+"</span>\n    <span class='percentage'>"+t(e(i.percentage))+"</span>\n    <span class='value'>"+t(e(i.reply_count))+"</span>\n  </li>");return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/average_reply_time_by_time_elapsed"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h2>Duration</h2>\n<ul>"),s=this.groups,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <li>\n    <span class='label' style='"+t(e(i.style))+"'>"+t(e(i.label))+"</span>\n    <span class='percentage'>"+t(e(i.percentage))+"</span>\n    <span class='value'>"+t(e(i.reply_count))+"</span>\n  </li>");return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/by_group"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h2>"+t(e(this.headline))+"</h2>\n<ul>"),s=this.groups,o=0,r=s.length;r>o;o++)i=s[o],n.push("  <li>\n    <span class='label' style='"+t(e(i.style))+"'>"+t(e(i.label))+"</span>\n    <span class='value'>"+e(i.value)+"</span>\n  </li>");return n.push("</ul>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/dashboard"]=function(e){return function(){var e;return e=[],e.push("<div class='has-fixed-header'>\n  <div class='clearfix' id='tiles'></div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/graph"]=function(e){return function(){var e;return e=[],e.push("<div id='graphPoint'></div>\n<canvas>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/graph_point"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='"+t(e(this.side))+"' id='graphPoint' style='"+t(e(this.side))+":"+t(e(this.position))+"px;'>\n  <span class='value'>"+t(e(this.value))+"</span>\n  <span class='label'>"+t(e(this.label))+"</span>\n  <span class='date'>"+t(e(this.date))+"</span>\n</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/leaderboard_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='metric'>\n  <span class='value'></span>\n  <span class='name'>"+t(e(this.name))+"</span>\n</div>\n<span class='change'></span>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/left_sidebar"]=function(e){return function(){var e,t,n,i,o,r,s,a,l,c;t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<div class='dateRange filter on'>\n  Show:&nbsp;\n  <select name='range'>"),a=this.ranges;for(c in a)o=a[c],n.push("    <option value='"+t(e(c))+"' selected='"+t(e(this.isRange(c)))+"'>"+t(e(o))+"</option>");if(n.push("  </select>\n</div>\n<div class='nav-sec' id='menu'>\n  <ul id='folders'>\n    <li class='"+["nav-i-ticketTrends",""+t(e(this.selectedFolder(this.tickets)))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n      <a href='"+t(e(this.tickets.path))+"'>Tickets</a>\n      <ul>\n        <li class='"+t(e(this.activeLeaf(this.tickets.isSelected&&!this.tickets.hasSelectedMailbox)))+"'>\n          <a href='"+t(e(this.tickets.path))+"'>All Tickets</a>\n        </li>"),this.tickets.hasMultipleMailboxes)for(l=this.tickets.mailboxes,i=0,r=l.length;r>i;i++)s=l[i],n.push("        <li class='"+t(e(this.activeLeaf(s.isSelected)))+"' data-mailbox_id='"+t(e(s.id))+"'>\n          <a href='"+t(e(s.path))+"'>"+t(e(s.name))+"</a>\n        </li>");return n.push("      </ul>\n    </li>\n    <li class='nav-i-teamTrends'>\n      <a href='/groove_client/trends/team?past=week'>Team</a>\n    </li>\n    <li class='"+["nav-i-knowledge-base",""+t(e(this.selectedFolder(this.knowledgeBase)))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n      <a href='"+t(e(this.knowledgeBase.path))+"'>Knowledge Base</a>\n    </li>\n  </ul>\n</div>\n<div id='trends-feedback'></div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/ranked_list"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h2>"+t(e(this.headline))+"</h2>\n<ol></ol>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/ranked_list_models"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.records,i=0,o=s.length;o>i;i++)r=s[i],n.push("<li class='"+t(e(r.direction))+"'>\n  <span class='position'>"+t(e(r.position+". "))+"</span>\n  <span class='name'>"+t(e(r.name))+"</span>\n  <span class='value'>"+t(e(r.value))+"</span>\n</li>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/ranked_list_records"]=function(e){return function(){var e,t,n,i,o,r,s;for(t=window.HAML.escape,e=window.HAML.cleanValue,n=[],s=this.records,i=0,o=s.length;o>i;i++)r=s[i],n.push("<li class='"+t(e(r.direction))+"'>\n  <span class='name'>"+t(e(r.name))+"</span>\n  <span class='value'>"+t(e(r.value))+"</span>\n</li>");return n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/tiles_feedback"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push(""+t(e(this.change+" "+this.range+" before."))),n.push("<strong>"+t(e(this.message))+"</strong>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/tiles_inspector"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<a class='back' href='/groove_client/trends/tickets/"+t(e(this.range))+"' data-event='leave'>Close</a>\n<section class='trend'>\n  <span class='name'>"+t(e(this.name))+"</span>\n  <span class='value'></span>\n  <span class='change'></span>\n</section>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/tiles_item"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<span class='name'>"),n.push("  "+t(e(this.name))),this.help&&n.push("  <a class='help' role='renderHelpMessage' href='#'>?</a>"),n.push("</span>\n<span class='value'></span>\n<span class='change'></span>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["trends/toolbar"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<h1>\n  <span id='reportName'>"+t(e(this.reportName))+"</span>\n  :\n  <span id='currentRange'>"+t(e(this.currentRange))+"</span>\n</h1>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["twitter/no_accounts"]=function(e){return function(){var e;return e=[],e.push("<div class='blank-state box-c-blank-slate'>\n  <p class='header'>Where #awesomecustomersupport happens.</p>\n  <p class='p'>\n    Connecting your Twitter account to Groove lets you reply, add notes and assign Tweets to team members, right from your Groove dashboard.\n  </p>\n  <p class='links-inline'>\n    <a class='blue-button no-ajaxify' href='/twitter_accounts/authorize'>Connect to Twitter</a>\n  </p>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["users/avatar_form"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],n.push("<form class='autosubmit formtastic upload' action='"+t(e(this.user.url()))+"' enctype='multipart/form-data' method='post'>\n  <li class='file optional'>\n    <label>Head shot</label>\n    <div class='file-upload'>\n      <span class='thumb user-avatar-thumb'></span>\n      <div class='controls'>\n        <span class='button-upload'>\n          <strong>"+e(this.view.buttonText||"Upload")+"</strong>\n          <input class='file' type='file' name='user[avatar]'></input>\n        </span>"),this.enduserView.hasAvatar()||n.push("        <span class='or'>or</span>\n        <a class='delete' href='#'>Delete</a>"),n.push("      </div>\n    </div>\n  </li>\n</form>\n<table class='upload_files'></table>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["users/customer_edit_form"]=function(e){return function(){var e,t,n,i,o,r,s,a;t=window.HAML.escape,e=window.HAML.cleanValue,i=window.HAML.preserve,n=[],n.push("<h1 class='h1'>User Information</h1>\n<div class='box-c-user-edit'>\n  <form class='formtastic user' novalidate='novalidate'>"),s={first_name:"First name",last_name:"Last name",twitter_screen_name:"Twitter handle",email:"Email Address",company_name:"Company name",phone_number:"Phone #"};for(o in s)r=s[o],("twitter_screen_name"!==o||this.user.has("twitter_username"))&&(a=this.user.get(o)||"",this.user.hasInvalidEmail()&&"email"===o&&(a=""),n.push("    <li class='input optional string stringish' id='user_"+o+"_input'>\n      <label class='label' for='user_"+t(e(o))+"'>"+t(e(r))+"</label>\n      <input id='user_"+o+"' maxlength='255' name='"+t(e(o))+"' type='text' value='"+t(e(a))+"'>\n    </li>"));return n.push("    <li class='input optional text' id='user_about_input'>\n      <label class='label' for='about'>About</label>\n      <textarea id='user_about' name='about' rows='7'>"+i(t(e(this.user.get("about"))))+"</textarea>\n    </li>\n    <fieldset class='actions'>\n      <ol>\n        <li class='action input_action' id='user_submit_action'>\n          <input name='commit' type='submit' value='Update Info'>\n        </li>\n        <span class='or'>or</span>\n        <a class='cancel no-ajaxify' href='#'>Cancel</a>\n      </ol>\n    </fieldset>\n  </form>\n</div>"),
n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["users/working_agent"]=function(e){return function(){var e,t,n;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],null!=this.agent&&(null!=this.agentView&&(n.push("<div class='agent-image' data-agent-email='"+t(e(this.agent.get("email")))+"'>"),n.push("  "+e(this.agentView.avatarImage({"class":"chat-user-avatar"}))),n.push("</div>")),n.push(""+t(e(this.agent.get("first_name")+" is working on this ticket")))),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(GrooveClient.templateContext(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["widgets/widget_call"]=function(e){return function(){var e;return e=[],e.push("<script>\n  (function() {var s=document.createElement('script');\n    s.type='text/javascript';s.async=true;\n    s.src=('https:'==document.location.protocol?'https':'http') +\n    '://"+this.accountSubdomain+".groovehq.com/widgets/"+this.widget.get("api_token")+"/ticket.js'; var q = document.getElementsByTagName('script')[0];q.parentNode.insertBefore(s, q);})();\n</script>"),e.join("\n")}.call(GrooveClient.templateContext(e))}}.call(this),function(){History.isTraditionalAnchor=function(){return!1}}.call(this),function(){var e,t=this,n=t.Backbone,i=[],o=i.push,r=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(e,t,n){if(!p(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!p(this,"once",e,[t,n])||!t)return this;var i=this,o=a.once(function(){i.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var i,o,r,s,l,c,u,d;if(!this._events||!p(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a.keys(this._events),l=0,c=s.length;c>l;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,d=r.length;d>u;u++)o=r[u],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!p(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var o=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var r in i)i[r].off(t,n,this),o&&delete this._listeners[r];return this}},c=/\s+/,p=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(e,t){l[t]=function(t,n,i){var o=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=a.uniqueId("l"));return o[r]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,a.extend(e,l);var h=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,m)),t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},m=["url","urlRoot","collection"];a.extend(h.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,o,r,s,l,c,p,u;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;r=n.unset,l=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),u=this.attributes,p=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)t=o[i],a.isEqual(u[i],t)||s.push(i),a.isEqual(p[i],t)?delete this.changed[i]:this.changed[i]=t,r?delete u[i]:u[i]=t;if(!l){s.length&&(this._pending=!0);for(var d=0,h=s.length;h>d;d++)this.trigger("change:"+s[d],this,u[s[d]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)a.isEqual(i[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},F(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,o,r,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=s;var t=l.parse(e,n);return n.wait&&(t=a.extend(i||{},t)),a.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},F(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),r=this.sync(o,this,n),i&&n.wait&&(this.attributes=s),r},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(o){(e.wait||t.isNew())&&i(),n&&n(t,o,e),t.isNew()||t.trigger("sync",t,o,e)},this.isNew())return e.success(),!1;F(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||I();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];a.each(f,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var g=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(g.prototype,l,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,i,o,r;for(n=0,i=e.length;i>n;n++)r=this.get(e[n]),r&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),this._removeReference(r));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,i,r,l,c,p=t.at,u=this.comparator&&null==p&&t.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,h=[],m=[],f={};for(n=0,i=e.length;i>n;n++)(r=this._prepareModel(e[n],t))&&((l=this.get(r))?(t.remove&&(f[l.cid]=!0),t.merge&&(l.set(r.attributes,t),u&&!c&&l.hasChanged(d)&&(c=!0))):t.add&&(h.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(n=0,i=this.length;i>n;++n)f[(r=this.models[n]).cid]||m.push(r);m.length&&this.remove(m,t)}if(h.length&&(u&&(c=!0),this.length+=h.length,null!=p?s.apply(this.models,[p,0].concat(h)):o.apply(this.models,h)),c&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=h.length;i>n;n++)(r=h[n]).trigger("add",r,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,i,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(o){t.wait&&n.add(e,t),i&&i(e,o,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(_,function(e){g.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(e){g.prototype[e]=function(t,n){var i=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,i,n)}});var b=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];a.extend(b.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var i=t.match(k),o=i[1],r=i[2];n=a.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,C)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var o=x[t];a.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(i.url||(r.url=a.result(n,"url")||I()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",i.emulateJSON&&(r.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=e.ajax(a.extend(r,i));return n.trigger("request",n,l,i),l};var x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,A=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(T.prototype,l,{initialize:function(){},route:function(t,n,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return e.history.route(t,function(r){var s=o._extractParameters(t,r);i&&i.apply(o,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(M,"\\$&").replace(S,"(?:$1)?").replace(G,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var z=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,R=/msie [\w.]+/,E=/\/$/;z.started=!1,a.extend(z.prototype,l,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(E,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(V,"")},start:function(t){if(z.started)throw new Error("Backbone.history has already been started");z.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=R.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace($,"/"),o&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var r=this.location,s=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&r.hash&&(this.fragment=this.getHash().replace(V,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),z.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!z.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new z;var O=function(e,t){var n,i=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,t);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&a.extend(n.prototype,e),n.__super__=i.prototype,n};h.extend=g.extend=T.extend=b.extend=z.extend=O;var I=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),function(){this.GrooveClient={Models:{},Collections:{},Views:{},Routers:{},Support:{},Mixins:{},views:{},data:{},basePath:"/groove_client/",Helpers:{agentLabel:function(e){var t,n,i,o,r;return t=GrooveClient.data.agents,e.attributes&&(e=e.attributes),r=e.archived?t:t.active(),n=r.groupBy("first_name"),o=n[e.first_name].length,1===o?e.first_name:2===o?(i="",_.isString(e.last_name)&&(i=" "+e.last_name.substr(0,1)+"."),e.first_name+i):e.first_name+" "+e.last_name},groupAgents:_.memoize(function(e){return null!=e?e.groupBy("first_name"):void 0}),price:function(e){var t;return t=(~~e/100).toFixed(2).replace(/\.00$/,""),"$"+t},label:function(e,t){var n,i,o,r,s;if(e.length<=t.max)return e;for(s=e.split(" "),i=s.shift(),n=0,o=s.length;o>n;n++){if(r=s[n],i.length+r.length+1>t.max-3)return i+"...";i+=" "+r}}},previousUrl:function(){var e;return null!=(e=History.getStateByIndex(-2))?e.url:void 0},templateContext:function(e){return $.extend({},this.Helpers,this.data,e)},navigate:function(e,t){var n;return null==e&&(e=this.basePath),null==t&&(t=!1),n=t?{state:+new Date}:null,History.pushState(n,null,e),!1},path:function(e){return null==e&&(e=""),this.basePath+e},deactivate:function(){var e,t,n,i;this.history.fragment=!1,t=this.views;for(e in t)i=t[e],null!=i.leave&&i.leave(),delete this.views[e];return null!=(n=GrooveClient.Support.SwappingRouter.currentView)&&"function"==typeof n.leave?n.leave():void 0},activate:function(){var e,t,n,i;this.deactivate(),this.prepareHistory(),this.views.mainMenu=new GrooveClient.Views.MainMenu({el:$("div.box-a-header")}),e=$(".box-a-main"),n=this.routers;for(t in n)i=n[t],i.el=e;return this.history.checkUrl(),this.data.account.isInactive()&&this.trigger("account:inactive"),!1},prepareHistory:function(){return this.history.started?void 0:(this.history.start({root:this.basePath,pushState:!0,silent:!0}),this.history.stop(),this.history.started=!0,this.history.fragment=!1)},init:function(){var e,t;return this.window=$(window),this.document=$(document),this.body=$("body,html"),this.document.on("scroll",function(e){return function(){return e.trigger("document:scroll")}}(this)),this.window.on("resize",function(e){return function(){return e.trigger("window:resize")}}(this)),this.window.on("unload",function(e){return function(){return e.trigger("window:unload")}}(this)),this.history=Backbone.history,e=$("meta[name=csrf-param]").attr("content"),t=$("meta[name=csrf-token]").attr("content"),this.data.csrfInput='<input type="hidden" name="'+e+'" value="'+t+'"/>',this.data.historyItems=new GrooveClient.Collections.HistoryItems,this.data.historyItems.fetch(),this.data.historyItems.sort(),this.on("reload",function(){return window.location.reload()}),this.bootstrap()},initStripe:function(){return"undefined"!=typeof Stripe?Stripe.setPublishableKey($("meta[name=stripe-key]").attr("content")):void 0},showExpiryAlert:function(){var e,t,n;return n="There was an error processing your card.",e=this.data.currentUser.isOwner()?"Sorry about that! Please <a href='/groove_client/billing'>re-enter your card details</a>, or try a different card.":(t=this.data.agents.where({role:"owner"})[0],"Please ask "+t.get("name")+" to update payment info to continue using Groove."),new GrooveClient.Views.Alert({title:n,message:e}).show()},showTrialEndAlert:function(){var e,t,n;return n="Your 30-day trial is scheduled to expire soon.",e=this.data.currentUser.isOwner()?"Please <a href='/groove_client/billing'>update</a> your payment info to upgrade your account to Groove Pro.":(t=this.data.agents.where({role:"owner"})[0],"Please ask "+t.get("name")+" to update payment info to continue using Groove."),new GrooveClient.Views.Alert({title:n,message:e}).show()},filterTicketSettingsForNewAccounts:function(){var e,t,n,i,o;return n=new Date(2013,5,14),e=new Date(GrooveClient.data.account.get("created_at")),null!=e&&e>n?(t=GrooveClient.data.ticketSettings.states,i=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)o=t[e],"follow_up"!==o[1]&&i.push(o);return i}(),GrooveClient.data.ticketSettings.states=i):void 0},ticketSettingsReplyStates:function(){var e;return e=GrooveClient.data.ticketSettings.states,_.reject(e,function(e){return"spam"===e[1]})},bootstrap:function(){return!this.bootstrapped&&$("#backbone").length?$.getJSON("/api/bootstrap",function(e){return function(t){var n,i,o,r,s,a,l;return o=_.where(t.agents,{invitation_token:null}),s=_.filter(t.agents,function(e){return null!=e.invitation_token}),e.data.agents=new GrooveClient.Collections.Users(o),e.data.invitedAgents=new GrooveClient.Collections.Users(s),e.data.groups=new GrooveClient.Collections.Groups(t.groups),e.data.account=n=new GrooveClient.Models.Account(t.account),e.data.currentUser=_.tap(e.data.agents.get(t.current_user_id),function(e){return e.hasPermissionToView=function(e){return null!=GrooveClient.data.mailboxes.get(e.mailbox_id)}}),window.groove&&groove.widget("setCustomer",{email:e.data.currentUser.get("email"),name:e.data.currentUser.get("name"),first_name:e.data.currentUser.get("first_name"),last_name:e.data.currentUser.get("last_name"),about:e.data.currentUser.get("about"),twitter:e.data.currentUser.get("twitter_username"),title:e.data.currentUser.get("title"),company:e.data.currentUser.get("company_name"),phone:e.data.currentUser.get("phone_number"),location:e.data.currentUser.get("location"),website:e.data.currentUser.get("website_url"),linkedin:e.data.currentUser.get("linkedin_username"),google_plus:e.data.currentUser.get("google_plus_uid"),facebook:e.data.currentUser.get("fb_uid")}),e.data.labels=new GrooveClient.Collections.Labels(t.labels),r=e.data.filters=new GrooveClient.Collections.Filters(t.filters),e.on("filters:update",function(){return r.fetch({global:!1,reset:!0})}),e.data.mailboxes=new GrooveClient.Collections.Mailboxes(t.mailboxes),t.inaccessibleMailboxes&&(e.data.inaccessibleMailboxes=new GrooveClient.Collections.Mailboxes(t.inaccessibleMailboxes,{accessible:!1})),e.data.draftFilters=e.data.filters.where({drafts:!0}),e.data.twitterAccounts=new GrooveClient.Collections.TwitterAccounts(t.twitter_accounts),e.data.agentUsernames=new GrooveClient.Collections.AgentUsernames(t.agent_usernames),e.data.attachmentUrl=t.widget_attachment_url,e.data.accountUrl=t.account_root_url,e.data.accountSubdomain=t.account_subdomain,e.data.currentWidgetPath=t.current_widget_path,e.data.timelineEvents=new GrooveClient.Collections.TimelineEvents(t.timeline_events),e.data.workingTickets=e.data.workingTickets||{},e.data.widget=new GrooveClient.Models.Widget(t.widget),e.data.commentTemplateCategories=new GrooveClient.Collections.CommentTemplateCategories(t.comment_template_categories),e.data.commentTemplates=new GrooveClient.Collections.CommentTemplates(t.comment_templates),e.data.facebookPages=new Backbone.Collection(t.facebook_pages),e.data.timezones=t.timezones,e.data.preferredMailboxId=t.preferred_mailbox_id,i=function(t,n){return null==n&&(n=!0),n?e.data.emailMarketing={integrations:new GrooveClient.Collections.EmailMarketingIntegrations}:delete e.data.emailMarketing},n.get("prefers_email_marketing_profile_installed")&&i(n),n.on("change:prefers_email_marketing_profile_installed",i),e.bootstrapped=t.bootstrapped_at,e.usage=new GrooveClient.Usage.Session({account:e.data.account,user:e.data.currentUser}),e.routers={index:new GrooveClient.Routers.Index,tickets:new GrooveClient.Routers.Tickets,settings:new GrooveClient.Routers.Settings,agents:new GrooveClient.Routers.Agents,billing:new GrooveClient.Routers.Billing,apps:new GrooveClient.Routers.Apps,contacts:new GrooveClient.Routers.Contacts,trends:new GrooveClient.Routers.Trends},new GrooveClient.Views.SearchBox({el:document}),new GrooveClient.Views.FlashMessage,e.initStripe(),(null!=(a=e.data.account)?a.get("expiry_alert"):void 0)&&e.showExpiryAlert(),(null!=(l=e.data.account)?l.isTrialEnding():void 0)&&e.showTrialEndAlert(),e.filterTicketSettingsForNewAccounts(),e.data.ticketReplyStates=e.ticketSettingsReplyStates(),e.trigger("bootstrap",e,e.data),e.activate()}}(this)):void 0},isntBootstrapped:function(){return void 0===this.bootstrapped},log:function(e,t){return this.bootstrapped&&109416===this.data.currentUser.id?("filters"===t&&(t=this.routers.tickets.filters),$.localStorage("ap_"+(new Date).toString()+"_"+e,t),this.truncateLog()):void 0},truncateLog:function(){return Object.keys(localStorage).forEach(function(e){var t,n,i;return/^ap_/.test(e)&&(t=e.split("_"),n=new Date(t[1]),i=new Date,i.setDate(i.getDate()-2),i>n)?localStorage.removeItem(e):void 0})},openNewTicketWithEmail:function(e){var t;return t=encodeURIComponent(e),GrooveClient.navigate(GrooveClient.path("tickets/new/"+t),{trigger:!0})}},_.extend(GrooveClient,Backbone.Events),$(function(){return GrooveClient.init()})}.call(this),function(e,t,n){var i={localStorage:!1,sessionStorage:!1};t.each(["localStorage","sessionStorage"],function(o,r){try{i[r]=e[r]&&e[r].setItem}catch(s){}t[r]=function(o,s){if(s===n){var a=i[r]?e[r].getItem(o):t.cookie(o);return a===n||null===a?null:JSON.parse(a)}return null===s?(i[r]?e[r].removeItem(o):t.cookie(o,null,{path:"/",expires:-365}),this):(s=JSON.stringify(s),i[r]?e[r].setItem(o,s):t.cookie(o,s,{path:"/",expires:"localStorage"===r?365:n}),this)},t[r+"Clear"]=function(n){var o=new RegExp("^"+(i[r]?"":r+":"),"");if(i[r])if(n)e[r].clear();else for(var s in e[r])o.test(s)&&e[r].removeItem(s);else document.cookie&&""!==document.cookie&&t.each(document.cookie.split(";"),function(e,n){o.test(n=t.trim(n))&&t.cookie(n.substr(0,n.indexOf("=")),null,{path:"/",domain:document.domain,expires:-365})});return this}})}(window,jQuery),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Support.CompositeView=function(t){function n(){this._children={},this.on("swap",function(e){return function(){var t,n,i,o;null!=e.onSwap&&e.onSwap(),i=e._children,o=[];for(n in i)t=i[n],o.push(t.trigger("swap"));return o}}(this)),this.on("leave",function(e){return function(){var t,n,i,o;i=e._children,o=[];for(n in i)t=i[n],o.push(t.trigger("leave"));return o}}(this)),n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=$.noop,n.prototype.compositeBind=function(){return console.warn("compositeBind is deprecated. Use listenTo instead"),this.listenTo.apply(this,arguments)},n.prototype.renderTemplate=function(){return this.$el.html(this.template.apply(this,arguments)),this},n.prototype.render=function(){return this.renderTemplate()},n.prototype.leave=function(){return this.trigger("leave"),this.stopListening(),this.stopListeningToDocument(),this._leaveChildren(),this._removeFromParent()},n.prototype.renderChild=function(e){return this._children[e.cid]=e,e.parent=this,e.render(),e},n.prototype.siblingSelector=function(){var e;return e=this.tagName,this.className&&(e+="."+this.className.replace(/\s+/,".")),e},n.prototype.listenToDocument=function(e,t){return this._eventNamespace=null!=this.id?this.id:this.constructor.name,e=e+"."+this._eventNamespace,$(document).on(e,t),this._isListeningToDocument=!0},n.prototype.stopListeningToDocument=function(){return null!=this._isListeningToDocument?$(document).off("."+this._eventNamespace):void 0},n.prototype.renderChildInto=function(e,t){return this.$(t).empty().append(this.renderChild(e).el)},n.prototype.appendChild=function(e){return this.$el.append(this.renderChild(e).el)},n.prototype.appendReact=function(e,t){return null==t&&(t={}),this.appendReactTo(e,this.el,t)},n.prototype.appendChildTo=function(e,t){return this.$(t).append(this.renderChild(e).el)},n.prototype.appendReactTo=function(e,t,n){return null==n&&(n={}),this._withReactElement(e,n,function(e){return t.appendChild(e)})},n.prototype.appendChildBefore=function(e,t){return this.$(t).before(this.renderChild(e).el)},n.prototype.prependChild=function(e){return this.$el.prepend(this.renderChild(e).el)},n.prototype.prependChildTo=function(e,t){return this.$(t).prepend(this.renderChild(e).el)},n.prototype.replaceWithChild=function(e,t){return this.$(t).replaceWith(this.renderChild(e).el)},n.prototype.insertChildAtIndexTo=function(e,t,n){var i;return i=this.$(n).find(">"+e.siblingSelector()).eq(t),i.length?i.before(this.renderChild(e).el):this.appendChildTo(e,n)},n.prototype.filterViewsByModel=function(e){var t,n,i,o;n=this._children,i=[];for(t in n)o=n[t],o.model===e&&i.push(o);return i},n.prototype.renderEditor=function(e,t){var n;return null==t&&(t={}),_.extend(t,{autoGrow_minHeight:t.height}),n=CKEDITOR.replace(e,t),
$("#fancybox-content > *").length||this.$el.one("remove",function(){return n.destroy()}),n.on("focus",function(){return n.container.addClass("focus")}),n.on("blur",function(){return n.container.removeClass("focus")}),n},n.prototype._leaveChildren=function(){var e,t,n,i;t=this._children,n=[];for(e in t)i=t[e],i.leave&&n.push(i.leave());return n},n.prototype._removeFromParent=function(){return this.parent&&this.parent._removeChild?this.parent._removeChild(this):void 0},n.prototype._removeChild=function(e){return delete this._children[e.cid]},n.prototype._withReactElement=function(e,t,n){var i,o;return i=document.createElement("div"),o=React.createElement(e,t),React.render(o,i),n(i),this.once("leave",function(){return React.unmountComponentAtNode(i)})},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=function(e,t){return function(){return e.apply(t,arguments)}};GrooveClient.Support.EditInPlaceForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="form",n.prototype.events={submit:function(e){return e.preventDefault(),this._updateModel(this.$("input").val())},focusout:function(e){return this._updateModel($(e.target).val())},input:function(){return this._hasError?this._removeError():void 0},keydown:function(e){return 27===e.keyCode?this._cancel():void 0}},n.prototype.initialize=function(e){return this.model=e.model,this.attribute=e.attribute,this.currentValue=this.model.get(this.attribute)},n.prototype.render=function(){return this.$el.html($("<input>",{value:this.currentValue,placeholder:"Category name"})),this},n.prototype._renderError=function(e){return this._hasError&&this._removeError(),this._hasError=!0,this.$el.addClass("error"),this.$el.append($("<span>",{text:e}))},n.prototype._removeError=function(){return this.$el.removeClass("error"),this.$("span").remove(),delete this._hasError},n.prototype._updateModel=function(e){var t;return e===this.currentValue||""===e?this.model.trigger("done"):(t={},t[this.attribute]=e,this.model.save(t,{wait:!0,success:function(e){return e.trigger("done")},error:function(e){return function(t,n){var i,o;t.set(e.attribute,t.previous(e.attribute));try{return i=$.parseJSON(n.responseText).errors.name}catch(r){return o=r,i="Could not save"}finally{e._renderError(i)}}}(this)}))},n.prototype._cancel=function(){return this.model.set(this.attribute,this.model.previous(this.attribute)||this.currentValue),this.model.trigger("done")},n}(Backbone.View),GrooveClient.Support.EditInPlaceView=function(t){function i(){return this.render=n(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=JST["settings/shared/edit_in_place"],i.prototype.attribute="text",i.prototype.initialize=function(e){return this.el=e.el,this.model=e.model,this.attribute=e.attribute,this.listenTo(this.model,"done",this.render)},i.prototype.events={"click a.edit-in-place-link":"edit"},i.prototype.render=function(){return this.$el.html(this.template({title:this.model.get(this.attribute)})),this},i.prototype.edit=function(){var e;return e=new GrooveClient.Support.EditInPlaceForm({model:this.model,attribute:this.attribute}),this.$el.html(e.render().el),this.$el.find("input").select()},i}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FancyboxView=function(t){function n(){this.initArgs=arguments,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.renderOnce=!1,n.prototype.renderContents=function(){var e,t,n,i,o,r;for(e=$(),t=_.isArray(this.contents)?this.contents:[this.contents],n=0,i=t.length;i>n;n++)r=t[n],o=function(e,t,n){n.prototype=e.prototype;var i=new n,o=e.apply(i,t);return Object(o)===o?o:i}(r,this.initArgs,function(){}),e=e.add(this.renderChild(o).el);return this.setElement(e)},n.prototype.render=function(){return this.contents?this.renderContents():this.template&&this.renderTemplate.apply(this,this.initArgs),this._renderedAt=new Date,this},n.prototype.close=function(){return $.fancybox.close()},n.prototype.onShow=function(){return this.trigger("swap")},n.prototype.onClose=function(){return this.renderOnce?void 0:this.leave()},n.prototype.fancyboxOptions=function(){var e;return e=_.extend({},Groove.Fancybox.params.one),delete e.type,delete e.onComplete,_.extend(e,{content:this.$el,onClosed:function(e){return function(){return e.onClose()}}(this),onComplete:function(e){return function(){return e.onShow()}}(this)})},n.prototype.appear=function(){var e,t,n,i;if(this.renderOnce&&this._renderedAt)for(this.delegateEvents(),i=this._children,t=0,n=i.length;n>t;t++)e=i[t],e.delegateEvents();else this.render();return $.fancybox(this.fancyboxOptions())},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Support.FetchingCollection=function(n){function i(){this.reset=e(this.reset,this),this.fetching=!1,i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.fetch=function(e){var t;return null==e&&(e={}),this.fetching=!0,this.trigger("fetch:start"),t=e.complete,e.complete=function(e){return function(){return e.fetching=!1,e.wasFetched=!0,e.trigger("fetch:complete"),"function"==typeof t?t.apply(null,arguments):void 0}}(this),i.__super__.fetch.call(this,e)},i.prototype.reset=function(){return this.wasFetched=!1,i.__super__.reset.apply(this,arguments)},i}(Backbone.Collection)}.call(this),function(){var e,t;null==(e=String.prototype).trim&&(e.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),null==(t=Array.prototype).indexOf&&(t.indexOf=function(e,t){var n,i;for(null==t&&(t=0),n=t,i=this.length;i>n;){if(this[n]===e)return n;n++}return-1})}.call(this),function(){null==this.GrooveClient&&(this.GrooveClient={}),GrooveClient.Usage={}}.call(this),function(){GrooveClient.Usage.Identity=function(){function e(e){var t,n;t=e.account,n=e.user,this._ids={account:t.get("subdomain"),user:n.get("email")+"["+t.id+"]"}}return e.prototype.id=function(e){return this._ids[e]},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};GrooveClient.Usage.KissmetricsSession=function(){function n(t){this.session=t,this._initializeIdentity=e(this._initializeIdentity,this),this._push=e(this._push,this),this.track=e(this.track,this),this._identify(this.session.id("account")),this.session.on("all",this.track)}return n.prototype.track=function(e,t,n){return null==n&&(n={}),this._identify(t),this._record(e,n)},n.prototype._identify=function(e){return e!==this._currentId?(this._push(["identify",e]),this._currentId=e):void 0},n.prototype._record=function(e,t){return null==t&&(t={}),this._push(["record",this._format(e),t])},n.prototype._format=function(e){return e.replace(":","-")},n.prototype._push=function(e){return null==window._kmq&&(window._kmq=[]),_kmq.push(e)},n.prototype._initializeIdentity=function(){var e,n,i;return i=KM.i(),e=this.session.id("user"),this._isAnonymous(i)?KM.identify(e):(n=t.call(i,"@")<0?e:this.session.id("user"),i!==n?KM.identify(n):void 0)},n.prototype._isAnonymous=function(e){return"="===e[-1]},n}()}.call(this),function(){GrooveClient.Usage.Session=function(){function e(e){this._identity=new GrooveClient.Usage.Identity(e),this._kissmetrics=new GrooveClient.Usage.KissmetricsSession(this)}return e.prototype.track=function(e,t){return null==t&&(t={}),this._hasIdentity(e)?this.trigger(e,this.id(this._scope(e)),t):this._trackAsAccount(e,t)},e.prototype.id=function(e){return this._identity.id(e)},e.prototype._trackAsAccount=function(e,t){return this.track("account:"+e,t)},e.prototype._trackAsAccountAndUser=function(e,t){return this.track("user:"+e,t),this.track("account:"+e,t)},e.prototype._scope=function(e){return e.slice(0,e.indexOf(":"))},e.prototype._hasIdentity=function(e){return null!==e.match(/^(user|account)/)},e}(),_.extend(GrooveClient.Usage.Session.prototype,Backbone.Events)}.call(this),function(){Backbone.View.prototype.track=function(e,t){return null==t&&(t={}),GrooveClient.usage.track(e,t)}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Support.LayoutView=function(t){function n(){this.intialArguments=arguments,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className=!1,n.prototype.el=!1,n.prototype.render=function(){var e,t;return t=new this.layout(this.layoutComponents()),e=this.$el,this.setElement(this.renderChild(t).el,!0),e.replaceWith(this.$el),this},n.prototype.layoutComponents=function(e){var t;return null==e&&(e={}),t={},e.mainView!==!1&&null!=this.mainView&&(t.mainView=this.buildComponent("mainView")),e.leftSidebar!==!1&&null!=this.leftSidebar&&(t.leftSidebar=this.buildComponent("leftSidebar")),e.rightSidebar!==!1&&null!=this.rightSidebar&&(t.rightSidebar=this.buildComponent("rightSidebar")),t},n.prototype.buildComponent=function(e){return function(e,t,n){n.prototype=e.prototype;var i=new n,o=e.apply(i,t);return Object(o)===o?o:i}(this[e],this.intialArguments,function(){})},n.prototype.component=function(e){var t,n;return t=this[e],n=_.values(this._children)[0],_.find(n._children,function(e){return e.constructor===t})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){GrooveClient.Support.StripeCreditCard=function(){function e(e,t,n,i,o){this.number=e,this.cvc=t,this.exp_month=n,this.exp_year=i,this.name=o}return e.prototype.validate=function(){return this.errors={},this.isBlank(this.number)?this.addError("number","Card number cannot be blank"):Stripe.validateCardNumber(this.number)||this.addError("number","Card number is invalid"),this.isBlank(this.cvc)?this.addError("cvc","Card security code (CVC) cannot be blank"):Stripe.validateCVC(this.cvc)||this.addError("cvc","Card security code (CVC) is invalid"),this.isBlank(this.exp_month)&&this.addError("exp_month","Card's expiration month cannot be blank"),this.isBlank(this.exp_year)&&this.addError("exp_year","Card's expiration year cannot be blank"),_.keys(this.errors).length>0?this.errors:void 0},e.prototype.isBlank=function(e){return!/\S/.test(e)},e.prototype.addError=function(e,t){return this.errors[e]=t},e.prototype.process=function(e){return Stripe.createToken({number:this.number,cvc:this.cvc,exp_month:this.exp_month,exp_year:this.exp_year,name:this.name},e),this.errors={}},e}()}.call(this),function(){var e,t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Support.SwappingRouter=function(n){function i(e){e&&e.el&&(this.el=e.el),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.swap=function(t){var n;return n=e.currentView,null!=n&&"function"==typeof n.leave&&n.leave(),null!=t?(e.currentView=t,$(this.el).empty().append(t.render().el),this.afterSwap()):void 0},i.prototype.afterSwap=function(){var t;return _.defer(Groove.UI.dropdowns),null!=(t=e.currentView)&&"function"==typeof t.trigger?t.trigger("swap"):void 0},i.prototype._redirectTo=function(e){return History.replaceState({},null,"/groove_client/"+e)},i}(Backbone.Router),e=GrooveClient.Support.SwappingRouter}.call(this),function(){}.call(this),function(){GrooveClient.Mixins.GroupAndAssigneeDropdowns={assigneesForGroup:function(e){var t,n;return null==e&&(e=this.assigneeGroupDropDownId()),t=(null!=(n=GrooveClient.data.groups.get(e))?n.users:void 0)||GrooveClient.data.agents,new Backbone.Collection(t.where({archived:!1}))},renderGroupAndAssignee:function(e){var t,n,i,o,r,s,a;return n=this.$(e).empty(),o=GrooveClient.data.groups,o.isEmpty()||(i="assignee_group_id",a=this.model.get("assignee_group_id"),t="Assign",null!=(r=this.groupDropDown)&&r.leave(),this.groupDropDown=new GrooveClient.Views.SelectDropDown({name:i,selected:a,options:o,blank:t}),this.appendChildTo(this.groupDropDown,n),this.groupDropDown.$(".pretty-options li:first a").text("Anyone")),o=this.assigneeOptions(),i="assignee_id",t="Assign",a=this.model.get("assignee_id"),null!=(s=this.assigneeDropDown)&&s.leave(),this.assigneeDropDown=new GrooveClient.Views.SelectDropDown({name:i,selected:a,blank:t,options:o}),this.appendChildTo(this.assigneeDropDown,n),this.assigneeDropDown.$(".pretty-options li:first a").text("Anyone")},updateTicketAssignee:function(e){return this._updateDropdown(this.assigneeDropDown,this._valueFor("assignee_id",e))},updateTicketAssigneeGroup:function(e){return this._updateDropdown(this.groupDropDown,this._valueFor("assignee_group_id",e))?this.updateAgents():void 0},_updateDropdown:function(e,t){var n;if(null!=e)return e.selectValue(t),(n=e.getOptionByValue(t))&&e.$(".pretty-selector span").text(n[0]),Groove.UI.dropdowns(),null!=n},_valueFor:function(e,t){return t.target?$(t.target).val():t.get(e)},updateAgents:function(){return this.assigneeDropDown?(this.assigneeDropDown.setOptions(this.assigneeOptions()),this.assigneeDropDown.render(),this.assigneeDropDown.$(".pretty-options li:first a").text("Anyone")):void 0},assigneeOptions:function(){var e,t;return t=function(){var t,n,i,o;for(i=this.assigneesForGroup().models,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push([e.firstNameAndLastInitial(),e.id]);return o}.call(this)}}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Account=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/account"},n.prototype.initialize=function(){return this.on("change:type",this._checkPermissions,this),this.owner=GrooveClient.data.agents.get(this.get("owner_id"))},n.prototype.isHelpdesk=function(){return"helpdesk"===this.get("type")},n.prototype.isInactive=function(){return this.get("inactive")},n.prototype.isActive=function(){return this.get("active")},n.prototype.isFree=function(){return this.get("free")},n.prototype.isTrial=function(){return this.get("trial")},n.prototype.hasRatingsInstalled=function(){return this.get("prefers_customer_ratings_installed")},n.prototype.isTrialEnding=function(){return this.isTrial()&&null!=this.get("trial_days_left")?null!=this.get("stripe_last4")?!1:this.get("trial_days_left")<10:!1},n.prototype.discount=function(){var e;return e=~~this.get("discount_percentage"),e>0?e+"%":!1},n.prototype._checkPermissions=function(){return this.id!==GrooveClient.data.account.id||this.skipEvents?void 0:GrooveClient.trigger("reload")},n.prototype.missingPaymentCredentials=function(){return!this.get("stripe_customer_token")},n.prototype.accessibleMailboxesToMove=function(){var e,t,n;return n=GrooveClient.data,e=n.mailboxes,t=n.inaccessibleMailboxes,this.get("prefers_agents_can_move_to_inaccessible_mailboxes")?e.models.concat(t.models):e.models},n.prototype.close=function(){return $.post("/api/account/close",function(){return GrooveClient.trigger("reload")})},n.prototype.otherApps=function(){var e;return e=[],"Slack::App"===this.get("prefers_team_chat_app")&&e.push({name:"Slack",slug:"slack"}),this.get("prefers_mail_chimp_installed")&&e.push({name:"MailChimp",slug:"mail-chimp"}),this.get("prefers_campaign_monitor_installed")&&e.push({name:"Campaign Monitor",slug:"campaign-monitor"}),this.get("prefers_constant_contact_installed")&&e.push({name:"Constant Contact",slug:"constant-contact"}),e},n.prototype.setEmailMarketingPreferences=function(e,t){return this.set("prefers_email_marketing_profile_installed",t),this.set("prefers_"+e+"_installed",t)},n.prototype.toJSON=function(){return{account:{stripe_card_token:this.get("stripe_card_token"),type:this.get("type"),billing_cycle:this.get("billing_cycle"),prefers_knowledge_base_installed:this.get("prefers_knowledge_base_installed"),prefers_support_widget_installed:this.get("prefers_support_widget_installed"),prefers_customer_ratings_installed:this.get("prefers_customer_ratings_installed"),prefers_custom_profile_app_installed:this.get("prefers_custom_profile_app_installed"),prefers_snap_engage_installed:this.get("prefers_snap_engage_installed"),prefers_olark_installed:this.get("prefers_olark_installed"),prefers_team_chat_app:this.get("team_chat_app"),prefers_mail_chimp_installed:this.get("prefers_mail_chimp_installed"),prefers_email_marketing_profile_installed:this.get("prefers_email_marketing_profile_istalled"),has_twitter_installed:this.get("has_twitter_installed"),has_facebook_installed:this.get("has_facebook_installed"),has_hip_chat_installed:this.get("has_hipchat_installed")}}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.AgentUsername=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.agent=function(){return GrooveClient.data.agents.get(this.get("agent_id"))},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.App=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/apps",n.prototype.grooveUrl=function(){return"/groove_client/apps/"+this.get("slug")},n.prototype.isInstalled=function(){return this.get("installed")===!0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.AppInstallation=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var e,t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;e=["jpg","jpeg","png","gif"],GrooveClient.Models.Attachment=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.fileExtension=function(){var e,t,n;return null!=(e=this.get("name"))&&null!=(t=e.match(/\.(\w+)$/))&&null!=(n=t[1])?n.toLowerCase():void 0},i.prototype.isImage=function(){var t;return t=this.fileExtension(),-1!==e.indexOf(t)},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.ChatIntegration=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return this.id?"/chat/integrations/"+this.id+".json":"/chat/integrations.json"},n.prototype.webhookUrl=function(){return"https://"+document.location.hostname+"/chat/integrations/"+this.get("token")+"/webhook"},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Comment=function(t){function n(e){n.__super__.constructor.call(this,e),null!=e.author&&(this.author=new GrooveClient.Models.User(e.author)),null!=e.to&&(this.to=new GrooveClient.Models.User(e.to)),this.forwardedTo=new GrooveClient.Collections.Users(e.forwarded_to),null!=e.attachments&&(this.attachments=new GrooveClient.Collections.Attachments(e.attachments))}return e(n,t),n.prototype.urlRoot="/api/comments",n.prototype.undo=function(){var e;return e=$.ajax({url:"/api/comments/"+this.id+"/undo",type:"PUT",beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({client_id:GrooveChat.getClientId()})}),e.then(function(e){return function(){return e.trigger("undo",e),GrooveClient.trigger("comments:delete",e)}}(this))},n.prototype.isIncomingEmail=function(){var e;return e=this.get("type"),"Comment"===e||_.isEmpty(e)},n.prototype.isNote=function(){return this.isPrivate()&&!(this.isForward()||this.isReply())},n.prototype.isTwitterComment=function(){return"TwitterComment"===this.get("type")},n.prototype.isReply=function(){return!_.isEmpty(this.to)},n.prototype.isForward=function(){return this.forwardedTo.length>0||!_.isEmpty(this.get("forwarding_address"))},n.prototype.isPrivate=function(){return this.get("private")===!0},n.prototype.isAgentResponse=function(){return this.get("agent_response")===!0},n.prototype.sanitizedBody=function(){return Groove.Util.escapeScript(this.get("body"))},n.prototype.toJSON=function(){return{comment:{body:this.get("body")}}},n.prototype.type=function(){return this.get("has_collaborator")?"third-party":this.get("private")?"private":"public"},n.prototype.hasBeenRead=function(){return!_.isNull(this.get("read_at"))},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CommentTemplate=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/comment_templates",n.INTERPOLATION_REGEX=/[%$]\{(\w*)\}/g,n.prototype.interpolatedBody=function(e){return this.get("body").replace(this.constructor.INTERPOLATION_REGEX,function(t,n){return e[n]||""})},n.prototype.validate=function(e){return null==e.title||String(e.title).match(/^\s*$/)?"Title can't be blank":null==e.body||String(e.body).match(/^\s*$/)?"Body can't be blank":void 0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CommentTemplateCategory=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.baseUrl="/api/comment_templates_categories",n.prototype.validate=function(e){return null==e.name||String(e.name).match(/^\s*$/)?"Name can't be blank":void 0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Company=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/contacts/companies",n.prototype.companyContactUrl=function(){return"/groove_client/contacts/companies/"+this.get("name")},n.prototype.lastTicketCreatedAtDisplay=function(){var e,t;return e=(t=this.get("last_ticket_created_at"))?moment(t,"YYYYMMDD").fromNow(!0):"No Tickets Created Yet"},n.prototype.parse=function(e,t){var i,o;return this.tickets=new GrooveClient.Collections.CompanyTickets({models:null!=(i=e.tickets)?i.models:void 0}),this.ratedTickets=new GrooveClient.Collections.CompanyTickets({models:null!=(o=e.ratedTickets)?o.models:void 0}),this.timelineEvents=new GrooveClient.Collections.CompanyTimelineEvents(e.timelineEvents),this.people=new GrooveClient.Collections.People(e.people),n.__super__.parse.call(this,e,t)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Person=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/contacts/people",n.prototype.initialize=function(){return this.profileTickets=new GrooveClient.Collections.PersonTickets({enduser:this}),this.timelineEvents=new GrooveClient.Collections.PersonTimelineEvents({person:this}),this.ratedTickets=new GrooveClient.Collections.PersonTickets({enduser:this,rated:!0,unpaginate:!0})},n.prototype.companyContactUrl=function(){return"/groove_client/contacts/companies/"+this.get("company")},n.prototype.personContactUrl=function(){return"/groove_client/contacts/customers/"+this.get("id")},n.prototype.lastTicketUpdatedAtDisplay=function(){var e,t;return e=(t=this.get("last_ticket_updated_at"))?moment(t,"YYYYMMDD").fromNow(!0):"No Tickets Created Yet"},n.prototype.createdAtDisplay=function(){var e,t;return t=(e=this.get("created_at"))?moment(e,"YYYYMMDD").fromNow(!0):""},n.prototype.hasInvalidEmail=function(){var e;return e=this.get("email"),!_.isString(e)||!e.length},n.prototype.possessiveFirstName=function(){var e;return e=this.get("first_name"),null!=e?e+=e.match(/s$/)?"'":"'s":void 0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.PersonTimelineEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CustomProfile=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/custom_profiles",n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CustomProfileApp=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/custom_profile_app",n.prototype.exampleWebhookQueryString=function(){var e,t;return t=["email=joe@example.com"],(e=this.get("api_token"))&&t.push("api_token="+e),"?"+_.compact(t).join("&")},n.prototype.exampleWebhookUrl=function(){var e;return(e=this.get("webhook_url"))?e+this.exampleWebhookQueryString():void 0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.EmailIntegration=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/email_marketing/integrations/"+this.id+".json"},n.prototype.parse=function(e){return e.mailbox_settings&&(this.mailboxSettings=this._parseMailboxSettings(e.mailbox_settings),delete e.mailbox_settings),e.lists&&(this.lists=this._parseLists(e.lists),delete e.lists),n.__super__.parse.call(this,e)},n.prototype.subscriptionsFor=function(e){return new GrooveClient.Collections.EmailMarketingSubscriptions([],{integration:this,enduser:e})},n.prototype._parseMailboxSettings=function(e){return new GrooveClient.Collections.EmailMarketingMailboxSettings(e,{integration:this})},n.prototype._parseLists=function(e){return new GrooveClient.Collections.EmailMarketingLists(e,{integration:this})},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.EmailMarketingMailboxSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return this.isNew()?this.collection.url():"/email_marketing/integrations/"+this.integration.get("type")+"/mailbox_settings/"+this.get("mailbox_id")+".json"},n.prototype.initialize=function(){return this.collection?this.integration=this.collection.integration:void 0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.EmailMarketingSubscription=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){var e;return this.id?(e=$.param({enduser_id:this.collection.enduser.id}),"/email_marketing/integrations/"+this.collection.integration.id+"/subscriptions/"+this.id+".json?"+e):this.collection.url()},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Feedback=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/feedback",n.prototype.toJSON=function(){return{feedback:this.attributes}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Filter=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){var e,t,n,i;return n="filters/"+this.id,i=GrooveClient.data,e=i.account,t=i.mailboxes,e.get("prefers_grouping_filters_by_mailbox")&&!t.isEmpty()&&this.has("mailbox_id")&&(n="mailboxes/"+this.get("mailbox_id")+"/"+n),GrooveClient.path(n)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Group=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/groups",n.prototype.initialize=function(e){return this.on("change",this.setupRelations,this),this.setupRelationsFromAttributes(e)},n.prototype.setupRelations=function(e){return this.setupRelationsFromAttributes(e.attributes)},n.prototype.setupRelationsFromAttributes=function(e){var t;return null!=e.user_ids?t=_.collect(e.user_ids,function(e){return GrooveClient.data.agents.get(e)}):null!=e.users&&(t=e.users),null!=t?this.users=new GrooveClient.Collections.Users(t):void 0},n.prototype.contactUrl=function(){return GrooveClient.path("settings/groups/"+this.get("id"))},n.prototype.agentCount=function(){var e;return(null!=(e=this.users)?e.length:void 0)||0},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.HipChatApp=function(t){function n(e){null==e&&(e={}),this.mailbox_links=new Backbone.Collection,this.notifications=new Backbone.Collection,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/hip_chat_app",n.prototype.parse=function(e){return this.rooms=e.rooms,this.mailbox_links.reset(e.mailbox_links),this.notifications.reset(e.notifications),_.omit(e,["rooms","mailbox_links","notifications"])},n.prototype.toJSON=function(){var e;return e=_.clone(_.omit(this.attributes,["mailbox_links","notifications"])),{hip_chat_app:_.extend(e,{hip_chat_mailbox_links_attributes:this.get("mailbox_links"),notifications_attributes:this.get("notifications")})}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,
e},t={}.hasOwnProperty;GrooveClient.Models.HistoryItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){var e;return this.set({description:(null!=(e=this.get("description"))?e.substring(0,100):void 0)||""}),this.get("visitedAt")?void 0:this.visit()},n.prototype.visit=function(){return this.set({visitedAt:this.timeStamp()})},n.prototype.timeStamp=function(){return Date.now?Date.now():(new Date).valueOf()},n.prototype.path=function(){return GrooveClient.path("tickets/"+this.id)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Invitation=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/users/invitation",n.prototype.toJSON=function(){return{user:{email:this.get("email_address")}}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Invoice=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/account/invoices",n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.KnowledgeBaseTopic=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/knowledge_base_topics",n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Label=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return this.isNew()?"/api/labels":"/api/labels/"+this.id},n.prototype.path=function(){return GrooveClient.path("label/"+this.id)},n.prototype.toJSON=function(){return{id:this.id,"public":this.get("public"),name:this.get("name"),url:this.path()}},n}(Backbone.Model)}.call(this),function(){var e=[].slice;GrooveClient.Models.WithStateMachine={saveStateEvent:function(e,t){return null==t&&(t={}),t.wait=!0,this.save({state_event:e},{success:function(n){return function(i,o){return null!=t.success&&t.success(i),n.trigger(e,n)}}(this),error:function(e,n){return null!=t.error?t.error(e,n):void 0}})},isState:function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],this.has("state")?_.any(t,function(e){return function(t){return e.get("state")===t}}(this)):!1}}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Mailbox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return this.isNew()?"/api/mailboxes.json":"/api/mailboxes/"+this.id+".json"},n.prototype.toJSON=function(){return this.isNew()?n.__super__.toJSON.apply(this,arguments):{mailbox:n.__super__.toJSON.apply(this,arguments)}},n.prototype.initialize=function(){return!this.collection||this.collection.accessible?(this.globalFilters=GrooveClient.data.filters,this.filters=new GrooveClient.Collections.Filters([],{mailbox:this}),this.updateFiltersRelation(),this.globalFilters.on("reset",this.updateFiltersRelation,this)):void 0},n.prototype.updateFiltersRelation=function(){var e,t,n,i,o;for(e=[],o=this.globalFilters.models,n=0,i=o.length;i>n;n++)t=o[n],~t.get("mailbox_ids").indexOf(this.id)&&e.push(_.extend({mailbox_id:this.id},t.attributes));return this.filters.reset(e)},n.prototype.domain=function(){var e;return null!=(e=this.get("email"))?e.split("@")[1]:void 0},n.prototype.labelName=function(){var e,t,n,i;return t=this.get("name"),e=GrooveClient.data.mailboxes.commonNames(),i=(n=_(t.split(" "))).without.apply(n,e),_.isEmpty(i)?t:i.join(" ")},n}(Backbone.Model),_.extend(GrooveClient.Models.Mailbox.prototype,GrooveClient.Models.WithStateMachine)}.call(this),function(){var e,t,n=function(e,t){function n(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty,o=[].slice;t=["account_id","enduser_id","creator_id","assignee_id","assignor_id","title","state","ticket_type","priority","fb_uid","facebook_page_id","twitter_account_id","reply_cc_address","reply_bcc_address","forwarding_address","page_title","page_url","referrer","browser","platform","city","country","assignee_group_id","comments_attributes","enduser_email","enduser_name","enduser_company_name","enduser_phone_number","enduser_populate_profile_now","label_string","send_copy_to_enduser","mailbox_id","ticket_drafts_attributes","from_enduser","client_id"],e=["reply_cc_address","reply_bcc_address","comments_attributes"],GrooveClient.Models.Ticket=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.urlRoot="/api/tickets",r.STATES=["unread","opened","follow_up","pending","closed"],r.PRIORITIES=["low","medium","high","urgent"],r.PRIORITY_ON=4e3,r.PRIORITY_OFF=1e3,r.PRIORITY_ON_TEXT="urgent",r.PRIORITY_OFF_TEXT="low",r.prototype.initialize=function(e){return null==e&&(e={}),this.on("change",this.setupRelations,this),this.setupRelationsFromAttributes(e),this.checked=!1,this.listenTo(GrooveClient.data.labels,"remove",this.removeLabel,this),this.collection?void 0:this.listenTo(TicketActions,"undo",function(e){return e.ticket_id===this.id?this.undo(e):void 0})},r.prototype.hasAttachments=function(){return _.any(this.get("ticket_actions"),function(e){return"Comment"===e.change_type&&e.preview.change[1]>0})},r.prototype.updatePriority=function(e,t){return $.ajax({type:"PATCH",url:"/api/tickets/"+this.get("id")+"/update_priority",dataType:"json",contentType:"application/json",data:JSON.stringify({priority:e,client_id:GrooveChat.getClientId(),updater_agent_id:GrooveClient.data.currentUser.id}),success:t})},r.prototype.saveEnduser=function(e){var t;return t={enduser_id:e.id,client_id:GrooveChat.getClientId()},$.ajax({type:"PATCH",url:"/api/tickets/"+this.id+"/enduser",dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:function(e){return function(t){return e.set(t),GrooveClient.trigger("tickets:update",[t])}}(this)})},r.prototype.fetchComments=function(e){return null==e&&(e={}),$.get(this.urlRoot+"/"+this.id+"/comments.json").then(function(t){return function(n){return t.comments.reset(n),e.success?e.success(t):void 0}}(this))},r.prototype.setupRelations=function(e){return this.setupRelationsFromAttributes(e.attributes),delete this.attributes.comments_attributes},r.prototype.setupRelationsFromAttributes=function(e){var t,n,i,o;return this.setupLabelsRelation(e.labels),this.setupCollectionRelations(e,"comments",GrooveClient.Collections.Comments),this.setupCollectionRelations(e,"timeline_events"),null!=e.enduser&&(this.enduser=new GrooveClient.Models.User(e.enduser)),(n=e.assignee_group_id)?this.assigneeGroup=GrooveClient.data.groups.get(n):delete this.assigneeGroup,this.creator=GrooveClient.data.agents.get(e.creator_id),i=~~e.assignee_id,i>0?(this.assignee=GrooveClient.data.agents.get(i),null==this.assignee&&(this.assignee=t=new GrooveClient.Models.User({id:i}),t.fetch({global:!1,success:function(){return GrooveClient.data.agents.add(t)}}))):delete this.assignee,(o=e.mailbox_id)?this.mailbox=GrooveClient.data.mailboxes.get(o):delete this.mailbox,this.replyableUsers=new GrooveClient.Collections.Users(e.replyable_users||[],{url:"/api/tickets/"+this.id+"/replyable_users"}),(o=e.twitter_account_id)?this.twitterAccount=GrooveClient.data.twitterAccounts.get(o):delete this.twitterAccount,(o=e.facebook_page_id)?this.facebookPage=GrooveClient.data.facebookPages.get(o):delete this.facebookPage},r.prototype.hasMultipleReplyableUsers=function(){var e,t,n,i,o,r,s,a,l,c;for(i=TicketActions.isByAgent,n=TicketActions.isActor,o=TicketActions.isComment,s=TicketActions.isNote,r=TicketActions.isForward,a=TicketActions.isThirdPartyConversation,c=this.get("ticket_actions"),t=0,l=c.length;l>t;t++)if(e=c[t],o(e)&&!s(e)){if(r(e)||a(e))return!0;if(!n(e,this.enduser)&&!i(e))return!0}return!1},r.prototype.setupCollectionRelations=function(e,t,n){var i,o,r,s,a;return null==n&&(n=Backbone.Collection),i=t.replace(/_(\w)/,function(e,t){return t.toUpperCase()}),o=e[t],(r=this[i])?o?(s=r.length,a=new n(o),this[i]=a,a.length!==s?this.trigger("new:"+t):void 0):void 0:this[i]=new n(o)},r.prototype.setupLabelsRelation=function(e){var t,n,i;return n=null!=(i=this.labels)?i.sortBy("name"):void 0,this.labels=new GrooveClient.Collections.Labels(e),n&&(t=this.labels.sortBy("name"),JSON.stringify(n)!==JSON.stringify(t))?this.trigger("change:labels"):void 0},r.prototype.lastReply=function(){return _.find(_.clone(this.comments.models).reverse(),function(e){return e.get("private")===!1})},r.prototype.snooze=function(e){var t;return t=$.ajax({type:"POST",url:"/api/tickets/"+this.id+"/snooze",dataType:"json",contentType:"application/json",data:JSON.stringify({until:e,client_id:GrooveChat.getClientId()})}),t.then(function(e){return function(t){return t.mailbox_id=e.get("mailbox_id"),GrooveClient.trigger("tickets:update",t)}}(this))},r.prototype.unsnooze=function(){var e;return e=$.ajax({type:"DELETE",url:"/api/tickets/"+this.id+"/snooze",dataType:"json",contentType:"application/json",data:JSON.stringify({client_id:GrooveChat.getClientId()})}),e.then(function(e){return function(t){return t.mailbox_id=e.get("mailbox_id"),GrooveClient.trigger("tickets:update",t)}}(this))},r.prototype.markAsRead=function(){return this.id&&this.isUnread()?this.save("state","opened",{global:!1,silent:!0,url:this.url()+"/mark_as_read",success:function(e,t){return GrooveClient.trigger("tickets:update",t)}}):void 0},r.prototype.getCurrent=function(e){var t,n;return(null!=(t=this.get("ticket_draft"))&&null!=(n=t.draft_attributes)?n[e]:void 0)||this.get(e)},r.prototype.currentAssignee=function(){return GrooveClient.data.agents.get(this.get("assignee_id"))},r.prototype.currentAssigneeGroup=function(){return GrooveClient.data.groups.get(this.get("assignee_group_id"))},r.prototype.isTwitterTicket=function(){return"TwitterTicket"===this.get("type")},r.prototype.isFacebookTicket=function(){return"FacebookTicket"===this.get("type")},r.prototype.isEmailTicket=function(){return"Email"===this.get("ticket_type")},r.prototype.isChatTicket=function(){return"Chat"===this.get("ticket_type")},r.prototype.isWidgetTicket=function(){return"Widget"===this.get("ticket_type")},r.prototype.state=function(){return this.get("state")||"unread"},r.prototype.startsWithNote=function(){var e,t;return e=TicketActions.isComment,(t=TicketActions.isNote)(_.find(this.get("ticket_actions"),e))},r.prototype.isUnread=function(){return"unread"===this.state()},r.prototype.isOpened=function(){return"opened"===this.state()},r.prototype.isFollowUp=function(){return"follow_up"===this.state()},r.prototype.isPending=function(){return"pending"===this.state()},r.prototype.isClosed=function(){return"closed"===this.state()},r.prototype.isSpam=function(){return"spam"===this.state()},r.prototype.isSnoozable=function(){return!(this.get("is_snoozed")||this.isClosed()||this.isSpam())},r.prototype.isOnboardingTicket=function(){return null!=this._isOnboardingTicket?this._isOnboardingTicket:this._isOnboardingTicket=null!=this.get("type").match(/^Onboarding/)},r.prototype.hasDraft=function(){var e;return e=this.get("ticket_draft"),null!=e&&e.has_body},r.prototype.hasNoDraft=function(){return!this.hasDraft()},r.prototype.statusLabel=function(e){var t,n,i,o;for(i=GrooveClient.data.ticketSettings.states,t=0,n=i.length;n>t;t++)if(o=i[t],o[1]===(e||this.state()))return o[0];return"Open"},r.prototype.belongsToFilteredCollection=function(){return this.collection instanceof GrooveClient.Collections.FilteredTickets},r.prototype.parentFilter=function(){return this.belongsToFilteredCollection()&&this.collection.filter},r.prototype.belongsToAssignedCollection=function(){return this.collection instanceof GrooveClient.Collections.AssignedTickets},r.prototype.parentAgent=function(){return this.belongsToAssignedCollection()&&this.collection.agent},r.prototype.setDraft=function(e,t){var n;return n={draft_attributes:{comments_attributes:[e]}},e.attachments&&(n.draft_attachments=e.attachments,n.draft_attributes.comments_attributes[0].attachment_ids=_.pluck(e.attachments,"id"),delete n.draft_attributes.comments_attributes[0].attachments),this.set({ticket_draft:n},t)},r.prototype.getDraft=function(){try{return this.get("ticket_draft").draft_attributes.comments_attributes[0]}catch(e){return{}}},r.prototype.saveDraft=function(t,n,i){var r,s,a,l,c,p,u,d,h,m;for(null==i&&(i={}),_.isObject(t)||null===t?(r=t,i=n):(r={},r[t]=n),p=0,u=e.length;u>p;p++)l=e[p],r[l]!==this.get(l)&&(a=!0);return m={id:this.hasDraft()?this.get("ticket_draft").id:void 0,draft_attributes:_.pick.apply(_,[r].concat(o.call(e)))},s=null!=(d=m.draft_attributes)&&null!=(h=d.comments_attributes[0])?h.body:void 0,(!a||_.isEmpty(s))&&(m._destroy=1),c=!0,this.hasDraft()&&a&&(c=JSON.stringify(m.draft_attributes)!==JSON.stringify(this.get("ticket_draft").draft_attributes)),c?this.save({ticket_drafts_attributes:[m]},_.extend({draft:!0},i)):void 0},r.prototype.saveAndClearDraft=function(e,t,n){var i;return null==n&&(n={}),_.isObject(e)||null===e?(i=e,n=t):(i={},i[e]=t),this.save(i,n)},r.prototype.save=function(e,t,n){var i,o;return null==n&&(n={}),_.isObject(e)||null===e?(i=e,n=t):(i={},i[e]=t),i.draft=!!n.draft,i.draft&&(n=_.extend({silent:!0},n)),o=n.success,n.success=function(e,t){return e.unset("ticket_drafts_attributes",{silent:!0}),e.unset("forwarding_address",{silent:!0}),o?o(e,t):void 0},r.__super__.save.call(this,i,n)},r.prototype.path=function(){var e,t,n;return(t=this.parentFilter())?(n="filters/"+t.id+"/tickets/"+this.id,t.has("mailbox_id")&&(n="mailboxes/"+t.get("mailbox_id")+"/"+n)):n=(e=this.parentAgent())?"agents/"+e.id+"/tickets/"+this.id:"tickets/"+this.id,GrooveClient.path(n)},r.prototype.labelString=function(){return this.labels.pluck("name").join(", ")},r.prototype.saveLabels=function(e){return null==e&&(e=this.labelString()),this.save("label_string",e,{silent:!1,wait:!0,global:!1})},r.prototype.addLabels=function(e){var t;return t=this.labelString()+(", "+e),this.saveLabels(t)},r.prototype.removeLabel=function(e){return this.labels.remove(e)},r.prototype.hasCc=function(){return!!this.getCurrent("reply_cc_address")},r.prototype.hasBcc=function(){return!!this.getCurrent("reply_bcc_address")},r.prototype.assigneeAndGroup=function(){var e;return e=[],this.assigneeGroup&&e.push(this.assigneeGroup.get("name")),this.assignee&&e.push(this.assignee.firstNameAndLastInitial()),_.compact(e).join(": ")},r.prototype.isChat=function(){return"Chat"===this.get("ticket_type")},r.prototype.toJSON=function(){var e;return e=_.pick.apply(_,[_.clone(this.attributes)].concat(o.call(t))),{ticket:e,draft:this.attributes.draft}},r.prototype.typeWithoutNamespace=function(){return null!=this._typeWithoutNamespace?this._typeWithoutNamespace:this._typeWithoutNamespace=this.get("type").split("::")[1]},r.prototype.accessibleMailboxesToMove=function(){return _.filter(GrooveClient.data.account.accessibleMailboxesToMove(),function(e){return function(t){return t.get("id")!==e.get("mailbox_id")}}(this))},r.prototype.undo=function(e){var t,n,i,o;return(t=this.get("ticket_actions"))&&(o=_.reject(this.get("ticket_actions"),function(t){return t.id===e.id}),this.set("ticket_actions",o)),n=TicketActions.isComment,i=TicketActions.isNote,n(e)?i(e)?this.draftNote=e.change:this.setDraft($.extend(!0,{},e.change),{silent:!0}):void 0},r}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.OtherTicket=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/tickets",n.prototype.url=function(){return this.urlRoot+"/"+this.id+"/merge_preview"},n}(GrooveClient.Models.Ticket)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Models.SearchQuery=function(n){function i(){return this._setOrderCookie=e(this._setOrderCookie,this),this._setDateRangeCookie=e(this._setDateRangeCookie,this),this.clearFacets=e(this.clearFacets,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.urlRoot="/api/search/queries.json",i.prototype.initialize=function(e){return this.collection=e.collection,this.set("updated_in_last",this._getAttributeCookie("updated_in_last")||"month"),this.on("change:updated_in_last",this._setDateRangeCookie),this.set("order",this._getAttributeCookie("order")||this.defaultOrder),this.on("change:order",function(e){return function(){return e._setAttributeCookie("order")}}(this)),this.on("change:updated_in_last change:created_in_last",this.clearFacets)},i.prototype.termWithoutQuotes=function(){var e;return null!=(e=this.get("term"))?e.replace(/"/g,""):void 0},i.prototype.isFor=function(e){return e===this.get("term")},i.prototype.urlParams=function(){var e;return e={},this.facets||(e.facets="mailbox_id,state,labels.id,assignee_id"),_.reduce(this.attributes,function(e,t,n){return _.isEmpty(t)?e:(e[n]=_.isArray(t)?t.join(","):t,e)},e),"relevance"===e.order&&delete e.order,e},i.prototype.onChangeRange=function(e){var t;return t="change:updated_in_last change:created_in_last",this.on(t,e)},i.prototype.setFacets=function(e){return e!==this.facets?(this.facets=e,this.trigger("reset:facets",this,this.facets)):void 0},i.prototype.clearFacets=function(){return this.facets=void 0,this.trigger("clear:facets",this)},i.prototype.addFilter=function(e,t){return"label_ids"===e&&(e="labels.id"),this.has(e)||this.set(e,[],{silent:!0}),this.get(e).push(t),this.trigger("change",this),this.trigger("change:facet",this)},i.prototype.removeFilter=function(e,t){return"label_ids"===e&&(e="labels.id"),this.has(e)?(this.set(e,_.without(this.get(e),t)),this.trigger("change:facet",this)):void 0},i.prototype.clearFilters=function(){return this.attributes=_.pick(this.attributes,"term","updated_in_last","created_in_last"),this.trigger("change",this),this.trigger("change:facet",this)},i.prototype.hasFilter=function(e,t){var n;return n=this.get(e),_.isEmpty(n)?!1:_.contains(n,t)},i.prototype.defaultOrder="updated_at DESC",i.prototype._setDateRangeCookie=function(){return this._setAttributeCookie("updated_in_last")},i.prototype._setOrderCookie=function(){return this._setAttributeCookie("order")},i.prototype._getAttributeCookie=function(e){return $.localStorage("search:"+e)},i.prototype._setAttributeCookie=function(e){return $.localStorage("search:"+e,this.get(e))},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CannedRepliesAndCategories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/canned_replies"},n.prototype.forCategory=function(e){return null==e&&(e={}),e.url=this.urlRoot()+("?category_id="+e.category_id),this.fetch(e)},n.prototype.parse=function(e){return this.cannedReplies=new GrooveClient.Collections.CannedRepliesSettings(e.canned_replies),this.cannedReplyCategories=new GrooveClient.Collections.CannedReplyCategorySettings(e.canned_reply_categories),e.result},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CannedReplyCategorySettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/canned_reply_categories"},n.prototype.toJSON=function(){return{canned_reply_category:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CannedReplySettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/canned_replies"},n.prototype.toJSON=function(){return{canned_reply:_.clone(this.attributes)}},n.prototype.parse=function(e){return this.cannedReplyCategories=new GrooveClient.Collections.CannedReplyCategorySettings(e.canned_reply_categories),_.omit(e,"canned_reply_categories")},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.CompanySettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/settings/company"},n.prototype.toJSON=function(){return{company:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.FolderSetting=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/folders"},n.prototype.toggleText=function(){return this.get("active")?"Hide":"Show"},n.prototype.toJSON=function(){return{folder:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Models.FolderVariables=function(n){function i(){return this.syncGroups=e(this.syncGroups,this),this.syncAgents=e(this.syncAgents,this),this.syncSnoozeOptions=e(this.syncSnoozeOptions,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.urlRoot=function(){return"/api/settings/folder_variables"},i.prototype.initialize=function(){return this.on("sync",_.compose(this.syncAgents,this.syncSnoozeOptions,this.syncGroups)),this._listenToGlobal("agents",this.syncAgents),this._listenToGlobal("agents",this.syncSnoozeOptions),this._listenToGlobal("groups",this.syncGroups)},i.prototype.syncSnoozeOptions=function(){return this._syncValues("snooze_state","agents",function(e){return e.get("archived")?void 0:{name:e.get("name"),value:e.id}}),this.get("values").snooze_state.unshift({name:"Current User",value:"-1"}),this.get("values").snooze_state.unshift({name:"Anyone",value:""})},i.prototype.syncAgents=function(){return this._syncValues("assigned_agent","agents",function(e){return e.get("archived")?void 0:{name:e.get("name"),value:e.id}}),this.get("values").assigned_agent.unshift({name:"Current User",value:"-1"}),this.get("values").assigned_agent.unshift({name:"Unassigned",value:""})},i.prototype.syncGroups=function(){return this._syncValues("assigned_group","groups",function(e){return{name:e.get("name"),value:e.id}}),this.get("values").assigned_group.unshift({name:"Unassigned",value:""})},i.prototype._syncValues=function(e,t,n){return this.get("values")[e]=_.compact(_.map(this._global(t).models,function(e){return n(e)})),this.trigger("sync:"+e)},i.prototype._global=function(e){return GrooveClient.data[e]},i.prototype._listenToGlobal=function(e,t){return this.listenTo(this._global(e),"sync reset add remove change:name",t)},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.LabelSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/labels"},n.prototype.toJSON=function(){return{label:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.LabelAndMailboxes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/labels"},n.prototype.forMailbox=function(e){return null==e&&(e={}),e.url=this.urlRoot()+("?mailbox_id="+e.mailbox_id),this.fetch(e)},n.prototype.parse=function(e){return this.labels=new GrooveClient.Collections.LabelSettings(e.labels),this.mailboxes=new GrooveClient.Collections.MailboxSettings(e.mailboxes),e},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.MailboxSetting=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/mailboxes"},n.prototype.toJSON=function(){return{mailbox:_.clone(this.attributes)}},n.prototype.setupLink=function(){return"/groove_client/mailboxes/"+this.id+"/setup"},n.prototype.restrictedByUser=function(){return null!=this.get("user_ids")},n.prototype.restrictedByGroup=function(){return null!=this.get("group_ids")},n.prototype.isRestricted=function(){return"everyone"!==this.get("restriction_type")&&(this.restrictedByUser()||this.restrictedByGroup())},n}(Backbone.Model),_.extend(GrooveClient.Models.MailboxSetting.prototype,GrooveClient.Models.WithStateMachine)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.NotificationSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/settings/notifications"},n.prototype.toJSON=function(){return{notification:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.PreferenceSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/settings/preferences"},n.prototype.toJSON=function(){return{preference:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.ProfileSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/settings/profile"},n.prototype.toJSON=function(){return{profile:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Models.RuleSettings=function(n){function i(t){null==t&&(t={}),this.parse=e(this.parse,this),this.actions=new GrooveClient.Collections.RuleActions,this.conditions=new GrooveClient.Collections.RuleConditions,i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.urlRoot=function(){return"/api/settings/rules"},i.prototype.toJSON=function(){return{rule:_.clone(this.attributes)}},i.prototype.parse=function(e){return this.actions.reset(e.actions),this.conditions.reset(e.conditions),_.omit(e,["actions","conditions"])},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.RuleAction=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.markForDestroy=function(){return this.set("_destroy",!0)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.RuleCondition=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.markForDestroy=function(){return this.set("_destroy",!0)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.RuleVariables=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot=function(){return"/api/settings/rule_variables"},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TicketingSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/settings/ticketing"},n.prototype.toJSON=function(){return{ticketing:_.clone(this.attributes)}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.SlackApp=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/slack/app.json",n.prototype.toJSON=function(){var e;return e={},this._withSettings(e,"channels"),this._withSettings(e,"mailbox_settings"),this._withSettings(e,"profiles"),this._withSettings(e,"notifications"),{slack_app:e}},n.prototype._withSettings=function(e,t){var n,i,o;return n=this.get(t),_.isEmpty(n)?void 0:(o=function(){var e,t,o;for(o=[],e=0,t=n.length;t>e;e++)i=n[e],(void 0===i.id||i._destroy)&&o.push(i);return o}(),_.isEmpty(o)?void 0:e[t]=o)},n.prototype.needsSetup=function(){return this.needs||(this.needs="active"!==this.get("state"))},n.prototype.setupReason=function(){return this.inactiveChannel()&&this.archivedChannel()?"archived_channel":this.inactiveAccount()?"inactive_account":"authorization"},n.prototype.isActive=function(){return"active"===this.get("state")},n.prototype.archivedChannel=function(){return this.archived||(this.archived="archived"===this.channel().state)},n.prototype.inactiveChannel=function(){return this.inactiveChannel||(this.inactiveChannel="inactive_channel"===this.get("state"))},n.prototype.inactiveAccount=function(){return this.inactiveAccount||(this.inactiveAccount="inactive_account"===this.get("state"))},n.prototype.channel=function(){return _.first(this.get("channels"))},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,
e},t={}.hasOwnProperty;GrooveClient.Models.SlackChannel=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/slack/channel.json",n.prototype.toJSON=function(){var e;return e={},{channel:e}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.SlackProfile=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/slack/profile.json",n.prototype.toJSON=function(){var e;return e={},{profile:e}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TicketAction=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TimelineEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.on("change",this.setupRelations,this),this.setupRelationsFromAttributes(e)},n.prototype.setupRelations=function(e){return this.setupRelationsFromAttributes(e.attributes)},n.prototype.setupRelationsFromAttributes=function(e){return null!=e.actor&&(this.actor=new GrooveClient.Models.User(e.actor)),null!=e.subject&&(this.subject=new(this.modelForSubjectType(e.subject_type))(e.subject)),null!=e.secondary_subject?this.secondarySubject=new(this.modelForSubjectType(e.secondary_subject_type))(e.secondary_subject):void 0},n.prototype.modelForSubjectType=function(e){return-1!==e.indexOf("Ticket")&&(e="Ticket"),GrooveClient.Models[e]},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TrendsQuery=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.ranges={yesterday:"Yesterday",past_week:"Last 7 Days",this_week:"This Week",last_week:"Last Week",this_month:"This Month",last_month:"Last Month",past_year:"Past Year"},n.prototype.humanizedRange=function(){return this.ranges[this.get("range")]},n.prototype.url=function(e,t){return null==t&&(t={}),_.extend(t,this.populatedAttributes()),e.match(/:range/)&&(e=e.replace(":range",t.range),delete t.range),_.isEmpty(t)?e:e+"?"+$.param(t)},n.prototype.populatedAttributes=function(){return _.reduce(this.attributes,function(e,t,n){return null!=t&&(e[n]=t),e},{})},n}(Backbone.Model)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Models.TrendsReport=function(n){function i(t){this._proxyFactAttributes=e(this._proxyFactAttributes,this),this.fetch=e(this.fetch,this);var n,o,r;i.__super__.constructor.call(this,_.omit(t,"aggregated","query","lists","daily")),this.query=new GrooveClient.Models.TrendsQuery(t.query),this.aggregated=_.reduce(t.aggregated,function(e){return function(t,n){return t[n]=e._buildFact(n),t}}(this),{}),this.lists=_.reduce(t.lists,function(e){return function(t,n,i){return t[i]=e._buildRankedList(i,n),t}}(this),{}),o=t.daily;for(r in o)n=o[r],this.daily=new GrooveClient.Collections.DailyFacts({type:r,column:n,query:this.query});this._grouped={},this.listenTo(this.query,"change",this.fetch),this.isFetching=!1}return t(i,n),i.prototype.getPrevious=function(e){return this.get(e.replace(".",".previous_"))},i.prototype.fetch=function(){var e,t,n,i,o,r;this.isFetching=!0,this.wasFetched&&this._clearFacts(),n={},i=this.aggregated;for(r in i)t=i[r],n[t.cid]=!0,t.fetch({success:function(e){return function(t){return e._proxyFactAttributes(t),delete n[t.cid],_.isEmpty(n)?(e.wasFetched=!0,e.isFetching=!1,e.trigger("sync:facts",e)):void 0}}(this)});o=this.lists;for(r in o)e=o[r],e.fetch();return this.daily.fetch(),this.trigger("request",this)},i.prototype.grouped=function(e,t){var n,i,o;return null==t&&(t={}),o=""+e+_.values(t),(n=this._grouped[o])?n:(t.query=this.query,i=new GrooveClient.Collections.GroupedFacts(e,t),i.listenTo(this,"request",function(){return i.fetch()}),this._grouped[o]=i)},i.prototype._clearFacts=function(){var e,t,n;this.attributes=_.pick(this.attributes,"name"),t=this.aggregated;for(n in t)e=t[n],e.clear({silent:!0});return this.wasFetched=void 0},i.prototype._buildFact=function(e){var t;return t=new Backbone.Model({name:e}),t.url=function(t){return function(){return t.query.url("/api/"+e+"/:range.json")}}(this),t.parse=function(t){return t.name=e,this.set(t,{silent:!0})},t},i.prototype._proxyFactAttributes=function(e){var t,n;return t=e.get("name"),n=_.reduce(_.omit(e.attributes,"name"),function(e,n,i){return e[t+"."+i]=n,e},{}),this.set(n)},i.prototype._buildRankedList=function(e,t){return new GrooveClient.Collections.RankedList({type:e,rank_by:t,query:this.query})},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TwitterAccount=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.collection=new GrooveClient.Collections.TwitterTickets({account:this})},n.prototype.screenName=function(){return"@"+this.get("screen_name")},n.prototype.accountLink=function(){return"https://twitter.com/"+this.get("screen_name")},n.prototype.userpicUrl=function(){return"http://twitter.com/api/users/profile_image/"+this.get("screen_name")},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.TwitterProfile=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/endusers/"+this.get("user_id")+"/twitter_profile.json"},n}(Backbone.Model)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Models.User=function(n){function i(){return this.hasUndoSendDelay=e(this.hasUndoSendDelay,this),this.avatarUrl=e(this.avatarUrl,this),this.updateAccountForBillingInfo=e(this.updateAccountForBillingInfo,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.urlRoot="/api/users",i.prototype.initialize=function(e){return this.isEnduser()||(this.assignedTickets=new GrooveClient.Collections.AssignedTickets({agent:this}),this.profileTickets=new GrooveClient.Collections.AssignedTickets({agent:this,forProfile:!0,unpaginate:!0}),this.ratedTickets=new GrooveClient.Collections.AssignedTickets({agent:this,rated:!0,unpaginate:!0})),this.on("change",this.setupRelations,this),this.setupRelationsFromAttributes(e),this.on("change:archived",this.updateAccountForBillingInfo),this.listenTo(GrooveClient,"customer:profile-updated",function(e){return e.get("id")===this.get("id")&&e.cid!==this.cid?this.set(e.changed):void 0})},i.prototype.setupRelations=function(e){return this.setupRelationsFromAttributes(e.attributes)},i.prototype.setupRelationsFromAttributes=function(e){return null!=e.timeline_events?this.timelineEvents=new GrooveClient.Collections.TimelineEvents(e.timeline_events):void 0},i.prototype.updateAccountForBillingInfo=function(){return GrooveClient.data.account.fetch()},i.prototype.toJSON=function(){return{user:this.get("json")}},i.prototype.path=function(){return"/users/"+this.id},i.prototype.hasFeature=function(e){var t;return!!(null!=(t=this.get("features"))?t[e]:void 0)},i.prototype.hasInvalidEmail=function(){var e;return e=this.get("email"),!_.isString(e)||!e.length},i.prototype.initials=function(){var e;return e=[],this.get("first_name")&&e.push(this.get("first_name")),this.get("last_name")&&e.push(this.get("last_name")),_.map(e,function(e){return e.charAt(0).toUpperCase()}).join("")},i.prototype.fetchRatings=function(){return $.get("/api/ratings.json",{agent_id:this.id}).then(function(e){return function(t){return e.set("ratings",t)}}(this))},i.prototype.totalRatings=function(){return _.reduce(this.get("ratings"),function(e,t){return e+t},0)},i.prototype.ratingsPercentage=function(e){var t;return 0===(t=this.totalRatings())?0:this.get("ratings")[e+"_ratings"]/t},i.prototype.isArchived=function(){return!!this.get("archived")},i.prototype.isEnduser=function(){return"enduser"===this.get("role")},i.prototype.isOwner=function(){return"owner"===this.get("role")},i.prototype.isAdmin=function(){return this.isOwner()||"admin"===this.get("role")},i.prototype.isAgent=function(){return this.isAdmin()||"agent"===this.get("role")},i.prototype.invited=function(){return null!=this.get("invitation_token")},i.prototype.agentContactUrl=function(){return this.isArchived()?GrooveClient.path("settings/users/archived/"+this.get("id")):GrooveClient.path("settings/users/"+this.get("id"))},i.prototype.personContactUrl=function(){return"/groove_client/contacts/customers/"+this.get("id")},i.prototype.possessiveFirstName=function(){var e;return e=this.get("first_name"),null!=e?e+=e.match(/s$/)?"'":"'s":void 0},i.prototype.firstNameAndLastInitial=function(){return this.has("last_name")?this.get("first_name")+" "+this.get("last_name")[0]+".":this.get("first_name")},i.prototype.emailWithName=function(){var e,t;return t=_.compact([this.get("first_name"),this.get("last_name")]).join(" "),e=this.get("email"),_.isEmpty(t)?e:t+" ("+e+")"},i.prototype.avatarUrl=function(e){var t;return null==e&&(e={}),t=new GrooveClient.Views.User({model:this}),t.avatarImage(e)},i.prototype.hasUndoSendDelay=function(){return 0!==this.get("undo_send_delay")},i}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Models.Widget=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlRoot="/api/widgets",n.prototype.toJSON=function(){return{widget:this.get("json")}},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Routers.Agents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.routes={agents:"agentsList","agents/archived":"archivedAgentsList","agents/invited":"invitedAgentsList","agents/archived/:id":"agent","agents/:id":"agent",groups:"groupsList","groups/:id":"group"},n.prototype.agentsList=function(){return document.title="Groove Support - Active Users",this.swap(new GrooveClient.Views.AgentsListDashboard)},n.prototype.invitedAgentsList=function(){return document.title="Groove Support - Invited Users",this.swap(new GrooveClient.Views.AgentsListDashboard({invited:!0}))},n.prototype.archivedAgentsList=function(){return document.title="Groove Support - Archived Users",this.swap(new GrooveClient.Views.AgentsListDashboard({archived:!0}))},n.prototype.agent=function(e){var t;return document.title="Groove Support - User Profile",t=GrooveClient.data.agents.get(e)||new GrooveClient.Views.User({id:e}),t.fetch({success:function(e){return function(){return e.swap(new GrooveClient.Views.AgentShow({model:t}))}}(this),error:this.agentNotFound})},n.prototype.groupsList=function(){return document.title="Groove Support - Groups",this.swap(new GrooveClient.Views.GroupsListDashboard)},n.prototype.group=function(e){var t;return t=GrooveClient.data.groups.get(e),document.title="Groove Support - "+t.get("name")+" Group",t=GrooveClient.data.groups.get(e),this.swap(new GrooveClient.Views.GroupShow({model:t}))},n.prototype.agentNotFound=function(){return GrooveClient.navigate(),GrooveClient.trigger("flashMessage",{type:"alert",body:"Agent not found"})},n}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Routers.Apps=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.routes={apps:"index","apps/google-apps":"showGoogleApps","apps/nimble":"showNimbleApp","apps/knowledge-base":"showKnowledgeBaseApp","apps/support-widget":"showSupportWidgetApp","apps/twitter":"showTwitterApp","apps/facebook":"showFacebookApp","apps/_=_":"showFacebookApp","apps/customer-ratings":"showCustomerRatingsApp","apps/custom-profile":"showCustomCustomerProfile","apps/hipchat":"showHipChatApp","apps/snap-engage":"showSnapEngage","apps/zapier":"showZapier","apps/olark":"showOlark","apps/slack":"showSlack","apps/mail-chimp":"showMailChimp","apps/campaign-monitor":"showCampaignMonitor","apps/constant-contact":"showConstantContact","apps/webhooks":"showWebhooks","apps/vextras":"showVextras","apps/talkdesk":"showTalkdesk","apps/asknicely":"showAsknicely","apps/delighted":"showDelighted","apps/:slug":"showApp"},n.prototype.index=function(){var e;return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - App Store",e=new GrooveClient.Collections.Apps,e.fetch({success:function(e){return function(t){return e.swap(new GrooveClient.Views.AppsIndex({collection:t}))}}(this)})},n.prototype.showKnowledgeBaseApp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Knowledge Base",this.swap(new GrooveClient.Views.KnowledgeBaseAppDetails)},n.prototype.showSupportWidgetApp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Support Widget",this.swap(new GrooveClient.Views.SupportWidgetAppDetails)},n.prototype.showTwitterApp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Twitter",this.swap(new GrooveClient.Views.TwitterAppDetails)},n.prototype.showFacebookApp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Facebook",this.swap(new GrooveClient.Views.FacebookAppDetails)},n.prototype.showCustomerRatingsApp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Customer Satisfaction Ratings",this.swap(new GrooveClient.Views.CustomerRatingsAppDetails)},n.prototype.showCustomCustomerProfile=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Groove Custom Profile",this.swap(new GrooveClient.Views.CustomProfileAppDetails)},n.prototype.showGoogleApps=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Google Apps",this.swap(new GrooveClient.Views.GoogleAppsDetails)},n.prototype.showNimbleApp=function(){var e;return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Nimble",e=new GrooveClient.Models.App({id:"nimble"}),e.fetch({success:function(e){return function(t){return e.swap(new GrooveClient.Views.NimbleAppDetails({model:t}))}}(this)})},n.prototype.showHipChatApp=function(){var e;return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - HipChat",e=new GrooveClient.Models.HipChatApp,e.fetch({success:function(t){return function(){return t.swap(new GrooveClient.Views.HipChatAppDetails({model:e}))}}(this)})},n.prototype.showSnapEngage=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - SnapEngage Integration",this.swap(new GrooveClient.Views.SnapEngageAppDetails)},n.prototype.showOlark=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Olark Integration",this.swap(new GrooveClient.Views.OlarkAppDetails)},n.prototype.showSlack=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Slack Integration",this.swap(new GrooveClient.Views.SlackAppDetails)},n.prototype.showMailChimp=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - MailChimp Integration",this.swap(new GrooveClient.Views.MailChimpAppDetails)},n.prototype.showCampaignMonitor=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Campaign Monitor Integration",this.swap(new GrooveClient.Views.CampaignMonitorAppDetails)},n.prototype.showConstantContact=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - Contant Contact Integration",this.swap(new GrooveClient.Views.ConstantContactAppDetails)},n.prototype.showWebhooks=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Webhooks - Groove",this.swap(new GrooveClient.Views.WebhooksAppDetails)},n.prototype.showZapier=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Zapier - Groove",this.swap(new GrooveClient.Views.ZapierAppDetails)},n.prototype.showVextras=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Vextras - Groove",this.swap(new GrooveClient.Views.VextrasAppDetails)},n.prototype.showTalkdesk=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Talkdesk - Groove",this.swap(new GrooveClient.Views.TalkdeskAppDetails)},n.prototype.showAsknicely=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="AskNicely - Groove",this.swap(new GrooveClient.Views.AsknicelyAppDetails)},n.prototype.showDelighted=function(){return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Delighted - Groove",this.swap(new GrooveClient.Views.DelightedAppDetails)},n.prototype.showApp=function(e){var t;return GrooveClient.views.mainMenu.highlight("Apps"),document.title="Groove Support - App Store",t=new GrooveClient.Models.App({id:e}),t.fetch({success:function(e){return function(t){return e.swap(new GrooveClient.Views.AppDetails({model:t}))}}(this)})},n}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Routers.Billing=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.routes={billing:"index","billing/index":"index","billing/invoices":"invoices","billing/invoices/:id":"showInvoice","billing/archived-agents":"agents"},n.prototype.initialize=function(){return GrooveClient.on("account:inactive",function(){return~GrooveClient.history.fragment.indexOf("billing")?void 0:(GrooveClient.trigger("flashMessage",{type:"notice",body:"This account is inactive, you must pay to reactivate it"}),GrooveClient.navigate(GrooveClient.path("billing")))})},n.prototype.index=function(){return GrooveClient.data.account.fetch({cache:!1,success:function(e){return function(){return e.swap(new GrooveClient.Views.BillingIndex)}}(this)})},n.prototype.agents=function(){return this.swap(new GrooveClient.Views.ArchivedAgentsIndex)},n.prototype.invoices=function(){return this.swap(new GrooveClient.Views.BillingInvoices)},n.prototype.showInvoice=function(e){return this.swap(new GrooveClient.Views.ShowInvoice({invoiceId:e}))},n}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Routers.Contacts=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.routes={contacts:"index","contacts/customers":"customers","contacts/customers/:id":"customer","contacts/people":"people","contacts/people/:id":"person","contacts/companies":"companies","contacts/companies/:id":"company","contacts/agents":"agentsList","contacts/agents/archived":"archivedAgentsList","contacts/agents/archived/:id":"agent","contacts/agents/:id":"agent","contacts/groups":"groupsList","contacts/groups/:id":"group"},n.prototype.index=function(){return this.agentsList()},n.prototype.customers=function(){return this.setNavHighlights(),this.index()},n.prototype.customer=function(e){var t;return this.setNavHighlights(),t=new GrooveClient.Models.Person({id:e}),t.fetch({success:function(e){return function(){return e.swap(new GrooveClient.Views.ContactsPersonDashboard({model:t}))}}(this)})},n.prototype.people=function(){return GrooveClient.navigate(GrooveClient.path("contacts/customers"),{trigger:!0})},n.prototype.person=function(e){return GrooveClient.navigate(GrooveClient.path("contacts/customers/"+e),{trigger:!0})},n.prototype.companies=function(){var e;return this.setNavHighlights(),e=new GrooveClient.Collections.Companies,e.fetch({success:function(t){return function(){return t.swap(new GrooveClient.Views.ContactsCompaniesDashboard({collection:e}))}}(this)})},n.prototype.company=function(e){var t;return this.setNavHighlights(),t=new GrooveClient.Models.Company({id:e}),t.fetch({success:function(e){return function(){return e.swap(new GrooveClient.Views.ContactsCompanyDashboard({model:t}))}}(this)})},n.prototype.agentsList=function(){return GrooveClient.navigate(GrooveClient.path("agents"),{trigger:!0})},n.prototype.archivedAgentsList=function(){return GrooveClient.navigate(GrooveClient.path("agents/archived/"+id),{trigger:!0})},n.prototype.agent=function(e){return GrooveClient.navigate(GrooveClient.path("agents/"+e),{trigger:!0})},n.prototype.groupsList=function(){return GrooveClient.navigate(GrooveClient.path("groups"),{trigger:!0})},n.prototype.group=function(e){return GrooveClient.navigate(GrooveClient.path("groups/"+e),{trigger:!0})},n.prototype.setNavHighlights=function(){return GrooveClient.views.mainMenu.highlight("Contacts"),document.title="Groove Support - Contacts"},n}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Routers.Index=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.routes={"":"index"},n.prototype.initialize=function(){var e;return e=GrooveClient.data,this.account=e.account,this.currentUser=e.currentUser,this.filters=e.filters,this.mailboxes=e.mailboxes,e},n.prototype.index=function(){return this.currentUser.hasFeature("ticketing")?this.showTickets():void 0},n.prototype.showTickets=function(){var e,t,n,i;return e=this.account.get("prefers_grouping_filters_by_mailbox")&&!this.mailboxes.isEmpty()?(n=this.mailboxes.first(),t=n.filters.first(),[n.id,t.id]):[this.filters.first().id],(i=GrooveClient.routers.tickets).showFilter.apply(i,e)},n}(Backbone.Router)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Routers.Settings=function(n){function i(){return this.constantContact=e(this.constantContact,this),this.campaignMonitor=e(this.campaignMonitor,this),this.mailChimp=e(this.mailChimp,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.routes={settings:"index","settings/styleguide":"styleguide","settings/widget":"widget","settings/widget/:uuid":"widgetDetails","settings/olark":"olark","settings/olark/:id":"olark","settings/labels":"labels","settings/profile":"profile","settings/notifications":"notifications","settings/company(/)":"company","settings/api":"api","settings/preferences":"preferences","settings/mailboxes":"mailboxes","settings/mailboxes/new":"newMailbox","settings/mailboxes/:id":"mailbox","settings/ticketing/preferences":"ticketing","settings/ticketing/labels":"labels","settings/ticketing/labels/for-mailbox/:id":"labelsForMailbox","settings/ticketing/canned-replies":"cannedReplies","settings/ticketing/canned-replies/for-category/:id":"cannedRepliesForCategory","settings/ticketing/canned-replies/new":"newCannedReply","settings/ticketing/canned-replies/:id":"cannedReply","settings/ticketing/folders(/)":"folders","settings/ticketing/folders/new":"newFolder","settings/ticketing/folders/:id":"editFolder","settings/users(/)":"usersList","settings/users/archived":"archivedUsersList","settings/users/invited":"invitedUsersList","settings/users/archived/:id":"user","settings/users/:id":"user","settings/groups(/)":"userGroupsList","settings/groups/:id":"userGroup","settings/billing(/)":"billing","settings/billing/invoices(/)":"billingInvoices","settings/billing/invoices/:id":"billingInvoice","settings/billing/account(/)":"billingAccount","settings/ticketing/rules(/)":"rules","settings/ticketing/rules/new(/)":"newRule","settings/ticketing/rules/:id(/)":"rule","settings/slack":"slack","settings/slack/error":"slackError","settings/mail-chimp":"mailChimp","settings/campaign-monitor":"campaignMonitor","settings/constant-contact":"constantContact"},i.prototype.usersList=function(){var e;return e=GrooveClient.Views.AgentsList,this.render(e,{title:"Active Users",navpath:"settings/users/"})},i.prototype.archivedUsersList=function(){var e;return e=GrooveClient.Views.AgentsList,this.render(e,{title:"Archived Users",archived:!0})},i.prototype.invitedUsersList=function(){var e;return e=GrooveClient.Views.AgentsList,this.render(e,{title:"Invited Users",invited:!0})},i.prototype.user=function(e){var t,n;return t=GrooveClient.data.agents.get(e)||new GrooveClient.Views.User({id:e}),n=function(e){return function(){return e.render(GrooveClient.Views.AgentInspector,{model:t,title:"User Profile",navpath:"settings/users"})}}(this),_.isEmpty(t.attributes)?t.fetch({success:n,error:this.agentNotFound}):n()},i.prototype.userGroupsList=function(){var e;return e=GrooveClient.Views.GroupsList,this.render(e,{title:"Groups",navpath:"settings/groups"})},i.prototype.userGroup=function(e){var t,n;return n=GrooveClient.data.groups.get(e),t=GrooveClient.Views.GroupAgents,this.render(t,{model:n,title:n.get("name")+" Group",navpath:"settings/groups"})},i.prototype.billing=function(){var e;return this._highlightInMainMenu(),document.title="Groove - Billing Summary",e=new GrooveClient.Views.SettingsBillingLayout,this.swap(e)},i.prototype.billingInvoices=function(){var e;return e=GrooveClient.Views.BillingInvoicesSummary,this.render(e,{title:"Invoices"})},i.prototype.billingInvoice=function(e){var t,n;return n=GrooveClient.Views.BillingInvoiceSummary,t=e||window.history.back(),this.render(n,{invoiceId:t,title:"Invoice Summary",navpath:"settings/billing/invoices"})},i.prototype.billingAccount=function(){var e;return e=GrooveClient.Views.SettingsBillingAccount,this.render(e,{title:"Billing Account"})},i.prototype.index=function(){var e;return this._highlightInMainMenu(),e=new GrooveClient.Views.SettingsIndex,document.title="Groove - Your Settings",this.swap(e)},i.prototype.styleguide=function(){return this.render(GrooveClient.Views.SettingsStyleGuide)},i.prototype.widget=function(){return document.title="Groove - Widget Settings",this.render(GrooveClient.Views.Widget)},i.prototype.widgetDetails=function(){return document.title="Groove - Widget Settings",this.render(GrooveClient.Views.WidgetDetails)},i.prototype.olark=function(e){var t;return document.title="Groove - Olark Settings",(t=GrooveClient.Support.SwappingRouter.currentView)&&t.mainView&&t.mainView.className===GrooveClient.Views.OlarkSettings.className?void 0:this.render(GrooveClient.Views.OlarkSettings,{id:e})},i.prototype.labels=function(){var e;return e=new GrooveClient.Models.LabelAndMailboxes,e.fetch({success:function(t){return function(){return t.renderLabelsAndMailboxes({labelsAndMailboxes:e})}}(this)})},i.prototype.labelsForMailbox=function(e){var t;return t=new GrooveClient.Models.LabelAndMailboxes,t.forMailbox({mailbox_id:e,success:function(n){return function(){return n.renderLabelsAndMailboxes({labelsAndMailboxes:t,mailbox_id:e})}}(this)})},i.prototype.folders=function(){var e,t;return e=new GrooveClient.Collections.FolderSettings,t=GrooveClient.Views.FolderSettings,e.fetch({success:function(n){return function(){return n.render(t,{title:"Folder Settings",collection:e})}}(this)})},i.prototype.newFolder=function(){var e,t;return t={model:new GrooveClient.Models.FolderSetting,title:"New Folder"},e=GrooveClient.Views.FolderSetting,this.render(e,t)},i.prototype.editFolder=function(e){var t,n;return n={model:new GrooveClient.Models.FolderSetting({id:e}),title:"Edit Folder Setting",navpath:"settings/ticketing/folders"},t=GrooveClient.Views.FolderSetting,n.model.fetch({success:function(e){return function(){return e.render(t,n)}}(this)})},i.prototype.profile=function(){var e,t;return t=new GrooveClient.Models.ProfileSettings,e=GrooveClient.Views.ProfileSettings,t.fetch({success:function(n){return function(){return n.render(e,{title:"Profile Settings",profile:t})}}(this)})},i.prototype.notifications=function(){var e,t;return t=new GrooveClient.Models.NotificationSettings,e=GrooveClient.Views.NotificationSettings,t.fetch({success:function(n){return function(){return n.render(e,{model:t,title:"Notification Settings"})}}(this)})},i.prototype.company=function(){var e,t;return t=new GrooveClient.Models.CompanySettings,e=GrooveClient.Views.CompanySettings,t.fetch({success:function(n){return function(){return n.render(e,{model:t,title:"Company Settings"})}}(this)})},i.prototype.preferences=function(){var e,t;return t=new GrooveClient.Models.PreferenceSettings,e=GrooveClient.Views.PreferenceSettings,t.fetch({success:function(n){return function(){return n.render(e,{model:t,title:"Preference Settings"})}}(this)})},i.prototype.mailboxes=function(){var e;return e=new GrooveClient.Collections.MailboxSettings,e.fetch({success:function(t){return function(){var n;return(n=e.findWhere({"default":!0}))?t._redirectTo("settings/mailboxes/"+n.id):(e.isEmpty()&&(n=new GrooveClient.Models.MailboxSetting,t._redirectTo("settings/mailboxes/new")),t.renderMailboxes({model:n}))}}(this)})},i.prototype.mailbox=function(e){return this.renderMailboxes({id:e})},i.prototype.newMailbox=function(){var e;return e=new GrooveClient.Models.MailboxSetting,this.renderMailboxes({model:e})},i.prototype.ticketing=function(){var e,t;return t=new GrooveClient.Models.TicketingSettings,e=GrooveClient.Views.TicketingSettings,t.fetch({success:function(n){return function(){return n.render(e,{model:t,title:"Ticketing Preferences"})}}(this)})},i.prototype.cannedReplies=function(){var e;return e=new GrooveClient.Models.CannedRepliesAndCategories,e.fetch({success:function(t){return function(){return t.renderCannedRepliesAndCategories({cannedRepliesAndCategories:e})}}(this)})},i.prototype.cannedRepliesForCategory=function(e){var t;return t=new GrooveClient.Models.CannedRepliesAndCategories,t.forCategory({category_id:e,success:function(n){return function(){return n.renderCannedRepliesAndCategories({cannedRepliesAndCategories:t,categoryId:e})}}(this)})},i.prototype.cannedReply=function(e){var t;return t=new GrooveClient.Models.CannedReplySettings({id:e}),t.fetch({success:function(e){return function(){var n,i,o,r,s;return n=t.cannedReplyCategories,o=GrooveClient.Views.CannedReplySettings,s="Canned Replies",r=(i=t.get("category_id"))?"settings/ticketing/canned-replies/for-category/"+i:"settings/ticketing/canned-replies",e.render(o,{model:t,title:s,cannedReplyCategories:n,categoryId:i,navpath:r})}}(this)})},i.prototype.newCannedReply=function(){var e;return e=new GrooveClient.Models.CannedRepliesAndCategories,
e.fetch({success:function(t){return function(){var n,i,o,r,s;return n=e.cannedReplyCategories,o=new GrooveClient.Models.CannedReplySettings,i=GrooveClient.Views.CannedReplySettings,s="Canned Replies",r="settings/ticketing/canned-replies/new",t.render(i,{model:o,title:s,cannedReplyCategories:n,navpath:r})}}(this)})},i.prototype.rules=function(){var e,t;return e=new GrooveClient.Collections.RulesSettings,t=GrooveClient.Views.RulesSettings,e.fetch({success:function(n){return function(){return n.render(t,{collection:e,title:"Rule Settings"})}}(this)})},i.prototype.newRule=function(){var e,t;return e=new GrooveClient.Models.RuleSettings,t="settings/ticketing/rules/new",this.renderRule({model:e,navpath:t})},i.prototype.rule=function(e){var t;return t=new GrooveClient.Models.RuleSettings({id:e}),t.fetch({success:function(e){return function(){return e.renderRule({model:t})}}(this)})},i.prototype.slack=function(){var e;return"Slack::App"!==GrooveClient.data.account.get("prefers_team_chat_app")?this._redirectTo("apps/slack"):(e=new GrooveClient.Models.SlackApp,e.fetch({success:function(t){return function(){return t.render(GrooveClient.Views.SlackSettings,{model:e,mailboxes:GrooveClient.data.mailboxes,title:"Slack Settings"})}}(this)}))},i.prototype.slackError=function(){return this.render(GrooveClient.Views.SlackError)},i.prototype.mailChimp=function(){var e;if(!GrooveClient.data.account.get("prefers_mail_chimp_installed")||!GrooveClient.data.currentUser.isAdmin())return this._redirectTo("apps/mail-chimp");if(e=GrooveClient.data.emailMarketing.integrations,!e.wasFetched){if(e.fetching)return;return e.once("fetch:complete",this.mailChimp),e.fetch({reset:!0,global:!0})}return this.render(GrooveClient.Views.MailChimpSettings,{model:e.getByType("MailChimp"),title:"MailChimp Settings"})},i.prototype.campaignMonitor=function(){var e;if(!GrooveClient.data.account.get("prefers_campaign_monitor_installed")||!GrooveClient.data.currentUser.isAdmin())return this._redirectTo("apps/campaign-monitor");if(e=GrooveClient.data.emailMarketing.integrations,!e.wasFetched){if(e.fetching)return;return e.once("fetch:complete",this.campaignMonitor),e.fetch({reset:!0,global:!0})}return this.render(GrooveClient.Views.CampaignMonitorSettings,{model:e.getByType("CampaignMonitor"),title:"Campaign Monitor Settings"})},i.prototype.constantContact=function(){var e;if(!GrooveClient.data.account.get("prefers_constant_contact_installed")||!GrooveClient.data.currentUser.isAdmin())return this._redirectTo("apps/constant-contact");if(e=GrooveClient.data.emailMarketing.integrations,!e.wasFetched){if(e.fetching)return;return e.once("fetch:complete",this.constantContact),e.fetch({reset:!0,global:!0})}return this.render(GrooveClient.Views.ConstantContactSettings,{model:e.getByType("ConstantContact"),title:"Constant Contact Settings"})},i.prototype.api=function(){var e,t;return t={"private":"/api/settings/private_access_token.json",thirdParty:"/api/settings/third_party_access_tokens.json",webhooks:"/api/settings/webhooks.json"},e=_.inject(t,function(e,t,n){return e[n]=$.get(t),e},{}),$.when.apply($,_.values(e)).done(function(t){return function(){var n;return n=_.inject(e,function(e,t,n){return e[n]=JSON.parse(t.responseText),e},{}),t.render(GrooveClient.Views.ApiSettings,{settings:n})}}(this))},i.prototype.render=function(e,t){var n;return null==t&&(t={}),this._highlightInMainMenu(),t.title&&(document.title="Groove - "+t.title,delete t.title),t.mainView=e,n=new GrooveClient.Views.SettingsLayout(t),this.swap(n)},i.prototype.renderMailboxes=function(e){var t;return null==e&&(e={}),t=new GrooveClient.Collections.MailboxSettings,t.fetch({success:function(n){return function(){var i,o,r;return r=e.model||t.findWhere({id:parseInt(e.id)})||t.first(),i=r.id,o=GrooveClient.Views.MailboxSettings,n.render(o,{model:r,mailboxes:t,mailbox_id:i,title:"Mailbox Settings"})}}(this)})},i.prototype.renderLabelsAndMailboxes=function(e){var t,n,i,o;return o=GrooveClient.Views.LabelSettings,t=e.labelsAndMailboxes.labels,i=e.labelsAndMailboxes.mailboxes,n=e.mailbox_id,this.render(o,{labels:t,mailboxes:i,mailbox_id:n,title:"Label Settings"})},i.prototype.renderCannedRepliesAndCategories=function(e){var t,n,i,o,r;return o=GrooveClient.Views.CannedRepliesSettings,r="Canned Replies",t=e.cannedRepliesAndCategories.cannedReplies,n=e.cannedRepliesAndCategories.cannedReplyCategories,i=e.categoryId,this.render(o,{cannedReplies:t,cannedReplyCategories:n,categoryId:i,title:r})},i.prototype.renderRule=function(e){var t;return null==e&&(e={}),e.model,null==e.navpath&&(e.navpath="settings/ticketing/rules"),e.title="Rule Settings",t=GrooveClient.Views.RuleSettings,this.render(t,e)},i.prototype._highlightInMainMenu=function(){return GrooveClient.views.mainMenu.highlight("Settings")},i}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty,i=[].slice;GrooveClient.Routers.Tickets=function(n){function o(){return this.showTicket=e(this.showTicket,this),this.markTicketAsViewed=e(this.markTicketAsViewed,this),this._clearLastSearch=e(this._clearLastSearch,this),o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.routes={hello:"showWelcomeTicket","filters/:id":"showFilter","mailboxes/:id/filters/:filterId":"showFilter","mailboxes/:id/setup":"setupMailbox","agents/:id/tickets/:ticketId":"showAgentTicket","mailboxes/:id/filters/:filterId/tickets/:ticketId":"show","filters/:id/tickets/:ticketId":"show","tickets/new":"new","tickets/new/:email":"new","tickets/:id":"show","label/:id":"label","search/:query":"search","enduser/:id/tickets":"showEnduserTickets","agents/:id/tickets":"showAgentTickets"},o.prototype.initialize=function(){return this.labels=GrooveClient.data.labels,this.mailboxes=GrooveClient.data.mailboxes,this.filters=GrooveClient.data.filters,this.cachedTickets=new GrooveClient.Collections.Tickets,this.filteredCollections={},this.listenTo(GrooveClient,"filters:update",function(e){return function(){return e.filteredCollections={}}}(this)),this.listenTo(this.mailboxes,"remove",function(e){return function(t,n){return location.pathname.match("/mailboxes/"+t.id+"/")?GrooveClient.navigate():n.isEmpty()?e.showFilter(e.filters.first().id):void 0}}(this)),this.listenTo(GrooveClient,"refresh",function(e){return function(){var t,n,i,o,r,s;r=e.filteredCollections,s=[];for(o in r)i=r[o],s.push(function(){var e;e=[];for(t in i)n=i[t],e.push(n.refresh());return e}());return s}}(this))},o.prototype.createFilteredCollection=function(e,t){var n,i,o,r,s,a;return null==t&&(t={}),s=t.mailbox||this.mailboxes.get(t.mailbox_id),r=(null!=s?s.filters:void 0)||this.filters,(o=r.get(e))?(t=_.extend({filter:o,mailbox:s},t),i=new GrooveClient.Collections.FilteredTickets(t),a=(null!=s?s.id:void 0)||"ungrouped",null==(n=this.filteredCollections)[a]&&(n[a]={}),this.filteredCollections[a][o.id]=i,i):this.notFound("Folder")},o.prototype.renderIndex=function(e){return this.lastRenderedCollection=e,this.swap(new GrooveClient.Views.TicketsIndex({collection:e,sidebarCollapsable:!0}))},o.prototype.showWelcomeTicket=function(){return this.findOrFetch("welcome",this.showTicket)},o.prototype.setupMailbox=function(e){var t,n;return document.title="Setup Email Forwarding - Groove",GrooveClient.views.mainMenu.highlight("Tickets"),t=GrooveClient.data.mailboxes.get(e),n=new GrooveClient.Views.SetupMailbox({model:t}),n.once("done",function(e){return function(){var n;return n=t.filters.first(),e.renderIndex(e.getFilteredCollection(n.id,t.id))}}(this)),this.swap(n)},o.prototype._needsToSetup=function(e){return null==e&&(e=this.mailboxes.first()),e?e.isState("unconfirmed","unverified","abandoned"):!0},o.prototype.showFilter=function(e,t){var n;return $.sessionStorage("updated_in_last",null),null==t&&(t=e,e="ungrouped"),GrooveClient.views.mainMenu.highlight("Tickets"),(n=this.getFilteredCollection(t,e))?(n.wasFetched||n.fetch({reset:!0}),this.renderIndex(n)):void 0},o.prototype.getFilteredCollection=function(e,t){var n,i;return null==t&&(t="ungrouped"),"ungrouped"===t||(n=this.mailboxes.get(t))?(null!=(i=this.filteredCollections[t])?i[e]:void 0)||this.createFilteredCollection(e,{mailbox:n}):this.notFound("Mailbox")},o.prototype.label=function(e){var t,n;return GrooveClient.views.mainMenu.highlight("Tickets"),n=this.labels.get(e),t=new GrooveClient.Collections.LabeledCollection(n),t.fetch({reset:!0}),this.renderIndex(t)},o.prototype.ACCOUNT_NUMBER_QUERY=/^\s?\#?\d+\s?$/,o.prototype.search=function(e){var t;return e=$.trim(decodeURIComponent(e)),GrooveClient.views.mainMenu.highlight("Tickets"),t=function(t){return function(){return t.swap(new GrooveClient.Views.TicketsSearchIndex({collection:t._searchCollection(e)}))}}(this),e.match(this.ACCOUNT_NUMBER_QUERY)?this._searchByAccountTicketNumber(e,{error:t}):t()},o.prototype._searchByAccountTicketNumber=function(e,t){var n;return null==t&&(t={}),n=e.replace(/\D/g,""),t.success=function(e){return GrooveClient.navigate(e.path())},this.findOrFetchByAccountNumber(n,t)},o.prototype.clearSearch=function(){return this._lastSearch=null},o.prototype._searchCollection=function(e){var t;return this._lastSearch&&this._lastSearch.query.isFor(e)?this._lastSearch:(t=new GrooveClient.Collections.SearchTickets(e),t.query.on("change:term clear:facets",this._clearLastSearch),t.fetch({reset:!0,error:function(e,t){return $.fancybox("<h2><b>"+t.responseText+"</b></h2>\nWe've been notified about this issue and we'll take a look at it shortly.")}}),this._lastSearch=t)},o.prototype._clearLastSearch=function(){return delete this._lastSearch},o.prototype.show=function(){var e,t,n,o,r,s,a;return e=1<=arguments.length?i.call(arguments,0):[],GrooveClient.views.mainMenu.highlight("Tickets"),a=e.pop(),n=e.pop(),o=e.pop()||"ungrouped",null!=n&&(t=null!=(r=this.filteredCollections[o])?r[n]:void 0,s=null!=t?t.get(a):void 0),s?this.showTicket(s):this.findOrFetch(a,this.showTicket)},o.prototype["new"]=function(e){var t,n;return null==e&&(e=""),GrooveClient.views.mainMenu.highlight("Tickets"),document.title="Groove Support - New Ticket",t=new GrooveClient.Models.Ticket,n=new GrooveClient.Views.NewTicket({model:t,email:e}),this.swap(n)},o.prototype.showAgentTicket=function(e,t){return GrooveClient.views.mainMenu.highlight("Agent"),this.findOrFetch(t,function(t){return function(n){return t.showTicket(n,{agent:GrooveClient.data.agents.get(e)})}}(this))},o.prototype.markTicketAsViewed=function(e){return Socket.send({type:"agentViewedTicket",data:e.id})},o.prototype.showTicket=function(e,t){var n;return null==t&&(t={}),this.canSeeTicket(e)?(n=e.get("account_ticket_number"),document.title="Groove Support - Ticket #"+n,GrooveClient.views.mainMenu.highlight("Tickets"),GrooveClient.data.historyItems.visitTicket(e),this.markTicketAsViewed(e),this.swap(new GrooveClient.Views.TicketShow(_.extend(t,{model:e})))):this.incorrectPermission("ticket")},o.prototype.localCollections=function(){var e,t,n;return t=_.chain(this.filteredCollections).values().map(_.values).flatten().value(),n=_.pluck(GrooveClient.data.twitterAccounts.models,"collection"),e=[this.lastRenderedCollection,t,n,this.cachedTickets],_.chain(e).flatten().compact().value()},o.prototype.findOrFetchByAccountNumber=function(e,t){var n;return e=~~e,n=function(t){return function(){var n,i,o,r,s,a,l,c;for(l=t.localCollections(),i=0,r=l.length;r>i;i++)for(n=l[i],c=n.models,o=0,s=c.length;s>o;o++)if(a=c[o],a.get("account_ticket_number")===e)return a}}(this)(),null!=n?t.success(n):$.getJSON("/api/tickets/search/account_ticket_number/"+e).error(t.error).success(function(e){return function(i){return n=new GrooveClient.Models.Ticket(i),e.cachedTickets.add(n),t.success(n)}}(this))},o.prototype.notFound=function(e){return GrooveClient.navigate(),GrooveClient.trigger("flashMessage",{type:"alert",body:e+" not found"}),!1},o.prototype.incorrectPermission=function(e){return GrooveClient.navigate(),GrooveClient.trigger("flashMessage",{type:"alert",body:"You do not have permission to view that "+e}),!1},o.prototype.findOrFetch=function(e,t){var n;return n=function(t){return function(){var i,o,r,s;for(s=t.localCollections(),o=0,r=s.length;r>o;o++)if(i=s[o],n=i.get(e))return n}}(this)(),null!=n?t(n):this.fetchTicketById(e,t)},o.prototype.fetchTicketById=function(e,t){return $.getJSON("/api/tickets/"+e).error(function(n){return function(i){return n.fetchTicketByMerge(e,t)}}(this)).success(function(e){return function(n){var i;return i=new GrooveClient.Models.Ticket(n),e.cachedTickets.add(i),t(i)}}(this))},o.prototype.fetchTicketByMerge=function(e,t){var n;return n=function(e){return function(){return e.notFound("Ticket")}}(this),$.ajax({type:"GET",url:"/api/ticket_merger?child_ticket_id="+e,contentType:"application/json",dataType:"json"}).success(function(e){return function(t){return e._redirectTo("tickets/"+t.parent_ticket_id),!1}}(this)).error(n)},o.prototype.showEnduserTickets=function(e){var t,n;return n={id:e},t=new GrooveClient.Collections.CustomerHistory({enduser:n}),t.fetch({reset:!0}),this.renderIndex(t)},o.prototype.showAgentTickets=function(e){var t;return t=new GrooveClient.Models.User({id:e}),t.fetch({success:function(e){return function(){var n;return n=t.assignedTickets,n.isEmpty()&&n.fetch({reset:!0}),e.renderIndex(n)}}(this),error:function(){return GrooveClient.trigger("flashMessage",{type:"alert",body:"Couldn't find agent. Maybe it was deleted"})}})},o.prototype.canSeeTicket=function(e){return GrooveClient.data.mailboxes.contains(e.mailbox)},o}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=[].slice;GrooveClient.Routers.Trends=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.routes={"trends(/)":"redirectToTicketTrends","trends/tickets/:trend/:range":"showGlobalTicketTrends","trends/tickets/:range":"showGlobalTicketTrends","trends/tickets/in/:mailbox_id/:range":"showMailboxTicketTrends","trends/tickets/in/:mailbox_id/:trend/:range":"showMailboxTicketTrends","trends/knowledge_base/:trend/:range":"showKnowledgeBaseTrends","trends/knowledge_base/:range":"showKnowledgeBaseTrends","trends/team":"showTeamTrends"},i.prototype.redirectToTicketTrends=function(){return this._redirectTo("tickets/past_week")},i.prototype.showGlobalTicketTrends=function(){var e,t;return e=1<=arguments.length?n.call(arguments,0):[],t=2===e.length?[void 0,e[0],e[1]]:[void 0,void 0,e[0]],this._showTicketTrends.apply(this,t)},i.prototype.showMailboxTicketTrends=function(){var e,t;return e=1<=arguments.length?n.call(arguments,0):[],t=3===e.length?e:[e[0],void 0,e[1]],this._showTicketTrends.apply(this,t)},i.prototype._showTicketTrends=function(e,t,n){return null!=e&&(e=parseInt(e)),this._show(new GrooveClient.Views.TicketTrendsIndex({model:this._ticketReport(e,t,n)}))},i.prototype.showKnowledgeBaseTrends=function(){var e,t,i,o;return e=1<=arguments.length?n.call(arguments,0):[],i=1===e.length?[void 0,e[0]]:e,o=i[0],t=i[1],this._show(new GrooveClient.Views.KnowledgeBaseTrendsIndex({model:this._knowledgeBaseReport(o,t)}))},i.prototype.showTeamTrends=function(){var e;return GrooveClient.views.mainMenu.highlight("Reports"),e=new GrooveClient.Views.TeamTrendsIndex,document.title=e.title,this.swap(e)},i.prototype._ticketReport=function(e,t,n){var i;return(i=this._cachedTicketReport)?(i.set("name",this._ticketReportName(e)),this._updateReport(i,t,{mailbox_id:e,range:n})):this._cachedTicketReport=this._buildReport({name:this._ticketReportName(e),aggregated:["ticket_facts","ticket_enduser_facts","rating_facts"],daily:{ticket_enduser_facts:"had_new_ticket"},lists:{labels:"labeling_count",comment_templates:"comment_template_count"},query:{range:n,mailbox_id:e},current:t})},i.prototype._ticketReportName=function(e){var t;return e?(t=GrooveClient.data.mailboxes.get(e),t.get("name")):"All Tickets"},i.prototype._knowledgeBaseReport=function(e,t){return this._buildReport({name:"Knowledge Base",aggregated:["knowledge_base_facts","knowledge_base_search_facts"],daily:{knowledge_base_search_facts:"query_count"},lists:{knowledge_base_topics:"topic_views",knowledge_base_search_terms:"query_count"},query:{range:t},current:e})},i.prototype._show=function(e){var t;return GrooveClient.views.mainMenu.highlight("Reports"),t=e.model,t.wasFetched||t.isFetching||t.fetch(),document.title=e.title,this.swap(e)},i.prototype._buildReport=function(e){return new GrooveClient.Models.TrendsReport(e)},i.prototype._updateReport=function(e,t,n){return null==n&&(n={}),e.query.set(n),e.set("current",t),e},i.prototype._redirectTo=function(e){return History.replaceState({},null,"/groove_client/trends/"+e)},i}(GrooveClient.Support.SwappingRouter)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.AgentUsernames=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.AgentUsername,n.prototype.search=function(e){var t,n,i;return""===e?_.sortBy(this.withActiveAgentsAndNotCurrentUser(),"text"):(n=new RegExp("^"+Groove.Util.escapeRegex(e),"i"),i={},t=_.filter(this.withActiveAgentsAndNotCurrentUser(),function(e){var t,o,r;return t=e.agent(),r=0,o=function(e){return null==e&&(e=""),.01*e.length},r+=n.test(e.get("text"))?1-o(e.get("text")):n.test(t.get("first_name"))?.5-o(t.get("first_name")):n.test(t.get("last_name"))?.25-o(t.get("last_name")):void 0,i[e.id]=r,r>0}),_.sortBy(t,function(e){return i[e.id]}))},n.prototype.withActiveAgentsAndNotCurrentUser=function(){return this.filter(function(e){var t;return t=e.agent(),null!=t&&t.get("archived")!==!0&&t.id!==GrooveClient.data.currentUser.id})},n.prototype.isSearchable=function(){return this.withActiveAgentsAndNotCurrentUser().length>0},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.AppInstallations=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.AppInstallation,n.prototype.url=function(){return"/api/apps/all/installations?user_id="+this.user_id},n.prototype.initialize=function(e){return null==e&&(e={}),this.user_id=e.user_id},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Apps=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.App,n.prototype.url="/api/apps",n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.PaginatedCollection=function(t){function n(e){null==e&&(e={}),this.parsePageAttributes(e),n.__super__.constructor.call(this,e.models)}return e(n,t),n.prototype.url=function(){var e,t;return t=_.result(this,"baseUrl"),e=this.urlParams(),_.isEmpty(e)||(t+="?"+$.param(e)),t},n.prototype.urlParams=function(){return{page:this.currentPage,all:!!this.unpaginate}},n.prototype.parsePageAttributes=function(e){return this.currentPage=e.current_page||1,e.num_pages?this.isLastPage=this.currentPage>=e.num_pages:this.isLastPage=!1},n.prototype.parse=function(e){return this.parsePageAttributes(e),e.models},n.prototype.canPaginateMore=function(){return!(this.isLastPage||this.fetching)},n.prototype.fetchMore=function(e){return null==e&&(e={}),this.canPaginateMore()?(this.currentPage+=1,e=_.extend({update:!0,remove:!1},e),this.fetch(e)):!1},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.SortableCollection=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.urlParams=function(){return _.extend(n.__super__.urlParams.apply(this,arguments),{order_by:this.order_by})},n}(GrooveClient.Collections.PaginatedCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Tickets=function(t){function n(){var e,t;e=this.loadSortColumnFromCookie()||"user_updated_at",t=$.cookie("order_by_direction")||"desc",this.order_by={column:e,direction:t},n.__super__.constructor.apply(this,arguments),GrooveClient.on("tickets:create",this.ticketsCreate,this),GrooveClient.on("tickets:update",this.ticketsUpdate,this),GrooveClient.on("tickets:delete",this.ticketsDelete,this),GrooveClient.on("tickets:agentViewedTicket",this.agentsViewingTicketChanged,this),GrooveClient.on("tickets:agentLeftTicket",this.agentsViewingTicketChanged,this),GrooveClient.on("tickets:agentTyping",this.agentTyping,this),GrooveClient.on("tickets:agentStoppedTyping",this.agentStoppedTyping,this),this.listenTo(TicketActions,"undo",this.undoActionOnTicket)}return e(n,t),n.prototype.model=GrooveClient.Models.Ticket,n.prototype.baseUrl="/api/tickets",n.prototype.emptyTitle=function(){return"No tickets found."},n.prototype.emptyMessage=function(){return"No tickets found."},n.prototype.ticketsUpdate=function(e){var t,n,i,o;for(_.isArray(e)||(e=[e]),i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(this.updateExisting(o));return i},n.prototype.ticketsDelete=function(e){var t,n,i,o;for(_.isArray(e)||(e=[e]),i=[],t=0,n=e.length;n>t;t++)o=e[t],this.updateExisting(o,{silent:!0}),i.push(this.remove(o));return i},n.prototype.ticketsCreate=function(){return this.ticketsUpdate.apply(this,arguments)},n.prototype.updateExisting=function(e,t){var n;return null==t&&(t={}),null!=e.id&&(n=this.get(e.id),null!=n)?(n.set(e,t),n.setupRelationsFromAttributes(e),t.silent?void 0:n.trigger("sync",n)):void 0},n.prototype.agentsViewingTicketChanged=function(e,t){var n;return(n=this.get(e))?n.trigger("change:working_agent",GrooveClient.data.agents.get(t)):void 0},n.prototype.agentTyping=function(e,t){var n;return(n=this.get(e))?n.trigger("agent_typing",GrooveClient.data.agents.get(t)):void 0},n.prototype.agentStoppedTyping=function(e,t){var n;return(n=this.get(e))?n.trigger("agent_stopped_typing",GrooveClient.data.agents.get(t)):void 0},n.prototype.comparator=function(e){var t,n;return t="asc"===this.order_by.direction.toLowerCase()?1:-1,n=_.contains(["latest_enduser_comment_at","created_at","updated_at","user_updated_at"],this.order_by.column)?new Date(e.get(this.order_by.column)).getTime():"status"===this.order_by.column?_.indexOf(GrooveClient.Models.Ticket.STATES,e.get("state")):"priority"===this.order_by.column?e.get("priority"):void 0,t*n},n.prototype.refresh=function(){return this.reset([]),this.isLastPage=!1,this.currentPage=1},n.prototype.loadSortColumnFromCookie=function(){var e;return e=["user_updated_at","created_at","priority","status"],_.contains(e,$.cookie("order_by_column"))||$.cookie("order_by_column","user_updated_at"),$.cookie("order_by_column")},n.prototype.undoActionOnTicket=function(e){var t;return t=this.get(e.ticket_id),t?t.undo(e):void 0},n}(GrooveClient.Collections.SortableCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.AssignedTickets=function(t){function n(e){null==e&&(e={}),_.extend(this,e),n.__super__.constructor.call(this)}return e(n,t),n.prototype.baseUrl=function(){if(null==this.agent)throw new Error("Need @agent to fetch Agent History collection");return"/api/agents/"+this.agent.id+"/tickets"},n.prototype.urlParams=function(){var e;return e=n.__super__.urlParams.call(this),e.rated=!!this.rated,e.for_profile=!!this.forProfile,e},n.prototype.title=function(){return"Tickets assigned to "+this.agent.get("name")},n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Attachments=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.Attachment,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.ChatIntegrations=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.ChatIntegration,n.prototype.url=function(){return"/chat/integrations?type="+this.type},n.prototype.initialize=function(e){this.type=e.type},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CommentTemplateCategories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.CommentTemplateCategory,n.prototype.url="/api/comment_template_categories",n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CommentTemplates=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.CommentTemplate,n.prototype.url="/api/comment_templates",n.prototype.byCategoryName=function(){var e;return e=GrooveClient.data.commentTemplateCategories,this.groupBy(function(t){var n,i;return i=t.get("category_id"),n=e.get(i),(null!=n?n.get("name"):void 0)||"Other"})},n}(Backbone.Collection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.Comments=function(n){function i(){this.setDeliverByOnComment=e(this.setDeliverByOnComment,this),i.__super__.constructor.apply(this,arguments),GrooveClient.on("comments:delete",this.commentsDelete,this),GrooveClient.on("undo_comment:set",this.setDeliverByOnComment,this)}return t(i,n),i.prototype.model=GrooveClient.Models.Comment,i.prototype.commentsDelete=function(e){var t,n,i,o;for(_.isArray(e)||(e=[e]),o=[],n=0,i=e.length;i>n;n++)t=e[n],o.push(this.remove(t));return o},i.prototype.replies=function(){return this.models.slice(1)},i.prototype.setDeliverByOnComment=function(e){var t;return(t=this.get(e.id))?t.has("deliver_by")?void 0:t.set("deliver_by",e.deliver_by):void 0},i}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Companies=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.Company,n.prototype.url="/api/contacts/companies",n.prototype.count=function(e){var t;return t=this.url+"/count",$.ajax({dataType:"json",url:t,success:e.success})},n.prototype.parse=function(e,t){return this.totalCompanyCount=e.total_company_count,n.__super__.parse.call(this,e.companies,t)},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CompanyTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CompanyTimelineEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.TimelineEvent,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.People=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.Person,n.prototype.baseUrl="/api/contacts/people",n.prototype.url=function(){return this.baseUrl+"?page="+this.page+"&sort_by="+this.sortBy+"&sort_direction="+this.sortDirection},n.prototype.initialize=function(e){return null==e&&(e={}),this.page=e.page||1,this.sortBy="name",this.sortDirection="asc"},n.prototype.count=function(e){var t;return t=this.baseUrl+"/count",$.ajax({dataType:"json",url:t,success:e.success})},n.prototype.fetchFirstPage=function(){return this.page=1,this.fetch({reset:!0})},n.prototype.fetchNextPage=function(){return this.canFetchNext()?(this.page++,this.fetch({reset:!0})):void 0},n.prototype.canFetchNext=function(){return this.numPages>this.page},n.prototype.parse=function(e,t){return this.numPages=e.num_pages,this.totalCustomerCount=e.total_customer_count,n.__super__.parse.call(this,e.people,t)},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.PersonTickets=function(t){function n(e){null==e&&(e={}),_.extend(this,e),n.__super__.constructor.call(this)}return e(n,t),n.prototype.baseUrl=function(){if(null==this.enduser)throw new Error("Need @enduser to fetch Customer History collection");return"/api/contacts/people/"+this.enduser.get("id")+"/tickets"},n.prototype.title=function(){return this.enduser.get("name")+" Ticket History"},n.prototype.urlParams=function(){var e;return e=n.__super__.urlParams.call(this),null!=this.limit&&(e.limit=this.limit),null!=this.rated&&(e.rated=!!this.rated),e},n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.PersonTimelineEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.TimelineEvent,n.prototype.initialize=function(e){return this.person=e.person},n.prototype.url=function(){return"/api/contacts/people/"+this.person.get("id")+"/timeline_events"},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CustomerHistory=function(t){function n(e){null==e&&(e={}),_.extend(this,e),n.__super__.constructor.call(this)}return e(n,t),n.prototype.baseUrl=function(){if(null==this.enduser)throw new Error("Need @enduser to fetch Customer History collection");return"/api/endusers/"+this.enduser.id+"/tickets"},n.prototype.title=function(){return"Customer Ticket History"},n.prototype.urlParams=function(){var e;return e=n.__super__.urlParams.call(this),
null!=this.ticket&&(e.ticket_id=this.ticket.id),null!=this.limit&&(e.limit=this.limit),e},n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.DailyFacts=function(t){function n(e){this.type=e.type,this.column=e.column,this.query=e.query,n.__super__.constructor.call(this)}return e(n,t),n.prototype.url=function(){var e;return e=_.extend({select:this.column},this.query.populatedAttributes()),e.range=this._completeRange(e.range),"/api/daily/"+this.type+".json?"+$.param(e)},n.prototype.parse=function(e){var t,n,i;n=[];for(t in e)i=e[t],n.push({date:t,value:i});return n},n.prototype._completeRange=function(e){return"yesterday"===e||"this_week"===e?"past_week":e},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.EmailMarketingIntegrations=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.EmailIntegration,n.prototype.url="/email_marketing/integrations.json",n.prototype.initialize=function(){return this.on("reset",function(e){return function(){return delete e._byType}}(this)),this.on("add",function(e){return function(t){return e._byType?e._byType[t.get("type")]=t:void 0}}(this)),this.on("remove",function(e){return function(t){return e._byType?delete e._byType[t.get("type")]:void 0}}(this))},n.prototype.getByType=function(e){return null==this._byType&&(this._byType=_.inject(this.models,function(e,t){return e[t.get("type")]=t,e},{})),this._byType[e]},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};GrooveClient.Collections.EmailMarketingLists=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(e,t){var n;return n=t.integration,this.integration=n},i.prototype.subscribable=function(e){var t;return t=e.pluck("list_id"),this.reject(function(e){var i;return i=e.id,n.call(t,i)>=0})},i.prototype.getName=function(e){var t;return(t=this.get(e))?t.get("name"):""},i}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.EmailMarketingMailboxSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.EmailMarketingMailboxSettings,n.prototype.url=function(){return"/email_marketing/integrations/"+this.integration.get("type")+"/mailbox_settings.json"},n.prototype.initialize=function(e,t){var n;return n=t.integration,this.integration=n,this.on("reset",function(e){return function(){return delete e._byMailboxId}}(this)),this.on("add",function(e){return function(t){return e._byMailboxId?e._byMailboxId[t.get("mailbox_id")]=t:void 0}}(this)),this.on("remove",function(e){return function(t){return e._byMailboxId?delete e._byMailboxId[t.get("mailbox_id")]:void 0}}(this))},n.prototype.getByMailboxId=function(e){return null==this._byMailboxId&&(this._byMailboxId=_.inject(this.models,function(e,t){return e[t.get("mailbox_id")]=t,e},{})),this._byMailboxId[e]},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.EmailMarketingSubscriptions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.EmailMarketingSubscription,n.prototype.url=function(){var e;return e=$.param({enduser_id:this.enduser.id}),"/email_marketing/integrations/"+this.integration.id+"/subscriptions.json?"+e},n.prototype.initialize=function(e,t){this.integration=t.integration,this.enduser=t.enduser},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.FilteredTickets=function(n){function i(t){this.ticketsUpdate=e(this.ticketsUpdate,this),this.filter=t.filter,this.mailbox=t.mailbox,this.on("change:updated_at",function(e){return function(){return e.sort()}}(this)),i.__super__.constructor.call(this,t)}return t(i,n),i.prototype.urlParams=function(){var e;return e={filter_by:this.filter.id},this.mailbox&&(e.by_mailbox=this.mailbox.id),_.extend(e,i.__super__.urlParams.call(this))},i.prototype.title=function(){return this.filter.get("name")},i.prototype.emptyTitle=function(){return"Woot Woot!"},i.prototype.emptyMessage=function(){return"This folder doesn't have any tickets"},i.prototype.ticketsUpdate=function(e){var t,n,i,o,r,s,a,l;for(_.isArray(e)||(e=[e]),o=(null!=(r=this.mailbox)?r.id:void 0)||"ungrouped",a=[],n=0,i=e.length;i>n;n++)l=e[n],GrooveClient.data.currentUser.hasPermissionToView(l)&&(t=(null!=(s=l.filter_diff)?s[o]:void 0)||{},this.changedIn(t.plus)?a.push(this.addFromCache(o,t,l)):this.changedIn(t.minus)?a.push(this.cacheAndRemove(l)):a.push(this.updateExisting(l)));return a},i.prototype.changedIn=function(e){return e?_.include(e,this.filter.id):!1},i.prototype.addFromCache=function(e,t,n){var i,o,r,s;return o=GrooveClient.routers.tickets.filteredCollections[e],i=_.find(o,function(e,n){return _.include(t.minus,parseInt(n))}),s=null!=i?i.get(n.id):void 0,r=function(e){return function(){var t,i;return i=GrooveClient.routers.tickets.cachedTickets,(t=i.get(n.id))?(i.updateExisting(n),i.remove(n,{silent:!0}),e.add(t)):n.ticket_actions?e.add(n):void 0}}(this),s?s.once("remove",r):r()},i.prototype.cacheAndRemove=function(e){var t;return t=this.get(e.id),this.updateExisting(e),t&&GrooveClient.routers.tickets.cachedTickets.add(t),this.remove(e)},i}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Filters=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return this.mailbox?"/api/mailboxes/"+this.mailbox.id+"/filters":"/api/filters"},n.prototype.fetchedTicketCount=!1,n.prototype.model=GrooveClient.Models.Filter,n.prototype.initialize=function(e,t){var n;return null==t&&(t={}),this.mailbox=t.mailbox,n=GrooveClient.data.account.get("prefers_grouping_filters_by_mailbox"),n&&!this.mailbox||!n&&this.mailbox?void 0:(GrooveClient.on("tickets:create",this.ticketsUpdate,this),GrooveClient.on("tickets:update",this.ticketsUpdate,this),GrooveClient.on("tickets:delete",this.ticketsUpdate,this),GrooveClient.on("refresh",this.fetchTicketCount,this),this.on("reset",function(e){return function(){return e.fetchedTicketCount=!1}}(this)))},n.prototype.fetchTicketCount=function(){var e,t,n,i,o;return e={},null!=this.mailbox&&(e.mailbox_id=this.mailbox.id),n=!1,t="json",o="/api/tickets_count",this.trigger("sync:num_tickets:start",e.mailbox),i=function(e){return function(t){var n,i,o;e.fetchedTicketCount=!0;for(i in t)n=t[i],null!=(o=e.get(i))&&o.set("num_tickets",n);return e.trigger("sync:num_tickets")}}(this),$.ajax({dataType:t,url:o,data:e,success:i,global:n})},n.prototype.ticketsUpdate=function(e,t){var n,i,o,r,s,a,l,c,p,u,d,h,m,f,g,v,y;if(!(t&&t<GrooveClient.bootstrapped)){for(_.isArray(e)||(e=[e]),n={},a=0,u=e.length;u>a&&(y=e[a],!y.mailbox_id||GrooveClient.data.currentUser.hasPermissionToView(y));a++)if(s=null!=(m=y.filter_diff)?m[this.mailbox?this.mailbox.id:"ungrouped"]:void 0){if(s.plus)for(f=s.plus,c=0,d=f.length;d>c;c++)l=f[c],null==n[l]&&(n[l]=0),n[l]+=1;if(s.minus)for(g=s.minus,p=0,h=g.length;h>p;p++)l=g[p],null==n[l]&&(n[l]=0),n[l]-=1}v=[];for(l in n)o=n[l],(r=this.get(l))&&r.has("num_tickets")?(i=+r.get("num_tickets")+o,v.push(r.set("num_tickets",i>0?i:0))):v.push(void 0);return v}},n}(Backbone.Collection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.GroupedFacts=function(n){function i(t,n){this.type=t,null==n&&(n={}),this.url=e(this.url,this),this.select=n.select,this.query=n.query,this.groupedBy=n.by,this.order=n.order,i.__super__.constructor.call(this)}return t(i,n),i.prototype.url=function(){var e;return e={select:this.select,group:this.groupedBy},this.order&&(e.order=this.order),this.query.url("/api/"+this.type+".json",e)},i}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Groups=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.Group,n}(Backbone.Collection)}.call(this),function(e,t){"function"==typeof define&&define.amd?define(["underscore","backbone"],function(n,i){return t(n||e._,i||e.Backbone)}):t(_,Backbone)}(this,function(e,t){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}return t.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.records=t&&t.split(",")||[]},e.extend(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=i(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(t){return this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),e.include(this.records,t.id.toString())||this.records.push(t.id.toString()),this.save(),this.find(t)},find:function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){return e(this.records).chain().map(function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(t){return t.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+t.id),this.records=e.reject(this.records,function(e){return e===t.id.toString()}),this.save(),t)},localStorage:function(){return localStorage},jsonData:function(e){return e&&JSON.parse(e)},_clear:function(){var t=this.localStorage(),n=new RegExp("^"+this.name+"-");t.removeItem(this.name),e.chain(t).keys().filter(function(e){return n.test(e)}).each(function(e){t.removeItem(e)})},_storageSize:function(){return this.localStorage().length}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,n,i){var o,r,s=n.localStorage||n.collection.localStorage,a=$.Deferred&&$.Deferred();try{switch(e){case"read":o=void 0!=n.id?s.find(n):s.findAll();break;case"create":o=s.create(n);break;case"update":o=s.update(n);break;case"delete":o=s.destroy(n)}}catch(l){r=l.code===DOMException.QUOTA_EXCEEDED_ERR&&0===s._storageSize()?"Private browsing is unsupported":l.message}return o?(n.trigger("sync",n,o,i),i&&i.success&&("0.9.10"===t.VERSION?i.success(n,o,i):i.success(o)),a&&a.resolve(o)):(r=r?r:"Record Not Found",n.trigger("error",n,r,i),i&&i.error&&("0.9.10"===t.VERSION?i.error(n,r,i):i.error(r)),a&&a.reject(r)),i&&i.complete&&i.complete(o),a&&a.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,n,i){return t.getSyncMethod(n).apply(this,[e,n,i])},t.LocalStorage}),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.HistoryItems=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.maxLength=10,n.prototype.model=GrooveClient.Models.HistoryItem,n.prototype.localStorage=new Backbone.LocalStorage("GrooveClient.HistoryItems"),n.prototype.initialize=function(){return GrooveClient.on("tickets:delete",this.ticketsDelete,this)},n.prototype.ticketsDelete=function(e){var t,n,i,o;for(_.isArray(e)||(e=[e]),i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(this.removeItem("Ticket",o.id));return i},n.prototype.removeItem=function(e,t){var n,i,o,r,s;for(r=this.where({type:e,id:t}),s=[],n=0,o=r.length;o>n;n++)i=r[n],s.push(this.remove(i));return s},n.prototype.visitTicket=function(e){var t;return t=new GrooveClient.Models.HistoryItem({id:e.id,description:e.get("snippet"),type:"Ticket",ticket:e}),this.visit(t)},n.prototype.visit=function(e){return this.removeItem(e.get("type"),e.id),this.unshift(e),this.length>this.maxLength&&this.last().destroy(),e.save(),this.sort()},n.prototype.topTicket=function(){return GrooveClient.data.historyItems.findWhere({type:"Ticket"})},n.prototype.comparator=function(e){return-e.get("visitedAt")},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Invoices=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/account/invoices",n.prototype.model=GrooveClient.Models.Invoice,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.KnowledgeBaseTopics=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.KnowledgeBaseTopic,n.prototype.url=function(e){var t;return null==e&&(e={}),t="/api/knowledge_base_topics.json",_.isEmpty(e)||(t+="?"+$.param(e)),t},n.prototype["with"]=function(e,t){return _.reject(e,function(e){return function(t){return e.get(t)}}(this)),_.isEmpty(e)?t(this):$.getJSON(this.url(sign_in.html),function(e){return function(n){return e.add(n),t(e)}}(this))},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.LabeledCollection=function(t){function n(e){this.label=e,n.__super__.constructor.call(this)}return e(n,t),n.prototype.urlParams=function(){return _.extend({labeled_with:this.label.id},n.__super__.urlParams.call(this))},n.prototype.title=function(){return'Tickets labeled with "'+this.label.get("name")+'".'},n.prototype.emptyMessage=function(){return'There are currently no tickets labeled with "'+this.label.get("name")+'".'},n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Labels=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url="/api/labels",n.prototype.model=GrooveClient.Models.Label,n}(Backbone.Collection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.Mailboxes=function(n){function i(){return this._updateFromRealtime=e(this._updateFromRealtime,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.model=GrooveClient.Models.Mailbox,i.prototype.url="/api/mailboxes.json",i.prototype.initialize=function(e,t){return null==t&&(t={}),this.accessible=_.isEmpty(t)?!0:t.accessible,this.listenTo(GrooveClient,"mailbox:update",this._updateFromRealtime)},i.prototype._updateFromRealtime=function(e){var t;return null!=(t=this.get(e.id))?t.set(_.omit(e,["account_id"])):void 0},i.prototype.names=function(){return this.invoke("get","name")},i.prototype.commonNames=function(){var e;return e=_.map(this.names(),function(e){return e.split(" ")}),_.intersection.apply(_,e)},i}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.OtherCustomerTickets=function(t){function n(e){this.enduser=e.enduser,this.ticket=e.ticket,this.limit=e.limit,n.__super__.constructor.call(this)}return e(n,t),n.prototype.model=GrooveClient.Models.OtherTicket,n.prototype.baseUrl=function(){return"/api/endusers/"+this.enduser.id+"/tickets/titles"},n.prototype.urlParams=function(){return _.extend(n.__super__.urlParams.apply(this,arguments),{ticket_id:this.ticket.id,limit:this.limit})},n}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.RankedList=function(n){function i(t){this.type=t.type,this.rank_by=t.rank_by,this.query=t.query,this.url=e(this.url,this),i.__super__.constructor.call(this)}return t(i,n),i.prototype.url=function(){return this.query.url("/api/top/"+this.type+".json",{rank_by:this.rank_by})},i.prototype.comparator=function(e){return-1*e.get(this.rank_by)},i}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.SearchTickets=function(n){function i(t){this._resetCurrentPage=e(this._resetCurrentPage,this),this._saveUpdatedInLast=e(this._saveUpdatedInLast,this);var n;this.query=new GrooveClient.Models.SearchQuery({term:t}),this.listenTo(this.query,"change:updated_in_last",this._resetCurrentPage),this.listenTo(this.query,"change:updated_in_last",this._saveUpdatedInLast),this.listenTo(this.query,"change:facet",this._resetCurrentPage),n="change:mailbox_id change:assignee_id change:state change:labels",this.on(n,function(e){return function(){return e.query.clearFacets()}}(this)),i.__super__.constructor.call(this)}return t(i,n),i.prototype.baseUrl="/api/tickets/search.json",i.prototype.urlParams=function(){return _.extend(_.omit(i.__super__.urlParams.apply(this,arguments),"order_by"),this.query.urlParams())},i.prototype.comparator=function(e){return 1},i.prototype.title=function(){return'Search results for "'+this.query.termWithoutQuotes()+'" '},i.prototype.emptyTitle=function(){return"No Tickets Found"},i.prototype.emptyMessage=function(){return"We didn't find any tickets matching "+this.query.get("term")+". Please broaden\nyour query or try a larger timeframe."},i.prototype.hasUnfetchedModels=function(){return this.query.get("current_page")<this.query.get("page_count")},i.prototype.parse=function(e,t){return e.num_pages=e.page_count,this.parsePageAttributes(e),this.query.set(_.omit(e,"result","facets"),t),this.query.facets||this.query.setFacets(e.facets),e.result},i.prototype._saveUpdatedInLast=function(e){return $.sessionStorage("updated_in_last",e.get("updated_in_last"))},i.prototype._resetCurrentPage=function(){return this.currentPage=1},i}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CannedRepliesSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.CannedReplySettings,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.CannedReplyCategorySettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.CannedReplyCategorySettings,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.FolderSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.FolderSetting,n.prototype.url="/api/settings/folders",n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.LabelSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.LabelSettings,n.prototype.url="/api/settings/labels",n}(Backbone.Collection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.MailboxSettings=function(n){function i(){return this._updateFromRealtime=e(this._updateFromRealtime,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.model=GrooveClient.Models.MailboxSetting,i.prototype.url="/api/settings/mailboxes",i.prototype.initialize=function(){return this.listenTo(GrooveClient,"mailbox:update",this._updateFromRealtime)},i.prototype._updateFromRealtime=function(e){var t;return null!=(t=this.get(e.id))?t.set(_.omit(e,["account_id"])):void 0},i}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.RuleActions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.RuleAction,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.RuleConditions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.RuleCondition,n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.RulesSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.RuleSettings,n.prototype.url="/api/settings/rules",n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.SlackChannels=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.SlackChannel,n.prototype.url="/slack/channels.json",n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.SlackProfiles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.SlackProfile,n.prototype.url="/slack/profiles.json",n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.TicketActions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return"/api/tickets/"+this.ticket.id+"/ticket_actions"},n.prototype.model=GrooveClient.Models.TicketAction,n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.TicketsMassActions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.Ticket,n.prototype.baseUrl="/api/tickets",n.prototype.perform=function(e,t){var n,i,o,r,s,a,l;return null==t&&(t={}),l=this.baseUrl+"/"+e,o=this.pluck("id"),a="post",n="json",t=_.extend({ticket_ids:o},t),"delete"===e?(i=e,r="Tickets successfully deleted!"):"discard_draft"===e?(i="update",r="Drafts successfully discarded!"):(i="update",r="Tickets updated successfully!"),s=function(e){var t,n,o,s,a,l;for(l=e.tickets||e,GrooveClient.trigger("tickets:"+i,l),GrooveClient.trigger("flashMessage",{type:"notice",body:r}),GrooveClient.trigger("ticket-selection:hide"),s=[],t=0,o=l.length;o>t;t++)a=l[t],null!=a.labels&&s.push(function(){var e,t,i,o;for(i=a.labels,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(GrooveClient.data.labels.add(n));return o}());return s},$.ajax({url:l,data:t,success:s,type:a,dataType:n})},n.prototype.label=function(e){return this.perform("label",{label:e})},n.prototype.assign=function(e){return this.perform("assign",{assignee_id:e})},n.prototype.assign_group=function(e){return this.perform("assign_group",{assignee_group_id:e})},n.prototype.status=function(e){return e?this.perform("status_change",{state:e}):void 0},n.prototype.mailbox=function(e){return this.perform("change_mailbox",{mailbox_id:e})},n.prototype.massDelete=function(){return this.perform("delete")},n.prototype.discardDraft=function(){return this.perform("discard_draft")},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.TimelineEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.TimelineEvent,n.prototype.url="/api/timeline_events",n.prototype.itemsPerFetch=15,n.prototype.initialize=function(){return this.timestamp=new Date,this.hasMore=this.size()>=this.itemsPerFetch,GrooveClient.on("timeline_events:create",this.add,this),this.listenTo(GrooveClient,"comments:undo",this.removeByComment)},n.prototype.comparator=function(e){return-new Date(e.get("created_at")).getTime()},n.prototype.canPaginateMore=function(){return this.hasMore&&!this.fetching},n.prototype.fetchMore=function(e){return this.canPaginateMore()?(e=_.extend({add:!0,global:!1},e),e.data={timestamp:(null!=this.last()?new Date(this.last().get("created_at")):this.timestamp).getTime(),more:!0,limit:this.itemsPerFetch},e.success=function(e){return function(t,n){return e.hasMore=n.length>=e.itemsPerFetch,e.trigger("sync")}}(this),this.fetch(e)):!1},n.prototype.removeByComment=function(e){var t;return t=_.find(this.models,function(t){var n;return n=t.get("secondary_subject"),"Comment"===(null!=n?n.type:void 0)&&(null!=n?n.id:void 0)===e.id}),this.remove(t)},n}(GrooveClient.Support.FetchingCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.TwitterAccounts=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.TwitterAccount,n}(Backbone.Collection)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Collections.TwitterTickets=function(n){function i(t){this.ticketsCreate=e(this.ticketsCreate,this),t&&t.account&&(this.account=t.account),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.baseUrl="/api/twitter_tickets",i.prototype.title=function(){var e;return e="@Mentions",this.account&&(e+=" for '"+this.account.get("screen_name")+"'"),e},i.prototype.emptyMessage=function(){return"Looks like you don't have any Twitter @mentions yet."},i.prototype.urlParams=function(){return this.account?_.extend(i.__super__.urlParams.call(this),{account:this.account.id}):i.__super__.urlParams.call(this)},i.prototype.comparator=function(e){return-new Date(e.get("latest_enduser_comment_at")).getTime()},i.prototype.ticketsCreate=function(e){var t,n,i,o;for(_.isArray(e)||(e=[e]),i=[],t=0,n=e.length;n>t;t++)o=e[t],"TwitterTicket"===o.type&&(this.account&&this.account.id!==o.twitter_account_id||i.push(this.add(o)));return i},i}(GrooveClient.Collections.Tickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Collections.Users=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=GrooveClient.Models.User,n.prototype.active=function(){var e;return e=this.filter(function(e){return e.get("archived")===!1}),new GrooveClient.Collections.Users(e)},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentGridItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="agent item",n.prototype.template=JST["agents/agent_grid_item"],n.prototype.initialize=function(){return this.agentView=new GrooveClient.Views.User({model:this.model})},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,agent:this.model,agentView:this.agentView}),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentGroupedTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.listenTo(this.collection,"reset",this.renderTicketItems);
},n.prototype.render=function(){return this.renderTemplate({agent:this.model}),this.renderTicketItems(),this.renderBlankState(),this},n.prototype.renderTicketItems=$.noop,n.prototype.renderList=function(e,t,n){var i,o,r,s,a,l;for(l=this.collection.where(e),r=n.find(".simple-list").empty(),n.find(".title").text(t+" Tickets"),n.toggle(!!l.length),s=[],i=0,o=l.length;o>i;i++)a=l[i],s.push(this.appendItem(a,r));return s},n.prototype.renderBlankState=function(){var e;return e=new GrooveClient.Views.Blankable({collection:this.collection,el:this.el}),this.renderChild(e)},n.prototype.appendItem=function(e,t){var n;return n=new GrooveClient.Views.TicketSimpleItem({model:e}),this.prependChildTo(n,t)},n.prototype.titlePrefixForTickets=function(e){return e.length},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.ReinviteAgent=function(n){function i(){return this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["agents/reinvite"],i.prototype.CUSTOM_FANCYBOX_CLASS="new-agent",i.prototype.events={"submit #agent_reinvite_form":"submitReinvite"},i.prototype.initialize=function(e){return null==e&&(e={}),this.agentId=e.agentId,this.acceptURL=e.acceptURL,e},i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:418})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.render=function(){return this.renderTemplate({view:this,acceptURL:this.acceptURL,agentId:this.agentId}),this},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns(),this},i.prototype.submitReinvite=function(e,t,n){return e.preventDefault(),$.ajax({type:"POST",url:"/users/reinvite",dataType:"json",data:{user:{id:this.agentId}},error:function(e){return function(t,n,i){return new GrooveClient.Views.Alert({title:"Could not reinvite this agent"}).show(),e.close()}}(this),success:function(e){return function(t,n,i){return e.acceptUrl=t.accept_invitation_url,e.render(),e.close(),new GrooveClient.Views.Notification({title:"Invite sent successfully"}).show()}}(this)})},i}(GrooveClient.Views.FancyboxView),GrooveClient.Views.ReinviteAgent.reinvite=function(e,t){var n;return n=new GrooveClient.Views.ReinviteAgent({agentId:e,acceptURL:t}),n.appear(),!1}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AgentListItem=function(n){function i(){return this.displayOpenTicketCount=e(this.displayOpenTicketCount,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="agent item",i.prototype.tagName="tr",i.prototype.template=JST["agents/agent_list_item"],i.prototype.events={"click .resend a":"showReinviteForAgent"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderTemplate(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{agent:this.model})},i.prototype.updateOpenTicketCount=function(){return this.model.profileTickets.isEmpty()?this.model.profileTickets.fetch({success:this.displayOpenTicketCount}):this.displayOpenTicketCount()},i.prototype.displayOpenTicketCount=function(){var e;return e=this.model.profileTickets.where({state:"opened"}).length,this.$("td.open-tickets").text(e)},i.prototype.showReinviteForAgent=function(e){return GrooveClient.Views.ReinviteAgent.reinvite(this.model.get("id"),this.model.get("accept_invitation_url"))},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentRatings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/agent_ratings"],n.prototype.renderTicketItems=function(){var e,t,n,i;t={awesome:"Awesome",ok:"OK",bad:"Not Good"},n=[];for(e in t)i=t[e],n.push(this.renderList({rating:e},i,this.$("."+e)));return n},n.prototype.titlePrefixForTickets=function(e){return n.__super__.titlePrefixForTickets.apply(this,arguments)+" ("+(this.collection.isEmpty()?0:100*Math.round(e.length/this.collection.length,0))+"%)"},n}(GrooveClient.Views.AgentGroupedTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/agent_tickets"],n.prototype.renderTicketItems=function(){var e,t,n,i;e={opened:"Open",follow_up:"Follow Up",pending:"Pending",closed:"Closed"},t=[];for(n in e)i=e[n],t.push(this.renderList({state:n},i,this.$("."+n)));return t},n}(GrooveClient.Views.AgentGroupedTickets)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AgentType=function(n){function i(){return this.reload=e(this.reload,this),this.onStart=e(this.onStart,this),this.error=e(this.error,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["agents/change_type"],i.prototype.className="box-c-update-agent-type",i.prototype.events={"click :submit":"update"},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{agent:this.model})},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),this.updateView(),Groove.UI.dropdowns(),this},i.prototype.updateView=function(){return this.$("select").val(this.model.get("agent_type")),this.$("[name=archived]").prop("checked",this.model.isArchived())},i.prototype.update=function(){var e;return e={archived:this.$("[name=archived]").prop("checked"),agent_type:this.$("select").val()},this.model.save("json",e,{wait:!0,success:this.reload,error:this.error}),!1},i.prototype.error=function(e,t){var n;return n=$.parseJSON(t.responseText).base,GrooveClient.trigger("flashMessage",{type:"alert",body:n})},i.prototype.CUSTOM_FANCYBOX_CLASS="agent-upgrade",i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:380})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.reload=function(){return this.model.id===GrooveClient.data.currentUser.id?GrooveClient.trigger("reload"):(this.close(),GrooveClient.trigger("flashMessage",{type:"notice",body:"Agent successfully updated"}),GrooveClient.data.agents.trigger("change"),GrooveClient.navigate(GrooveClient.path("billing"),{force:!0}))},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.InviteAgent=function(n){function i(){return this.enableButton=e(this.enableButton,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["agents/invite"],i.prototype.CUSTOM_FANCYBOX_CLASS="new-agent",i.prototype.events={"submit #agent_invite_form":"trackInvite","submit #agent_invite_form":"disableButton"},i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:418})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.render=function(){return this.renderTemplate({view:this,user:this.model}),this},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns(),this},i.prototype.trackInvite=function(){return this.track("invited_agent",{has_invited_agent:1})},i.prototype.disableButton=function(){return this.$("input.done").attr("disabled",!0),setTimeout(this.enableButton,500)},i.prototype.enableButton=function(){return this.$("input.done").attr("disabled",!1)},i}(GrooveClient.Views.FancyboxView),GrooveClient.Views.InviteAgent.invite=function(){var e;return e=new GrooveClient.Views.InviteAgent,e.appear(),!1}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MainView=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.on("swap",Groove.UI.keyboardShortcuts)}return e(n,t),n.prototype.renderTemplate=function(){return this.$el.addClass("box-b-main"),this.$el.html('<div class="box-b-wrap center-panel">'),this.$el.find(".box-b-wrap").html(this.template.apply(this,arguments)),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsAndGroups=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/agents_and_groups"],n.prototype.events={"click .invite-new-agent":GrooveClient.Views.InviteAgent.invite},n.prototype.initialize=function(){return this.agents=GrooveClient.data.agents,this.groups=GrooveClient.data.groups,this.listenTo(this.agents,"add remove reset",this.render),this.listenTo(this.groups,"add remove reset",this.render)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderGridItems(),this.setupFancybox(),this.trackVisit(),this},n.prototype.renderGridItems=function(){var e;return e=GrooveClient.history.fragment,e.match(/^contacts\/agents$/)?(this.renderAgentGridItems(),this.$(".grid.agents.non-archived").show()):e.match(/^contacts\/agents\/archived$/)?(this.renderAgentGridItems(),this.$(".grid.agents.archived").show()):e.match(/^contacts\/groups$/)?(this.renderGroupGridItems(),this.$(".grid.groups").show()):void 0},n.prototype.renderAgentGridItems=function(){var e,t,n,i,o;for(i=this.agents.models,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.appendAgentGridItem(e));return o},n.prototype.renderGroupGridItems=function(){var e,t,n,i,o;for(i=this.groups.models,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.appendGroupGridItem(e));return o},n.prototype.renderAgents=function(){var e;return e=new GrooveClient.Views.AgentsList({collection:this.agents.models})},n.prototype.appendAgentGridItem=function(e){var t,n;return t=new GrooveClient.Views.AgentGridItem({model:e}),n=e.isArchived()?"archived":"unarchived",this.appendChildTo(t,".agents .items."+n)},n.prototype.appendGroupGridItem=function(e){var t;return t=new GrooveClient.Views.GroupGridItem({model:e}),this.appendChildTo(t,".groups .items")},n.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},n.prototype.trackVisit=function(){return this.track("Viewed_Agents")},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/agents_list"],n.prototype.initialize=function(e){var t;return null==e&&(e={}),this.archived=e.archived||!1,this.invited=e.invited,this.agents=this.invited?GrooveClient.data.invitedAgents:(t=GrooveClient.data.agents.where({archived:this.archived}),new GrooveClient.Collections.Users(t)),this.listenTo(this.agents,"change add remove reset",this.render)},n.prototype.render=function(e){return null==e&&(e={}),this.renderTemplate({agentCount:this.agents.length,archived:this.archived,invited:this.invited}),this.renderAgentList(),this.addStyling(),this.makeHeadersSortable(),this.trackVisit(),this},n.prototype.renderAgentList=function(){var e,t,n,i;for(i=this.agents.models,t=0,n=i.length;n>t;t++)e=i[t],this.appendAgent(e);return this},n.prototype.appendAgent=function(e,t){var n,i;return n=this.$("#agents tbody"),i=new GrooveClient.Views.AgentListItem({model:e}),n.append(i.render().$el)},n.prototype.trackVisit=function(){return this.track("viewed_agents_list",{has_viewed_agents:1})},n.prototype.addStyling=function(){var e;return e=this.$("#agents tbody tr"),e.filter(":even").addClass("even"),e.filter(":odd").addClass("odd")},n.prototype.makeHeadersSortable=function(){return Groove.Util.stupidTable(this.$("#agents"))},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BaseLayout=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["layouts/base"],n.prototype.className="box-a-wrap",n.prototype.layoutId="base",n.prototype.initialize=function(e){return _.extend(this,e)},n.prototype.render=function(){return n.__super__.render.call(this),this.addLayoutClass(),null!=this.mainView&&this.replaceWithChild(this.mainView,".box-b-main"),this},n.prototype.addLayoutClass=function(){return Groove.UI.clearLayoutClasses().addClass("layout-"+this.layoutId)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.LeftSidebarLayout=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["layouts/left_sidebar"],n.prototype.layoutId="left-sidebar",n.prototype.render=function(){return n.__super__.render.call(this),null!=this.leftSidebar&&this.replaceWithChild(this.leftSidebar,".box-b-sidebar-left"),this},n}(GrooveClient.Views.BaseLayout)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsLeftSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-left",n.prototype.events={"click .nav-i-add.agent a":GrooveClient.Views.InviteAgent.invite},n.prototype.initialize=function(){return this.agents=GrooveClient.data.agents,this.invitedAgents=GrooveClient.data.invitedAgents,this.groups=GrooveClient.data.groups,this.people=new GrooveClient.Collections.People,this.companies=new GrooveClient.Collections.Companies,this.listenTo(this.agents,"change add remove reset",this.render),this.listenTo(this.invitedAgents,"change add remove reset",this.render),this.listenTo(this.groups,"add remove reset",this.render)},n.prototype.render=function(){return this.$el.html(""),this.appendChild(new GrooveClient.Views.ContactsSidebarMenu),this.highlightSelected(),this.$("a.fancybox").fancybox(Groove.Fancybox.params.one),this},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{agents:this.agents,invitedAgents:this.invitedAgents,groups:this.groups}),this},n.prototype.highlightSelected=function(){var e,t;return t=GrooveClient.history.fragment,t.match(/customers/)?e=this.$("li.contacts-customers"):t.match(/companies/)?e=this.$("li.contacts-companies"):t.match(/^agents$/)||t.match(/^contacts$/)||t.match(/^contacts\/agents$/)||t.match(/^contacts\/agents\/(\d+)/)?e=this.$("li.nav-i-contact-unarchived-agents"):t.match(/agents\/invited/)?e=this.$("li.nav-i-contact-invited-agents"):t.match(/agents\/archived/)?e=this.$("li.nav-i-contact-archived-agents"):t.match(/^groups$/)&&(e=this.$("li.nav-i-contact-groups")),null!=e?(e.addClass("selected simple-navigation-active-leaf"),e.find("> a").addClass("selected"),e.parent().closest("li").addClass("selected")):void 0},n.prototype.showPeopleCount=function(){return this.people.count({success:function(e){return function(t){var n;return n=t.count,n>0?e.$("li.contacts-customers.folder span").prepend("<span class='num'>"+n+"</span>"):void 0}}(this)})},n.prototype.showCompaniesCount=function(){return this.companies.count({success:function(e){return function(t){var n;return n=t.count,n>0?e.$("li.contacts-companies.folder span").prepend("<span class='num'>"+n+"</span>"):void 0}}(this)})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsListDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.AgentsList,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.id="contacts",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ArchivedAgents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/archived"],n.prototype.className="box-b-billing box-b-agents",n.prototype.events={"click ul li[data-agent-id]":"showChangeTypeModal"},n.prototype.initialize=function(){return this.account=GrooveClient.data.account,this.agents=GrooveClient.data.agents,this.archived=this.agents.where({archived:!0})},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{archived:this.archived})},n.prototype.showChangeTypeModal=function(e){var t,n,i;return n=$(e.currentTarget).data("agent-id"),this.account.isHelpdesk()&&n&&(t=this.agents.get(n))&&(i=new GrooveClient.Views.AgentType({model:t}),i.appear()),!1},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingAccountCancel=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="li",n.prototype.className="cancel-account",n.prototype.template=JST["billing/account_cancel"],n.prototype.events={"click #account-cancel":"closeAccount"},n.prototype.initialize=function(){return this.account=GrooveClient.data.account},n.prototype.closeAccount=function(){return confirm("Are you sure you want to cancel your account? You won't be able to access it anymore.")?(this.account.close(),!1):!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingAgentsBlock=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="billing-block",n.prototype.template=JST["billing/agents_block"],n.prototype.initialize=function(e){var t,n,i,o,r,s,a;for(this.type=e.agentType,this.account=GrooveClient.data.account,this.balance=this.account.get("balance_info"),this.agentsPricingInfo=this.balance.per_agent_prices,n=[],a=e.agentIds,i=0,r=a.length;r>i;i++)o=a[i],t=GrooveClient.data.agents.get(o),(!t.isArchived()||this.agentsPricingInfo[o].price>0)&&n.push(t);return this.agents=new GrooveClient.Collections.Users(n),s=GrooveClient.Models.Account.pricing[this.type],this.priceFormatted=GrooveClient.Helpers.price(s)},n.prototype.agentPricingTag=function(e){var t,n;return t=null!=(n=this.agentsPricingInfo[e.id])?n.price:void 0,t=GrooveClient.Helpers.price(t),$("<div>",{text:t}).addClass("amount").outerHTML()},n.prototype.render=function(){return this.agents.length?n.__super__.render.apply(this,arguments):this.$el.hide()},n.prototype.renderTemplate=function(){var e,t,i,o;return e=this.account.isHelpdesk(),i=this.balance.subtotals[this.type],t=this.priceFormatted+"/month",o=this.agents.length+" User",this.agents.length>1&&(o+="s"),n.__super__.renderTemplate.call(this,{agents:this.agents,type:this.type,ownerEditable:e,subtotal:i,title:o,priceTag:t,view:this})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingCycle=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="billing-cycle billing-block",n.prototype.template=JST["billing/cycle"],n.prototype.events={'change input[name="billing_cycle"]':"changeBillingCycle"},n.prototype.initialize=function(){return this.account=GrooveClient.data.account},n.prototype.render=function(){var e;return n.__super__.render.apply(this,arguments),e=this.account.get("billing_cycle"),this.radios().filter("[value="+e+"]").prop("checked",!0),this},n.prototype.changeBillingCycle=function(e){var t,n;return t=this.currentCycle(),GrooveClient.trigger("billing:cycle-selected",t),n=$(e.target),$.getJSON("/api/account/total_amount?billing_cycle="+t).error(function(){return GrooveClient.trigger("flashMessage",{type:"alert",body:json.error})}).success(function(e){return function(e){var t;return $(".billing-total .amount").text(GrooveClient.Helpers.price(e.total_amount)),t=$(".billing-total .discount"),e.fixed_price||!e.with_discount?t.text(""):t.text(e.with_discount)}}(this)),!1},n.prototype.radios=function(){return this.$('input[name="billing_cycle"]')},n.prototype.currentCycle=function(){return this.radios().filter(":checked").val()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingChangeAccountOwner=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="li",n.prototype.className="change-owner",n.prototype.template=JST["billing/change_account_owner"],n.prototype.events={"submit form":"changeOwner"},n.prototype.initialize=function(){return this.agents=GrooveClient.data.agents},n.prototype.changeOwner=function(e){var t,n;return n=this.$("select").val(),t=this.agents.get(n),t&&confirm("Are you sure you want to make "+t.get("name")+" the owner?")&&t.save({json:{role:"owner"}},{wait:!0,success:function(){return GrooveClient.trigger("reload")}}),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CreditCard=function(n){function i(){return this.cardSaved=e(this.cardSaved,this),this.cardSaveFailed=e(this.cardSaveFailed,this),this.updateCardAndCharge=e(this.updateCardAndCharge,this),this.handleStripeResponse=e(this.handleStripeResponse,this),this.formSubmit=e(this.formSubmit,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="box-c-payment-info box-c-sidebar-item",i.prototype.template=JST["billing/credit_card"],i.prototype.events={"submit form.credit_card":"formSubmit"},i.prototype.initialize=function(){return this.account=this.model,this.cycle=GrooveClient.data.account.get("billing_cycle"),this.listenTo(GrooveClient,"billing:cycle-selected",this.cycleSelected)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderMonthOptions(),this.renderYearOptions(),this.renderLast4(),this.renderErrorForm(),this},i.prototype.cycleSelected=function(e){return this.cycle=e},i.prototype.renderErrorForm=function(){var e;return e=this.$(".box-c-card-edit").get(0),this.errorForm=new GrooveClient.Views.CreditCardErrorForm({el:e})},i.prototype.formSubmit=function(){return this.$(":submit").prop("disabled",!0),this.processCard(),!1},i.prototype.enableSubmit=function(){return this.$(":submit").prop("disabled",!1)},i.prototype.processCard=function(){var e,t;return e=new GrooveClient.Support.StripeCreditCard($("#card_number").val(),$("#card_code").val(),$("#card_month").val(),$("#card_year").val()),(t=e.validate())?(this.errorForm.showErrors({errors:t}),this.enableSubmit()):e.process(this.handleStripeResponse)},i.prototype.handleStripeResponse=function(e,t){var n;return 200===e?this.updateCardAndCharge(t):t.error?(n={},n[t.error.param]=[t.error.message],this.errorForm.showErrors({errors:n}),this.enableSubmit()):void 0},i.prototype.plan=function(){return"annual"===this.cycle?"groove-plus-annual2":"groove-plus"},i.prototype.updateCardAndCharge=function(e){var t;return $.ajax({type:"PUT",url:"/api/account/billing",dataType:"json",contentType:"application/json",data:JSON.stringify({stripe_token:e.id,plan_id:this.plan(),last4:null!=(t=e.card)?t.last4:void 0}),success:this.cardSaved,error:this.cardSaveFailed}),this.account.skipEvents=!0,!1},i.prototype.cardSaveFailed=function(e){return this.account.set("stripe_last4",e.stripe_last4),this.account.unset("stripe_card_token"),this.errorForm.showErrors(e.responseText),this.enableSubmit()},i.prototype.showNotice=function(e){return GrooveClient.trigger("flashMessage",{type:"notice",body:e})},i.prototype.cardSaved=function(e){return this.account.isInactive()&&(this.showNotice("Your card has been successfully charged and this account is active now."),GrooveClient.trigger("reload")),this.account.isTrial()?(this.showNotice("Your card has been successfully charged and updated."),GrooveClient.trigger("reload")):(this.account.set("stripe_last4",e.stripe_last4),this.renderLast4(),this.showNotice("Credit card information has been updated."),$(".box-c-toolbar.box-c-toolbar-trial").hide()),this.account.unset("stripe_card_token"),this.render(),Groove.UI.dropdowns()},i.prototype.renderLast4=function(){var e;return(e=this.account.get("stripe_last4"))?this.$("#card_number").val("XXXX XXXX XXXX "+e):void 0},i.prototype.renderMonthOptions=function(){var e,t,n,i;for(i=this.$("#card_month"),i.append($("<option>",{text:"Month",value:""})),n=[],t=e=1;12>=e;t=++e)n.push(i.append($("<option>",{text:t,value:t})));return n},i.prototype.renderYearOptions=function(){var e,t,n,i,o,r,s;for(e=(new Date).getFullYear(),r=this.$("#card_year"),r.append($("<option>",{text:"Year",value:""})),o=[],s=t=n=e,i=e+15;i>=n?i>=t:t>=i;s=i>=n?++t:--t)o.push(r.append($("<option>",{text:s,value:s})));return o},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ErrorForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.clearErrors=function(){return this.$(".error").removeClass("error"),this.$(".errors, .inline-errors").remove()},n.prototype.showErrors=function(e){var t,n,i,o;this.clearErrors(),e=_.isString(e)?$.parseJSON(e):e,null!=e.errors&&(e=e.errors);for(t in e)n=e[t],i=$("<p>",{"class":"inline-errors",text:n.join(" and ")}),i.insertAfter(this.$("[name='"+_.last(t.split("."))+"']")).closest("li").addClass("error");return null!=e.base?(o=$("<ul>").addClass("errors"),_.map(e.base,function(e){return o.append($("<li>",{text:e}))}),this.$el.prepend(o)):void 0},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CreditCardErrorForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.showErrors=function(e){var t,n,i,o;this.clearErrors(),e=_.isString(e)?$.parseJSON(e):e,null!=e.errors&&(e=e.errors),o=[];for(t in e)n=e[t],i=$("<p>",{"class":"errors",text:n}),this.$("[data-name='"+t+"']").closest("li").addClass("error"),o.push(this.$el.find("form").append(i));return o},n}(GrooveClient.Views.ErrorForm)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.EditBillingAddressModal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["billing/edit_billing_address"],n.prototype.events={"submit form":"saveChanges"},n.prototype.initialize=function(){return this.account=GrooveClient.data.account,this.address=this.account.get("billing_address")},n.prototype.renderTemplate=function(){var e,t,i;n.__super__.renderTemplate.apply(this,arguments),t=this.address;for(e in t)i=t[e],e=e.replace("_line",""),this.$("input[name=billing_"+e+"]").val(i);return this},n.prototype.saveChanges=function(e){var t,n;return n={},t=$(e.target),t.find("input[name]").each(function(e,t){var i,o;return t=$(t),i=t.attr("name"),o=t.val(),n[i]=o}),$.ajax({url:"/api/account",type:"put",dataType:"json",data:{account:n},success:function(e){return function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"Billing Address successfully updated"}),e.account.fetch()}}(this)}),!1},n}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.EditBillingAddressLink=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-c-sidebar-item",n.prototype.template=JST["billing/edit_billing_address_link"],n.prototype.events={"click a":"showEditModal"},n.prototype.showEditModal=function(){var e;return e=new GrooveClient.Views.EditBillingAddressModal,e.appear(),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingSummary=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["billing/index"],n.prototype.className="box-b-billing",n.prototype.events={"click :submit":"saveChanges"},n.prototype.initialize=function(){return this.account=GrooveClient.data.account},n.prototype.renderTemplate=function(){var e;return e=moment(1e3*GrooveClient.bootstrapped),n.__super__.renderTemplate.call(this,{balance:this.balance,currentDate:e})},n.prototype.render=function(){var e,t,i,o,r,s,a;for(this.balance=this.account.get("balance_info"),t=this.balance.agent_ids_by_types,n.__super__.render.apply(this,arguments),this.billingCycleView=new GrooveClient.Views.BillingCycle,
this.prependChildTo(this.billingCycleView,".box-c-billing-index"),s=["helpdesk"],o=0,r=s.length;r>o;o++)i=s[o],e=t[i],(null!=e?e.length:void 0)&&(a=new GrooveClient.Views.BillingAgentsBlock({agentType:i,agentIds:e}),this.prependChildTo(a,".box-c-billing-index"));return this},n.prototype.saveChanges=function(e){var t;return t=$(e.target),t.prop("disabled",!0),this.billingCycleView&&this.account.save({billing_cycle:this.billingCycleView.currentCycle()},{wait:!0,complete:function(){return t.prop("disabled",!1)},success:function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"Billing changes were saved"})}}),!1},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingLeftSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-left",n.prototype.render=function(){return this.appendChild(new GrooveClient.Views.BillingSidebarMenu),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.RightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-right",n.prototype.template=JST["shared/sidebars/right_sidebar"],n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$(".isolated-scroll").isolatedScroll()},n.prototype.appendView=function(e){return this.appendChildTo(e,".scroll-pane .box-b-wrap")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingRightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.account=GrooveClient.data.account},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$el.addClass("box-c-billing"),this.appendView(new GrooveClient.Views.CreditCard({model:this.account})),this.appendView(new GrooveClient.Views.EditBillingAddressLink),_.defer(function(e){return function(){return $.getScript("https://js.stripe.com/v1/").done(function(){var e;return e=$("meta[name=stripe-key]")[0].content,Stripe.setPublishableKey(e)})}}(this)),this},n}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TwoSidebarsLayout=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["layouts/two_sidebars"],n.prototype.layoutId="two-sidebars",n.prototype.render=function(){return n.__super__.render.call(this),null!=this.leftSidebar&&this.replaceWithChild(this.leftSidebar,".box-b-sidebar-left"),null!=this.rightSidebar&&this.replaceWithChild(this.rightSidebar,".box-b-sidebar-right"),this},n}(GrooveClient.Views.BaseLayout)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.BillingSummary,n.prototype.leftSidebar=GrooveClient.Views.BillingLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.BillingRightSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingInvoiceSummary=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["billing/invoice"],n.prototype.events={"click .billing-print-invoice":"print","click .nav-back-button":"back"},n.prototype.initialize=function(e){var t;return t=e.invoiceId,this.invoice=new GrooveClient.Models.Invoice({id:t})},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{invoice:this.invoice})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.invoice.fetch({success:function(e){return function(){return e.renderInvoiceData()}}(this)}),this},n.prototype.renderInvoiceData=function(){var e,t,n,i;return t=this.invoice.get("billing_address"),n=t?t.split("\n"):(e=GrooveClient.data.account,_.values(e.get("billing_address"))),i=JST["billing/invoice_data"],this.$(".box-c-billing-invoice").html(i({invoice:this.invoice,addressFields:n}))},n.prototype.print=function(){return window.print()},n.prototype.back=function(e){return window.history.back(),e.preventDefault()},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingInvoicesSummary=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["billing/invoices"],n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderInvoices(),this},n.prototype.renderInvoices=function(){var e,t,n;return t=this.$("#invoices-list tbody").empty(),n=JST["billing/invoice_list_item"],e=new GrooveClient.Collections.Invoices,e.fetch({success:function(){var i,o,r,s,a;for(s=e.models,a=[],i=0,r=s.length;r>i;i++)o=s[i],a.push(t.append(n({invoice:o})));return a}})},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingInvoices=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.BillingInvoicesSummary,n.prototype.leftSidebar=GrooveClient.Views.BillingLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.BillingRightSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ManageAccount=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="manage-account",n.prototype.template=JST["billing/manage_account"],n.prototype.render=function(){return n.__super__.render.apply(this,arguments),GrooveClient.data.agents.where({archived:!1}).length>1&&this.appendChildTo(new GrooveClient.Views.BillingChangeAccountOwner,"ul.sections"),this.appendChildTo(new GrooveClient.Views.BillingAccountCancel,"ul.sections"),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ManageAccountFancybox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="manage-account",n.prototype.template=JST["billing/manage_account"],n.prototype.contents=GrooveClient.Views.ManageAccount,n.prototype.appear=function(){return n.__super__.appear.apply(this,arguments),Groove.UI.dropdowns(),this},n}(GrooveClient.Views.FancyboxView),GrooveClient.Views.ManageAccountFancybox.manage=function(){var e;return e=new GrooveClient.Views.ManageAccountFancybox,e.appear(),!1}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ShowInvoice=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.BillingInvoiceSummary,n.prototype.leftSidebar=GrooveClient.Views.BillingLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.BillingRightSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.BillingSidebarMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="nav-sec nav-i-billing",n.prototype.template=JST["billing/sidebar_menu"],n.prototype.events={"click .invite-new-agent":GrooveClient.Views.InviteAgent.invite,"click .manage-account":GrooveClient.Views.ManageAccountFancybox.manage},n.prototype.initialize=function(){var e;return e=GrooveClient.data.agents,this.archived=e.where({archived:!0})},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{archived:!!this.archived.length})},n.prototype.onSwap=function(){var e,t;return t=GrooveClient.history.fragment,e=function(){switch(t){case"billing":return this.$("li.billing");case"billing/archived-agents":return this.$("li.archived");default:return t.match(/^billing\/invoices(\/\d+)?/)?this.$("li.invoices"):this.$("li:first")}}.call(this),this.$(".simple-navigation-active-leaf").removeClass("simple-navigation-active-leaf"),this.$(".selected").removeClass("selected"),e.addClass("simple-navigation-active-leaf selected"),e.find("> a").addClass("selected")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ArchivedAgentsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.ArchivedAgents,n.prototype.leftSidebar=GrooveClient.Views.BillingLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.BillingRightSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GroupGridItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="group item",n.prototype.template=JST["agents/group_grid_item"],n.prototype.render=function(){return this.renderTemplate({view:this,group:this.model}),this.renderAgents(),this},n.prototype.renderAgents=function(){var e,t,n,i,o,r,s,a;for(s=this.model.get("user_ids"),a=[],i=0,r=s.length;r>i;i++)n=s[i],e=GrooveClient.data.agents.get(n),t=new GrooveClient.Views.User({model:e}),o=$(t.avatarImage({size:85,type:"original"})),a.push(this.$(".grid-image").append(o));return a},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.AgentsAndGroups,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TimelineEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["timeline_events/timeline_event"],n.prototype.tagName="li",n.prototype.initialize=function(e){return this.agentLink=e.agentLink},n.prototype.render=function(){return null!=this.model.actor&&(this.actorView=new GrooveClient.Views.User({model:this.model.actor})),this.renderTemplate(),this.renderEventType(),this},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,timelineEvent:this.model,actorView:this.actorView}),this},n.prototype.renderEventType=function(){var e,t;return e=this.model.get("event_type"),t=JST["timeline_events/event_types/"+e],null!=t?this.$(".activity-description").html(t({view:this,timelineEvent:this.model})):this.$el.hide()},n.prototype.priorityToStar=function(e){return"number"==typeof e?e===GrooveClient.Models.Ticket.PRIORITY_ON?"Starred":"Unstarred":e===GrooveClient.Models.Ticket.PRIORITY_ON_TEXT?"Starred":"Unstarred"},n.prototype.timelineUserLink=function(e,t){var n,i,o;return null!=e?(o=e.isEnduser()?GrooveClient.path("contacts/people/"+e.id):GrooveClient.path("agents/"+e.id+"/tickets"),n=t?"You":"you",i=e.id===GrooveClient.data.currentUser.id?n:e.name||e.get("name"),$("<a>",{href:o,text:i}).outerHTML()):"User deleted"},n.prototype.ticketLink=function(){var e;return e=this.agentLink&&null!=this.model.actor&&this.model.subject instanceof GrooveClient.Models.Ticket?GrooveClient.path("agents/"+this.model.actor.id+"/tickets/"+this.model.subject.id):this.model.subject.path(),$("<a>",{href:e,text:"#"+this.model.subject.get("account_ticket_number")}).outerHTML()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AgentInspector=function(n){function i(){return this.appendTimelineEvent=e(this.appendTimelineEvent,this),this.renderTimelineEvents=e(this.renderTimelineEvents,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["agents/inspector"],i.prototype.events={"click #menu-agent-history a":"historyTypeChanged","change .agent-settings :input":"updateUserSettings","click .nav-back-button":"goHistoryBack"},i.prototype.initialize=function(){return this.listenTo(this.model,"change:archived",this.updateViews),this.agentView=new GrooveClient.Views.User({model:this.model})},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{account:GrooveClient.data.account,agent:this.model,agentView:this.agentView})},i.prototype.render=function(){var e;return e=GrooveClient.data.account,e.get("prefers_customer_ratings_installed")&&void 0===this.model.get("ratings")?this.model.fetchRatings().then(this.render):(this.renderTemplate(),this.renderTimelineEvents(),this.historyTypeChanged(),this.updateViews(),this.setupFancybox(),this)},i.prototype.renderTimelineEvents=function(){var e,t;return e=this.model.timelineEvents,t=this.$(".agent-timeline-events"),e&&e.length?(e.each(this.appendTimelineEvent),t.show()):t.hide()},i.prototype.renderHistory=function(){var e,t,n,i,o,r;return null!=(n=this.history)&&n.leave(),o=this.$("#menu-agent-history"),o.find("li").length<2&&o.hide(),i=this.selectedHistoryType,r=function(){switch(this.selectedHistoryType){case"tickets":return t=this.model.profileTickets,GrooveClient.Views.AgentTickets;case"ratings":return t=this.model.ratedTickets,GrooveClient.Views.AgentRatings}}.call(this),e="selected simple-navigation-active-leaf",o.find(".selected").removeClass(e),o.find(".nav-i-agent-"+this.selectedHistoryType).addClass(e),t.isEmpty()&&t.fetch({reset:!0}),this.history=new r({collection:t,model:this.model}),this.renderChildInto(this.history,".agent-history-content")},i.prototype.updateViews=function(){return this.$("[name=role]").prop("checked",this.model.isAdmin()),this.$("[name=include_in_analytics]").prop("checked",this.model.get("include_in_analytics")),this.$("[name=archived]").prop("checked",this.model.isArchived()),this.$("[name=agent_type]").val(this.model.get("agent_type"))},i.prototype.appendTimelineEvent=function(e){return this.appendChildTo(new GrooveClient.Views.TimelineEvent({model:e,agentLink:!0}),".timeline-events")},i.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},i.prototype.historyTypeChanged=function(e){var t,n;return n=null!=e?$(e.target):this.$("a[data-history-type]:first"),t=n.data("history-type"),t!==this.selectedHistoryType&&(this.selectedHistoryType=t,this.renderHistory()),!1},i.prototype.updateUserSettings=function(e){var t,n,i,o;return t=$(e.target),n=t.attr("name"),i={archived:!1},o="role"===n?t.is(":checked")?"admin":"agent":t.is(":checkbox")?t.is(":checked"):"agent_type"===n?t.val():void 0,i[n]=o,this.model.save("json",i,{global:!1})},i.prototype.goHistoryBack=function(){return history.back(),!1},i}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AgentInviteConfirmation=function(n){function i(){return this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="agent-invitation-confirm",i.prototype.events={"click .add-another-agent":GrooveClient.Views.InviteAgent.invite},i.prototype.template=JST["agents/invite_confirmation"],i.prototype.initialize=function(e){return null==e&&(e={}),this.name=e.name,this.email=e.email},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{name:this.name,email:this.email})},i.prototype.CUSTOM_FANCYBOX_CLASS="invitation-confirm",i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:418})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i}(GrooveClient.Views.FancyboxView),GrooveClient.Views.AgentInviteConfirmation.confirm=function(e,t){var n;return n=new GrooveClient.Views.AgentInviteConfirmation({name:e,email:t}),n.appear()}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MenuAgent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["agents/menu_agent"],n.prototype.tagName="li",n.prototype.className="nav-i-agent",n.prototype.attributes=function(){return{"data-agent-id":this.model.id}},n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{agent:this.model})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.NoSidebarsLayout=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["layouts/base"],n.prototype.className="box-a-wrap",n.prototype.layoutId="no-sidebars",n}(GrooveClient.Views.BaseLayout)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsListMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/sidebars/agent_menu"],n.prototype.events={"click .nav-i-add.agent a":GrooveClient.Views.InviteAgent.invite},n.prototype.className="nav-sec",n.prototype.initialize=function(){return this.agents=GrooveClient.data.agents,this.groups=GrooveClient.data.groups,this.listenTo(this.agents,"change add remove reset",this.render),this.listenTo(this.groups,"add remove reset",this.render)},n.prototype.attributes=function(){return{id:"menu"}},n.prototype.render=function(){var e,t;return n.__super__.render.apply(this,arguments),e=this.agents.where({archived:!0}),t=this.agents.where({archived:!1}),this.renderAgents(e,"archived"),this.renderAgents(t,"unarchived"),this.$(".archived.nav-i-agents ul").is(":empty")&&this.$(".archived.nav-i-agents").hide(),this.renderGroups(),this.highlightSelected(),this.$("a.fancybox").fancybox(Groove.Fancybox.params.one),this},n.prototype.renderAgents=function(e,t){var n,i,o,r;for(r=[],i=0,o=e.length;o>i;i++)n=e[i],r.push(this.appendAgent(n,t));return r},n.prototype.renderGroups=function(){return this.groups.each(this.appendGroup,this)},n.prototype.highlightSelected=function(){var e,t,n;return n=GrooveClient.history.fragment,n.match(/^agents$/)&&(e=this.$("li#nav-i-agents")),(t=n.match(/^agents\/(\d+)/))&&(e=this.$("li[data-agent-id="+t[1]+"]")),(t=n.match(/^groups\/(\d+)/))&&(e=this.$("li[data-group-id="+t[1]+"]")),null!=e?(e.addClass("selected simple-navigation-active-leaf"),e.find("> a").addClass("selected"),e.parent().closest("li").addClass("selected")):void 0},n.prototype.appendAgent=function(e,t){var n;return n=new GrooveClient.Views.MenuAgent({model:e}),this.appendChildTo(n,".nav-i-agents."+t+" ul")},n.prototype.appendGroup=function(e){var t;return t=new GrooveClient.Views.MenuGroup({model:e}),this.appendChildTo(t,"#nav-i-groups ul")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentsLeftSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-left page-agents",n.prototype.render=function(){return GrooveClient.data.currentUser.isAdmin()&&this.appendChild(new GrooveClient.Views.AgentsListMenu),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AgentShow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.mainView=GrooveClient.Views.AgentInspector,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.showLeftSidebar=function(){return null==this.user&&(this.user=GrooveClient.data.currentUser),this.user.isAdmin()},n.prototype.render=function(){return this.layout=this.showLeftSidebar()?GrooveClient.Views.LeftSidebarLayout:GrooveClient.Views.NoSidebarsLayout,n.__super__.render.apply(this,arguments)},n.prototype.layoutComponents=function(e){return null==e&&(e={}),e=_.extend({leftSidebar:this.showLeftSidebar()},e),n.__super__.layoutComponents.call(this,e)},n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppCredentialsForm=function(n){function i(){return this.appInstallationSaved=e(this.appInstallationSaved,this),this.appInstallationSaveFailed=e(this.appInstallationSaveFailed,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=function(){return JST["apps/forms/"+this.app_type+"_credentials"]},i.prototype.className="box-b-new-app-installation",i.prototype.initialize=function(e){return this.slug=e.slug,this.app_type=e.app_type},i.prototype.events={"submit form.app-installation":"saveInstallation"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.form=this.$("form.app-installation"),this.errorForm=new GrooveClient.Views.ErrorForm({el:this.form}),this.$("#app_installation_site").focus()},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{view:this,app:this.model})},i.prototype.saveInstallation=function(e){return e.preventDefault(),$.ajax({type:"POST",url:"/api/apps/"+this.slug+"/installations",data:this.form.serialize(),success:this.appInstallationSaved,error:this.appInstallationSaveFailed})},i.prototype.appInstallationSaveFailed=function(e){var t;return t=$.parseJSON(e.responseText),t=this.wrapCredentials(t),this.errorForm.showErrors(t)},i.prototype.appInstallationSaved=function(e){return this.model.set({credentials:e.credentials}),$.fancybox.close(),this.updateToInstalled(),this.trackVisit(),GrooveClient.trigger("flashMessage",{type:"notice",body:this.model.get("name")+" app was successfully installed."})},i.prototype.wrapCredentials=function(e){return null!=e?(null!=e.api_token&&(e["credentials[api_token]"]=e.api_token),null!=e.site&&(e["credentials[site]"]=e.site),e):void 0},i.prototype.updateToInstalled=function(){return $(".app-details").removeClass("not-installed").addClass("installed")},i.prototype.trackVisit=function(){var e,t;return e=this.model.get("name"),t={has_installed_app:1,has_installed_third_party_app:1},t["has_installed_"+e]=1,this.track("installed_app",t),this.track("installed_app:third_party"),this.track("installed_app:"+e)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppCredentialsFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="fancybox-tour fancybox-dark-header",i.prototype.contents=GrooveClient.Views.AppCredentialsForm,i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:800})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppCredentialsUpdateForm=function(n){function i(){return this.appInstallationUpdateFailed=e(this.appInstallationUpdateFailed,this),this.appInstallationUpdated=e(this.appInstallationUpdated,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="box-b-new-app-installation",i.prototype.initialize=function(e){return this.slug=e.slug,this.app_type=e.app_type,this.template=JST["apps/forms/"+this.app_type+"_credentials_update"]},i.prototype.events={"submit form.update-app-installation":"updateInstallation"},i.prototype.render=function(){return this.renderTemplate(),this.form=this.$("form.update-app-installation"),this.errorForm=new GrooveClient.Views.ErrorForm({el:this.form}),this.$("#app_installation_site").focus(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{app:this.model})},i.prototype.updateInstallation=function(e){return e.preventDefault(),$.ajax({type:"PUT",url:"/api/apps/"+this.slug+"/installations/"+this.slug,data:this.form.serialize(),success:this.appInstallationUpdated,error:this.appInstallationUpdateFailed})},i.prototype.appInstallationUpdated=function(e){return this.model.set({credentials:e.credentials}),$.fancybox.close(),GrooveClient.trigger("flashMessage",{type:"notice",body:this.model.get("name")+" credentials were successfully updated."})},i.prototype.appInstallationUpdateFailed=function(e){var t;return t=$.parseJSON(e.responseText),t=this.wrapCredentials(t),this.errorForm.showErrors(t)},i.prototype.wrapCredentials=function(e){return null!=e?(null!=e.api_token&&(e["credentials[api_token]"]=e.api_token),null!=e.site&&(e["credentials[site]"]=e.site),e):void 0},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppDetails=function(n){function i(){return this.destroyFailure=e(this.destroyFailure,this),this.destroySuccess=e(this.destroySuccess,this),this.uninstallApp=e(this.uninstallApp,this),this.showAppCredentialsForm=e(this.showAppCredentialsForm,this),this.createCourousel=e(this.createCourousel,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.events={"click #install-button":"showAppCredentialsForm","click #settings-button":"showAppCredentialsUpdateForm","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious","click a.settings":"showSettings","click a.how-it-works":"showHowItWorks"},i.prototype.initialize=function(){return this.delegateEvents(),this.agent=GrooveClient.data.currentUser},i.prototype.render=function(){return this.renderTemplate(),this.createCourousel(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{app:this.model,agent:this.agent})},i.prototype.createCourousel=function(){return this.$("#samples-carousel .image_list").carouFredSel({align:"center",auto:{play:!1},items:{visible:1,minimum:1,width:960,height:640},prev:{button:"#prev-button"},next:{button:"#next-button"}})},i.prototype.carouselNext=function(){return this.$("#samples-carousel .image_list").trigger("next")},i.prototype.carouselPrevious=function(){return this.$("#samples-carousel .image_list").trigger("prev")},i.prototype.showAppCredentialsForm=function(e){var t;return e.preventDefault(),this.adminUser()?(t=new GrooveClient.Views.AppCredentialsFancybox({model:this.model,slug:this.model.get("slug"),app_type:this.model.get("app_type")}),t.appear(),!1):void 0},i.prototype.showAppCredentialsUpdateForm=function(e){var t;return e.preventDefault(),this.adminUser()?(t=new GrooveClient.Views.AppCredentialsFancybox({model:this.model,slug:this.model.get("slug"),app_type:this.model.get("app_type")}),t.contents=GrooveClient.Views.AppCredentialsUpdateForm,t.appear(),!1):void 0},i.prototype.showNonAdminModal=function(){var e;return e=new GrooveClient.Views.AppNonAdminFancybox({app_name:this.appName()}),e.appear(),!1},i.prototype.appName=function(){var e;return null!=(e=this.model)?e.get("name"):void 0},i.prototype.adminUser=function(){var e;return(e=GrooveClient.data.currentUser.isAdmin())||this.showNonAdminModal(),e},i.prototype.uninstallApp=function(e){return e.preventDefault(),this.adminUser()?$.ajax({type:"POST",url:"/api/apps/"+this.model.get("slug")+"/installations/x",
dataType:"json",data:{_method:"delete"},success:this.destroySuccess,failure:this.destroyFailure}):void 0},i.prototype.destroySuccess=function(){return this._trackUninstalled(function(e){return function(){return e.updateToUninstalled(),GrooveClient.trigger("flashMessage",{type:"notice",body:e.model.get("name")+" app was successfully uninstalled."})}}(this))},i.prototype._trackUninstalled=function(e){var t;return t={app:this.appName(),appVersion:this.model.get("version")||"1.0"},analytics.track("Uninstalled App",t,{},e)},i.prototype.destroyFailure=function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"An unexpected error occured while uninstalling "+this.model.get("name")+". Please try again in a few minutes."})},i.prototype.updateToUninstalled=function(){return $(".app-details").removeClass("installed").addClass("not-installed")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(e){return this.contents=e.contents},i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:800})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AppListItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="app",n.prototype.template=JST["apps/app_list_item"],n.prototype.events={"click a":function(e){return this._trackClickedLink($(e.currentTarget))}},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{app:this.model}),this},n.prototype._trackClickedLink=function(e){var t;return t={app:this.model.get("name"),appVersion:this.model.get("version")},e.hasClass("logo-link")?(t.type="image",t.src=e.find("img").prop("src")):(t.type="text",t.text=e.text()),analytics.track("Clicked App Store Link",t)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AppNonAdminMessage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/non_admin_message"],n.prototype.className="box-b-new-app-installation non-admin-modal",n.prototype.initialize=function(e){var t,n;return null==e&&(e={}),this.owner=GrooveClient.data.account.owner,this.owner_name=(null!=(t=this.owner)?t.get("first_name"):void 0)||"the account owner",this.owner_email=null!=(n=this.owner)?n.get("email"):void 0,this.app_name=e.app_name?"the "+e.app_name+" app":"this application"},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{owner_name:this.owner_name,owner_email:this.owner_email,app_name:this.app_name})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AppNonAdminFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="fancybox-tour fancybox-dark-header",i.prototype.contents=GrooveClient.Views.AppNonAdminMessage,i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:600})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AppsList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/list"],n.prototype.render=function(){return this.renderTemplate(),this.renderAppItems(),this._trackRendered(),this},n.prototype.renderAppItems=function(){var e,t,n,i;for(i=this.collection.models,t=0,n=i.length;n>t;t++)e=i[t],this.appendItem(e);return this},n.prototype.appendItem=function(e,t){var n,i;return n=this.$el.find("#third-party-integrations"),i=new GrooveClient.Views.AppListItem({model:e}),n.append(i.render().$el)},n.prototype._trackRendered=function(){return analytics.page("App Store Homepage",{category:"App Store"})},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AppsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.NoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.AppsList,n.prototype.id="app-store",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AsknicelyAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/asknicely_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.EmailMarketingAppDetails=function(n){function i(){return this.removeMessageListener=e(this.removeMessageListener,this),this.initialize=e(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="app-store",i.prototype.initialize=function(){return this.on("leave",this.removeMessageListener,this),this.loginWindow=null,this.receiveMessage=function(e){return function(t){var n;return n=JSON.parse(t.data),e.loginWindow&&n&&n.access_token?(e.createIntegration(n).done(function(){return GrooveClient.data.emailMarketing.integrations.reset()}),e.loginWindow.close(),e.loginWindow=null):void 0}}(this),window.receiveMessage=this.receiveMessage,window.addEventListener("message",this.receiveMessage,!1),i.__super__.initialize.call(this)},i.prototype.removeMessageListener=function(){return window.removeEventListener("message",this.receiveMessage,!1),window.receiveMessage=null},i.prototype.events={"click #install-button":function(e){var t,n,i,o,r;return e.preventDefault(),this.adminUser()?(n=1024,t=500,r=Math.floor(.8*window.outerWidth),i=Math.floor(.5*window.outerHeight),n>r&&(r=n),t>i&&(i=t),o={width:r,height:i,top:window.screenY+(window.outerHeight-i)/8,left:window.screenX+(window.outerWidth-r)/2,toolbar:!1,scrollbars:!0,status:!0,resizable:!0,location:!0,menuBar:!1},this.openAuthWindow(o)):void 0},"click #uninstall-button":function(e){return e.preventDefault(),this.adminUser()?this.uninstallApp():void 0},"click #next-button":"carouselNext","click #prev-button":"carouselPrevious","click #settings-button":function(e){return GrooveClient.navigate($(e.target).attr("href"))}},i.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CampaignMonitorAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/campaign_monitor_app_details"],n.prototype.createIntegration=function(e){return $.ajax({url:"/email_marketing/integrations",type:"POST",data:{token:e.access_token,refresh_token:e.refresh_token,type:"CampaignMonitor"}}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("campaign_monitor",!0),GrooveClient.navigate("/groove_client/settings/campaign-monitor")}}(this))},n.prototype.openAuthWindow=function(e){var t,n;return this.loginWindow=window.open("https://api.createsend.com/oauth?client_id=100966&amp;redirect_uri=https%3A%2F%2Fgroovehq.com%2Femail_marketing%2Fauth%2Fcampaign_monitor%2Fauth_callback&amp;response_type=code&amp;scope=ManageLists%2CViewSubscribersInReports%2CImportSubscribers%2CAdministerPersons&amp;state=ec5658a21d9afc9e4591002de1c1eb8c9e0c844ecf71998f","Campaign Monitor Authentication",function(){var i;i=[];for(t in e)n=e[t],i.push(t+"="+n);return i}().join(",")),this.loginWindow.focus()},n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/campaign_monitor.json",type:"delete"}).done(function(e){return function(){return e.updateToUninstalled(),GrooveClient.data.account.setEmailMarketingPreferences("campaign_monitor",!1),e.showNotification("CampaignMonitor successfully uninstalled.")}}(this))},n.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},n}(GrooveClient.Views.EmailMarketingAppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ConstantContactAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/constant_contact_app_details"],n.prototype.createIntegration=function(e){return $.ajax({url:"/email_marketing/integrations",type:"POST",data:{token:e.access_token,refresh_token:e.refresh_token,type:"ConstantContact"}}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("constant_contact",!0),GrooveClient.navigate("/groove_client/settings/constant-contact")}}(this))},n.prototype.openAuthWindow=function(e){var t,n;return this.loginWindow=window.open("https://oauth2.constantcontact.com/oauth2/oauth/siteowner/authorize?client_id=m7n4ytrghu5hg922hpgwx77g&amp;redirect_uri=https%3A%2F%2Fgroovehq.com%2Femail_marketing%2Fauth%2Fconstantcontact%2Fauth_callback&amp;response_type=code&amp;state=98679da38caa4b3611b49315fd7b7527753e12293fda0040","Constant Contact Authentication",function(){var i;i=[];for(t in e)n=e[t],i.push(t+"="+n);return i}().join(",")),this.loginWindow.focus()},n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/constant_contact.json",type:"delete"}).done(function(e){return function(){return e.updateToUninstalled(),GrooveClient.data.account.setEmailMarketingPreferences("constant_contact",!1),e.showNotification("ConstantContact successfully uninstalled.")}}(this))},n.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},n}(GrooveClient.Views.EmailMarketingAppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CustomProfileAppDetails=function(n){function i(){return this.showCustomProfileAppForm=e(this.showCustomProfileAppForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/custom_profile_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.initialize=function(){return this.customProfileApp=new GrooveClient.Models.CustomProfileApp,this.agent=GrooveClient.data.currentUser},i.prototype.events={"click #install-button":"installApp","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious","click #settings-button":"showCustomProfileAppForm",'click a[href="#contactUs"]':function(e){return e.preventDefault(),groove?groove.widget("selectPanel","#ticket"):void 0}},i.prototype.installApp=function(){return this.adminUser()?this.saveCustomCustomerProfileInstalled(!0):void 0},i.prototype.uninstallApp=function(){return this.adminUser()?this.saveCustomCustomerProfileInstalled(!1):void 0},i.prototype.appName=function(){return"Custom Profile"},i.prototype.saveCustomCustomerProfileInstalled=function(e){return GrooveClient.data.account.save({prefers_custom_profile_app_installed:e},{wait:!0,global:!1,complete:function(t){return function(){return e?t.updateToInstalled():t.updateToUninstalled()}}(this)}),!1},i.prototype.updateToInstalled=function(){return this.$(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Custom Profile app was successfully installed."}),this.showCustomProfileAppForm()},i.prototype.updateToUninstalled=function(){return this.$(".app-details").removeClass("installed").addClass("not-installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Custom Profile app was successfully uninstalled."})},i.prototype.showCustomProfileAppForm=function(e){return e&&e.preventDefault(),this.adminUser()?this.customProfileApp.fetch({success:function(e){return function(){var t;return t=new GrooveClient.Views.AppFancybox({model:e.customProfileApp,contents:GrooveClient.Views.CustomProfileAppForm}),t.appear(),!1}}(this)}):void 0},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CustomProfileAppForm=function(n){function i(){return this.webhookTestFailure=e(this.webhookTestFailure,this),this.webhookTestSuccess=e(this.webhookTestSuccess,this),this.testWebhook=e(this.testWebhook,this),this.appFailed=e(this.appFailed,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/forms/custom_profile_app"],i.prototype.className="customer_profile_app",i.prototype.events={"submit form.custom-profile-app":"saveApp","keyup input#custom_profile_app_webhook_url":"updateWebhookUrl","click #webhook-test-button":"testWebhook","keyup #webhook-test-email":"setTestButtonStatus","keydown #webhook-test-email":"preventEnterButton"},i.prototype.render=function(){return this.renderTemplate(),this.form=this.$("form.custom-profile-app"),this.$webhookUrlExample=this.$(".webhook-example"),this.errorForm=new GrooveClient.Views.ErrorForm({el:this.form}),this.$("input:text:first").focus(),this.initWebHookUrlExample(),this.setTestButtonStatus(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{app:this.model,defaultTemplate:this.defaultTemplate()})},i.prototype.initWebHookUrlExample=function(){var e;return(e=this.model.exampleWebhookUrl())?this.$webhookUrlExample.text("ex: "+e):void 0},i.prototype.updateWebhookUrl=function(e){var t;return t=$.trim($(e.target).val()),0===t.length?this.$webhookUrlExample.empty():this.$webhookUrlExample.text("ex: "+t+this.model.exampleWebhookQueryString()),this.setTestButtonStatus()},i.prototype.saveApp=function(){return this.model.save(this.formSerialize(),{wait:!0,success:this.appSaved,error:this.appFailed}),!1},i.prototype.appSaved=function(e){return $.fancybox.close(),GrooveClient.trigger("flashMessage",{type:"notice",body:"Custom Profile App settings successfully saved."})},i.prototype.appFailed=function(e,t){return this.errorForm.showErrors(t.responseText)},i.prototype.formSerialize=function(){return this.form.toObject({skipEmpty:!1})},i.prototype.defaultTemplate=function(){return'<ul>\n<li>Billing ID: {{billing_id}}</li>\n<li><a href="http://example.com/last-order">January 14, 2014</a></li>\n</ul>'},i.prototype.setTestButtonStatus=function(){var e;return e=this.$("#webhook-test-button"),this.webhookIsTestable()?(e.removeAttr("disabled"),e.attr("title","Click to test Webhook")):(e.attr("disabled",!0),e.attr("title","Webhook URL and email required"))},i.prototype.preventEnterButton=function(e){return 13===e.keyCode?(e.preventDefault(),this.testWebhook()):void 0},i.prototype.webhookIsTestable=function(){var e,t,n,i;return e=this.$("#webhook-test-email").val(),t=$.trim(e).length,n=this.$("#custom_profile_app_webhook_url").val(),i=$.trim(n).length,t>0&&i>0},i.prototype.testWebhook=function(e){var t;return null!=e&&e.preventDefault(),this.webhookIsTestable()?(t=new GrooveClient.Models.CustomProfileApp(this.formSerialize()),t.url="/api/custom_profile_app/webhook_test",t.save(this.formSerialize(),{success:this.webhookTestSuccess,error:this.webhookTestFailure})):void 0},i.prototype.webhookTestSuccess=function(e,t){var n;return n=this.$(".webhook .results"),n.addClass("success").removeClass("error"),n.find(".message h2").text("Success!"),n.find(".message span.msg").text("We fetched the following fields form your webhook:"),this.addTestResultAttributes(e),this.addSampleProfile(t.html),n.show()},i.prototype.webhookTestFailure=function(e,t){var n;return n=this.$(".webhook .results"),n.addClass("error").removeClass("success"),n.find(".message h2").text("We have a problem Houston"),n.find(".message span.msg").text("Your webhook returned a "+t.status+" for our test request."),this.$(".example-profile ul").empty(),this.$(".webhook .mockup").empty(),n.show()},i.prototype.addSampleProfile=function(e){var t,n,i;return n=new GrooveClient.Views.CustomProfile({model:new GrooveClient.Models.CustomProfile({html:e})}),i=".webhook .mockup",t=this.$(i),t.empty(),this.appendChildTo(n,i),t.show()},i.prototype.addTestResultAttributes=function(e){var t,n,i,o;i=e.get("profile"),t=this.$(".example-profile ul"),t.empty();for(n in i)o=i[n],t.append("<li><span class='key'>"+n+":</span><span class='value'>"+o+"</span></li>");return t.show()},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CustomerRatingsAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/customer_ratings_app_details"],n.prototype.id="app-store",n.prototype.layout=GrooveClient.Views.NoSidebarsLayout,n.prototype.events={"click #install-button":"installApp","click #uninstall-button":"uninstallApp","click #settings-button":"showSettings","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.setupFancyboxes(),this},n.prototype.installApp=function(){return this.adminUser()?this.saveCustomerRatingsInstalled(!0):void 0},n.prototype.uninstallApp=function(){return this.adminUser()?this.saveCustomerRatingsInstalled(!1):void 0},n.prototype.appName=function(){return"Customer Satisfaction Ratings"},n.prototype.showSettings=function(e){return this.adminUser()?void 0:e.preventDefault()},n.prototype.saveCustomerRatingsInstalled=function(e){return GrooveClient.data.account.save({prefers_customer_ratings_installed:e},{wait:!0,global:!1,complete:function(t){return function(){return e?t.updateToInstalled():t.updateToUninstalled()}}(this)}),!1},n.prototype.updateToInstalled=function(){return this.$(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Customer Satisfaction Ratings app was successfully installed."})},n.prototype.updateToUninstalled=function(){return this.$(".app-details").removeClass("installed").addClass("not-installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Customer Satisfaction Ratings app was successfully uninstalled."})},n.prototype.setupFancyboxes=function(){return GrooveClient.data.currentUser.isAdmin()?this.$("#settings-button").fancybox(Groove.Fancybox.params.one):void 0},n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.DelightedAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/delighted_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.FacebookAppDetails=function(n){function i(){return this.showFacebookAuthForm=e(this.showFacebookAuthForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/facebook_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.events={"click #install-button":"showFacebookAuthForm","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.setupFancyboxes(),this},i.prototype.showFacebookAuthForm=function(e){return this.adminUser()?(e.preventDefault(),window.location.href="/facebook_account/authorize"):void 0},i.prototype.setupFancyboxes=function(){return GrooveClient.data.currentUser.isAdmin()?this.$("#settings-button").fancybox(Groove.Fancybox.params.one):void 0},i.prototype.appName=function(){return"Facebook"},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GoogleAppsDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/google_apps_details"],n.prototype.id="app-store",n.prototype.layout=GrooveClient.Views.NoSidebarsLayout,n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.HipChatAppDetails=function(n){function i(){return this.uninstallFailure=e(this.uninstallFailure,this),this.uninstallSuccess=e(this.uninstallSuccess,this),this.showAppCredentialsForm=e(this.showAppCredentialsForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/hip_chat_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.events={"click #install-button":function(e){return e.preventDefault(),this.showAppCredentialsForm()},"click #uninstall-button":"uninstallApp","click #settings-button":function(e){return e.preventDefault(),this.showSettingsForm()},"click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},i.prototype.initialize=function(){return this.slug="hipchat",this.app_type="hip_chat",this.agent=GrooveClient.data.currentUser,this.app=this.model,this.listenTo(GrooveClient,"apps:hipchat:installed",function(){return console.log("hipchat installed event"),this.showSettingsForm()})},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{app:this.app,agent:this.agent})},i.prototype.showAppCredentialsForm=function(){var e;if(this.adminUser())return e=new GrooveClient.Views.AppCredentialsFancybox({model:this.model,slug:this.slug,app_type:this.app_type}),e.contents=GrooveClient.Views.HipChatCredentialsForm,e.appear(),!1},i.prototype.showSettingsForm=function(){var e;if(this.adminUser())return e=new GrooveClient.Views.AppFancybox({model:this.model,contents:GrooveClient.Views.HipChatSettingsForm}),e.appear(),!1},i.prototype.uninstallApp=function(){return this.model.destroy({wait:!0,success:this.uninstallSuccess,failure:this.uninstallFailure})},i.prototype.uninstallSuccess=function(){return this.updateToUninstalled(),this.renderFlash({title:"HipChat successfully uninstalled."}),this.model=new GrooveClient.Models.HipChatApp},i.prototype.uninstallFailure=function(){return this.renderFlash({title:"An unexpected error occured while uninstalling HipChat. Please try again in a few minutes."})},i.prototype.updateToUninstalled=function(){return $(".app-details").removeClass("installed").addClass("not-installed"),GrooveClient.data.account.set("has_hipchat_installed",!1)},i.prototype.renderFlash=function(e){return new GrooveClient.Views.Notification(e).show()},i.prototype.trackVisit=function(){var e,t;return e="HipChat",t={has_installed_app:1,has_installed_third_party_app:1},t["has_installed_"+e]=1,this.track("installed_app",t),this.track("installed_app:third_party"),this.track("installed_app:"+e)},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.HipChatSettingsForm=function(n){function i(){return this.notificationCheckboxes=e(this.notificationCheckboxes,this),this.mailboxCheckboxes=e(this.mailboxCheckboxes,this),this.handelSaveFailure=e(this.handelSaveFailure,this),this.handelSaveSuccess=e(this.handelSaveSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/forms/hip_chat_settings"],i.prototype.className="hip_chat_settings",i.prototype.events={"submit #hip-chat-settings":function(e){return e.preventDefault(),this.saveSettings($(e.target))},"click input.hip-chat-setting":function(e){return this.toggleDestroy($(e.target))}},i.prototype.initialize=function(){return this.notifications=this.model.notifications,this.mailbox_links=this.model.mailbox_links,this.mailboxes=GrooveClient.data.mailboxes},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.$("#api_token").focus(),e.form=e.$("form#hip-chat-settings"),e.errorForm=new GrooveClient.Views.ErrorForm({el:e.form})}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,mailboxCheckboxes:this.mailboxCheckboxes,notificationCheckboxes:this.notificationCheckboxes})},i.prototype.saveSettings=function(e){return this.model.save(this.serializedForm(e),{success:this.handelSaveSuccess,error:this.handelSaveFailure})},i.prototype.serializedForm=function(e){var t;return t=e.toObject({skipEmpty:!1}),t.play_sound=this.$("input[type='radio'][name='play_sound']:checked").val()||0,t.include_comment_body=this.$("input[type='radio'][name='include_comment_body']:checked").val()||0,_.omit(t,["rooms","account_id"])},i.prototype.handelSaveSuccess=function(){return $.fancybox.close(),this.renderFlash({title:"HipChat was successfully installed"})},i.prototype.handelSaveFailure=function(e,t){var n;return n=$.parseJSON(t.responseText),this.errorForm.showErrors(n)},i.prototype.renderFlash=function(e){return new GrooveClient.Views.Notification(e).show()},i.prototype.mailboxCheckboxes=function(e){return null==e&&(e={}),e.mailboxes=this.mailboxes,e.mailbox_links=this.mailbox_links,JST["apps/hip_chat/mailbox_checkboxes"](e)},i.prototype.notificationCheckboxes=function(e){return null==e&&(e={}),e.notifications=this.notifications,e.notificationTypes={ticket_created:"A ticket is created",ticket_assigned:"A ticket is assigned",note_added:"A note is added to a ticket",customer_replies:"A customer replies to a ticket",agent_replies:"An agent replies to a ticket",ticket_merged:"A ticket is merged",ticket_forwarded:"A ticket is forwarded"},JST["apps/hip_chat/notification_checkboxes"](e)},i.prototype.toggleDestroy=function(e){var t;if(e.attr("data-value-id"))return t=e.siblings(".destroy"),e.is(":checked")?t.val(0):t.val(1)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.KnowledgeBaseAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/knowledge_base_app_details"],n.prototype.events={"click #visit-button":"visitKnowledgeBase","click #install-button":"installApp","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},n.prototype.installApp=function(){return this.adminUser()?this.saveKnowledgeBaseInstalled(!0):void 0},n.prototype.uninstallApp=function(){return this.adminUser()?GrooveClient.Views.ConfirmationModal.show({title:"Are you sure you want to uninstall the Knowledge Base app?",content:"Once you uninstall the Knowledge Base app all of your knowledge base articles will be deleted",button:"Uninstall",onConfirm:function(e){return function(){return e.saveKnowledgeBaseInstalled(!1)}}(this)}):void 0},n.prototype.saveKnowledgeBaseInstalled=function(e){return GrooveClient.data.account.save({prefers_knowledge_base_installed:e},{wait:!0,complete:function(e){return function(){return e.trackInstalled(),window.location.reload()}}(this)}),!1},n.prototype.appName=function(){return"Knowledge Base"},n.prototype.visitKnowledgeBase=function(){var e;return e=GrooveClient.data.accountUrl+"help_center",window.open(e,"_blank")},n.prototype.trackInstalled=function(){return this.track("installed_app",{has_installed_app:1,has_installed_internal_app:1,has_installed_knowledge_base:1}),this.track("installed_app:internal"),this.track("installed_app:knowledge_base")},n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MailChimpAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/mail_chimp_app_details"],n.prototype.createIntegration=function(e){return $.ajax({url:"/email_marketing/integrations",type:"POST",data:{token:e.access_token,refresh_token:e.refresh_token,type:"MailChimp"}}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("mail_chimp",!0),GrooveClient.navigate("/groove_client/settings/mail-chimp")}}(this))},n.prototype.openAuthWindow=function(e){var t,n;return this.loginWindow=window.open("https://login.mailchimp.com/oauth2/authorize?client_id=281570210168&amp;redirect_uri=https%3A%2F%2Fgroovehq.com%2Femail_marketing%2Fauth%2Fmail_chimp%2Fauth_callback&amp;response_type=code&amp;state=0a5e0a71ae0b0b84c0793236bd7d466e2810877b482cb903","MailChimp Authentication",function(){var i;i=[];for(t in e)n=e[t],i.push(t+"="+n);return i}().join(",")),this.loginWindow.focus()},n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/mail_chimp.json",type:"delete"}).done(function(e){return function(){return e.updateToUninstalled(),GrooveClient.data.account.setEmailMarketingPreferences("mail_chimp",!1),
e.showNotification("MailChimp successfully uninstalled.")}}(this))},n.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},n}(GrooveClient.Views.EmailMarketingAppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NimbleAppDetails=function(n){function i(){return this.showNimbleAuthForm=e(this.showNimbleAuthForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={"click #install-button":"showNimbleAuthForm","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},i.prototype.showNimbleAuthForm=function(e){return e.preventDefault(),this.adminUser()?window.location.href="/auth/nimble":void 0},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.OlarkAppDetails=function(n){function i(){return this.openModalInSettings=e(this.openModalInSettings,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/olark_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.initialize=function(){return this.agent=GrooveClient.data.currentUser},i.prototype.events={"click #install-button":"installApp","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious",'click a[href="#contactUs"]':function(e){return e.preventDefault(),groove?groove.widget("selectPanel","#ticket"):void 0}},i.prototype.installApp=function(){return this.adminUser()?this.saveInstalled(!0):void 0},i.prototype.uninstallApp=function(){return this.adminUser()?this.saveInstalled(!1):void 0},i.prototype.appName=function(){return"Custom Profile"},i.prototype.saveInstalled=function(e){return GrooveClient.data.account.save({prefers_olark_installed:e},{wait:!0,global:!1,complete:function(t){return function(){return e?t.updateToInstalled():t.updateToUninstalled()}}(this)}),!1},i.prototype.updateToInstalled=function(){return this.$(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Olark app was successfully installed."}),this.openModalInSettings()},i.prototype.updateToUninstalled=function(){return this.$(".app-details").removeClass("installed").addClass("not-installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Olark app was successfully uninstalled."})},i.prototype.openModalInSettings=function(e){return e&&e.preventDefault(),this.adminUser()?window.location.pathname="/groove_client/settings/olark/create":void 0},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.OlarkAppForm=function(n){function i(){return this._removeIntegration=e(this._removeIntegration,this),this._renderIntegration=e(this._renderIntegration,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/forms/olark_app"],i.prototype._integrationTemplate=JST["apps/forms/chat_integration"],i.prototype.className="olark_app",i.prototype.events={'change input[role="toggleIntegration"]':function(e){return this._toggleIntegration($(e.target))}},i.prototype.initialize=function(){return this.listenTo(this.collection,"change:id",this._renderIntegration),this.listenTo(this.collection,"remove",this._removeIntegration)},i.prototype.renderTemplate=function(){var e,t,n,o;return n=function(){var n,i,r,s;for(r=GrooveClient.data.mailboxes.models,s=[],n=0,i=r.length;i>n;n++)o=r[n],e={id:o.id,name:o.get("name"),email:o.get("email")},t=this.collection.findWhere({mailbox_id:o.id}),t&&(e.integration=this._integrationContext(t)),s.push(e);return s}.call(this),i.__super__.renderTemplate.call(this,{mailboxes:n,_integrationTemplate:this._integrationTemplate})},i.prototype._integrationContext=function(e){return{id:e.id,webhookUrl:e.webhookUrl()}},i.prototype.render=function(){var e,t,n,i;for(this.renderTemplate(),i=this.collection.models,e=0,t=i.length;t>e;e++)n=i[e],this._renderCopyButton(n);return _.delay(Groove.Fancybox.reloadFancyboxForms),this},i.prototype._renderIntegration=function(e){var t;return t=this.$('li.mailbox[data-id="'+e.get("mailbox_id")+'"]'),t.append(this._integrationTemplate(this._integrationContext(e))),this._renderCopyButton(e)},i.prototype._renderCopyButton=function(e){var t;return t=new GrooveClient.Views.CopyButton({text:"Copy",value:function(){return e.webhookUrl()}}),this.appendChildTo(t,this._integrationDiv(e))},i.prototype._removeIntegration=function(e){return this._integrationDiv(e).slideUp(function(){return this.remove()})},i.prototype._toggleIntegration=function(e){var t,n,i,o;return o=e.closest("li.mailbox"),o.hasClass("loading")?void 0:(o.addClass("loading"),t={success:function(){return o.removeClass("loading")},error:function(){return e.parent().click()}},e.is(":checked")?(n={type:"Olark",mailbox_id:o.data("id")},this.collection.create(n,t)):(i=o.find("div.integration"),this.collection.get(i.data("id")).destroy(t)))},i.prototype._integrationDiv=function(e){return this.$('div.integration[data-id="'+e.id+'"]')},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SlackAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/slack_app_details"],n.prototype.id="app-store",n.prototype.events={"click #install-button":function(e){return e.preventDefault(),this.adminUser()?window.location.href="/slack/auth":void 0},"click #uninstall-button":function(e){return e.preventDefault(),this.adminUser()?this.uninstallApp():void 0},"click #next-button":"carouselNext","click #prev-button":"carouselPrevious","click #settings-button":function(e){return GrooveClient.navigate($(e.target).attr("href"))}},n.prototype.uninstallApp=function(){return $.ajax({url:"/slack/app.json",type:"delete"}).done(function(e){return function(){return e.updateToUninstalled(),GrooveClient.data.account.set("prefers_team_chat_app",!1),e.showNotification("Slack successfully uninstalled.")}}(this))},n.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SnapEngageAppDetails=function(n){function i(){return this.showForm=e(this.showForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/snap_engage_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.initialize=function(){return this.agent=GrooveClient.data.currentUser},i.prototype.events={"click #install-button":"installApp","click #uninstall-button":"uninstallApp","click #next-button":"carouselNext","click #prev-button":"carouselPrevious","click #settings-button":"showForm",'click a[href="#contactUs"]':function(e){return e.preventDefault(),groove?groove.widget("selectPanel","#ticket"):void 0}},i.prototype.installApp=function(){return this.adminUser()?this.saveInstalled(!0):void 0},i.prototype.uninstallApp=function(){return this.adminUser()?this.saveInstalled(!1):void 0},i.prototype.appName=function(){return"Custom Profile"},i.prototype.saveInstalled=function(e){return GrooveClient.data.account.save({prefers_snap_engage_installed:e},{wait:!0,global:!1,complete:function(t){return function(){return e?t.updateToInstalled():t.updateToUninstalled()}}(this)}),!1},i.prototype.updateToInstalled=function(){return this.$(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The SnapEngage app was successfully installed."}),this.showForm()},i.prototype.updateToUninstalled=function(){return this.$(".app-details").removeClass("installed").addClass("not-installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The SnapEngage app was successfully uninstalled."})},i.prototype.showForm=function(e){return e&&e.preventDefault(),this.adminUser()?(null==this.integrations&&(this.integrations=new GrooveClient.Collections.ChatIntegrations({type:"SnapEngage"})),this.integrations.fetch({success:function(e){return function(){var t;return t=new GrooveClient.Views.AppFancybox({collection:e.integrations,contents:GrooveClient.Views.SnapEngageAppForm}),t.appear(),!1}}(this)})):void 0},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SnapEngageAppForm=function(n){function i(){return this._removeIntegration=e(this._removeIntegration,this),this._renderIntegration=e(this._renderIntegration,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/forms/snap_engage_app"],i.prototype._integrationTemplate=JST["apps/forms/chat_integration"],i.prototype.className="snap_engage_app",i.prototype.events={'change input[role="toggleIntegration"]':function(e){return this._toggleIntegration($(e.target))}},i.prototype.initialize=function(){return this.listenTo(this.collection,"change:id",this._renderIntegration),this.listenTo(this.collection,"remove",this._removeIntegration)},i.prototype.renderTemplate=function(){var e,t,n,o;return n=function(){var n,i,r,s;for(r=GrooveClient.data.mailboxes.models,s=[],n=0,i=r.length;i>n;n++)o=r[n],e={id:o.id,name:o.get("name"),email:o.get("email")},t=this.collection.findWhere({mailbox_id:o.id}),t&&(e.integration=this._integrationContext(t)),s.push(e);return s}.call(this),i.__super__.renderTemplate.call(this,{mailboxes:n,_integrationTemplate:this._integrationTemplate})},i.prototype._integrationContext=function(e){return{id:e.id,webhookUrl:e.webhookUrl()}},i.prototype.render=function(){var e,t,n,i;for(this.renderTemplate(),i=this.collection.models,e=0,t=i.length;t>e;e++)n=i[e],this._renderCopyButton(n);return _.delay(Groove.Fancybox.reloadFancyboxForms),this},i.prototype._renderIntegration=function(e){var t;return t=this.$('li.mailbox[data-id="'+e.get("mailbox_id")+'"]'),t.append(this._integrationTemplate(this._integrationContext(e))),this._renderCopyButton(e)},i.prototype._renderCopyButton=function(e){var t;return t=new GrooveClient.Views.CopyButton({text:"Copy",value:function(){return e.webhookUrl()}}),this.appendChildTo(t,this._integrationDiv(e))},i.prototype._removeIntegration=function(e){return this._integrationDiv(e).slideUp(function(){return this.remove()})},i.prototype._toggleIntegration=function(e){var t,n,i,o;return o=e.closest("li.mailbox"),o.hasClass("loading")?void 0:(o.addClass("loading"),t={success:function(){return o.removeClass("loading")},error:function(){return e.parent().click()}},e.is(":checked")?(n={type:"SnapEngage",mailbox_id:o.data("id")},this.collection.create(n,t)):(i=o.find("div.integration"),this.collection.get(i.data("id")).destroy(t)))},i.prototype._integrationDiv=function(e){return this.$('div.integration[data-id="'+e.id+'"]')},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SupportWidgetAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/support_widget_app_details"],n.prototype.events={"click #install-button":"installApp","click #upgrade-button":"upgradeWidget","click #downgrade-button":"downgradeWidget","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.setupFancyboxes(),this._trackRendered(),this},n.prototype.installApp=function(){return this.adminUser()?GrooveClient.data.account.save({prefers_support_widget_installed:!0},{wait:!0,global:!1,complete:function(e){return function(){return e._trackInstalled(function(){return window.location.reload()})}}(this)}):void 0},n.prototype.updateToInstalled=function(){return this.$(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The Support Widget app was successfully installed."})},n.prototype.setupFancyboxes=function(){return this.$("#widget-code-button").fancybox(Groove.Fancybox.params.one),GrooveClient.data.currentUser.isAdmin()?this.$("#settings-button").fancybox(Groove.Fancybox.params.one):void 0},n.prototype.upgradeWidget=function(){return this._trackUpgraded(function(){return window.location.href="/widgets/upgrade"})},n.prototype.downgradeWidget=function(){return this._trackDowngraded(function(){return window.location.href="/widgets/downgrade"})},n.prototype.appName=function(){return"Support Widget"},n.prototype._trackDowngraded=function(e){return analytics.track("Uninstalled App",{app:this.appName(),appVersion:"2.0"},{},function(t){return function(){return analytics.track("Installed App",{app:t.appName(),appVersion:"1.0",previousAppVersion:"2.0"},{},e)}}(this))},n.prototype._trackInstalled=function(e){return analytics.track("Installed App",{app:this.appName(),appVersion:"2.0"},{},function(){return analytics.track("Created Widget",{appVersion:"2.0","default":"true"},{},e)})},n.prototype._trackRendered=function(){return analytics.page("Support Widget Details",{category:"App Store"})},n.prototype._trackUpgraded=function(e){return analytics.track("Installed App",{app:this.appName(),appVersion:"2.0",previousAppVersion:"1.0"},{},e)},n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TalkdeskAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/talkdesk_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TwitterAppDetails=function(n){function i(){return this.showTwitterAuthForm=e(this.showTwitterAuthForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/groove_apps/twitter_app_details"],i.prototype.id="app-store",i.prototype.layout=GrooveClient.Views.NoSidebarsLayout,i.prototype.events={"click #install-button":"showTwitterAuthForm","click #next-button":"carouselNext","click #prev-button":"carouselPrevious"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.setupFancyboxes(),this},i.prototype.showTwitterAuthForm=function(e){return e.preventDefault(),this.adminUser()?window.location.href="/twitter_accounts/authorize":void 0},i.prototype.setupFancyboxes=function(){return GrooveClient.data.currentUser.isAdmin()?this.$("#settings-button").fancybox(Groove.Fancybox.params.one):void 0},i.prototype.appName=function(){return"Twitter"},i}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.VextrasAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/vextras_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.WebhooksAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/webhooks_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ZapierAppDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["apps/groove_apps/zapier_app_details"],n.prototype.id="app-store",n}(GrooveClient.Views.AppDetails)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.HipChatCredentialsForm=function(n){function i(){return this.handelSaveFailure=e(this.handelSaveFailure,this),this.handelSaveSuccess=e(this.handelSaveSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["apps/forms/hip_chat_credentials"],i.prototype.className="box-b-new-app-installation",i.prototype.events={"submit form#new_app_installation":function(e){return e.preventDefault(),this.save($(e.target))}},i.prototype.initialize=function(e){return this.slug=e.slug,this.app_type=e.app_type},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.form=e.$("form#new_app_installation"),e.errorForm=new GrooveClient.Views.ErrorForm({el:e.form})}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{api_token:this.model.get("api_token")})},i.prototype.save=function(e){return this.model.save(this.serializedFrom(e),{success:this.handelSaveSuccess,error:this.handelSaveFailure})},i.prototype.serializedFrom=function(e){return _.omit(e.toObject({skipEmpty:!1}),"install-button")},i.prototype.handelSaveSuccess=function(){return $.fancybox.close(),this.renderFlash({title:"HipChat was successfully installed"}),this.updateToInstalled(),GrooveClient.trigger("apps:hipchat:installed")},i.prototype.handelSaveFailure=function(e,t){var n;return n=$.parseJSON(t.responseText),this.errorForm.showErrors(n)},i.prototype.updateToInstalled=function(){return $(".app-details").removeClass("not-installed").addClass("installed"),GrooveClient.data.account.set("has_hipchat_installed",!0)},i.prototype.renderFlash=function(e){return new GrooveClient.Views.Notification(e).show()},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Attachment=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="li",n.prototype.className="attachment",n.prototype.attributes=function(){return{"data-attachment-id":this.model.id}},n.prototype.render=function(){var e,t,n,i;return i=this.model.get("name"),n=$("<a>",{href:this.model.get("url"),target:"_blank",title:i}),(e=this.model.fileExtension())&&n.addClass("content-"+e),this.model.isImage()&&n.addClass("image"),this.model.isImage()&&n.append($("<img>",{src:this.model.get("url")})),t=$("<div>").addClass("attachment-title"),t.append($("<span>",{text:i}).addClass("file-name")),t.append($("<span>",{text:"Remove"}).addClass("remove")),n.append(t),this.$el.append(n),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Attachments=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="attachments",n.prototype.events={"click .remove":"removeFromCollection"},n.prototype.initialize=function(){if(null==this.collection)throw Error("@collection should be provided for Attachments view");return this.listenTo(this.collection,"add",this.renderAttachment)},n.prototype.imageAttachmentsList=function(){var e;return null!=this._imageList?this._imageList:(this._imageList=e=$("<ul>").addClass("images"),this.$el.prepend(e),e)},n.prototype.removeFromCollection=function(e){var t,n,i,o;return n=$(e.target),t=n.closest("[data-attachment-id]"),i=t.data("attachment-id"),o=$("input.uploaded_attachments[value="+i+"]"),o.remove(),t.remove(),this.collection.remove(i),!1},n.prototype.otherAttachmentsList=function(){var e;return null!=this._otherList?this._otherList:(this._otherList=e=$("<ul>").addClass("other"),this.$el.append(e),e)},n.prototype.renderAttachment=function(e){var t,n;return n=new GrooveClient.Views.Attachment({model:e}),t=e.isImage()?this.imageAttachmentsList():this.otherAttachmentsList(),this.appendChildTo(n,t),this.$el.is(":empty")&&this.$el.hide(),n},n.prototype.enablePreviewGallery=function(){return null!=this._imageList?null!=this.gallery?this.gallery:this.gallery=new GrooveClient.Views.AttachmentsGallery({el:this._imageList.get(0)}):void 0},n.prototype.render=function(){return this.collection.each(this.renderAttachment,this),this.enablePreviewGallery(),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e,t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;e="comments_attributes[0].attachment_ids[]",GrooveClient.Views.AttachmentsForm=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="comment_attachments_wrapper",i.prototype.template=JST["attachments/form"],i.prototype.events={"click .attach-button":"clickAttachButton"},i.prototype.initialize=function(e){return null==e&&(e={}),this.parentForm=e.parentForm,this.ticket=e.ticket,this.collection=new GrooveClient.Collections.Attachments,this.attachments=new GrooveClient.Views.Attachments({collection:this.collection}),this.insertedInputs={},this.listenTo(this.collection,"add",this.addToParentForm),this.listenTo(this.collection,"remove",this.removeFromParentForm),this.listenTo(TicketActions,"undo",this.updateDraftAttachments)},i.prototype.addToParentForm=function(t){var n,i;return n=$("<input>",{type:"hidden",value:t.id,name:e}),n.addClass("uploaded_attachments"),this.insertedInputs[t.id]=n,$(".comment_attachments_container").addClass("has-attachments"),null!=(i=this.parentForm)?i.addClass("has-attachments").append(n):void 0},i.prototype.removeFromParentForm=function(e){var t;return delete this.insertedInputs[e.id],_.isEmpty(this.insertedInputs)?($(".comment_attachments_container").removeClass("has-attachments"),null!=(t=this.parentForm)?t.removeClass("has-attachments"):void 0):void 0},i.prototype.render=function(){var e;return i.__super__.render.apply(this,arguments),null!=(e=this.parentForm)&&e.find(".uploaded_attachments").remove(),this.replaceWithChild(this.attachments,".attachments"),this.form=this.$("form"),this.form.fileUploadUI({uploadTable:this.$(".comment_attachments"),downloadTable:this.$(".comment_attachments"),buildUploadRow:function(e,t){var n;return n=e[t].name,n.length>18&&(n=n.substring(0,15)+"..."),$('<tr>\n  <td class="file_name">'+n+'</td>\n  <td class="file_upload_progress"><div></div></td>\n  <td class="file_upload_cancel">\n    <button class="ui-state-default ui-corner-all" title="Cancel">\n      <span class="ui-icon ui-icon-cancel">Cancel</span>\n    </button>\n  </td>\n</tr>')},buildDownloadRow:function(e){return function(t){return e.collection.add(t),!1}}(this)}),this},i.prototype.clickAttachButton=function(e){return this.$(":file").eq(0).click(),!1},i.prototype.onSwap=function(){var e,t;return t=this.form,e=this.$el.closest(".attachments-box"),e.addClass("droptarget"),e.unbind(".af"),e.bind("dragenter.af",function(){return e.addClass("drag-over")}),e.bind("dragleave.af",function(){return e.removeClass("drag-over")}),e.find("*").unbind(".af").bind("dragleave.af",!1),e.bind("drop.af",function(n){var i;return e.trigger("dragleave"),null!=(i=t.data("file_upload"))?i.onDrop(n):void 0}),this.updateDraftAttachments()},i.prototype.updateDraftAttachments=function(){var e;if(this.ticket)return this.ticket.draftNote?this.collection.add(this.ticket.draftNote.attachments||[]):this.collection.add((null!=(e=this.ticket.get("ticket_draft"))?e.draft_attachments:void 0)||[])},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AttachmentsGallery=function(n){function i(){return this.onComplete=e(this.onComplete,this),this.onClosed=e(this.onClosed,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="fancybox-image-gallery",i.prototype.initialize=function(){var e;return this.overlay=$("#fancybox-overlay"),this.links=this.$("a"),this.multiple=this.links.length>1,e=this.multiple?70:40,this.links.attr({rel:"image-attachment-"+this.cid}),this.links.fancybox({type:"image",padding:0,margin:e,titleShow:!0,transitionIn:"elastic",transitionOut:"elastic",titlePosition:"outside",autoResize:!1,overlayColor:"black",overlayOpacity:.85,centerOnScroll:!0,showCloseButton:!1,onStart:this.onStart,onClosed:this.onClosed,onComplete:this.onComplete})},i.prototype.openImageInNewWindow=function(e){var t,n,i,o,r;return t=$("#fancybox-img"),i=t.attr("src"),o=t.attr("alt"),n=["width="+e.width,"height="+e.height,"resizeable","scrollbars"],r=window.open("","",n.join("")),r.document.write('<img src="'+i+'" alt="'+o+'"/>'),r.document.close()},i.prototype.appendCloseButton=function(){return null==this.closeButton?(this.closeButton=$("<div>",{id:"fancybox-custom-close",html:"&times;"}),this.closeButton.on("click",function(){return $.fancybox.close()}),this.overlay.append(this.closeButton)):void 0},i.prototype.removeCloseButton=function(){var e;return null!=(e=this.closeButton)&&e.remove(),delete this.closeButton},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),this.multiple&&$(document.body).addClass("fancybox-multiple"),this.appendCloseButton()},i.prototype.onClosed=function(){return $(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS).removeClass("fancybox-multiple"),this.removeCloseButton()},i.prototype.renderSmallPreviews=function(e,t){var n;return $("#fancybox-gallery-previews").remove(),n=$("<ul>",{id:"fancybox-gallery-previews"}),e.each(function(e,i){var o;return o=$("<li>").toggleClass("current",e===t),o.click(function(){return $.fancybox.pos(e)}),o.append($(i).find("img").clone()),n.append(o)}),$("#fancybox-content").append(n)},i.prototype.onComplete=function(e,t,n){var i,o,r,s,a;return this.multiple&&this.renderSmallPreviews(e,t),$("#fancybox-view-full-size").remove(),s=n.ratio,null!=s&&1!==s?(o="#",r="fancybox-view-full-size",a="View full size",i=$("<a>",{href:o,id:r,text:a}),i.on("click",function(e){return function(){return e.openImageInNewWindow(n)}}(this)),$("#fancybox-title-outside").append(i)):void 0},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CommentTemplateCategory=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["comment_template_categories/category"],n.prototype.className="nested-fields item",n.prototype.events={"click .remove_fields":"removeCategory"},n.prototype.renderTemplate=function(){var e,t;return t=this.model,e=t.collection.indexOf(t),n.__super__.renderTemplate.call(this,{template:t,index:e})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$("input.name").val(this.model.get("name")),this},n.prototype.removeCategory=function(){var e;return e=this.$el.siblings(".item:visible"),e.length&&confirm("Are you sure you want to delete this category?")&&(this.$el.hide(),this.model.isNew()||this.$("input.destroy").val(1)),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CommentTemplateCategoriesEditor=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["comment_template_categories/editor"],n.prototype.className="comment-template-categories-content",n.prototype.events={"click .add_fields_dummy":"addNewCategory","ajax:success form":"categoriesUpdated"},n.prototype.initialize=function(e){return this.categories=e.categories},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderCategories(),this},n.prototype.renderCategories=function(){var e;return this.categories.each(this.renderCategory,this),e=this.$("form"),e.append(e.find("> .controls"))},n.prototype.renderCategory=function(e){var t;return t=new GrooveClient.Views.CommentTemplateCategory({model:e}),this.appendChildTo(t,"form")},n.prototype.addNewCategory=function(e){var t,n,i,o;return t=$(e.target),i=t.closest(".item"),n=new GrooveClient.Models.CommentTemplateCategory,this.categories.add(n),o=new GrooveClient.Views.CommentTemplateCategory({model:n}),i.after(this.renderChild(o).el)},n.prototype.categoriesUpdated=function(e,t){return this.categories.reset(t),GrooveClient.trigger("flashMessage",{type:"notice",body:"Categories were successfully updated"}),this.$(".cancel-categories-edit").trigger("click")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CommentTemplate=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["comment_templates/comment_template"],n.prototype.tagName="li",n.prototype.className="comment-template",n.prototype.attributes=function(){return{"data-template-id":this.model.id}},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{template:this.model})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CommentTemplatesEditor=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["comment_templates/editor"],n.prototype.events={"click a.delete":"deleteCommentTemplate","click a.edit":"editCommentTemplate",
"click .cancel_comment_template":"removeEditForm","click .cancel-categories-edit":"removeCategoriesEditor","change #category_filter":"changeCategory","change .canned_category_select":"changeEditorCategory","change .variable-inserter":"insertVariable","submit form.comment-template":"saveCommentTemplate","click .new-canned-reply":"newCommentTemplate","click .edit-categories":"editCategories"},n.prototype.initialize=function(){var e;return this.$el.data("view-initialized",!0),GrooveClient.bootstrapped?(e=GrooveClient.data,this.categories=e.commentTemplateCategories,this.templates=e.commentTemplates):(this.categories=new GrooveClient.Collections.CommentTemplateCategories,this.categories.fetch({reset:!0}),this.templates=new GrooveClient.Collections.CommentTemplates,this.templates.fetch({reset:!0})),this.listenTo(this.categories,"sync",this.renderCategories),this.listenTo(this.templates,"sync",this.renderTemplates)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderCategories(),this.renderTemplates(),Groove.UI.dropdowns(),this},n.prototype.renderCategories=function(){var e;return e=this.$("#category_filter").empty(),e.append($("<option>",{text:"All Categories",value:"all"})),this.categories.each(function(t){var n;return n=$("<option>",{text:t.get("name"),value:t.id}),e.append(n)}),$.uniform.update(e)},n.prototype.renderTemplates=function(e){var t,n,i,o;for((null==e||e instanceof Backbone.Model)&&(e=this.templates),this.$("ul.templates").empty(),e instanceof Backbone.Collection&&(e=e.models),i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(this.renderCommentTemplate(o));return i},n.prototype.renderCommentTemplate=function(e){var t;return t=new GrooveClient.Views.CommentTemplate({model:e}),this.appendChildTo(t,"ul.templates")},n.prototype.deleteCommentTemplate=function(e){var t,n,i,o;return t=$(e.target),i=t.closest("li.comment-template"),n=i.data("template-id"),(o=this.templates.get(n))&&confirm("Are you sure you want to delete this canned reply?")?o.destroy({success:function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"Canned reply was successfully deleted"}),i.remove()}}):void 0},n.prototype.editCommentTemplate=function(e){var t,n,i,o;return t=$(e.target),i=t.closest("li.comment-template"),n=i.data("template-id"),(o=this.templates.get(n))&&this.showEditForm(o),!1},n.prototype.newCommentTemplate=function(e){var t;return t=new GrooveClient.Models.CommentTemplate,this.showEditForm(t),!1},n.prototype.showEditForm=function(e){var t;return this.$(".index").hide(),t=this.constructor.VARIABLES,this.$el.append(JST["comment_templates/edit_form"]({template:e,categories:this.categories,variables:t})),this.$("#comment_template_title").val(e.get("title")),this.$("#comment_template_body").val(e.get("body")),this.$("#comment_template_category_id").val(e.get("category_id")),Groove.UI.dropdowns()},n.prototype.removeEditForm=function(){return this.$(".edit-comment-template").remove(),this.$(".index").show(),!1},n.prototype.removeCategoriesEditor=function(){var e;return null!=(e=this.categoriesEditor)&&e.remove(),this.removeEditForm()},n.prototype.changeCategory=function(e){var t,n;return n=$(e.target).val(),t="all"!==n?this.templates.where({category_id:~~n}):this.templates.models,this.renderTemplates(t)},n.prototype.changeEditorCategory=function(e){var t,n,i,o;if(i=$(e.target),o=i.val(),"add"===o){if(n=prompt("Enter new category name"),!n)return;return t=new GrooveClient.Models.CommentTemplateCategory,this.categories.add(t),t.save({name:n},{success:function(){var e;return e=i.find("option:last"),e.before($("<option>",{text:t.get("name"),value:t.id})),i.val(t.id),$.uniform.update(i)},error:function(e,t){return i.val(""),$.uniform.update(i),GrooveClient.trigger("flashMessage",{type:"alert",body:t})}})}},n.prototype.insertVariable=function(e){var t,n,i,o;return t=$(e.target),(o=t.val())?(t.val(""),$.uniform.update(t),n="%{"+o+"}",i=this.$("form textarea"),i.insertAtCaretPos(n).replaceSelection(n),!1):!1},n.prototype.saveCommentTemplate=function(e){var t,n,i,o,r,s,a,l,c;for(n=$(e.target),o=~~n.data("template-id"),s={},a=["title","body","category_id"],i=0,r=a.length;r>i;i++)t=a[i],c=n.find("[name$='["+t+"]']").val(),c&&"category_id"===t&&(c=~~c),s[t]=c;return l=0===o?new GrooveClient.Models.CommentTemplate(s):this.templates.get(o),l.save(s,{success:function(e){return function(){return e.templates.add(l),GrooveClient.trigger("flashMessage",{type:"notice",body:"Canned reply was successfully updated"}),e.removeEditForm(),e.renderTemplates()}}(this),error:function(e,t){return GrooveClient.trigger("flashMessage",{type:"alert",body:t})}}),!1},n.prototype.editCategories=function(){var e;return this.$(".index, .edit-comment-template").hide(),null!=(e=this.categoriesEditor)&&e.remove(),this.categoriesEditor=new GrooveClient.Views.CommentTemplateCategoriesEditor({categories:this.categories}),this.appendChild(this.categoriesEditor),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CommentTemplatePicker=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["comment_templates/picker"],n.prototype.eachTemplate=JST["comment_templates/picker_template"],n.prototype.events={"click .insert a":"clickTemplate"},n.prototype.initialize=function(e){return null==e&&(e={}),this.templates=GrooveClient.data.commentTemplates,this.insertTemplateCallback=e.callback},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this})},n.prototype.renderCommentTemplate=function(e){return this.eachTemplate({template:e})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$(".tabs").tabs(),this},n.prototype.clickTemplate=function(e){var t,n,i;if(null!=this.insertTemplateCallback)return t=$(e.target),(n=t.data("template-id"))&&(i=this.templates.get(n))&&(this.insertTemplateCallback(i),this.close()),!1},n}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CommentEditForm=function(n){function i(){return this.commentSaved=e(this.commentSaved,this),this.commentSaveFailed=e(this.commentSaveFailed,this),this.renderEditor=e(this.renderEditor,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["comments/comment_edit_form"],i.prototype.events={"submit form.comment":"saveComment"},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{view:this,comment:this.model})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.setupErrorForm(),_.defer(this.renderEditor),this},i.prototype.renderEditor=function(){return this.editor=i.__super__.renderEditor.call(this,"comment_body",{height:100})},i.prototype.setupErrorForm=function(){var e;return e=this.$(".box-c-comment-edit").get(0),this.errorForm=new GrooveClient.Views.ErrorForm({el:e})},i.prototype.saveComment=function(){return this.model.save(this.formSerialize(),{wait:!0,success:this.commentSaved,error:this.commentSaveFailed}),!1},i.prototype.commentSaveFailed=function(e,t){return this.errorForm.showErrors(t.responseText)},i.prototype.commentSaved=function(e,t){return $.fancybox.close()},i.prototype.formSerialize=function(){return this.$("form.comment").toObject({skipEmpty:!1})},i.prototype.onSwap=function(){return this.$("#comment_body").val(this.model.get("body"))},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CommentItem=function(n){function i(){return this.editComment=e(this.editComment,this),this.expireEdit=e(this.expireEdit,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/comment_item"],i.prototype.className="box-c-comment",i.prototype.events={"click .edit-comment":"editComment","click .delete-comment":"deleteComment"},i.prototype.initialize=function(e){return this.ticket=e.ticket,null!=this.model.author&&(this.authorView=new GrooveClient.Views.User({model:this.model.author})),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.model.to&&this.listenTo(this.model.to,"change",this.render,this),this.model.author?this.listenTo(this.model.author,"change",this.render,this):void 0},i.prototype.leave=function(){return clearTimeout(this.editExpireTimeout),i.__super__.leave.apply(this,arguments)},i.prototype.renderTemplate=function(){var e;return e=this.model.isForward(),i.__super__.renderTemplate.call(this,{view:this,comment:this.model,authorView:this.authorView,isForward:e,isNote:this.model.isNote(),isMergeComment:this.isMergeComment(),to:e?this._forwardToContext():this._replyToContext(),hasCollaborator:this.model.get("has_collaborator"),rating:this.model.get("rating"),formattedDate:Groove.Util.formattedDateTime(this.model.get("created_at"))})},i.prototype._forwardToContext=function(){var e,t;return this.model.forwardedTo.isEmpty()?this.model.get("forwarding_address"):(t=function(){var t,n,i,o;for(i=this.model.forwardedTo.models,o=[],t=0,n=i.length;n>t;t++)e=i[t].attributes,o.push(e.name||e.email);return o}.call(this),t.join(", "))},i.prototype._replyToContext=function(){return null!=this.model.to?this.model.to.get("name")||this.model.to.get("email"):void 0},i.prototype.isMergeComment=function(){return"MergeComment"===this.model.get("type")},i.prototype.expireEdit=function(){return this.$(".comment-actions").hide()},i.prototype.editComment=function(){var e;return e=new GrooveClient.Views.CommentEditForm({model:this.model}),e.appear(),!1},i.prototype.deleteComment=function(){return confirm("Are you sure you want to delete this note?")?this.model.destroy({wait:!0}):void 0},i.prototype.renderAttachments=function(){var e,t;return e=this.model.attachments,t=new GrooveClient.Views.Attachments({collection:e}),this.replaceWithChild(t,".attachments")},i.prototype.render=function(){var e,t;return i.__super__.render.apply(this,arguments),this.renderAttachments(),this.showRawEmailLink()&&this.renderCommentActions(),t=this.model.type(),this.$el.addClass(t),e=moment(this.model.get("created_at")).add("minutes",15).diff(moment()),this.editExpireTimeout=setTimeout(this.expireEdit,e),this},i.prototype.showRawEmailLink=function(){return this.model.isIncomingEmail()&&!this.model.isAgentResponse()},i.prototype.renderCommentActions=function(){var e,t;return e=[["Show Original","show_original","/raw_emails/"+this.model.get("id")]],null!=(t=this.commentActionsDropDown)&&t.leave(),this.commentActionsDropDown=new GrooveClient.Views.TicketCommentActionsDropDown({name:"comment-actions",selected:!1,options:e}),this.commentActionsDropDown.$el.addClass("last"),this.renderChildInto(this.commentActionsDropDown,".comment-actions-dropdown")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CommentReadAt=function(n){function i(){return this.humanizeReadAt=e(this.humanizeReadAt,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["comments/comment_read_at"],i.prototype.className="TicketCellar",i.prototype.renderTemplate=function(e){return null==e&&(e={}),_.extend(e,{readAt:this.humanizeReadAt(this.model.get("read_at"))}),i.__super__.renderTemplate.call(this,e)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.reRender=setTimeout(this.render,6e4)},i.prototype.leave=function(){return this.reRender&&clearTimeout(this.reRender),i.__super__.leave.apply(this,arguments)},i.prototype.humanizeReadAt=function(e){var t,n,i,o;return t=function(e){return Groove.Util.strftime("%D",e)},(i=function(e){return t(e)===t()})(e)?"Read "+Groove.Util.timeAgo(e):(o=function(n){var i;return i=new Date((new Date).setDate((new Date).getDate()-1)),t(e)===t(i)},n=o(e)?moment(e).format("[yesterday at] hh:mma "):Groove.Util.formattedDateTime(e,"[on]"),"Read "+n)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CompanyContactsSidebar=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="box-c-customer-info",i.prototype.template=JST["contacts/company_contacts_sidebar"],i.prototype.events={"click a[href^=mailto]":function(e){return Groove.Util.handleMailToClick(e)}},i.prototype.render=function(){return this.renderTemplate({people:this.model.people.models}),this},i}(GrooveClient.Support.CompositeView)}.call(this),function(){}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PersonGroupedTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.compositeBind(this.collection,"reset",this.renderTicketItems,this)},n.prototype.render=function(){return this.renderTemplate({person:this.model}),this.renderTicketItems(),this.renderBlankState(),this},n}(GrooveClient.Views.AgentGroupedTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PersonRatings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/person_ratings"],n.prototype.renderTicketItems=function(){var e,t,n,i;t={awesome:"Awesome",ok:"OK",bad:"Not Good"},n=[];for(e in t)i=t[e],n.push(this.renderList({rating:e},i,this.$("."+e)));return n},n.prototype.titlePrefixForTickets=function(e){return n.__super__.titlePrefixForTickets.apply(this,arguments)+" ("+(this.collection.isEmpty()?0:100*Math.round(e.length/this.collection.length,0))+"%)"},n}(GrooveClient.Views.PersonGroupedTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CompanyRatings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/company_ratings"],n.prototype.render=function(){return this.renderTemplate({company:this.model}),this.renderTicketItems(),this.renderBlankState(),this},n}(GrooveClient.Views.PersonRatings)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CompanyRightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.call(this),this.appendView(new GrooveClient.Views.CompanyContactsSidebar({model:this.model}))},n}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PersonGroupedTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.compositeBind(this.collection,"reset",this.renderTicketItems,this)},n.prototype.render=function(){return this.renderTemplate({person:this.model}),this.renderTicketItems(),this.renderBlankState(),this},n}(GrooveClient.Views.AgentGroupedTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PersonTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/person_tickets"],n.prototype.renderTicketItems=function(){var e,t,n,i;e={opened:"Open",follow_up:"Follow Up",pending:"Pending",closed:"Closed"},t=[];for(n in e)i=e[n],t.push(this.renderList({state:n},i,this.$("."+n)));return t},n}(GrooveClient.Views.PersonGroupedTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CompanyTickets=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/company_tickets"],n.prototype.render=function(){return this.renderTemplate({company:this.model}),this.renderTicketItems(),this.renderBlankState(),this},n}(GrooveClient.Views.PersonTickets)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsCompaniesList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/companies_list"],n.prototype.render=function(){return this.renderTemplate({companyCount:this.collection.totalCompanyCount}),this.renderCompanyList(),this.addStyling(),this.makeHeadersSortable(),this.trackVisit(),this},n.prototype.renderCompanyList=function(){var e,t,n,i;for(i=this.collection.models,t=0,n=i.length;n>t;t++)e=i[t],this.appendCompany(e);return this},n.prototype.appendCompany=function(e,t){var n,i;return n=this.$("#companies tbody"),i=new GrooveClient.Views.ContactsCompaniesListItem({model:e}),n.append(i.render().$el)},n.prototype.trackVisit=function(){return this.track("viewed_companies_list",{has_used_contacts:1})},n.prototype.addStyling=function(){var e;return e=this.$("#people tbody tr"),e.filter(":even").addClass("even"),e.filter(":odd").addClass("odd")},n.prototype.makeHeadersSortable=function(){return Groove.Util.stupidTable(this.$("#companies"))},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsCompaniesDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.ContactsCompaniesList,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.id="contacts",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsCompanyInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/company_inspector"],n.prototype.events=function(){return{"click #menu-company-history a":"selectHistoryType","click .nav-back-button":"goHistoryBack"}},n.prototype.initialize=function(){return this.timelineEvents=this.model.timelineEvents,this.agent=GrooveClient.data.currentUser},n.prototype.render=function(){return this.renderTemplate({company:this.model,agent:this.agent}),this.showRecentActivity(),this.initHistory(),this.trackVisit(),this},n.prototype.showRecentActivity=function(){var e,t,n,i,o;if(this.timelineEvents.models.length>0){for(this.$(".company-timeline-events").show(),n=this.timelineEvents.models,i=[],e=0,t=n.length;t>e;e++)o=n[e],i.push(this.appendTimelineEvent(o));return i}return this.noRecentActivity()},n.prototype.noRecentActivity=function(){return this.$(".company-timeline-events").hide()},n.prototype.appendTimelineEvent=function(e){var t;return t=new GrooveClient.Views.TimelineEvent({model:e}),this.$(".company-timeline-events ul.timeline-events").append(t.render().$el)},n.prototype.initHistory=function(){var e,t;return e=this.$("#menu-company-history a:first"),t=e.attr("data-history-type"),this.highlightHistoryMenuItem(e),this.changeHistory(t)},n.prototype.showHistory=function(e,t){return this.renderHistoryItems(e,t)},n.prototype.renderHistoryItems=function(e,t){var n;return n=new t({collection:e,model:this.model}),this.renderChildInto(n,".company-history-content")},n.prototype.showTicketHistory=function(){return this.showHistory(this.model.tickets,GrooveClient.Views.CompanyTickets)},n.prototype.showRatings=function(){return this.showHistory(this.model.ratedTickets,GrooveClient.Views.CompanyRatings)},n.prototype.changeHistory=function(e){switch(e){case"tickets":return this.showTicketHistory();case"ratings":return this.showRatings()}},n.prototype.selectHistoryType=function(e){var t,n;return e.preventDefault(),t=$(e.target),n=t.attr("data-history-type"),this.highlightHistoryMenuItem(t),this.changeHistory(n)},n.prototype.highlightHistoryMenuItem=function(e){var t;return t="selected simple-navigation-active-leaf",this.$("#menu-company-history li").removeClass(t),e.parent("li").addClass(t)},n.prototype.goHistoryBack=function(){return history.back(),!1},n.prototype.trackVisit=function(){return this.track("viewed_company",{has_used_contacts:1})},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsCompanyDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.ContactsCompanyInspector,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.CompanyRightSidebar,n.prototype.id="company",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsCompaniesListItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="company",n.prototype.tagName="tr",n.prototype.template=JST["contacts/companies_list_item"],n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{company:this.model}),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsPeopleDashboardList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/people_dashboard_list"],n.prototype.initialize=function(){return this.listenTo(GrooveClient,"document:scroll",this.documentScroll),this.listenTo(this.collection,"reset",this.renderContactList)},n.prototype.events=function(){return{"click thead th":"sort"}},n.prototype.render=function(){return this.renderTemplate({totalCustomerCount:this.collection.totalCustomerCount}),this.renderContactList(),this.addStyling(),this.trackVisit(),this},n.prototype.renderContactList=function(){var e,t,n,i;for(i=this.collection.models,t=0,n=i.length;n>t;t++)e=i[t],this.appendContact(e);return this},n.prototype.appendContact=function(e,t){var n,i;return n=this.$("#people tbody"),i=new GrooveClient.Views.ContactsPeopleDashboardListItem({model:e}),n.append(i.render().$el)},n.prototype.trackVisit=function(){return this.track("viewed_customer_list",{has_used_contacts:1})},n.prototype.addStyling=function(){var e;return e=this.$("#people tbody tr"),e.filter(":even").addClass("even"),e.filter(":odd").addClass("odd")},n.prototype.makeHeadersSortable=function(){return Groove.Util.stupidTable(this.$("#people"))},n.prototype.documentScroll=function(){return Groove.Util.spaceToBottom()<100&&!$("body").hasClass("fancyboxed")?this.collection.fetchNextPage():void 0},n.prototype.sort=function(e){var t,n;return t=$(e.target).parent("th"),t.length>0?(n=t.hasClass("current"),n&&"asc"===t.attr("sort-direction")?t.attr("sort-direction","desc"):t.attr("sort-direction","asc"),this.collection.sortBy=t.attr("sort-by"),this.collection.sortDirection=t.attr("sort-direction"),this.clearTable(),this.collection.fetchFirstPage(),n?void 0:this.resetHeaders(t)):void 0},n.prototype.clearTable=function(){return this.$("tbody").empty()},n.prototype.resetHeaders=function(e){return e.hasClass("current")?void 0:(this.$("thead th").removeClass("current"),e.addClass("current"))},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsPeopleDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.ContactsPeopleDashboardList,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.id="contacts",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsPeopleDashboardListItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="person",n.prototype.tagName="tr",n.prototype.template=JST["contacts/people_dashboard_list_item"],n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{person:this.model}),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PersonRightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.call(this),this.appendView(new GrooveClient.Views.PersonInfoSidebar({model:this.model})),GrooveClient.data.account.get("prefers_legacy_crm_app_installed")&&this.appendView(new GrooveClient.Views.CustomerApps({enduser:this.model})),this},n}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsPersonInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["contacts/person_inspector"],n.prototype.events=function(){return{"click #menu-person-history a":"selectHistoryType","click .nav-back-button":"goHistoryBack"}},n.prototype.initialize=function(){return this.timelineEvents=this.model.timelineEvents,this.agent=GrooveClient.data.currentUser,this.listenTo(this.model,"change",this.render,this)},n.prototype.render=function(){return this.renderTemplate({person:this.model,agent:this.agent,account:GrooveClient.data.account,avatarUrl:this._avatarUrl()}),this.showRecentActivity(),this.initHistory(),this.trackVisit(),this},n.prototype.showRecentActivity=function(){return this.timelineEvents.fetch({success:function(e){return function(){var t,n,i,o,r;if(e.timelineEvents.models.length>0){for(e.$(".person-timeline-events").show(),i=e.timelineEvents.models,o=[],t=0,n=i.length;n>t;t++)r=i[t],o.push(e.appendTimelineEvent(r));return o}return e.noRecentActivity()}}(this)})},n.prototype.initHistory=function(){var e,t;return e=this.$("#menu-person-history a:first"),t=e.attr("data-history-type"),this.highlightHistoryMenuItem(e),this.changeHistory(t)},n.prototype.showHistory=function(e,t){return e.isEmpty()?e.fetch({success:function(n){return function(){return n.renderHistoryItems(e,t)}}(this)}):this.renderHistoryItems(e,t)},n.prototype.renderHistoryItems=function(e,t){var n;return n=new t({collection:e,model:this.model}),this.renderChildInto(n,".person-history-content")},n.prototype.noRecentActivity=function(){return this.$(".person-timeline-events").hide()},n.prototype.appendTimelineEvent=function(e){var t;return t=new GrooveClient.Views.TimelineEvent({model:e}),this.$(".person-timeline-events ul.timeline-events").append(t.render().$el)},n.prototype.showTicketHistory=function(){return this.showHistory(this.model.profileTickets,GrooveClient.Views.PersonTickets)},n.prototype.showRatingsHistory=function(){return this.showHistory(this.model.ratedTickets,GrooveClient.Views.PersonRatings)},n.prototype.selectHistoryType=function(e){var t,n;return e.preventDefault(),t=$(e.target),n=t.attr("data-history-type"),this.highlightHistoryMenuItem(t),this.changeHistory(n)},n.prototype.changeHistory=function(e){switch(e){case"tickets":return this.showTicketHistory();case"ratings":return this.showRatingsHistory()}},n.prototype.highlightHistoryMenuItem=function(e){var t;return t="selected simple-navigation-active-leaf",this.$("#menu-person-history li").removeClass(t),e.parent("li").addClass(t)},n.prototype.goHistoryBack=function(){return history.back(),!1},n.prototype.trackVisit=function(){return this.track("viewed_customer",{Screen:"Contacts"})},n.prototype._avatarUrl=function(){var e;return e=new GrooveClient.Views.User({model:this.model}),$(e.avatarImage()).prop("src")},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsPersonDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.ContactsPersonInspector,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.PersonRightSidebar,n.prototype.id="person",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ContactsSidebarMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="nav-sec nav-i-contacts",n.prototype.template=JST["contacts/sidebar_menu"],n.prototype.render=function(){return this.renderTemplate()},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.PersonInfoSidebar=function(n){
function i(){return this.editUserInfo=e(this.editUserInfo,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="box-c-customer-info",i.prototype.template=JST["contacts/person_info_sidebar"],i.prototype.events={"click #edit-user-info":"editUserInfo","click a[href^=mailto]":function(e){return Groove.Util.handleMailToClick(e)}},i.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render,this)},i.prototype.render=function(){return this.renderTemplate({person:this.model}),this},i.prototype.editUserInfo=function(){return new GrooveClient.Views.CustomerEditForm({model:this.model}).appear(),!1},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FiltersListMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["filters/filters_list_menu"],n.prototype.className="nav-i-filters",n.prototype.tagName="li",n.prototype.initialize=function(){return this.listenTo(this.collection,"reset",this.render)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.isActive()&&(this.renderFilters(),this.$el.addClass("selected")),this.collection.fetchedTicketCount||this.collection.fetchTicketCount(),this},n.prototype.renderFilters=function(){var e,t,n,i;for(i=this.collection.models,t=0,n=i.length;n>t;t++)e=i[t],e.id&&this.appendFilter(e);return this.highlightSelectedFilter(),this.moveSpam()},n.prototype.appendFilter=function(e){return this.appendChildTo(new GrooveClient.Views.MenuFilter({model:e}),"ul")},n.prototype.highlightSelectedFilter=function(){var e,t,n;return n=GrooveClient.history.fragment,""===n?e=this.$("li[data-filter-id]:first"):(t=n.match(/filters\/(\d+)/))&&(e=this.$("li[data-filter-id="+t[1]+"]")),null!=e?(e.addClass("selected simple-navigation-active-leaf"),e.find("a").addClass("selected")):void 0},n.prototype.moveSpam=function(){var e;return e=this.$("ul"),this.$("li[data-filter-name=Spam]").appendTo(e)},n.prototype.isActive=function(){return!0},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MenuFilter=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["filters/menu_filter"],n.prototype.tagName="li",n.prototype.className="nav-i-custom-filter",n.prototype.attributes=function(){return{"data-filter-id":this.model.id,"data-filter-name":this.model.get("name")}},n.prototype.initialize=function(){return this.listenTo(this.model,"change:num_tickets",this.renderTicketCount)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{filter:this.model})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderTicketCount(),this},n.prototype.renderTicketCount=function(){var e,t,n,i;return this.$("span.num").remove(),n=this.model.get("num_tickets"),!n||(t=null!=(i=this.model.collection)?i.mailbox:void 0,t&&t.isState("unconfirmed","unverified","abandoned"))?void 0:(e=$("<span>",{text:n}).addClass("num"),this.$("span").prepend(e))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.GroupAgents=function(n){function i(){return this.destroyFailure=e(this.destroyFailure,this),this.destroySuccess=e(this.destroySuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["groups/agents"],i.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.groupName=this.model.get("name")},i.prototype.events={"click .delete-group":"destroyGroup","click .nav-back-button":"back"},i.prototype.render=function(){return this.renderTemplate({group:this.model}),this.renderAgentGridItems(),this.setupFancybox(),this},i.prototype.renderAgentGridItems=function(){var e,t,n,i,o;for(i=this.model.users.models,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.appendAgentGridItem(e));return o},i.prototype.appendAgentGridItem=function(e){var t;return t=new GrooveClient.Views.AgentGridItem({model:e}),this.appendChildTo(t,".agents .items")},i.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},i.prototype.back=function(e){return e.preventDefault(),window.history.back()},i.prototype.destroyGroup=function(e){return e.preventDefault(),confirm("Are you sure you want to delete the group "+this.groupName+"?")?(this.model.destroy({wait:!0,success:this.destroySuccess,failure:this.destroyFailure}),!1):void 0},i.prototype.destroySuccess=function(){return GrooveClient.navigate("/groove_client/groups"),GrooveClient.trigger("flashMessage",{type:"notice",body:"The group "+this.groupName+" was successfully deleted."})},i.prototype.destroyFailure=function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"An unexpected error occured while deleting the group "+this.groupName+". Please try again in a few minutes."})},i}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GroupListItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="group item",n.prototype.tagName="tr",n.prototype.template=JST["groups/group_list_item"],n.prototype.initialize=function(){return this.agents=this.model.users.models,this.displayCount=10},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,group:this.model}),this.appendAgentLinks(),this.addDataSortValue(),this},n.prototype.addDataSortValue=function(){var e,t,n,i,o;for(t=this.agents.slice(0,+(this.displayCount-1)+1||9e9),o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(e.get("name"));return this.$("td.agents-list").attr("data-sort-value",o.join(" "))},n.prototype.appendAgentLinks=function(){var e,t,n;return t=this.agents.slice(0,+(this.displayCount-1)+1||9e9),n=function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push("<a href='"+e.agentContactUrl()+"'>"+e.get("name")+"</a>");return o}(),n=n.join(", "),this.agents.length>this.displayCount?n+=" ...":0===this.agents.length&&(n="No Agents Created Yet"),this.$("td.agents-list").append(n)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GroupsList=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["groups/groups_list"],n.prototype.initialize=function(e){return null==e&&(e={}),this.groups=GrooveClient.data.groups.models,this.listenTo(GrooveClient.data.groups,"add remove reset",this.render)},n.prototype.render=function(e){return null==e&&(e={}),this.renderTemplate({groupCount:this.groups.length,archived:this.archived}),this.renderGroupsList(),this.addStyling(),this.makeHeadersSortable(),this.trackVisit(),this},n.prototype.renderGroupsList=function(){var e,t,n,i;for(i=this.groups,t=0,n=i.length;n>t;t++)e=i[t],this.appendGroup(e);return this},n.prototype.appendGroup=function(e,t){var n,i;return n=this.$("#groups tbody"),i=new GrooveClient.Views.GroupListItem({model:e}),n.append(i.render().$el)},n.prototype.trackVisit=function(){return this.track("viewed_groups_list",{Screen:"Contacts"})},n.prototype.addStyling=function(){var e;return e=this.$("#groups tbody tr"),e.filter(":even").addClass("even"),e.filter(":odd").addClass("odd")},n.prototype.makeHeadersSortable=function(){return Groove.Util.stupidTable(this.$("#groups"))},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GroupsListDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.GroupsList,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n.prototype.id="contacts",n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MenuGroup=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["groups/menu_group"],n.prototype.tagName="li",n.prototype.className="nav-i-group",n.prototype.attributes=function(){return{"data-group-id":this.model.id}},n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{group:this.model})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.GroupShow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.GroupAgents,n.prototype.leftSidebar=GrooveClient.Views.ContactsLeftSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.EditorLabel=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["labels/editor_label"],n.prototype.tagName="li",n.prototype.events={"click .delete":"deleteLabel","click .edit":"editLabel","click .cancel":"cancelEdit","change :checkbox":"saveChanges","submit form":"saveChanges"},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{label:this.model})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.updateView(),this},n.prototype.updateView=function(){return this.model.isNew()||this.$el.attr("data-label-id",this.model.id),this.$("[name=public]").attr({checked:this.model.get("public")}),this.$("[name=name]").val(this.model.get("name"))},n.prototype.deleteLabel=function(){return confirm("Are you sure you want to delete this label?")?(this.model.destroy({success:function(e){return function(){return e.remove()}}(this)}),!1):void 0},n.prototype.editLabel=function(){var e;return e=this.model.isNew()?"Create":"Update",this.$el.html(JST["labels/edit_form"]({submitCaption:e})),this.updateView(),this.$("[name=name]").focusPos(),!1},n.prototype.cancelEdit=function(){return this.model.isNew()?(this.model.destroy(),this.$el.trigger("edit:cancel"),this.remove()):this.render(),!1},n.prototype.saveChanges=function(){var e,t;return t={},this.$(":input").each(function(e,n){var i,o;return n=$(n),n.is(":submit")?void 0:(i=n.attr("name"),o=n.is(":checkbox")?n.is(":checked"):n.val(),t[i]=o)}),e=this.model.isNew()?"Label created successfully":t.hasOwnProperty("name")?"Label updated successfully":void 0,this.model.save(t,{global:!1,success:function(t){return function(){return e&&GrooveClient.trigger("flashMessage",{type:"notice",body:e}),t.render()}}(this),error:function(){return GrooveClient.trigger("flashMessage",{type:"alert",body:"Label is not unique"})}}),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Label=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["labels/label"],n.prototype.tagName="a",n.prototype.className="styled-label",n.prototype.attributes=function(){return{href:this.model.path()}},n.prototype.initialize=function(e){var t;return e.trackSelection&&(t=location.href.match(/\/label\/(\d+)/))&&this.model.id===~~t[1]?this.selected=!0:void 0},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{model:this.model}),this.selected&&this.$el.addClass("selected"),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.LabelsEditor=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["labels/editor"],n.prototype.events={"click .create-new-label":"showNewLabelForm","edit:cancel li":"showNewLabelButton"},n.prototype.initialize=function(){return this.$el.data({"view-initialized":!0}),this.collection=new GrooveClient.Collections.Labels,this.listenTo(this.collection,"reset",this.renderLabels),this.listenTo(this.collection,"sync",this.showNewLabelButton),this.collection.fetch({reset:!0})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderLabels(),this},n.prototype.renderLabels=function(){var e;return e=this.$(".labels"),e.empty(),this.collection.each(this.renderLabel,this),e.sortable({axis:"y",update:function(e){return function(t,n){var i,o,r;return o=$(n.item),i=o.data("label-id"),r=e.collection.get(i),null!=r?r.sync("update",r,{processData:!0,data:{label:{row_order_position:o.index()}}}):void 0}}(this)})},n.prototype.renderLabel=function(e){var t;return t=new GrooveClient.Views.EditorLabel({model:e}),this.appendChildTo(t,".labels"),t},n.prototype.showNewLabelForm=function(){var e;return e=new GrooveClient.Models.Label,this.collection.add(e),this.renderLabel(e).editLabel(),this.$(".create-new-label").hide(),!1},n.prototype.showNewLabelButton=function(){return this.$(".create-new-label").show()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MenuMailbox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["mailboxes/menu_mailbox"],n.prototype.className="nav-i-filters",n.prototype.tagName="li",n.prototype.LOADING_SPINNER_PARAMS={lines:9,length:3,width:2,radius:4},n.prototype.initialize=function(e){return null==e&&(e={}),this.active=e.active,this.collection=this.model.filters,this.mainFilter=this.collection.first(),this.listenTo(this.collection,"sync:num_tickets:start",this.showLoadingIndicator),this.listenTo(this.collection,"sync:num_tickets",this.removeLoadingIndicatior),this.listenTo(this.mainFilter,"change:num_tickets",this.showMailboxTicketNum),this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:name",this.render),n.__super__.initialize.apply(this,arguments)},n.prototype.renderTemplate=function(){var e;return e=this.model.get("restricted?")?"restricted":"",n.__super__.renderTemplate.call(this,{mailbox:this.model,klass:e})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.showMailboxTicketNum(),this},n.prototype.showLoadingIndicator=function(){var e;return this.$el.addClass("loading"),e=$("<div>").addClass("loading"),this.$el.append(e),e.spin(this.LOADING_SPINNER_PARAMS)},n.prototype.removeLoadingIndicatior=function(){return this.$(".loading").spin(!1).remove(),this.$el.removeClass("loading"),this.showMailboxTicketNum()},n.prototype.showMailboxTicketNum=function(){var e,t;if(!this.isActive()&&this.model.isState("confirmed","active"))return e=this.$("a.mailbox > span"),e.find(".num").remove(),(t=this.mainFilter.get("num_tickets"))?e.prepend($("<span>",{text:t}).addClass("num")):void 0},n.prototype.isActive=function(){var e,t;return this.active?!0:(t=GrooveClient.history.fragment,""===t?this.model===GrooveClient.data.mailboxes.first():(e=t.match(/^mailboxes\/(\d+)/))?~~e[1]===this.model.id:void 0)},n}(GrooveClient.Views.FiltersListMenu)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SettingsView=function(n){function i(t){this.layout=t.layout,this.mainView=t.mainView,this.leftSidebar=t.leftSidebar,this.selectOptions=e(this.selectOptions,this),this.variablesSelect=e(this.variablesSelect,this),this.hiddenInput=e(this.hiddenInput,this),this.checkbox=e(this.checkbox,this),setTimeout(Groove.UI.tooltips,1),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={'change .toggle-switch input[type="radio"]':"toggleRadio","click a.help.qtip-tipsy":"preventHelpAnchor"},i.prototype.showNotification=function(e){return new GrooveClient.Views.Notification({title:e}).show()},i.prototype.displayErrors=function(e){var t,n,i;i=[];for(t in e)n=e[t],i.push(this.displayError(t,n));return i},i.prototype.displayError=function(e,t){return this.$("#"+e).after("<p class='error-block'>"+t.join(", ")+"</p>").parents("div").parent("div").addClass("error")},i.prototype.clearErrors=function(){return this.$("div.error").removeClass("error"),this.$(".error-block").remove()},i.prototype.toggleRadio=function(e){var t,n;return t=$(e.target),n=t.closest(".toggle-switch").siblings(".toggle"),t.hasClass("toggle-on")?n.show():t.hasClass("toggle-off")?n.hide():void 0},i.prototype.preventHelpAnchor=function(e){return e.preventDefault()},i.prototype.renderFlash=function(e){return new GrooveClient.Views.Notification(e).show()},i.prototype.checkbox=function(e){return e.attributes=this.model.attributes,JST["settings/shared/checkbox"](e)},i.prototype.hiddenInput=function(e){return e.attributes=this.model.attributes,JST["settings/shared/hidden_input"](e)},i.prototype.serializeCheckboxes=function(e){var t;return t={},e.find('input[type="checkbox"]').each(function(e){return function(e,n){var i,o;return i=$(n).attr("name"),o=$(n).is(":checked")?1:0,t[i]=o}}(this)),t},i.prototype.variablesSelect=function(e){return null==e&&(e={}),null==e.variables&&(e.variables=GrooveClient.Views.CommentTemplatesEditor.VARIABLES),JST["settings/shared/variables_select"](e)},i.prototype.selectOptions=function(e){return null==e&&(e={}),JST["settings/shared/select_options"](e)},i.prototype.renderEditor=function(e,t){return null==t&&(t={}),_.extend(t,{bodyId:"settings",width:622}),i.__super__.renderEditor.call(this,e,t)},i}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.WebhookSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="fieldset",n.prototype.id="webhooks",n.prototype.template=JST["settings/api/webhooks"],n.prototype._rowTemplate=JST["settings/api/webhooks/row"],n.prototype._formTemplate=JST["settings/api/webhooks/form"],n.prototype.events={'change select[name="event"]':function(e){var t;return t=$(e.target),this._changeEvent(t)},'keydown input[name="url"]':function(e){return this._form.removeClass("error"),13===e.keyCode?this._create():void 0},'click a[role="create"]':function(e){return e.preventDefault(),this._create()},'click a[role="removeForm"]':function(e){return e.preventDefault(),this._removeForm()},'click a[role="destroy"]':function(e){return e.preventDefault(),confirm("Are you sure?")?this._destroy($(e.target).parent("label.row")):void 0}},n.prototype.initialize=function(e){return this.webhooks=e.webhooks,this.renderFlash=e.renderFlash},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{webhooks:this.webhooks,_rowTemplate:this._rowTemplate})},n.prototype._renderForm=function(e){return this._form=$(this._formTemplate()).appendTo(e)},n.prototype._removeForm=function(e){return this._form?(null==e&&(e=this.$('select[name="event"]')),e.val("blank"),this._form.remove(),delete this._form):void 0},n.prototype._changeEvent=function(e){return"blank"===e.val()?(e.blur(),this._removeForm(e)):(this._form||this._renderForm(e.parent("div")),this._form.find('input[name="url"]').focus())},n.prototype._create=function(){var e,t,n;return n=this._form.parent(),e=n.find('select[name="event"]'),t=$.post("/api/settings/webhooks.json",{event:e.val(),url:this._form.find('input[name="url"]').val()}),t.done(function(i){return function(){return n.before(i._rowTemplate(JSON.parse(t.responseText))),i.renderFlash({title:"Webhook has been created."}),i._removeForm(e)}}(this)),t.fail(function(e){return function(){return e._form.addClass("error")}}(this))},n.prototype._destroy=function(e){var t;return t=$.ajax({type:"DELETE",url:"/api/settings/webhooks/"+e.data("id")+".json"}),t.done(function(t){return function(){var n;return n=t.webhooks,t.webhooks=_.without(n,n[e.data("index")]),e.remove(),t.renderFlash({title:"Webhook has been deleted."})}}(this)),t.fail(function(){return alert("Oops. There was a problem with the server. Please try again.")})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ApiSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/api"],n.prototype.events={'click #third-party-access-tokens a[role="destroy"]':function(e){return e.preventDefault(),confirm("Are you sure?")?this._destroyThirdPartyToken($(e.target).parent("label")):void 0}},n.prototype.initialize=function(e){return this.settings=e.settings},n.prototype.renderTemplate=function(){var e;return e=_.extend({addedBy:function(e){var t;return t=GrooveClient.data.agents.get(e),"(added by "+t.firstNameAndLastInitial()+")"}},this.settings),n.__super__.renderTemplate.call(this,e)},n.prototype.render=function(){var e,t;return n.__super__.render.apply(this,arguments),t=this.$("form.settings"),e=new GrooveClient.Views.WebhookSettings({webhooks:this.settings.webhooks,renderFlash:this.renderFlash}),this.appendChildTo(e,t)},n.prototype._destroyThirdPartyToken=function(e){var t;return t=$.ajax({type:"DELETE",url:"/api/settings/third_party_access_tokens/"+e.data("id")+".json"}),t.done(function(t){return function(){var n;return n=t.settings.thirdParty,t.settings.thirdParty=_.without(n,n[e.data("index")]),t.settings.thirdParty.length?e.remove():t.$("#third-party-access-tokens").remove(),t.renderFlash({title:"Access has been revoked."})}}(this)),t.fail(function(){return alert("Oops. There was a problem with the server. Please try again.")})},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.UserSettingsMenu=function(n){function i(){return this.ticketingLink=e(this.ticketingLink,this),this.cannedReplyCategoryList=e(this.cannedReplyCategoryList,this),this.mailboxList=e(this.mailboxList,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["shared/sidebars/user_settings_menu"],i.prototype.id="menu",i.prototype.className="nav-sec",i.prototype.events={"click a.new-user":GrooveClient.Views.InviteAgent.invite,"click a.new-group":"newGroup"},i.prototype.initialize=function(e){return null==e&&(e={}),this.agent=GrooveClient.data.currentUser,this.mailboxes=e.mailboxes,this.mailboxId=e.mailbox_id,this.cannedReplyCategories=e.cannedReplyCategories,this.otherApps=GrooveClient.data.account.otherApps(),this._navpath=e.navpath||GrooveClient.history.fragment},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{agent:this.agent,sectionState:this.sectionState,mailboxList:this.mailboxList,cannedReplyCategoryList:this.cannedReplyCategoryList,mailboxes:this.mailboxes,ticketingLink:this.ticketingLink,otherApps:this.otherApps}),this._markSelectedNavigation()},i.prototype._markSelectedNavigation=function(e){var t;return e=e||this._navpath,e=this.handleSpecialNavigationCase(e),t=this.$('a[href$="'+e+'"]'),t.parents("li.selectable").addClass("selected")},i.prototype.handleSpecialNavigationCase=function(e){return e&&e.match("settings/widget")?"settings/widget":e},i.prototype.mailboxList=function(e){return null==e&&(e={}),this.mailboxes?(e.mailboxes=this.mailboxes.sortBy(function(e){return e.get("name")}),e.selected_mailbox_id=this.mailboxId,e.templateName||(e.templateName="shared/sidebars/settings/mailbox_list"),JST[e.templateName](e)):void 0},i.prototype.newGroup=function(e){var t;return t=this.$(e.target),e.preventDefault(),t.data("has-fancybox")?void 0:(t.fancybox(Groove.Fancybox.params.one),t.data("has-fancybox",!0),t.trigger("click"))},i.prototype.cannedReplyCategoryList=function(e){return null==e&&(e={}),this.cannedReplyCategories?(e.categories=this.cannedReplyCategories.sortBy(function(e){return e.get("name")}),JST["shared/sidebars/settings/canned_reply_category_list"](e)):void 0},i.prototype.ticketingLink=function(){return this.agent.isAdmin()?"/groove_client/settings/mailboxes":"/groove_client/settings/ticketing/canned-replies"},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsSidebar=function(t){function n(){this.intialArguments=arguments,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-left",n.prototype.render=function(){return this.appendChild(function(e,t,n){n.prototype=e.prototype;var i=new n,o=e.apply(i,t);return Object(o)===o?o:i}(GrooveClient.Views.UserSettingsMenu,this.intialArguments,function(){})),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsBillingLayout=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.BillingSummary,n.prototype.leftSidebar=GrooveClient.Views.SettingsSidebar,n.prototype.rightSidebar=GrooveClient.Views.BillingRightSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsBillingAccount=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/billing_account"],n.prototype.events={"submit form.settings":"save","click .cancel-account":"cancelAccount"},n.prototype.initialize=function(e){return null==e&&(e={}),this.account=GrooveClient.data.account,this.agents=GrooveClient.data.agents,this.activeUsers=this.agents.where({archived:!1})},n.prototype.save=function(e){var t,n;return e.preventDefault(),t=this.$("#owner").val(),n=this.agents.get(t),n&&confirm("Are you sure you want to make "+n.get("name")+" the owner?")?n.save({json:{role:"owner"}},{wait:!0,success:function(){return GrooveClient.navigate("/groove_client/settings",{replace:!0}),GrooveClient.trigger("reload")}}):void 0},n.prototype.cancelAccount=function(e){return e.preventDefault(),confirm("Are you sure you want to cancel your account? You won't be able to access it anymore.")?this.account.close():!1},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{activeUsers:this.activeUsers})},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.EmailMarketingIntegration=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={'click input[role="update-mailbox-setting"]':function(e){return this.updateMailboxSetting($(e.currentTarget))},'click a[role="uninstall"]':function(e){return e.preventDefault(),this.uninstallApp()}},n.prototype.renderTemplate=function(){var e,t;return e={},e.mailboxes=function(){var e,n,i,o;for(i=GrooveClient.data.mailboxes.models,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this._mailboxContext(t));return o}.call(this),n.__super__.renderTemplate.call(this,e)},n.prototype._mailboxContext=function(e){var t;return t={id:e.id,name:e.get("name"),email:e.get("email"),settings:this.model.mailboxSettings.getByMailboxId(e.id)},t.isSelected=null!=t.settings,t},n.prototype.updateMailboxSetting=function(e){return e.is(":checked")?this.addMailbox(e.val()):this.removeMailbox(e.val())},n.prototype.addMailbox=function(e){return this.model.mailboxSettings.create({mailbox_id:e})},n.prototype.removeMailbox=function(e){return this.model.mailboxSettings.getByMailboxId(e).destroy()},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CampaignMonitorSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/campaign_monitor"],n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/campaign_monitor.json",type:"delete"}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("campaign_monitor",!1),GrooveClient.navigate("/groove_client/apps/campaign-monitor"),e.showNotification("Campaign Monitor successfully uninstalled.")}}(this))},n}(GrooveClient.Views.EmailMarketingIntegration)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CannedRepliesSettings=function(n){function i(){return this.deleteCannedReplyCategory=e(this.deleteCannedReplyCategory,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/canned_replies"],i.prototype.events={"click a.delete":function(e){var t;return e.preventDefault(),t=$(e.target),this.deleteCannedReply(t.attr("data-canned-reply-id"))},"click #delete-category":function(e){var t;return e.preventDefault(),confirm("Are you sure you want to delete this category and all it's canned replies?")?(t=$(e.target),this.deleteCannedReplyCategory(parseInt(t.attr("data-category-id")))):void 0}},i.prototype.initialize=function(e){var t;return null==e&&(e={}),this.cannedReplies=e.cannedReplies,this.cannedReplyCategories=e.cannedReplyCategories,this.categoryId=e.categoryId,this.categoryId&&(t=this.cannedReplyCategories.get(this.categoryId),this.listenTo(t,"change:name",this._propagateCategoryNameChange)),
this.listenTo(this.cannedReplies,"add remove reset",this.render)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{categoryId:this.categoryId,cannedReplies:this.cannedReplies.sortBy(function(e){return e.get("title")})}),this._setupEditInPlace()},i.prototype._setupEditInPlace=function(){var e,t;return(e=null!=(t=this.cannedReplyCategories)?t.findWhere({id:parseInt(this.categoryId)}):void 0)?new GrooveClient.Support.EditInPlaceView({el:this.$("#category-name-label"),model:e,attribute:"name"}).render():void 0},i.prototype._propagateCategoryNameChange=function(e,t){var n;return n=GrooveClient.data.commentTemplateCategories.get(e.id),n.set("name",t),$("#menu .canned-reply-categories .selected a").text(t)},i.prototype.deleteCannedReply=function(e){var t;return(t=this.cannedReplies.findWhere({id:parseInt(e)}))?t.destroy({success:function(e){return function(){return e.cannedReplies.remove(t),e.renderFlash({title:"Canned Reply was successfully removed"})}}(this)}):void 0},i.prototype.deleteCannedReplyCategory=function(e){var t;return(t=this.cannedReplyCategories.findWhere({id:e}))?t.destroy({success:function(n){return function(){return n.cannedReplyCategories.remove(t),n.renderFlash({title:"Canned Reply Category was successfully removed"}),GrooveClient.data.commentTemplateCategories.remove(e),GrooveClient.data.commentTemplates.remove(n.cannedReplies.map(function(e){return e.id})),GrooveClient.navigate("/groove_client/settings/ticketing/canned-replies",{trigger:!0})}}(this)}):void 0},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CategoriesSelect=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/canned_replies/categories_select"],n.prototype.id="reply-categories",n.prototype.tagName="fieldset",n.prototype.events={"change #categories-select":function(e){var t;return t=$(e.target).find("option:selected"),"new-category"===t.attr("id")?(e.preventDefault(),this.showNewCategory()):void 0},"click #cancel-new-category":function(e){return e.preventDefault(),this.showCategories()}},n.prototype.initialize=function(e){return null==e&&(e={}),this.categoryId=e.categoryId},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{categories:this.collection.sortBy(function(e){return e.get("title")}),categoryId:this.categoryId})},n.prototype.showNewCategory=function(){return this.categoryField=this.$("#category-field").hide(),this.newCategoryField=this.$("#new-category-field").show().find("input").focus().end()},n.prototype.showCategories=function(){return this.newCategoryField.hide().find("input").val(""),this.resetSelect(),this.categoryField.show()},n.prototype.resetSelect=function(){return this.categoryField.find("option").removeAttr("selected").end().find("option[value='"+this.categoryId+"']").attr("selected","selected").change()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CannedReplySettings=function(n){function i(){return this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),this.serializeForm=e(this.serializeForm,this),this.renderEditor=e(this.renderEditor,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/canned_reply"],i.prototype.events=function(){return{"submit form.settings":function(e){return e.preventDefault(),this.saveCannedReply($(e.target))},"change .variable-inserter":"insertVariable","click .cancel-save":function(e){return e.preventDefault(),this.navigateToList()}}},i.prototype.initialize=function(e){return null==e&&(e={}),this.collection=e.cannedReplyCategories},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderCategories(),_.defer(this.renderEditor)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,variablesSelect:this.variablesSelect})},i.prototype.renderCategories=function(){var e,t;return e=this.model.get("category_id"),t=new GrooveClient.Views.CategoriesSelect({collection:this.collection,categoryId:e,variablesSelect:this.variablesSelect}),this.replaceWithChild(t,this.$("fieldset#reply-categories"))},i.prototype.renderEditor=function(){return this.editor=i.__super__.renderEditor.call(this,"canned-reply-body",{height:400})},i.prototype.saveCannedReply=function(e){return this.model.attributes=this.serializeForm(e),this.firstSave=this.model.isNew(),this.model.save({},{wait:!0,success:this.handleSuccess,error:this.handleFailure})},i.prototype.serializeForm=function(e){var t,n;return n=e.toObject({skipEmpty:!1}),n=(null!=(t=n.category)?t.name:void 0)?_.omit(n,"category_id"):_.omit(n,"category"),_.omit(n,"insert-subject")},i.prototype.handleSuccess=function(){var e,t;return e=GrooveClient.data.commentTemplates,this.firstSave?(this.renderFlash({title:"Your new canned reply was created."}),e.add(_.extend({id:this.model.id},this.model.attributes)),GrooveClient.data.commentTemplateCategories.add(this.model.cannedReplyCategories.models)):(this.renderFlash({title:"Your canned reply has been updated."}),t=e.get(this.model.id),t.attributes=this.model.attributes),this.navigateToList()},i.prototype.handleFailure=function(e,t){var n;return this.clearErrors(),n=$.parseJSON(t.responseText).errors,this.displayErrors(n)},i.prototype.insertVariable=function(e){var t,n;return t=$(e.target),(n=t.val())?(t.val(""),$.uniform.update(t),this.editor.insertText("%{"+n+"}")):!1},i.prototype.navigateToList=function(){return GrooveClient.navigate("/groove_client/settings/ticketing/canned-replies",{trigger:!0})},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CompanySettings=function(n){function i(){return this.saveFailure=e(this.saveFailure,this),this.saveSuccess=e(this.saveSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/company"],i.prototype.events={"submit form.settings":"save"},i.prototype.initialize=function(e){return null==e&&(e={}),this.timezones=GrooveClient.data.timezones,this.showBusinessHours=!1},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.selectCurrentTimezone(),this.selectBusinessHoursRange(),this.markBusinessDaysChecked(),_.defer(function(){return this.$("input#name").focus()})},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,timezones:this.timezones,showBusinessHours:this.showBusinessHours})},i.prototype.save=function(e){return e.preventDefault(),this.clearErrors(),this.model.save(this.formSerialize(),{wait:!0,success:this.saveSuccess,error:this.saveFailure})},i.prototype.saveSuccess=function(e){return e.has("redirect")?window.location=e.get("redirect"):this.renderFlash({title:"Your company profile has been updated."})},i.prototype.saveFailure=function(e,t){var n;return n=$.parseJSON(t.responseText).errors,this.displayErrors(n)},i.prototype.formSerialize=function(){return this.$("form.settings").toObject({skipEmpty:!1})},i.prototype.selectCurrentTimezone=function(){var e;return e=this.model.get("timezone"),this.$("#timezone").find("option[value='"+e+"']").attr("selected",!0)},i.prototype.selectBusinessHoursRange=function(){return this.$("#business_day_starts_at").val(this.model.get("business_day_starts_at")),this.$("#business_day_ends_at").val(this.model.get("business_day_ends_at"))},i.prototype.markBusinessDaysChecked=function(){return this.model.get("business_day_0")&&this.$("#business_day_0").attr("checked","checked"),this.model.get("business_day_1")&&this.$("#business_day_1").attr("checked","checked"),this.model.get("business_day_2")&&this.$("#business_day_2").attr("checked","checked"),this.model.get("business_day_3")&&this.$("#business_day_3").attr("checked","checked"),this.model.get("business_day_4")&&this.$("#business_day_4").attr("checked","checked"),this.model.get("business_day_5")&&this.$("#business_day_5").attr("checked","checked"),this.model.get("business_day_6")?this.$("#business_day_6").attr("checked","checked"):void 0},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ConstantContactSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/constant_contact"],n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/constant_contact.json",type:"delete"}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("constant_contact",!1),GrooveClient.navigate("/groove_client/apps/constant-contact"),e.showNotification("Constant Contact successfully uninstalled.")}}(this))},n}(GrooveClient.Views.EmailMarketingIntegration)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.FolderSetting=function(n){function i(){return this.saveError=e(this.saveError,this),this.saveSuccess=e(this.saveSuccess,this),this.pageTitle=e(this.pageTitle,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/folder"],i.prototype.events={"submit form.settings":function(e){var t;return e.preventDefault(),t=this.formData(this.$(e.target)),this.save(t)},"click .cancel-save":function(e){return e.preventDefault(),this.navigateToList()}},i.prototype.initialize=function(e){return null==e&&(e={}),this.isNewModel()},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderConditions(),this.renderPermissions(),this.accountGroupsFiltersByMailbox()?this.renderMailboxes():void 0},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{pageTitle:this.pageTitle,model:this.model})},i.prototype.pageTitle=function(){return this.isNewModel()?"New Folder":"Edit Folder"},i.prototype.formData=function(e){var t;return t=e.toObject(),null==t.mailbox_ids&&(t.mailbox_ids=[]),null==t.user_ids&&(t.user_ids=[]),null==t.group_ids&&(t.group_ids=[]),t},i.prototype.renderPermissions=function(){var e;return e=new GrooveClient.Views.Permissions({model:this.model}),this.replaceWithChild(e,this.$(".folder-permissions"))},i.prototype.renderConditions=function(){var e;return e={selectOptions:this.selectOptions,model:this.model},this.conditionsView=new GrooveClient.Views.FolderConditions(e),this.replaceWithChild(this.conditionsView,this.$(".folder-conditions"))},i.prototype.renderMailboxes=function(){var e;return e={selectOptions:this.selectOptions,model:this.model},this.mailboxesView=new GrooveClient.Views.FolderMailboxes(e),this.replaceWithChild(this.mailboxesView,this.$(".folder-mailboxes"))},i.prototype.accountGroupsFiltersByMailbox=function(){return GrooveClient.data.account.get("prefers_grouping_filters_by_mailbox")},i.prototype.save=function(e){return this.clearErrors(),this.conditionsView.removeEmpty(),this.model.save(e,{wait:!0,success:this.saveSuccess,error:this.saveError})},i.prototype.saveSuccess=function(){var e;return this.isNewModel()?(e="The folder "+this.model.get("name")+" was created successfully.",this.isNewModel("reset")):e="Your folder has been updated",this.resetFiltersData(),this.renderFlash({title:e}),this.navigateToList()},i.prototype.saveError=function(e,t){var n;return this.clearErrors(),n=$.parseJSON(t.responseText).errors,this.displayErrors(n)},i.prototype.isNewModel=function(e){return e&&(this._isNewModel=this.model.isNew()),this._isNewModel||(this._isNewModel=this.model.isNew())},i.prototype.resetFiltersData=function(){return GrooveClient.trigger("filters:update")},i.prototype.navigateToList=function(){return GrooveClient.navigate("/groove_client/settings/ticketing/folders",{trigger:!0})},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FolderCondition=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/folders/condition"],n.prototype.className="sentence short separated condition-row",n.prototype.tagName="div",n.prototype.events={"change select.condition-parameter":function(e){return e.preventDefault(),this.updateSelectOptions()},"click .delete":function(e){return e.preventDefault(),this.destroy()}},n.prototype.initialize=function(e){return null==e&&(e={}),this.variables=e.variables,this.selectOptions=e.selectOptions,this.conditionsIndex=e.conditionsIndex,this.autocompletedInputs={labels:GrooveClient.data.labels}},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$parameter=this.$(".condition-parameter"),this.$operator=this.$(".condition-operator"),this.$selectvalue=this.$("select.condition-value"),this.$inputvalue=this.$("input.condition-value"),_.defer(function(e){return function(){return e.updateSelectOptions()}}(this))},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{model:this.model,variables:this.variables,selectOptions:this.selectOptions,conditionsIndex:this.conditionsIndex})},n.prototype.updateSelectOptions=function(){var e;return this.hideSelects(),this.$inputvalue.data("autocomplete")&&this.destroyAutocomplete(),this.parameter()&&(this.updateOperatorOptions(),this.updateValueOptions(),(e=this.autocompletedInputs[this.parameter()])&&(e.isEmpty()||this.setupAutocompleteForInputs(e)),this.showSelects()),this.$("select").uniform()},n.prototype.hideSelects=function(){return this.$operator.val("").closest(".selector").hide(),this.$selectvalue.val("").hide().closest(".selector").hide(),this.$inputvalue.val("").hide()},n.prototype.updateOperatorOptions=function(){var e;return this.$operator.html(this.selectOptions({options:this.getOperatorOptions(),selected:null!=(e=this.model)?e.operator:void 0}))},n.prototype.updateValueOptions=function(){var e,t,n,i;switch(this.valueType()){case"select":return this.$selectvalue.html(this.selectOptions({options:this.getValueOptions(),selected:null!=(e=this.model)?e.value:void 0})),this.$inputvalue.val("");case"input":return this.$selectvalue.html(""),i=(null!=(t=this.model)?t.param:void 0)===this.parameter()?null!=(n=this.model)?n.value:void 0:"",this.$inputvalue.val(i)}},n.prototype.showSelects=function(){return this.$operator.show().closest(".selector").show(),"select"===this.valueType()&&this.$selectvalue.show().closest(".selector").show(),"input"===this.valueType()?this.$inputvalue.show():void 0},n.prototype.valueType=function(){return""===this.getValueOptions()?"input":"select"},n.prototype.getOperatorOptions=function(){return this.variables.get("param_operators")[this.parameter()]},n.prototype.getValueOptions=function(){return this.variables.get("values")[this.parameter()]},n.prototype.parameter=function(){return this.$parameter.val()},n.prototype.isEmpty=function(){return!this.parameter()},n.prototype.destroy=function(){return this.$(".condition-id").val()?this.markForDestroy():this.remove()},n.prototype.markForDestroy=function(){return this.model._destroy=!0,this.$(".condition-destroy").val(!0),this.$el.hide().addClass("destroy")},n.prototype.destroyAutocomplete=function(){return this.$inputvalue.autocomplete("destroy"),this.$inputvalue.removeData("autocomplete")},n.prototype.setupAutocompleteForInputs=function(e){return this.$inputvalue.autocomplete({source:e.pluck("name")})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FolderConditions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/folders/conditions"],n.prototype.events={"click #add-condition":function(e){return e.preventDefault(),this.addCondition()},dblclick:function(e){return this.removeEmpty()}},n.prototype["class"]="folder-conditions",n.prototype.tagName="fieldset",n.prototype.initialize=function(e){return null==e&&(e={}),this.variables=new GrooveClient.Models.FolderVariables,this.selectOptions=e.selectOptions,this.conditionsIndex=0,this.conditions=[]},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.variables.fetch({success:function(e){return function(){return e.renderConditions(),e.$("select").uniform()}}(this)})},n.prototype.renderTemplate=function(){var e,t;return e={options:[{value:"any",name:"Any"},{value:"all",name:"All"}],selected:null!=(t=this.model.get("match_type"))?t.toLowerCase():void 0},n.__super__.renderTemplate.call(this,{model:this.model,matchTypeOptions:this.selectOptions(e)})},n.prototype.renderConditions=function(){var e,t,n,i,o,r;if(this.hasNoConditions())return this.addCondition();for(o=this.model.get("filter_conditions_attributes"),r=[],t=0,n=o.length;n>t;t++)e=o[t],i={variables:this.variables,conditionsIndex:this.conditionsIndex,model:e},r.push(this.addCondition(i));return r},n.prototype.addCondition=function(e){var t;return null==e&&(e={}),e=_.extend({variables:this.variables,conditionsIndex:this.conditionsIndex,selectOptions:this.selectOptions},e),t=new GrooveClient.Views.FolderCondition(e),this.appendChildBefore(t,this.$("#add-condition-container")),this.conditions[this.conditionsIndex]=t,this.conditionsIndex++},n.prototype.removeEmpty=function(){return this.conditions=_.filter(this.conditions,function(e){return _.isEmpty(e)?!1:e.isEmpty()||e.$el.is(":not(:visible)")?(e.remove(),!1):!0})},n.prototype.hasNoConditions=function(){return this.model.isNew()||0===this.model.get("filter_conditions_attributes").length},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FolderMailboxes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/folders/folder_mailboxes"],n.prototype.tagName="fieldset",n.prototype["class"]="folder-mailboxes",n.prototype.initialize=function(e){null==e&&(e={})},n.prototype.renderTemplate=function(){var e;return e=this.prepareColumns(),n.__super__.renderTemplate.call(this,{columns:e})},n.prototype.sliceIntoGroupings=function(e,t){var n,i,o;for(null==t&&(t=1),n=_.clone(e),o=Math.ceil(n.length/t),i=[];n.length>0;)i.push(n.splice(0,o));return i},n.prototype.prepareColumns=function(){var e,t,n,i,o,r,s,a,l,c;for(i=this.sliceIntoGroupings(GrooveClient.data.mailboxes.models,3),t=[],r=0,a=i.length;a>r;r++){for(n=i[r],e=[],s=0,l=n.length;l>s;s++)c=n[s],o={id:c.id,input_id:"mailbox_"+c.id,checked:_.contains(this.model.get("mailbox_ids"),c.id)||this.model.isNew()?"checked":!1,name:c.get("name")},e.push(o);t.push(e)}return t},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.FolderSettings=function(n){function i(){return this.updateRowOrder=e(this.updateRowOrder,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/folders"],i.prototype.events={"click .toggle":function(e){return e.preventDefault(),this.toggleActive(this.folder(e))},"click .delete":function(e){return e.preventDefault(),this.trash(this.folder(e))}},i.prototype.initialize=function(e){return null==e&&(e={}),this.listenTo(this.collection,"add remove reset",this.render)},i.prototype.initDragAndDrop=function(){return this.$(".folders").sortable({axis:"y",opacity:.5,items:".folder",update:this.updateRowOrder})},i.prototype.updateRowOrder=function(e,t){var n,i;return(n=this.folder(e))?(i=t.item.index(),n.save({row_order_position:i},{success:function(e){return function(){return e.resetFiltersData()}}(this)})):void 0},i.prototype.folder=function(e){var t;return t=this.$(e.target).closest(".folder").data("id"),this.collection.get(t)},i.prototype.toggleActive=function(e){var t;if(e)return t=!e.get("active"),e.save({active:t},{success:function(e){return function(){return e.resetFiltersData(),e.render()}}(this)})},i.prototype.trash=function(e){return e?e.destroy({success:function(e){return function(){return e.resetFiltersData(),e.renderFlash({title:"Folder was successfully removed"})}}(this),error:function(e){return function(t,n,i){return e.renderFlash({title:"Folder could not be saved"})}}(this)}):void 0},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.initDragAndDrop()}}(this))},i.prototype.renderTemplate=function(){var e,t;return e=0,t=this.collection.sortBy(function(t){return t.get("active")&&(e+=1),t.get("row_order")}),i.__super__.renderTemplate.call(this,{folders:t,activeFolderCount:e,pageTitle:this.pageTitle})},i.prototype.resetFiltersData=function(){return GrooveClient.trigger("filters:update")},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsIndexMain=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/index"],n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{otherApps:GrooveClient.data.account.otherApps()})},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.NoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.SettingsIndexMain,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.LabelSettings=function(n){function i(){return this.pageTitle=e(this.pageTitle,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/labels"],i.prototype.events={"click a.delete":function(e){var t;return e.preventDefault(),t=$(e.target),this.deleteLabel(t.attr("data-label-id"))}},i.prototype.initialize=function(e){return null==e&&(e={}),this.labels=e.labels,this.mailboxes=e.mailboxes,this.mailbox_id=e.mailbox_id,this.listenTo(this.labels,"add remove reset",this.render)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{labels:this.labels.sortBy(function(e){return e.get("name")}),pageTitle:this.pageTitle})},i.prototype.deleteLabel=function(e){var t;return(t=this.labels.findWhere({id:parseInt(e)}))?t.destroy({success:function(e){return function(){return e.clearLabelsGlobally(t),e.renderFlash({title:"Label was successfully removed"})}}(this)}):void 0},i.prototype.pageTitle=function(){var e;return(e=this.mailboxes.findWhere({id:parseInt(this.mailbox_id)}))?e.get("name")+" Labels":"All Labels"},i.prototype.clearLabelsGlobally=function(e){return this.labels.remove(e),GrooveClient.data.labels.remove(e)},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsLayout=function(t){function n(e){this.mainView=e.mainView,delete e.mainView,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.leftSidebar=GrooveClient.Views.SettingsSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MailChimpSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/mail_chimp"],n.prototype.uninstallApp=function(){return $.ajax({url:"/email_marketing/integrations/mail_chimp.json",type:"delete"}).done(function(e){return function(){return GrooveClient.data.account.setEmailMarketingPreferences("mail_chimp",!1),GrooveClient.navigate("/groove_client/apps/mail-chimp"),e.showNotification("MailChimp successfully uninstalled.")}}(this))},n}(GrooveClient.Views.EmailMarketingIntegration)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MailboxPermissions=function(n){function i(){return this.restrictionSelect=e(this.restrictionSelect,this),this.inArray=e(this.inArray,this),this.renderPermissions=e(this.renderPermissions,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/mailbox/permissions"],i.prototype.id="mailbox-permissions",i.prototype.tagName="fieldset",i.prototype.events=function(){return{"change #restriction_type":function(e){return this.renderPermissions($(e.target).val())}}},i.prototype.initialize=function(){return this.restrictionType=this.model.get("restriction_type")},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.permissions=this.$("#permissions"),this.renderPermissions(this.restrictionType),1===GrooveClient.data.agents.length&&this.$el.hide(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{restrictionSelect:this.restrictionSelect})},i.prototype.renderEveryone=function(){return this.permissions.html(JST["settings/mailbox/everyone"])},i.prototype.renderMe=function(){var e;return e=GrooveClient.data.currentUser.id,this.permissions.html(JST["settings/mailbox/me"]({agentID:e}))},i.prototype.renderAgents=function(){var e,t,n,i,o,r;return o="settings/mailbox/users",r="user",n="group",e=this.agents(),t=this.inGroupsOf(e.length/3,e),i=this.model.get("user_ids"),this.renderGrouping({templateName:o,hiddenType:n,groupings:t,ids:i,inArray:this.inArray})},i.prototype.renderGroups=function(){var e,t,n,i,o,r;return o="settings/mailbox/groups",r="group",n="user",t=this.groups(),e=this.inGroupsOf(t.length/3,t),i=this.model.get("group_ids"),this.renderGrouping({templateName:o,hiddenType:n,groupings:e,ids:i,inArray:this.inArray})},i.prototype.renderGrouping=function(e){return null==e&&(e={}),this.permissions.html(JST[e.templateName](e))},i.prototype.renderPermissions=function(e){switch(e){case"everyone":return this.renderEveryone();case"me":return this.renderMe();case"group":return this.renderGroups();case"users":return this.renderAgents()}},i.prototype.groups=function(){var e;return e=GrooveClient.data.groups.sortBy(function(e){return e.get("name")}),e.map(function(e){return{id:e.id,name:e.get("name")}})},i.prototype.agents=function(){var e;return e=GrooveClient.data.agents.sortBy(function(e){return e.get("name")}),e.map(function(e){return{id:e.id,name:e.get("name")}})},i.prototype.inGroupsOf=function(e,t){var n,i;for(e=Math.ceil(e),i=[],n=0;n<t.length;)i.push(t.slice(n,n+e)),n+=e;return i},i.prototype.inArray=function(e,t){return _.indexOf(e,t)>-1},i.prototype.restrictionSelect=function(e){return null==e&&(e={}),e.restrictionType=this.restrictionType,e.restrictionOptions={everyone:"Everyone",me:"Only Me",users:"Selected Users"},GrooveClient.data.groups.isEmpty()||(e.restrictionOptions.group="Selected Group"),JST["settings/mailbox/restriction_select"](e)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MailboxAutoReply=function(n){function i(){return this.templateContentStyles=e(this.templateContentStyles,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/mailbox/auto_reply"],i.prototype.id="mailbox-auto-reply",i.prototype.tagName="fieldset",i.prototype.events=function(){return{'click input[name="email_template.state"]':function(e){return this.toggleAutoReplyContent($(e.target))}}},i.prototype.initialize=function(e){return null==e&&(e={}),this.emailTemplate=this.model.get("email_template"),this.body_variables=this.model.get("auto_reply_body_variables"),this.subject_variables=this.model.get("auto_reply_subject_variables"),this.variablesSelect=e.variablesSelect},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{emailTemplate:this.emailTemplate,autoReplyIsOn:this.autoReplyIsOn,templateContentStyles:this.templateContentStyles,variablesSelect:this.variablesSelect,subject_variables:this.subject_variables,body_variables:this.body_variables})},i.prototype.autoReplyIsOn=function(){var e;return"enabled"===(null!=(e=this.emailTemplate)?e.state:void 0)?!0:!1},i.prototype.toggleAutoReplyContent=function(e){var t;return t=this.$("div.toggle"),"enabled"===e.val()?t.show():t.hide()},i.prototype.templateContentStyles=function(){return this.autoReplyIsOn()?!1:"display: none"},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MailboxSettings=function(n){function i(){return this.pageTitle=e(this.pageTitle,this),this.deleteError=e(this.deleteError,this),this.deleteSuccess=e(this.deleteSuccess,this),this.deleteMailbox=e(this.deleteMailbox,this),this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),this.saveMailbox=e(this.saveMailbox,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/mailbox"],i.prototype.events={"submit form.settings":function(e){return e.preventDefault(),this.saveMailbox($(e.target))},"click .delete-mailbox":function(e){return this.deleteMailbox($(e.target))},"click #setup-mailbox":function(e){return e.preventDefault(),this.setupMailbox()},'change select[data-target="signature"]':function(e){return this.insertVariable(e,this.signatureEditor)},'change select[data-target="email_template.body"]':function(e){return this.insertVariable(e,this.autoReplyEditor)},"change #email":function(e){return GrooveClient.trigger("mailbox_settings:email_changed",$(e.target).val())}},i.prototype.initialize=function(e){return this.mailboxes=e.mailboxes,this.listenTo(this.mailboxes,"change",this.renderFromMailboxUpdate)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),
GrooveClient.data.mailboxes.length>0&&!this.model.get("oauth")?this.renderSmtpSettings():this.$("#smtp-settings").remove(),this.renderPermissions(),this.renderAutoreply(),this.renderAutoBccEmailAddress(),_.defer(function(e){return function(){return e.signatureEditor=e.renderEditor("email-signature-body",{height:100}),e.autoReplyEditor=e.renderEditor("template-body",{height:300})}}(this)),this},i.prototype.renderTemplate=function(){return this.useAgentName=this.model.get("use_agent_name"),this.needsSetup=this._needsSetup(),this.isFirstMailbox=this.mailboxes.isEmpty(),i.__super__.renderTemplate.call(this,{model:this.model,useAgentName:this.useAgentName,isFirstMailbox:this.isFirstMailbox,pageTitle:this.pageTitle,variablesSelect:this.variablesSelect,mailboxes:this.mailboxes,needsSetup:this.needsSetup})},i.prototype.renderSmtpSettings=function(){return this.smtpView=new GrooveClient.Views.OutgoingEmailServerSettings({model:this.model}),this.replaceWithChild(this.smtpView,this.$("#smtp-settings"))},i.prototype.renderPermissions=function(){var e;return e=new GrooveClient.Views.Permissions({model:this.model}),this.replaceWithChild(e,this.$("#mailbox-permissions"))},i.prototype.renderAutoreply=function(){var e;return e=new GrooveClient.Views.MailboxAutoReply({model:this.model,variablesSelect:this.variablesSelect}),this.replaceWithChild(e,this.$("#mailbox-auto-reply"))},i.prototype.renderAutoBccEmailAddress=function(){var e;return e=new GrooveClient.Views.MailboxAutoBccEmailAddress({model:this.model}),this.replaceWithChild(e,this.$("#mailbox-auto-bcc-address"))},i.prototype.renderFromMailboxUpdate=function(){return this.$("#email").val()!==this.model.get("email")&&this.$("#email").val(this.model.get("email")).trigger("change"),this._needsSetup()?void 0:(this.$("#needs-setup").remove(),this.smtpView&&this.model.get("oauth")?(this.smtpView.leave(),this.smtpView=void 0):void 0)},i.prototype.saveMailbox=function(e){return this.clearErrors(),!this.smtpView||this.smtpView.validateForSave()?(this.model.attributes=this.serializeForm(e),this.firstSave=this.model.isNew(),this.model.save({},{wait:!0,success:this.handleSuccess,error:this.handleFailure})):void 0},i.prototype.serializeForm=function(e){var t;return t=_.omit(e.toObject({skipEmpty:!1}),["forward_email_address","insert-subject","insert-body"]),this.model.isState("demo")&&_.isEmpty(t.email)&&delete t.email,t.auto_bcc_address_attributes={_destroy:"disabled"===$('input[name="auto_bcc_address.auto_bcc_selected"]:checked').val(),email:t.auto_bcc_address.email},delete t.auto_bcc_address,t.email_template.state=$('input[name="email_template.state"]:checked').val(),t},i.prototype.handleSuccess=function(){return this.firstSave?GrooveClient.data.filters.fetch({reset:!0,success:function(e){return function(){var t;return t=new GrooveClient.Models.Mailbox(_.extend({id:e.model.id},e.model.attributes)),GrooveClient.data.mailboxes.add(t),e.renderFlash({title:"Your new mailbox was created."}),Backbone.history.once("route",function(){return e.setupMailbox()}),GrooveClient.navigate("/groove_client/settings/mailboxes/"+e.model.id)}}(this)}):(this.renderFlash({title:"Your mailbox has been updated."}),this.updateClientMailbox())},i.prototype.handleFailure=function(e,t){var n;return n=$.parseJSON(t.responseText).errors,this.displayErrors(n)},i.prototype.deleteMailbox=function(){return confirm("Are you sure you want to delete this mailbox? You won't be able to access it anymore.")?this.model.destroy({success:this.deleteSuccess,error:this.deleteError}):!1},i.prototype.deleteSuccess=function(){var e;return e=GrooveClient.data.mailboxes,e.remove(e.get(this.model.id)),GrooveClient.navigate("/groove_client/settings/mailboxes")},i.prototype.deleteError=function(){return this.renderFlash({title:"There was a problem deleting the mailbox. Try again."})},i.prototype.pageTitle=function(){return 0===this.mailboxes.length?"Add Your First Mailbox":this.model.isNew()?"Add Another Mailbox":this.model.get("name")+" Settings"},i.prototype.updateClientMailbox=function(){var e;return e=GrooveClient.data.mailboxes.get(this.model.id),e?(e.attributes=this.model.attributes,e.set("restricted?",this.model.isRestricted())):void 0},i.prototype._needsSetup=function(){return this.model.isNew()||this.model.isState("active","confirmed")?!1:!0},i.prototype.setupMailbox=function(){var e,t;return e=GrooveClient.data.mailboxes,1===e.length&&e.first().isState("demo")&&this.track("onboarding:clicked_setup_mailbox_in_settings",{onboarding_path_to_mailbox_setup:"mailbox settings"}),this.track("mailbox_settings:clicked_setup_mailbox"),this.onboardingContainer&&this.onboardingContainer.parentNode.removeChild(this.onboardingContainer),this.onboardingContainer=document.createElement("div"),document.body.appendChild(this.onboardingContainer),t={initialMailbox:{id:this.model.get("id"),email:this.model.get("email"),provider:this.model.get("provider"),state:this.model.get("state"),forward_email_address:this.model.get("forward_email_address")},bootstrapMailbox:!0},React.render(React.createElement(MailboxOnboarding.Components.Wizard,t),this.onboardingContainer)},i.prototype.insertVariable=function(e,t){var n,i;return n=$(e.target),(i=n.val())?(n.val(""),$.uniform.update(n),t.insertText("%{"+i+"}")):!1},i.prototype.displayError=function(e,t){return"auto_bcc_address.email"===e&&(e="bcc-address-email"),i.__super__.displayError.apply(this,arguments)},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MailboxAutoBccEmailAddress=function(n){function i(){return this.templateContentStyles=e(this.templateContentStyles,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/mailbox/auto_bcc_email_address"],i.prototype.id="mailbox-auto-bcc-email-address",i.prototype.tagName="fieldset",i.prototype.initialize=function(){return this.email=this.model.get("auto_bcc_email_address")},i.prototype.events=function(){return{'click input[name="auto_bcc_address.auto_bcc_selected"]':function(e){return this.toggleAutoBccContent($(e.target))}}},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{email:this.email,autoBccIsOn:this.autoBccIsOn,templateContentStyles:this.templateContentStyles})},i.prototype.autoBccIsOn=function(){return null!=this.email},i.prototype.toggleAutoBccContent=function(e){var t;return t=this.$("div.toggle"),"enabled"===e.val()?t.show().find("input").focus():t.hide()},i.prototype.templateContentStyles=function(){return this.autoBccIsOn()?!1:"display: none"},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.DnsCheck=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/mailbox/dns_check"],n.prototype.events=function(){return{"click #check_dns":function(e){return e.preventDefault(),this.checkDNS()}}},n.prototype.spfChecked=function(e){var t,n;return t=e.record,n=this.$("#spf"),n.attr("class",t).text("SPF record "+t)},n.prototype.dkimChecked=function(e){var t,n;return n=e.record,t=this.$("#dkim"),t.attr("class",n).text("DKIM record "+n)},n.prototype.render=function(){return this.model.get("email")&&this.renderTemplate({model:this.model}),this},n.prototype.checkDNS=function(){return this.$("#spf").addClass("loading"),this.$("#dkim").addClass("loading"),$.ajax({type:"GET",url:"/api/settings/mailboxes/"+this.model.id+"/spf_check",data:{email:$("#email").val()},success:this.spfChecked.bind(this)}),$.ajax({type:"GET",url:"/api/settings/mailboxes/"+this.model.id+"/dkim_check",data:{email:$("#email").val()},success:this.dkimChecked.bind(this)})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.OutgoingEmailServerSettings=function(n){function i(){return this.focus=e(this.focus,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/mailbox/outgoing_email_server"],i.prototype.portDropdownTemplate=JST["settings/mailbox/outgoing_email_server_port_dropdown"],i.prototype.portInputTemplate=JST["settings/mailbox/outgoing_email_server_port_input"],i.prototype.id="smtp-settings",i.prototype.tagName="fieldset",i.prototype.serverDefaults={address:"",user_name:"",password:"",port:"",use_ssl:0,verified:0,authentication:"plain",last_error_was_authentication_error:!1},i.prototype.events=function(){return{"change select":function(e){return this.unverify()},"change input":function(e){return this.unverify()},"change #has_custom_outgoing":function(e){var t;return t=$(e.target).val(),this.renderForm(t),this.renderMeta(),this.markForDestroy(),t?_.delay(this.focus):void 0},"change #smtp_port":function(e){var t,n;return t=$(e.target),n=t.parent(".selector"),"custom"===t.val()?this.renderPortInput(n).focus():void 0},"change #smtp_ssl_checkbox":function(e){return this.markSslCheckbox($(e.target).is(":checked"))},"click #smtp_test":function(e){return e.preventDefault(),this.testSmtpSettings()},"change #smtp_address":function(e){var t,n;return t=$(e.target).val(),n=_.find(_.keys(this.SERVER_SETTINGS),function(e){return function(n){return t===e.SERVER_SETTINGS[n].address}}(this)),this.chooseServerSettings(this.settingsForProvider(n))}}},i.prototype.initialize=function(){var e;return this.outgoingEmailServer=this.model.get("outgoing_email_server"),e=this.outgoingEmailServer?_.pick(this.outgoingEmailServer,_.keys(this.serverDefaults)):this.settingsForProvider(this.model.get("provider"))||{},this.listenTo(GrooveClient,"mailbox_settings:email_changed",this.emailChanged),this.serverSettings=_.defaults(e,this.serverDefaults)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderForm(),this.renderMeta(),this},i.prototype.emailChanged=function(e){return this.model.set("email",e),setTimeout(function(e){return function(){return e.renderDnsCheck()}}(this),1)},i.prototype.markSslCheckbox=function(e){return e?(this.$("#smtp_ssl_checkbox").prop("checked",!0),this.$("#smtp_ssl").val(1)):(this.$("#smtp_ssl_checkbox").prop("checked",!1),this.$("#smtp_ssl").val(0))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this),this.setEmailDeliverySelect()},i.prototype.setEmailDeliverySelect=function(){var e;return e=this.outgoingEmailServer?"1":"0",this.$("#has_custom_outgoing").val(e)},i.prototype.renderForm=function(e){var t,n;return null==e&&(e=this.$("#has_custom_outgoing").val()),"1"===e?(this.renderCustomServerForm(),null!=(t=this.dnsCheck)?t.remove():void 0):(this.renderDnsCheck(),null!=(n=this.$customServerForm)?n.remove():void 0)},i.prototype.renderCustomServerForm=function(){var e;return e=_.extend(this.serverSettings||{},{portDropdown:this.portDropdownTemplate,portInput:this.portInputTemplate,isPort:function(e){return e===this.port},isAuthentication:function(e){return e===this.authentication}}),this.$customServerForm=$(JST["settings/mailbox/outgoing_email_server_form"](e)),this.$el.append(this.$customServerForm),this.markSslCheckbox(this.serverSettings.use_ssl),this.isVerified(this.serverSettings.verified),this.$customServerForm.find("select").uniform()},i.prototype.renderPortInput=function(e,t){var n;return null==t&&(t=""),n=$(this.portInputTemplate({port:t})),e.replaceWith(n),n},i.prototype.renderMeta=function(){var e;if(this.outgoingEmailServer){if(e=this.outgoingEmailServer.id,this.$fields=$(JST["settings/mailbox/outgoing_email_server_meta"]({id:e})),"1"===this.$("#has_custom_outgoing").val()&&this.$("#smtp_meta").html(this.$fields),this.isVerified())return this.smtpStatus("Connection Verified","success");if(this.smtpStatus("Connection Unverified. Please update and test your connection details.","error"),this.serverSettings.last_error_was_authentication_error)return this.$("#smtp_login_control, #smtp_pass_control").addClass("error")}},i.prototype.renderDnsCheck=function(){return this.dnsCheck=new GrooveClient.Views.DnsCheck({model:this.model}),this.renderChildInto(this.dnsCheck,this.$("#dns_check"))},i.prototype.markForDestroy=function(){return this.outgoingEmailServer&&"0"===this.$("#has_custom_outgoing").val()?void this.$("#destroy_email_server").val(1):this.$("#destroy_email_server").val(0)},i.prototype.testSmtpSettings=function(){var e;return e=this.collectSmtpSettings(),this.postSmtpSettings(e)},i.prototype.collectSmtpSettings=function(){var e,t;return e=this.$el.closest("form").find('input[name^="outgoing_email_server_attributes"]'),t=_.defaults({},this.serverDefaults),e.each(function(e,n){var i,o;return i=$(n),o=i.prop("name").split(".")[1],i.is(":checkbox:not(:checked)")?void 0:t[o]=i.val()}),t.port=$("#smtp_port").val(),t.authentication=this.$el.find("#smtp_authentication").val(),t},i.prototype.postSmtpSettings=function(e){return $.ajax({type:"POST",url:"/api/settings/mailboxes/test_smtp",dataType:"json",data:{smtp:e},success:function(e){return function(t){return e.handleSmtpSuccess(t.message)}}(this),error:function(e){return function(t){var n;return n=JSON.parse(t.responseText).message.replace("\n","<br>"),e.handleSmtpError(n)}}(this)})},i.prototype.handleSmtpSuccess=function(e){return this.isVerified(!0),this.smtpStatus(e,"success")},i.prototype.handleSmtpError=function(e){return this.isVerified(!1),this.smtpStatus(e,"error")},i.prototype.isVerified=function(e){return void 0===e?!!parseInt(this.$("#smtp_verified").val(),10):(e=e===!0?1:0,this.$("#smtp_verified").val(e))},i.prototype.unverify=function(){return this.isVerified(!1)},i.prototype.smtpStatus=function(e,t){return this.$("#smtp_test_result").hide().removeClass("error success neutral").addClass(t).html(e).show(),"success"===t?this.$("#smtp_login_control, #smtp_pass_control").removeClass("error"):void 0},i.prototype.validateForSave=function(){return this.isVerified()||0===$("#smtp_verified").length?!0:(this.smtpStatus("SMTP credentials must be verified. Please test connection first","error"),alert('Please verify your smtp credentials first by clicking "Test Connection"'),!1)},i.prototype.chooseServerSettings=function(e){return e?(this.$("#smtp_authentication").val(e.authentication).change(),this.$("#smtp_port").val(e.port).change(),this.$("#smtp_login").val(e.user_name),this.$("#smtp_ssl_checkbox").attr("checked",e.ssl)):this.$("#smtp_authentication").val("plain").change(),this.focus()},i.prototype.focus=function(){var e,t,n,i,o,r;for(o=this.$("#smtp_address,#smtp_port,#smtp_login,#smtp_password").toArray(),n=0,i=o.length;i>n;n++)if(t=o[n],e=$(t),!(null!=(r=e.val())?r.length:void 0))return e.focus()},i.prototype.SERVER_SETTINGS={gmail:{authentication:"plain",address:"smtp.gmail.com",port:"465",use_ssl:!0},office365:{authentication:"login",address:"smtp.office365.com",port:"587",ssl:!0}},i.prototype.settingsForProvider=function(e){return _.tap(this.SERVER_SETTINGS[e],function(t){return function(n){return"gmail"===e||"office365"===e?n.user_name=t.model.get("email"):void 0}}(this))},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NotificationSettings=function(n){function i(){return this.handleSuccess=e(this.handleSuccess,this),this.saveNotifications=e(this.saveNotifications,this),this.checkbox=e(this.checkbox,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/notifications"],i.prototype.events={"submit form.settings":function(e){return e.preventDefault(),this.saveNotifications($(e.target))}},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{checkbox:this.checkbox})},i.prototype.checkbox=function(e){return e.namePrefix="notify_on_",i.__super__.checkbox.call(this,e)},i.prototype.saveNotifications=function(e){return this.model.save(this.serializeCheckboxes(e),{wait:!0,success:this.handleSuccess}),!1},i.prototype.handleSuccess=function(){return this.renderFlash({title:"Your emails notifications have been updated."})},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e,t;window.ChatSettings={},e=ChatSettings.Dispatcher={ensureStore:function(){var e;return e=jQuery.Deferred(),t.loaded?e.resolve(t):$.get("/api/chat/olark/integrations.json").done(function(n){return function(n){return t.replace(n),t.loaded=!0,e.resolve(n)}}(this)),e.promise()},createIntegration:function(e,n){var i,o,r,s;return i=jQuery.Deferred(),o=Object.assign({},e),r=Object.assign(o,{}),s="/api/chat/olark/integrations.json",$.ajax({url:s,type:"POST",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(e){return function(e){var o,r;return o=t.get("integrations"),r=o.concat([e]),t.set("integrations",r),n&&n(),i.resolve(e)}}(this)),i.promise()},updateIntegration:function(e,n,i){var o,r,s,a;return o=jQuery.Deferred(),r=Object.assign({},e,n),s=Object.assign(r,{}),s._method="PUT",a="/api/chat/olark/integrations/"+e.id+".json",$.ajax({url:a,type:"PUT",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){return function(n){var r,s,a;return s=t.get("integrations"),r=s.indexOf(e),a=s.concat([]),a[r]=n,t.set("integrations",a),i&&i(),o.resolve(n)}}(this)),o.promise()},removeIntegration:function(e){var n,i;return n=jQuery.Deferred(),e=parseInt(e),i="/api/chat/olark/integrations/"+e+".json",$.ajax({url:i,type:"DELETE",contentType:"application/json; charset=utf-8"}).done(function(i){return function(i){var o,r;return o=t.get("integrations"),r=_.without(o,_.findWhere(o,{id:e})),t.set("integrations",r),n.resolve(i)}}(this)),n.promise()}},t=ChatSettings.Store=createStore()}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return o(n?n:e)},p,p.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var i=e("matches-selector");t.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(i(o,t))return o;o=o.parentNode}}},{"matches-selector":2}],2:[function(e,t,n){function i(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}var o=Element.prototype,r=o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=i},{}],3:[function(e,t,n){function i(e,t,n,i){var r=o.apply(this,arguments);return e.addEventListener(n,r),{destroy:function(){e.removeEventListener(n,r)}}}function o(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t,!0),n.delegateTarget&&i.call(e,n)}}var r=e("closest");t.exports=i},{closest:1}],4:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n["function"]=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],5:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a["function"](n))throw new TypeError("Third argument must be a Function");if(a.node(e))return o(e,t,n);if(a.nodeList(e))return r(e,t,n);if(a.string(e))return s(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function r(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function s(e,t,n){return l(document.body,e,t,n)}var a=e("./is"),l=e("delegate");t.exports=i},{"./is":4,delegate:3}],6:[function(e,t,n){function i(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}t.exports=i},{}],7:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){o.off(e,i),t.apply(n,arguments)}var o=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;o>i;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,s=i.length;s>r;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},t.exports=i},{}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("select"),a=i(s),l=function(){function e(t){o(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function(){var e=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=a["default"](this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=a["default"](this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},r(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!=typeof e||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function(){return this._target}}]),e}();n["default"]=l,t.exports=n["default"]},{select:6}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}n.__esModule=!0;var a=e("./clipboard-action"),l=i(a),c=e("tiny-emitter"),p=i(c),u=e("good-listener"),d=i(u),h=function(e){function t(n,i){o(this,t),e.call(this),this.resolveOptions(i),this.listenClick(n)}return r(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=d["default"](e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return s("action",e)},t.prototype.defaultTarget=function(e){var t=s("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return s("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(p["default"]);n["default"]=h,t.exports=n["default"]},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)}),function(){var e,t,n,i,o,r,s,a,l,c;t=ChatSettings.Dispatcher,a=ChatSettings.Store,ChatSettings.Main=React.createClass({displayName:"Main",componentDidMount:function(){return a.on("change",this.reRender),this.state.modalOpen?"new"===this.state.modalId?this.onCreate():void 0:analytics.page("Olark Settings List",{category:"Settings"})},componentWillUnmount:function(){return a.off("change",this.reRender)},getInitialState:function(){var e;return e=this.props.id,e&&"new"===e?{modalId:e,modalOpen:!0}:e?{modalId:e,modalOpen:!0}:{modalId:null,modalOpen:!1}},reRender:function(){return this.forceUpdate(function(){return null})},render:function(){var e,t,n,i;return i=a.get("integrations"),e=[],this.state.modalOpen&&"new"!==this.state.modalId&&(t=parseInt(this.state.modalId),n=_.findWhere(i,{id:t}),e.push(React.createElement(r,{integration:n,close:this.onCloseModal}))),e.push(React.createElement(s,{integrations:i,onCreate:this.onCreate,onEdit:this.onEdit,isBehindModal:!this.state.modalOpen})),React.createElement("div",null,e)},onCloseModal:function(e){return this.state.create&&!e.success?(this.setState({create:!1}),t.removeIntegration(e.id).done(function(e){return function(){return e.closeModal()}}(this))):this.closeModal()},openModal:function(e){return this.showModal(e)},showModal:function(e){return this.setState({modalId:e,modalOpen:!0})},closeModal:function(){return this.hideModal()},hideModal:function(){var e;return this.setState({modalId:null,modalOpen:!1}),e="/groove_client/settings/olark",GrooveClient.navigate(e)},onEdit:function(e){return this.setState({create:!1}),this.editIntegration(e.id),!0},editIntegration:function(e){var t;return this.openModal(e),t="/groove_client/settings/olark/"+e,GrooveClient.navigate(t)},onCreate:function(){var e,n,i,o;return this.setState({create:!0}),i={mailbox_id:this.getFirstMailboxId()},i.external_id=null,(o=Groove.Util.getQueryParamByName("site_id"))&&(i.external_id=o),n=a.get("integrations"),e=_.findWhere(n,{external_id:i.external_id}),e?this.editIntegration(e.id):t.createIntegration(i).done(function(e){return function(t){return analytics.track("Created Olark Integration",{},{},function(){return e.editIntegration(t.id)})}}(this)),!0},getFirstMailboxId:function(){var e;return e=GrooveClient.data.mailboxes.models[0],e?e.id:void 0}}),s=React.createClass({displayName:"OlarkIntegrationsList",render:function(){var t,n;return t=this.props.integrations,n=this.props.onEdit,React.createElement("div",null,React.createElement("div",{className:"box-c-toolbar"},React.createElement("h1",null,"Olark Settings")),React.createElement("div",{className:"ChatList"},React.createElement("div",{className:"cl-list"},t.map(function(e,t){return React.createElement(o,{integration:e,key:t,onEdit:n})})),React.createElement("div",null,React.createElement(e,{outline:!0,onClick:this.handleCreate},"Add site ID"))))},handleCreate:function(){return this.props.onCreate()}}),o=React.createClass({displayName:"OlarkIntegration",render:function(){var e;return e=this.props.integration,React.createElement("div",{className:"cl-Chat"},React.createElement("div",null,React.createElement("div",{className:"cl-Chat_name",onClick:this.handleEdit},e.external_id||"Add Site ID"),React.createElement("div",{className:"asv2-u-color-hint"},"Linked to ",this.getMailboxName())),React.createElement("div",{className:"cl-Chat_cta"},React.createElement("a",{className:"asv2-Icon asv2-Icon-settings",onClick:this.handleEdit},"Modify"),React.createElement("a",{className:"asv2-Icon asv2-Icon-delete",onClick:this.handleRemove},"Remove")))},handleEdit:function(){return this.props.onEdit(this.props.integration)},handleRemove:function(){return confirm("Are you sure?")?t.removeIntegration(this.props.integration.id).done(function(){return analytics.track("Deleted Olark Integration")}):void 0},getMailboxName:function(){var e,t;return t=GrooveClient.data.mailboxes.models,e=_.findWhere(t,{id:this.props.integration.mailbox_id}),e?e.get("name"):t[0].get("name")}}),ChatSettings.OlarkIntegrationEditModal=r=React.createClass({displayName:"OlarkIntegrationEditModal",componentDidMount:function(){return this.hackStackingContext(),this.clipboard=new Clipboard(this.getDOMNode().querySelector("[data-clipboard-trigger]"),{target:function(e){return function(t){return e.getDOMNode().querySelector("[data-clipboard-target]")}}(this)}),this.clipboard.on("success",function(e){return function(t){return e.setState({copyStatus:"success"}),setTimeout(e.hideCopyNotification,2e3),t.clearSelection()}}(this)),this.clipboard.on("error",function(e){return function(t){return e.setState({copyStatus:"error"})}}(this)),analytics.page("Olark Settings",{category:"Settings"}),setTimeout(this.focusExternalIdField,0)},componentWillUnmount:function(){return analytics.page("Olark Settings List",{category:"Settings"}),this.unhackStackingContext()},hackStackingContext:function(){return document.querySelector(".box-a-header").style.zIndex=0,document.querySelector(".box-b-sidebar-left").style.zIndex=0,document.querySelector(".box-b-main").style.background="transparent"},unhackStackingContext:function(){return document.querySelector(".box-a-header").style.zIndex="",document.querySelector(".box-b-sidebar-left").style.zIndex="",document.querySelector(".box-b-main").style.background=""},focusExternalIdField:function(){var e;return e=this.refs.external_id.getDOMNode(),_.isEmpty(e.value)?e.focus():void 0},hideCopyNotification:function(){return this.setState({copyStatus:null})},getInitialState:function(){var e;return e=this.props.integration||{},{external_id:e.external_id,mailbox_id:e.mailbox_id,
token:e.token}},render:function(){var t,o;return t=this.props.integration||{},o=[],"success"===this.state.copyStatus&&o.push(React.createElement("div",{className:"cs-copy_success"},"Link copied")),React.createElement(i,{name:"Install Olark Chat",isOpened:!0,close:this.abort},React.createElement("div",{className:"asv2-u-font-hint asv2-u-color-hint"},"Paste in your Olark Site-ID below to link add live chat to your Groove widget and/or receive chat transcripts directly in your mailbox. ."),React.createElement("div",{className:"asv2-u-mt2 cs-olarkIdInput"},React.createElement("span",null,"Olark Site ID"),React.createElement("input",{type:"text",size:"17",ref:"external_id",placeholder:"1234-567-89-0123",value:this.state.external_id,onChange:this.onIntegrationIdChange})),React.createElement("div",{className:"asv2-u-mt2 cs-transcripts"},React.createElement("div",null,React.createElement("span",{className:"asv2-u-font-hint",style:{marginRight:"-3px"}},"Send transcripts to"),React.createElement(n,{ref:"mailbox_id",choices:this.getMailboxes(),value:this.state.mailbox_id,onChange:this.onMailboxIdChange})),React.createElement("div",{className:"asv2-u-mt1 asv2-u-font-hint asv2-u-color-hint"},"You're almost done! Just copy your Groove Webhook URL and click the link below to paste it into your settings at Olark."),React.createElement("div",{className:"asv2-u-mt2 cs-transcripts_webhookContainer"},React.createElement("div",{"data-clipboard-target":!0,className:"cs-transcripts_webhook"},this.getWebhookUrl()),React.createElement("div",{"data-clipboard-trigger":!0,className:"asv2-Icon asv2-Icon-copy",title:"Copy URL to clipboard"}),o),React.createElement("div",{className:"asv2-u-mt2 asv2-u-font-hint"},React.createElement(e,{text:!0,onClick:this.openSettingsInOlark},"Open settings in Olark ",React.createElement("span",{className:"asv2-Icon asv2-Icon-open-in-new-green"})))))},getWebhookUrl:function(){return"https://"+document.location.hostname+"/chat/integrations/"+(this.state.token||"token")+"/webhook"},getMailboxes:function(){var e,t,n,i,o;for(i=GrooveClient.data.mailboxes.models,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push({value:n.id,text:n.get("name")});return o},onIntegrationIdChange:function(e){var t,n;return n=this.refs.external_id.getDOMNode().value,this.setState({external_id:n}),t=function(e){return function(){return e.save({external_id:n})}}(this),this.integrationIdChangeTimeout&&clearTimeout(this.integrationIdChangeTimeout),this.integrationIdChangeTimeout=setTimeout(t,250)},onMailboxIdChange:function(e){var t;return t=parseInt(e),this.setState({mailbox_id:t}),this.save({mailbox_id:t})},getFirstMailboxId:function(){var e;return e=GrooveClient.data.mailboxes.models[0],e?e.id:void 0},save:function(e){var n;return null==e&&(e={}),n=Object.assign({},this.state,e),n.mailbox_id||(n.mailbox_id=this.getFirstMailboxId()),this.props.integration?t.updateIntegration(this.props.integration,n):t.createIntegration(n).done(function(e){return function(t){return e.props.integration=t}}(this))},handleClick:function(){return this.save().done(function(e){return function(t){return e.succeed(t)}}(this))},openSettingsInOlark:function(){return analytics.track("Clicked Link to Olark Settings",{},{},function(){var e;return e=window.open("https://www.olark.com/crm/groove?rid=_integration_groove_app","_blank"),e.focus()})},succeed:function(e){return this.props.close({success:!0,id:e.id})},abort:function(){var e;return e=this.props.integration||{},this.props.close({success:!0,id:e.id})}}),e=React.createClass({displayName:"Button",render:function(){var e;return e=React.addons.classSet({"asv2-Button":!0,"asv2-Button-clear":this.props.clear,"asv2-Button-outline":this.props.outline,"asv2-Button-text":this.props.text}),React.createElement("button",{onClick:this.props.onClick,className:e},this.props.children)}}),i=React.createClass({displayName:"Modal",render:function(){var e;return e=React.addons.classSet({"asv2-Modal":!0,"asv2-Modal-is-opened":this.props.isOpened}),React.createElement("div",{className:e},React.createElement("div",{className:"asv2-Modal_content"},React.createElement("div",{className:"asv2-Modal_name"},this.props.name),this.props.children,React.createElement("div",{className:"asv2-Modal_close",onClick:this.props.close},"\xd7")),React.createElement("div",{className:"asv2-Modal_overlay",onClick:this.props.close}))}}),n=React.createClass({displayName:"InlineDropdown",render:function(){var e,t;return t=function(e){return function(t){return e.selectField=t}}(this),e=this.props.choices.map(function(e){return function(e,t){return React.createElement("option",{value:e.value,key:t},e.text)}}(this)),React.createElement("select",{className:"asv2-InlineDropdown no-uniform",name:this.props.name,value:this.props.value,ref:t,onChange:this.onChange},e)},autoWidth:function(e){var t,n;return n=e.options[e.selectedIndex],t=6,e.style.width=l(n).width+t+"px"},componentDidMount:function(){return setTimeout(function(e){return function(){return e.autoWidth(e.getDOMNode())}}(this),0)},onChange:function(e){var t,n,i,o,r;return o=this.selectField.getDOMNode(),t=o.name,r=o.value,this.autoWidth(o),i=this.props.object,n=this.props.name,this.props.onChange(r)},getValue:function(){var e;return e=this.selectField.getDOMNode(),e.value}}),l=function(e){return c(e.textContent,getComputedStyle(e).font)},c=function(e,t,n){var i,o;return null==n&&(n=document.body),i=document.createElement("span"),i.style.cssText="position:fixed; visibility:hidden; z-index:-1000; pointer-events:none; white-space:pre;",i.style.font=t,i.textContent=e,n.appendChild(i),o={width:i.scrollWidth,height:i.scrollHeight},n.removeChild(i),o}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.OlarkSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return ChatSettings.Dispatcher.ensureStore().done(function(e){return function(t){return e.renderReact()}}(this))},n.prototype.renderReact=function(e){var t;return this.$el.addClass("box-b-main"),this.$el.html('<div class="box-b-wrap center-panel">'),t=this.el.querySelector(".box-b-wrap"),React.render(React.createElement(ChatSettings.Main,{id:this.options.id}),t)},n}(GrooveClient.Views.SettingsView),GrooveClient.Views.OlarkSettings.className="GrooveClient.Views.OlarkSettings"}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.PreferenceSettings=function(n){function i(){return this.serializeForm=e(this.serializeForm,this),this.handleSuccess=e(this.handleSuccess,this),this.savePreferences=e(this.savePreferences,this),this.hiddenInput=e(this.hiddenInput,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/preferences"],i.prototype.events={"submit form.settings":function(e){return e.preventDefault(),this.savePreferences($(e.target))}},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,checkbox:this.checkbox,hiddenInput:this.hiddenInput,undoDelay:this.undoDelay(),availability:this.model.get("availability")}),this.checkUndoCheckbox()},i.prototype.hiddenInput=function(e){return e.attributes=this.model.attributes,JST["settings/shared/hidden_input"](e)},i.prototype.savePreferences=function(e){return this.model.save(this.serializeForm(e),{wait:!0,success:this.handleSuccess})},i.prototype.handleSuccess=function(){var e;return this.renderFlash({title:"Your preferences have been updated."}),e=_.omit(this.model.changedAttributes(),"id"),GrooveClient.data.currentUser.set(e)},i.prototype.serializeForm=function(e){var t;return t=$.extend(e.toObject(),this.serializeCheckboxes(e)),t=this.correctUndoDelay(t)},i.prototype.correctUndoDelay=function(e){var t;return t=$("#undo_send")[0].checked,t||(e.undo_send_delay="0"),e=_.omit(e,"undefined")},i.prototype._isNumber=function(e){return/^\d+$/.test($.trim(e.val()))?1:0},i.prototype.checkUndoCheckbox=function(){return GrooveClient.data.currentUser.hasUndoSendDelay()?this.$("#undo_send").prop("checked",!0):void 0},i.prototype.undoDelay=function(){return GrooveClient.data.currentUser.get("undo_send_delay")},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.ProfileSettings=function(n){function i(){return this.setAvatar=e(this.setAvatar,this),this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/profile"],i.prototype.events={"submit form.settings":"saveProfile","change input#avatar":"uploadAvatar"},i.prototype.initialize=function(e){return null==e&&(e={}),this.profile=e.profile,this.timezones=GrooveClient.data.timezones,this.agent||(this.agent=GrooveClient.data.currentUser)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.selectCurrentTimezone(),_.defer(function(e){return function(){return e.$("input#name").focus(),e.setAvatar()}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{profile:this.profile,timezones:this.timezones})},i.prototype.saveProfile=function(e){return e.preventDefault(),this.clearErrors(),this.profile.save(this.formSerialize(),{wait:!0,success:this.handleSuccess,error:this.handleFailure})},i.prototype.handleSuccess=function(){return this.renderFlash({title:"Your profile has been updated."}),this.$("input#password, input#password_confirmation").val(""),GrooveClient.data.currentUser.set("name",$("#name").val())},i.prototype.handleFailure=function(e,t){var n;return n=$.parseJSON(t.responseText).errors,this.displayErrors(n)},i.prototype.formSerialize=function(){var e,t,n,i,o;for(i=this.$("form.settings").toObject({skipEmpty:!1}),delete i.profile,n=["twitter_username","username_text"],e=0,t=n.length;t>e;e++)o=n[e],i[o]&&"@"===i[o].charAt(0)&&(i[o]=i[o].slice(1));return this._isntChangingPassword()&&(delete i.password,delete i.password_confirmation),i},i.prototype.selectCurrentTimezone=function(){var e;return e=this.profile.get("timezone"),this.$("#timezone").find("option[value='"+e+"']").attr("selected",!0)},i.prototype.uploadAvatar=function(e){var t,n,i,o;return n=$("meta[name='csrf-param']").attr("content"),i=$("meta[name='csrf-token']").attr("content"),t=$(e.target),o={_method:"PUT"},o[n]=i,this.profile.save({},{files:t,data:o,iframe:!0,complete:function(e){return function(){return e.agent.fetch({success:function(){return e.setAvatar()}})}}(this)})},i.prototype.setAvatar=function(){var e;return e=new GrooveClient.Views.User({model:this.agent}).avatarImage({size:50}),this.$("div.avatar img").replaceWith(e)},i.prototype._isntChangingPassword=function(){var e,t;return e=0===$.trim($("input#password").val()).length,t=0===$.trim($("input#password_confirmation").val()).length,e&&t},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Conditions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="fieldset",n.prototype.template=JST["settings/shared/conditions"],n.prototype.initialize=function(e){this.variables=e.variables},n.prototype.renderTemplate=function(){var e,t;return e={options:[{value:"any",name:"Any"},{value:"all",name:"All"}],selected:null!=(t=this.model.get("match_type"))?t.toLowerCase():void 0},n.__super__.renderTemplate.call(this,{model:this.model,matchTypeOptions:JST["settings/shared/select_options"](e)})},n.prototype.render=function(){var e,t,i,o;if(n.__super__.render.apply(this,arguments),this.model.conditions.isEmpty())this.addCondition();else for(o=this.model.conditions.models,e=0,t=o.length;t>e;e++)i=o[e],this.addCondition(i);return this.updateDeleteButtons(),this.$("select").uniform()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.RuleConditions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click #add-condition":function(e){return e.preventDefault(),this.addCondition()}},n.prototype.id="rule-conditions",n.prototype.initialize=function(e){return null==e&&(e={}),n.__super__.initialize.apply(this,arguments),this.selectOptions=e.selectOptions,this.index=0,this.listenTo(GrooveClient,"rule-condition:count-changed",function(){return this.updateDeleteButtons()})},n.prototype.addCondition=function(e){var t;return null==e&&(e=new GrooveClient.Models.RuleAction),t=new GrooveClient.Views.RuleCondition({model:e,variables:this.variables,selectOptions:this.selectOptions,index:this.index}),this.appendChildBefore(t,this.$("#add-condition-container")),this.index++},n.prototype.updateDeleteButtons=function(){return 1===this.$(".condition-row").length?this.$("a.delete").hide():this.$("a.delete").css("display","inline-block").show()},n}(GrooveClient.Views.Conditions)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.RuleActions=function(n){function i(){return this.updateDeleteButtons=e(this.updateDeleteButtons,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/rules/actions"],i.prototype.id="rule-actions",i.prototype.tagName="fieldset",i.prototype.events={"click #add-action":function(e){return e.preventDefault(),this.addAction()}},i.prototype.initialize=function(e){return null==e&&(e={}),this.variables=e.variables,this.selectOptions=e.selectOptions,this.variablesSelect=e.variablesSelect,this.index=0,this.listenTo(GrooveClient,"rule-action:count-change",this.updateDeleteButtons)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderActions()},i.prototype.renderActions=function(){var e,t,n,i;if(this.model.actions.isEmpty())this.addAction();else for(i=this.model.actions.models,e=0,t=i.length;t>e;e++)n=i[e],this.addAction(n);return this.updateDeleteButtons()},i.prototype.addAction=function(e){var t;return null==e&&(e=new GrooveClient.Models.RuleAction),t=new GrooveClient.Views.RuleAction({model:e,variables:this.variables,selectOptions:this.selectOptions,variablesSelect:this.variablesSelect,index:this.index}),this.appendChildBefore(t,this.$("#add-actions-container")),this.index++},i.prototype.updateDeleteButtons=function(){return 1===this.$(".action-row").length?this.$("a.delete").hide():this.$("a.delete").css("display","inline-block").show()},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.RuleSettings=function(n){function i(){return this.pageTitle=e(this.pageTitle,this),this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/rule"],i.prototype.events={"submit form.settings":function(e){return e.preventDefault(),this.saveRule($(e.target))},"click .cancel-save":function(e){return e.preventDefault(),this.navigateToList()}},i.prototype.initialize=function(){return this.variables=new GrooveClient.Models.RuleVariables},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.variables.fetch({success:function(e){return function(){return e.renderConditions(),e.renderActions()}}(this)})},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,pageTitle:this.pageTitle})},i.prototype.renderConditions=function(){var e;return e=new GrooveClient.Views.RuleConditions({model:this.model,selectOptions:this.selectOptions,variables:this.variables.attributes}),this.replaceWithChild(e,this.$("#rule-conditions"))},i.prototype.renderActions=function(){var e;return e=new GrooveClient.Views.RuleActions({model:this.model,selectOptions:this.selectOptions,variablesSelect:this.variablesSelect,variables:this.variables.attributes}),this.replaceWithChild(e,this.$("#rule-actions"))},i.prototype.saveRule=function(e){return this.clearErrors(),this.isNewRule=this.model.isNew(),this.model.save(this.serializeForm(e),{wait:!0,success:this.handleSuccess,error:this.handleFailure})},i.prototype.serializeForm=function(e){var t;return this.removeEmptyConditions(),this.removeEmptyActions(),t=e.toObject(),this.setConditions(t),this.setActions(t),_.omit(t,["actions","conditions"])},i.prototype.setConditions=function(e){var t,n;return n=this.model.conditions.where({_destroy:!0}).map(function(e){return{_destroy:1,id:e.id}}),t=n.concat(e.conditions||[]),_.isEmpty(t)?void 0:e.rule_conditions_attributes=t},i.prototype.setActions=function(e){var t,n;return n=this.model.actions.where({_destroy:!0}).map(function(e){return{_destroy:1,id:e.id}}),t=n.concat(e.actions||[]),_.isEmpty(t)?void 0:e.rule_actions_attributes=t},i.prototype.handleSuccess=function(){return this.isNewRule?this.renderFlash({title:"Your new rule was created."}):this.renderFlash({title:"Your rule has been updated."}),this.navigateToList()},i.prototype.handleFailure=function(e,t){var n;return this.clearErrors(),n=$.parseJSON(t.responseText).errors,this.displayErrors(n),n.rule_conditions&&this.displaySelectError("condition"),n["rule_conditions.value"]&&this.displayValueError("rule"),n.rule_actions&&this.displaySelectError("action"),n["rule_actions.value"]?this.displayValueError("action"):void 0},i.prototype.displaySelectError=function(e){return this.$("#rule-"+e+"s").find(".start:first").append("<span class='error-block'>must include at least one "+e+"</span>")},i.prototype.displayValueError=function(e){return this.$("input."+e+"-value").each(function(){var e;return e=$(this),0===e.val().trim().length?e.after("<span class='error-block'>must include a value</span>"):e.after("<span class='error-block'>must be a valid regular expression")})},i.prototype.pageTitle=function(){return this.model.isNew()?"New Rule":"Edit Rule"},i.prototype.removeEmptyConditions=function(){var e;return e=$("select.rule-condition"),1!==e.length?e.each(function(e,t){var n;return n=$(t),_.isEmpty(n.val())?n.closest(".condition-row").remove():void 0}):void 0},i.prototype.removeEmptyActions=function(){var e;return e=$("select.action-type"),1!==e.length?e.each(function(e,t){var n;return n=$(t),_.isEmpty(n.val())?n.closest(".action-row").remove():void 0}):void 0},i.prototype.navigateToList=function(){return GrooveClient.navigate("/groove_client/settings/ticketing/rules",{trigger:!0})},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.RulesSettings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/rules"],n.prototype.events={"click a.delete":function(e){return e.preventDefault(),this.deleteRule($(e.target).attr("data-rule-id"))},"click a.toggle":function(e){return e.preventDefault(),this.toggleState($(e.target).attr("data-rule-id"))}},n.prototype.initialize=function(e){return null==e&&(e={}),this.listenTo(this.collection,"add remove reset",this.render)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.initDragAndDrop()}}(this))},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{rules:this.collection.sortBy(function(e){return e.get("row_order")}),pageTitle:this.pageTitle})},n.prototype.initDragAndDrop=function(){return this.$("table.rules").sortable({axis:"y",opacity:.5,items:"tr.rule",update:function(e){return function(t,n){var i,o;return o=n.item.attr("data-rule-id"),i=n.item.index(),e.reorderRule(o,i)}}(this)})},n.prototype.reorderRule=function(e,t){var n;return(n=this.collection.findWhere({id:parseInt(e)}))?n.save({row_order_position:t}):void 0},n.prototype.deleteRule=function(e){var t;return(t=this.collection.findWhere({id:parseInt(e)}))?t.destroy({success:function(e){return function(){return e.collection.remove(t),e.renderFlash({title:"Rule was successfully removed"})}}(this)}):void 0},n.prototype.toggleState=function(e){var t,n;return(n=this.collection.findWhere({id:parseInt(e)}))?(t=!n.get("active"),n.save({active:t},{success:function(e){return function(){return e.render()}}(this)})):void 0},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};GrooveClient.Views.RuleAction=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=JST["settings/rules/action"],i.prototype.className="sentence short separated action-row",i.prototype.tagName="div",i.prototype.events={"change select.action-type":function(e){return this.valueInput.data("autocomplete")&&this._destroyAutocomplete(),this.changeValue($(e.target)),this.clearErrors(),this.$("select").uniform()},"click a.delete":function(e){return e.preventDefault(),this.remove(),this.model.markForDestroy(),GrooveClient.trigger("rule-action:count-change")}},i.prototype.initialize=function(e){return null==e&&(e={}),this.variables=e.variables,this.selectOptions=e.selectOptions,this.variablesSelect=e.variablesSelect,this.index=e.index,this.valueSelectDependencies={priority:"priorities",star:"star",mailbox:"mailboxes",status:"states",assignee_id:"agents",assignee_group_id:"groups",next_available_agent_in_group:"groups"},this.agentSelectDependencies={send_email_to_agent:"agents"},this.valueInputDependencies=["label"],this.textareaDependencies=["send_email_to_agent","send_email_to_requester"],this.autocompletedInputs={label:GrooveClient.data.labels}},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.agentSelect=e.$("select.action-agent"),e.valueSelect=e.$("select.action-value"),e.valueInput=e.$("input.action-value"),e.valueTextarea=e.$("textarea.action-value"),e.variableInserter=e.$("ul.side-actions"),e.actionSelect=e.$("select.action-type").change(),GrooveClient.trigger("rule-action:count-change")}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,variables:this.variables,selectOptions:this.selectOptions,variablesSelect:this.variablesSelect,index:this.index})},i.prototype.clearErrors=function(){return this.$(".error-block").remove()},i.prototype.changeValue=function(e){var t;return t=e.val(),this.setValueSelect(t),this.setAgentSelect(t),this.setValueInput(t),this.setEmailTextarea(t)},i.prototype.setValueSelect=function(e){var t,n,i;return(t=this.valueSelectDependencies[e])?(n=this.variables[t],i=parseInt(this.model.get("value"))||this.model.get("value"),this.valueSelect.css("display","inline-block").html(this.selectOptions({options:n,selected:i})).show()):void this.valueSelect.hide()},i.prototype.setAgentSelect=function(e){var t,n,i;return(t=this.agentSelectDependencies[e])?(n=this.variables[t],i=parseInt(this.model.get("to_agent")),this.agentSelect.css("display","inline-block").html(this.selectOptions({options:n,selected:i})).show()):void this.agentSelect.hide()},i.prototype.setValueInput=function(e){var t,i;return n.call(this.valueInputDependencies,e)<0?void this.valueInput.hide():(i=this.model.get("type")===e?this.model.get("value"):void 0,this.valueInput.css("display","inline-block").val(i).show(),(t=this.autocompletedInputs[e])&&!t.isEmpty()?this._setupAutocompleteForValueInput(t):void 0)},i.prototype.setEmailTextarea=function(e){var t,i;return n.call(this.textareaDependencies,e)<0?(this.valueTextarea.hide(),void this.variableInserter.hide()):(t=this.model.get("type"),i=n.call(this.textareaDependencies,t)>=0?this.model.get("value"):void 0,this.valueTextarea.css("display","inline-block").val(i).show(),this.variableInserter.css("display","inline-block").show())},i.prototype._destroyAutocomplete=function(){return this.valueInput.autocomplete("destroy"),this.valueInput.removeData("autocomplete")},i.prototype._setupAutocompleteForValueInput=function(e){return this.valueInput.autocomplete({source:e.pluck("name")})},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};GrooveClient.Views.RuleCondition=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=JST["settings/rules/condition"],i.prototype.className="sentence short separated condition-row",i.prototype.tagName="div",i.prototype.events={"change select.rule-condition":function(e){return this.changeOperator($(e.target)),this.clearErrors(),this.valueInput.data("autocomplete")&&this._destroyAutocomplete(),this.changeValue($(e.target)),this.$("select").uniform()},"click a.delete":function(e){return e.preventDefault(),this.remove(),this.model.markForDestroy(),GrooveClient.trigger("rule-condition:count-changed",this.model)}},i.prototype.initialize=function(e){return null==e&&(e={}),this.variables=e.variables,this.selectOptions=e.selectOptions,this.index=e.index,this.valueSelectDependencies={priority:"priorities",mailbox:"mailboxes",status:"states",channel:"channels"},this.valueInputDependencies=["to_email","from_email","subject","subject_or_description","contact_name","labels","description"],this.autocompletedInputs={labels:GrooveClient.data.labels}},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e.operatorSelect=e.$("select.rule-operator"),e.valueInput=e.$("input.rule-value"),e.valueSelect=e.$("select.rule-value"),e.paramSelect=e.$("select.rule-condition").change(),GrooveClient.trigger("rule-condition:count-changed")}}(this))},i.prototype.clearErrors=function(){return this.$(".error-block").remove()},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,variables:this.variables,selectOptions:this.selectOptions,index:this.index})},i.prototype.changeOperator=function(e){var t,n;return(t=e.val())?(n=this.variables.operator_mappings[t],this.operatorSelect.css("display","block").html(this.selectOptions({options:n,selected:this.model.get("operator")}))):void this.operatorSelect.hide()},i.prototype.changeValue=function(e){var t;return t=e.val(),this.setValueInput(t),this.setValueSelect(t)},i.prototype.setValueInput=function(e){var t,i;return n.call(this.valueInputDependencies,e)<0?void this.valueInput.hide():(i=this.model.get("param")===e?this.model.get("value"):void 0,this.valueInput.val(i).show(),(t=this.autocompletedInputs[e])&&!t.isEmpty()?this._setupAutocompleteForValueInput(t):void 0)},i.prototype.setValueSelect=function(e){var t,n;return(t=this.valueSelectDependencies[e])?(n=this.variables[t],this.valueSelect.css("display","block").html(this.selectOptions({options:n,selected:this.model.get("value")})).show()):void this.valueSelect.hide()},i.prototype._destroyAutocomplete=function(){return this.valueInput.autocomplete("destroy"),this.valueInput.removeData("autocomplete")},i.prototype._setupAutocompleteForValueInput=function(e){return this.valueInput.autocomplete({source:e.pluck("name")})},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Permissions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/shared/permissions/permissions"],n.prototype.tagName="fieldset",n.prototype.id="mailbox-permissions",n.prototype["class"]="permissions",n.prototype.subTemplates={everyone:JST["settings/shared/permissions/everyone"],me:JST["settings/shared/permissions/me"],group:JST["settings/shared/permissions/checkbox_columns"],users:JST["settings/shared/permissions/checkbox_columns"]},n.prototype.suboptionColumns=3,n.prototype.restrictionTypes={everyone:"Everyone",me:"Only Me",users:"Selected Users",group:"Selected Groups"},n.prototype.events=function(){return{"change #restriction_type":function(e){return this.renderSuboptions($(e.target).val())}}},n.prototype.initialize=function(){return this.restrictionType=this.model.get("restriction_type"),this.restrictionOptions=_.clone(this.restrictionTypes),0===this.groups().length&&delete this.restrictionOptions.group,this.listenTo(GrooveClient.data.groups,"add remove reset",function(){return this.groups("refresh")}),this.listenTo(GrooveClient.data.agents,"add remove reset",function(){return this.users("refresh")})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.suboptions=this.$(".permission-suboptions"),this.renderSuboptions(this.restrictionType),this},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{restrictionOptions:this.restrictionOptions,restrictionType:this.restrictionType,model:this.model})},n.prototype.renderSuboptions=function(e){var t;return e=e||"everyone",t={model:this.model,restrictionOptions:this.restrictionOptions},t.permittableType=e.replace(/s$/,""),t=this.buildContext(e,t),this.suboptions.html(this.subTemplates[e](t))},n.prototype.buildContext=function(e,t){switch(e){case"me":t.userId=GrooveClient.data.currentUser.id;break;case"group":_.extend(t,{columns:this.sliceIntoGroupings(this.groups(),this.suboptionColumns),removePermittableType:"user",ids:this.model.get("group_ids")});break;case"users":_.extend(t,{columns:this.sliceIntoGroupings(this.users(),this.suboptionColumns),removePermittableType:"group",ids:this.model.get("user_ids")})}return t},n.prototype.sliceIntoGroupings=function(e,t){var n,i,o;for(null==t&&(t=1),n=_.clone(e),o=Math.ceil(n.length/t),i=[];n.length>0;)i.push(n.splice(0,o));return i},n.prototype.groups=function(e){return e&&(this._groups=this.sortedGroups()),this._groups||(this._groups=this.sortedGroups())},n.prototype.sortedGroups=function(){return GrooveClient.data.groups.sortBy(function(e){return e.get("name")})},n.prototype.users=function(e){return e&&(this._users=this.sortedUsers()),this._users||(this._users=this.sortedUsers())},n.prototype.sortedUsers=function(){return GrooveClient.data.agents.active().sortBy(function(e){return e.get("name")})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty,i=[].slice;GrooveClient.Views.SlackSettings=function(n){function o(){return this._syncProfiles=e(this._syncProfiles,this),this._renderChannels=e(this._renderChannels,this),this.setupMessage=e(this.setupMessage,this),o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.template=JST["settings/slack"],o.prototype.events={"change #slack-channels":function(e){
return this._changeSlackChannel($(e.target))},"change #mailbox-settings, #slack-notifications":function(e){var t;return t=$(e.target),this._toggleDestroy(t,t.is(":checked"))},"submit form.settings":function(e){return e.preventDefault(),this._saveChanges($(e.target).toObject())},"click #uninstall-slack":function(e){return e.preventDefault(),GrooveClient.data.currentUser.isAdmin()?this.uninstallApp():void 0}},o.prototype.initialize=function(e){return this.mailboxes=e.mailboxes,this.channels=new GrooveClient.Collections.SlackChannels,this.profiles=new GrooveClient.Collections.SlackProfiles,o.__super__.initialize.call(this,e)},o.prototype.NOTIFICATIONS={new_ticket:"A ticket is created",ticket_assigned_to_agent:"A ticket is assigned to an agent",ticket_assigned_to_group:"A ticket is assigned to a group",new_reply_from_enduser:"A customer replies to a ticket",new_rating:"A customer rates a response",new_reply_from_agent:"An agent replies to a ticket",new_note_from_agent:"An agent leaves a note on a ticket",new_forward_from_agent:"An agent forwards a ticket",new_reply_from_collaborator:"A collaborator replies to a forwarded ticket"},o.prototype.renderTemplate=function(){var e,t,n,r,s,a;return t=GrooveClient.data,e=_.clone(this.model.attributes),e.channel=this.model.channel(),e.mailboxes=function(){var e,t,n,i;for(n=this.mailboxes.models,i=[],e=0,t=n.length;t>e;e++)s=n[e],i.push(this._mailboxContext(s));return i}.call(this),n=_.tap([],function(e){return t.groups.length||e.push("ticket_assigned_to_group"),t.account.get("prefers_customer_ratings_installed")?void 0:e.push("new_rating")}),e.notifications=function(){var e,t;e=_.omit.apply(_,[this.NOTIFICATIONS].concat(i.call(n))),t=[];for(a in e)r=e[a],t.push(this._notificationContext(a,r));return t}.call(this),e.needsSetup=this.model.needsSetup(),e.setupMessage=this.setupMessage,GrooveClient.data.agents.length<2?(delete e.notifications.ticket_assigned_to_agent,delete e.notifications.ticket_assigned_to_group):GrooveClient.data.groups.isEmpty()&&delete e.notifications.ticket_assigned_to_group,o.__super__.renderTemplate.call(this,e)},o.prototype.render=function(){var e,t;return o.__super__.render.apply(this,arguments),e=this.$("#slack-channels").uniform(),this.channels.wasFetched?this._renderChannels(e):this.channels.fetch({success:function(t){return function(){return t._renderChannels(e)}}(this)}),t=new GrooveClient.Views.SlackProfiles({collection:this.profiles}),this.appendChildBefore(t,"#slack-notifications"),this},o.prototype.setupMessage=function(e){return null==e&&(e={}),e.reason=this.model.setupReason(),JST["settings/slack/setup_message"](e)},o.prototype.uninstallApp=function(){return this.model.destroy().done(function(e){return function(){return GrooveClient.data.account.set("prefers_team_chat_app",!1),GrooveClient.navigate("/groove_client/apps/slack"),e.showNotification("Slack successfully uninstalled.")}}(this))},o.prototype._mailboxContext=function(e){var t;return t={id:e.id,name:e.get("name"),email:e.get("email"),settings:_.findWhere(this.model.get("mailbox_settings"),{mailbox_id:e.id})},t.isSelected=null!=t.settings,t},o.prototype._notificationContext=function(e,t){var n,i;return n={type:e,label:t,id:null!=(i=_.findWhere(this.model.get("notifications"),{type:e}))?i.id:void 0},n.isSelected=null!=n.id,n},o.prototype._changeSlackChannel=function(e){var t,n,i,o;return o=e.val(),n=o===e.data("original"),i=this.$("#channel-dropdown-container"),this._toggleDestroy(e,n,i),t=n?0:1,e.prop("name","channels["+t+"][slack_id]")},o.prototype._toggleDestroy=function(e,t,n){var i;return null==n&&(n=null),i=n||e.parent(),i.data("id")?t?$("input.destroy",i).remove():i.append(JST["settings/shared/destroy"]({name:$('input[type="hidden"]',i).prop("name").slice(0,-4)})):void 0},o.prototype._saveChanges=function(e){return this.model.save(e,{wait:!0,success:function(t){return function(){return e.profiles&&t._syncProfiles(),t.render(),new GrooveClient.Views.Notification({title:"Changes have been saved"}).show()}}(this)})},o.prototype._renderChannels=function(e){return this.channels.length?(e.html(JST["settings/slack/channel_options"]({channels:this.channels.models,original_channel:this.model.channel()})),e.change()):void 0},o.prototype._syncProfiles=function(){var e,t,n,i,o,r,s,a;for(o=this.model.get("profiles"),s=[],t=0,n=o.length;n>t;t++)r=o[t],e=r.id,a=r.slack_id,i=this.profiles.findWhere({slack_id:a}),i?s.push(i.id=e):s.push(void 0);return s},o}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SlackError=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/slack/error"],n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{error:this.error})},n.prototype.error=function(){var e;return(e=$.cookie("slack_error"))?($.cookie("slack_error",null),"A Slack error occured during installation: "+e):"An unknown Slack error occurred during installation"},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SlackProfiles=function(n){function i(){return this._renderDropdowns=e(this._renderDropdowns,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/slack_profiles"],i.prototype._dropdownTemplate=JST["settings/slack_profiles_dropdown"],i.prototype._selectedProfileTemplate=JST["settings/slack/selected_profile"],i.prototype._destroyTemplate=JST["settings/slack/destroy_profile"],i.prototype.tagName="fieldset",i.prototype.id="slack-profiles",i.prototype.events={'change div[role="selectUsername"] select':function(e){return this._selectUsername($(e.target))},'click a[href="#deselect"]':function(e){return e.preventDefault(),this._deselectUsername($(e.target).parent())}},i.prototype.renderTemplate=function(){var e,t,n;return n=function(){var n,i;n=GrooveClient.data.agents.models,i=[];for(t in n)e=n[t],e.get("archived")||i.push(this._profileContext(e,t));return i}.call(this),i.__super__.renderTemplate.call(this,{profiles:n,dropdown:this._dropdown(),_selectedProfileTemplate:this._selectedProfileTemplate})},i.prototype.render=function(){return this.collection.fetching?void 0:this.collection.wasFetched?(i.__super__.render.apply(this,arguments),this.listenTo(this.collection,"change:agent_id",this._renderDropdowns)):this.collection.fetch({complete:this.render})},i.prototype._profileContext=function(e,t){var n,i;return n={index:t,agent_id:e.id,name:e.get("name")},i=this.collection.findWhere({agent_id:e.id}),null!=i&&(n.cid=i.cid,n.id=i.id,n.username=i.get("username"),n.slack_id=i.get("slack_id")),n},i.prototype._renderDropdowns=function(){return this.$('div[role="selectUsername"]').replaceWith(this._dropdown())},i.prototype._dropdown=function(){var e,t;return t=function(){var t,n,i,o;for(i=this.collection.models,o=[],t=0,n=i.length;n>t;t++)e=i[t],e.has("agent_id")||o.push({cid:e.cid,username:e.get("username")});return o}.call(this),this._dropdownTemplate({profiles:t})},i.prototype._selectUsername=function(e){var t,n,i,o,r;return r=e.closest("label"),i=e.val(),o=this.collection.get(i),n=$('input[role="agent_id"]',r).prop("disabled",!1),t=GrooveClient.data.agents.get(n.val()),o.set("agent_id",t.id,{silent:!0}),e.parent().replaceWith(this._selectedProfileTemplate(this._profileContext(t,r.data("index")))),o.trigger("change:agent_id",o)},i.prototype._deselectUsername=function(e){var t,n;return n=e.parent(),t=this.collection.get(e.data("cid")),t.isNew()||this._destroyProfile(t,n.data("index")),$('input[role="agent_id"]',n).prop("disabled",!0),e.replaceWith('<div role="selectUsername"></div>'),t.unset("agent_id")},i.prototype._destroyProfile=function(e,t){return t+=GrooveClient.data.agents.length,this.$el.append(this._destroyTemplate({id:e.id,index:t})),e.unset("id")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SettingsStyleGuide=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["settings/style_guide"],n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketingSettings=function(n){function i(){return this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["settings/ticketing"],i.prototype.events={"submit form.settings":function(e){return e.preventDefault(),this.saveSettings($(e.target))}},i.prototype.initialize=function(){return this.groupAsSeparateInboxes=this.model.get("prefers_grouping_filters_by_mailbox"),this.replyButton=this.model.get("prefers_reply_button"),this.spammerEmails=this.model.get("spammer_emails").join("\n")},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,groupAsSeparateInboxes:this.groupAsSeparateInboxes,replyButton:this.replyButton,spammerEmails:this.spammerEmails,replyStates:GrooveClient.data.ticketReplyStates,mailboxCount:GrooveClient.data.mailboxes.length})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(){return this.$("textarea.autogrow").elastic()})},i.prototype.saveSettings=function(e){var t;return this.clearErrors(),t=e.toObject(),t.spammer_emails&&(t.spammer_emails=_.compact(t.spammer_emails.split(/\s|,/))),this.model.attributes=t,this.model.save({},{wait:!0,success:this.handleSuccess,error:this.handleFailure})},i.prototype.handleSuccess=function(){return this.refreshAccountData(),this.renderFlash({title:"Your ticketing preferences have been updated."})},i.prototype.handleFailure=function(e,t){return this.renderFlash({title:"There was an error while updating your ticketing preferences."}),this.displayErrors($.parseJSON(t.responseText).errors)},i.prototype.displayErrors=function(e){return e.incoming_spammers&&(e.spammer_emails=["Oops. It looks like one of these isn't a valid email address."],delete e.incoming_spammers),i.__super__.displayErrors.call(this,e)},i.prototype.clearErrors=function(){return this.$("div.error").removeClass("error"),this.$(".error-block").remove()},i.prototype.refreshAccountData=function(){return GrooveClient.data.account.fetch({reset:!0})},i}(GrooveClient.Views.SettingsView)}.call(this),function(){var e,t,n,i,o={}.hasOwnProperty;window.WidgetSettings={},e=WidgetSettings.Dispatcher={ensureStore:function(){var e;return e=jQuery.Deferred(),t.loaded?e.resolve(t):$.when($.get("/api/embedded_widgets.json"),$.get("/api/embedded_widgets_translations.json")).done(function(n,i){var o;return o=$.extend(!0,t.data,n[0],i[0]),t.replace(o),t.loaded=!0,e.resolve(o)}),e.promise()},showWidgetList:function(){return e.trigger("widget:list")},incrementStep:function(e){return e.step=e.step||1,e.step++},startNewWidget:function(){var i,o;return i=[],GrooveClient.data.account.get("prefers_knowledge_base_installed")&&i.push({name:"Knowledge Base",type:"kb",settings:{footerOnEveryPage:!1}}),i.push({name:"Contact",type:"contact",settings:{showRecommended:!1}}),o={uuid:n(),step:1,settings:{name:"Support",tabs:i,buttonType:"circle",buttonPosition:"bottom-right"}},t.get("widgets").push(o),e.trigger("widget:new",o)},editWidget:function(e){return GrooveClient.navigate("/groove_client/settings/widget/"+e)},updateWidget:function(e,n,i){return e.settings||(e.settings={}),e.settings[n]=i,t.trigger("change"),this.saveWidget(e,function(e){return t.trigger("change")})},batchUpdateWidget:function(e,t){var n,i;for(n in t)o.call(t,n)&&(i=t[n],e.settings[n]=i);return this.saveWidget(e)},saveWidget:function(e,t){var n,i,o,r;return o={settings:{}},o.settings=e.settings,o.show_on_kb=e.show_on_kb,o.step=e.step,o._method="PUT",i=this.validateWidget(e),i.length>0?(alert(i.join("\n")),i):(r="/api/embedded_widgets/"+e.uuid+".json",n=jQuery.Deferred(),$.ajax({url:r,type:"PUT",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(e){return function(e){return t&&t(),n.resolve(e)}}(this)),n.promise())},validateWidget:function(e){var t,n,i;return i=e.settings,n=[],t=_.any(i.tabs,function(e){return _.isEmpty(e.name)}),t&&n.push("Please enter a name for this tab."),n},publishWidgetAndShowOnKb:function(e,t){return e.show_on_kb=!0,this.publishWidget(e,t)},publishWidget:function(e,n){return this.saveWidget(e,function(){var i,o;return o="/api/embedded_widgets/"+e.uuid+"/publish.json",i={},$.ajax({url:o,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(i){return function(i){return e.published_settings=i.published_settings,t.trigger("change"),n?n():void 0}}(this))})},sendWidgetCode:function(e,t){var n,i;return i="/api/embedded_widgets/"+e.uuid+"/send_code.json",n={email:t},$.ajax({url:i,type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"})},updateTab:function(e,n){var i,o;for(i in n)o=n[i],"name"===i?e[i]=o:(e.settings=e.settings||{},void 0===o?delete e.settings[i]:e.settings[i]=o);return t.trigger("change")},removeTab:function(e,n){return e.settings.tabs.length>1&&(e.settings.tabs=_.without(e.settings.tabs,n)),t.trigger("change")},swapTabs:function(e,n,i){var o,r;return o=e.settings.tabs,r=o[n],o[n]=o[i],o[i]=r,t.trigger("change")},removeWidget:function(n,i){var o;return o="/api/embedded_widgets/"+n+".json",$.ajax({url:o,type:"DELETE",contentType:"application/json; charset=utf-8"}).done(function(i){return function(i){var o;return o=t.get("widgets"),o=_.without(o,_.findWhere(o,{uuid:n})),t.set("widgets",o),e.trigger("widget:delete",n)}}(this))},setTranslation:function(e,n,o,r){var s,a,l,c,p,u;return r||(r=o.type),s=this.getDefaultTranslation(e,r),a=$.extend(!0,{},(null!=(p=o.settings)?p.translations:void 0)||{}),_.isEmpty(n)||n===s?null!=(u=a[t.get("currentLocale")])&&delete u[e]:$.extend(!0,a,(l={},l[""+t.get("currentLocale")]=(c={},c[""+e]=n,c),l)),a=i(a),"widget"===r?this.updateWidget(o,"translations",a):this.updateTab(o,{translations:a})},getTranslation:function(e,n,i){var o,r,s,a;return a=null!=(o=n.settings)&&null!=(r=o.translations)&&null!=(s=r[t.get("currentLocale")])?s[e]:void 0,_.isEmpty(a)||_.isObject(a)?(i=i||n.type,this.getDefaultTranslation(e,i)):a},getDefaultTranslation:function(e,n){return"widget"===n?WidgetSettings.Store.get("translations")[t.get("currentLocale")].widget[e]:WidgetSettings.Store.get("translations")[t.get("currentLocale")].tabs[n][e]}},_.extend(WidgetSettings.Dispatcher,Backbone.Events),t=WidgetSettings.Store={data:{widgets:null,translations:null,currentLocale:"en"},loaded:!1,replace:function(e){return this.data=e,this.trigger("change")},set:function(e,t){return this.data[e]=t,this.trigger("change")},get:function(e){return this.data[e]}},_.extend(t,Backbone.Events),n=function(){var e;return e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},i=function(e){var t;return _.each(e,function(t,n){return"object"==typeof t?e[n]=i(t):void 0}),t=_.omit(e,_.isEmpty),_.isEmpty(t)&&(t=void 0),t}}.call(this),"undefined"==typeof net)var net={};net.brehaut||(net.brehaut={}),function(){function e(e,t){e=e.toString();for(var n=[],i=0,o=Math.max(t-e.length,0);o>i;i++)n.push("0");return n.push(e),n.join("")}function t(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function n(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return function(){var t=this.clone();return e.apply(t,arguments),t}}function o(e,n){function i(e){return function(){return e.apply(this[p](),arguments)}}function o(){}function r(){return new o}var a,l=g(s),c=[],p="to"+t(e);for(a in n)if(n.hasOwnProperty(a)){l[a]=n[a];var u=l[a];if("_"!=a.slice(0,1))if(a in s||"function"!=typeof u){if("function"!=typeof u){c.push(a);var u="get"+t(a),d="set"+t(a);s[u]=i(l[u]=function(e){return function(){return this[e]}}(a)),s[d]=i(l[d]=function(e){return function(t){var n=this.clone();return n[e]=t,n}}(a))}}else s[a]=i(u)}return o.prototype=l,f[e]=r,l.clone=function(){for(var e=r(),t=0,n=c.length;n>t;t++){var i=c[t];e[i]=this[i]}return e},s[p]=function(){return r()},m.push(l),l}function r(e){return s.fromObject(e)}var s,a={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},l="(?:\\+|-)?\\d+",c="(?:\\+|-)?\\d*\\.\\d+",p="(?:"+l+")|(?:"+c+")",l="("+l+")",c="("+c+")",p="("+p+")",c=p+"%",u=new RegExp(["^hsl(a?)\\(",p,",",c,",",c,"(,(",p,"))?\\)$"].join("\\s*?")),d=new RegExp(["^rgb(a?)\\(",l,",",l,",",l,"(,(",p,"))?\\)$"].join("\\s*?")),h=new RegExp(["^rgb(a?)\\(",c,",",c,",",c,"(,(",p,"))?\\)$"].join("\\s*?")),m=[],f={};this.object||(this.object=function(e){function t(){}return t.prototype=e,new t});var g=this.object;s={fromObject:function(e){if(!e)return g(s);for(var t=0,n=m.length;n>t;t++){var i=m[t].fromObject(e);if(i)return i}return g(s)},toString:function(){return this.toCSS()}};var v=null;o("RGB",{red:0,green:0,blue:0,alpha:0,getLuminance:function(){return.2126*this.red+.7152*this.green+.0722*this.blue},blend:function(e,t){e=e.toRGB(),t=Math.min(Math.max(t,0),1);var n=this.clone();return n.red=n.red*(1-t)+e.red*t,n.green=n.green*(1-t)+e.green*t,n.blue=n.blue*(1-t)+e.blue*t,n.alpha=n.alpha*(1-t)+e.alpha*t,n},fromObject:function(e){return e instanceof Array?this._fromRGBArray(e):"string"==typeof e?this._fromCSS(n(e)):e.hasOwnProperty("red")&&e.hasOwnProperty("green")&&e.hasOwnProperty("blue")?this._fromRGB(e):void 0},_stringParsers:[function(e){function t(t,n){var i=e.match(t);if(!i||1===!!i[1]+!!i[5])return null;var o=f.RGB();return o.red=Math.min(1,Math.max(0,i[2]/n)),o.green=Math.min(1,Math.max(0,i[3]/n)),o.blue=Math.min(1,Math.max(0,i[4]/n)),o.alpha=i[5]?Math.min(Math.max(parseFloat(i[6]),0),1):1,o}e=n(e);var i=t(d,255);return i?i:t(h,100)},function(e){var t=e.toLowerCase();if(t in a&&(e=a[t]),e.match(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/)){e=e.replace(/^#/,"");var t=e.length/3,n=Math.pow(16,t)-1,i=f.RGB();return i.red=parseInt(e.slice(0,t),16)/n,i.green=parseInt(e.slice(1*t,2*t),16)/n,i.blue=parseInt(e.slice(2*t),16)/n,i.alpha=1,i}},function(e){return"transparent"===e.toLowerCase()?v:void 0}],_fromCSS:function(e){for(var t,n=0,i=this._stringParsers.length;i>n;n++)if(t=this._stringParsers[n](e))return t},_fromRGB:function(e){var t=f.RGB();return t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.hasOwnProperty("alpha")?e.alpha:1,t},_fromRGBArray:function(e){var t=f.RGB();return t.red=Math.max(0,Math.min(1,e[0]/255)),t.green=Math.max(0,Math.min(1,e[1]/255)),t.blue=Math.max(0,Math.min(1,e[2]/255)),t.alpha=void 0!==e[3]?Math.max(0,Math.min(1,e[3])):1,t},toCSSHex:function(t){t=t||2;var n=Math.pow(16,t)-1;return["#",e(Math.round(this.red*n).toString(16).toUpperCase(),t),e(Math.round(this.green*n).toString(16).toUpperCase(),t),e(Math.round(this.blue*n).toString(16).toUpperCase(),t)].join("")},toCSS:function(e){return 1===this.alpha?this.toCSSHex(e):["rgba(",Math.max(0,Math.min(255,Math.round(255*this.red))),",",Math.max(0,Math.min(255,Math.round(255*this.green))),",",Math.max(0,Math.min(255,Math.round(255*this.blue))),",",Math.max(0,Math.min(1,this.alpha)),")"].join("")},toHSV:function(){var e,t,n=f.HSV();return e=Math.min(this.red,this.green,this.blue),t=Math.max(this.red,this.green,this.blue),n.value=t,e=t-e,0==e?n.hue=n.saturation=0:(n.saturation=e/t,n.hue=this.red==t?(this.green-this.blue)/e:this.green==t?2+(this.blue-this.red)/e:4+(this.red-this.green)/e,n.hue=(60*n.hue+360)%360),n.alpha=this.alpha,n},toHSL:function(){return this.toHSV().toHSL()},toRGB:function(){return this.clone()}}),v=s.fromObject({red:0,blue:0,green:0,alpha:0}),o("HSV",{hue:0,saturation:0,value:1,alpha:1,shiftHue:i(function(e){e=(this.hue+e)%360,0>e&&(e=(360+e)%360),this.hue=e}),devalueByAmount:i(function(e){this.value=Math.min(1,Math.max(this.value-e,0))}),devalueByRatio:i(function(e){this.value=Math.min(1,Math.max(this.value*(1-e),0))}),valueByAmount:i(function(e){this.value=Math.min(1,Math.max(this.value+e,0))}),valueByRatio:i(function(e){this.value=Math.min(1,Math.max(this.value*(1+e),0))}),desaturateByAmount:i(function(e){this.saturation=Math.min(1,Math.max(this.saturation-e,0))}),desaturateByRatio:i(function(e){this.saturation=Math.min(1,Math.max(this.saturation*(1-e),0))}),saturateByAmount:i(function(e){this.saturation=Math.min(1,Math.max(this.saturation+e,0))}),saturateByRatio:i(function(e){this.saturation=Math.min(1,Math.max(this.saturation*(1+e),0))}),schemeFromDegrees:function(e){for(var t=[],n=0,i=e.length;i>n;n++){var o=this.clone();o.hue=(this.hue+e[n])%360,t.push(o)}return t},complementaryScheme:function(){return this.schemeFromDegrees([0,180])},splitComplementaryScheme:function(){return this.schemeFromDegrees([0,150,320])},splitComplementaryCWScheme:function(){return this.schemeFromDegrees([0,150,300])},splitComplementaryCCWScheme:function(){return this.schemeFromDegrees([0,60,210])},triadicScheme:function(){return this.schemeFromDegrees([0,120,240])},clashScheme:function(){return this.schemeFromDegrees([0,90,270])},tetradicScheme:function(){return this.schemeFromDegrees([0,90,180,270])},fourToneCWScheme:function(){return this.schemeFromDegrees([0,60,180,240])},fourToneCCWScheme:function(){return this.schemeFromDegrees([0,120,180,300])},fiveToneAScheme:function(){return this.schemeFromDegrees([0,115,155,205,245])},fiveToneBScheme:function(){return this.schemeFromDegrees([0,40,90,130,245])},fiveToneCScheme:function(){return this.schemeFromDegrees([0,50,90,205,320])},fiveToneDScheme:function(){return this.schemeFromDegrees([0,40,155,270,310])},fiveToneEScheme:function(){return this.schemeFromDegrees([0,115,230,270,320])},sixToneCWScheme:function(){return this.schemeFromDegrees([0,30,120,150,240,270])},sixToneCCWScheme:function(){return this.schemeFromDegrees([0,90,120,210,240,330])},neutralScheme:function(){return this.schemeFromDegrees([0,15,30,45,60,75])},analogousScheme:function(){return this.schemeFromDegrees([0,30,60,90,120,150])},fromObject:function(e){if(e.hasOwnProperty("hue")&&e.hasOwnProperty("saturation")&&e.hasOwnProperty("value")){var t=f.HSV();return t.hue=e.hue,t.saturation=e.saturation,t.value=e.value,t.alpha=e.hasOwnProperty("alpha")?e.alpha:1,t}return null},_normalise:function(){this.hue%=360,this.saturation=Math.min(Math.max(0,this.saturation),1),this.value=Math.min(Math.max(0,this.value)),this.alpha=Math.min(1,Math.max(0,this.alpha))},toRGB:function(){this._normalise();var e,t,n,i,o=f.RGB();if(0===this.saturation)return o.red=this.value,o.green=this.value,o.blue=this.value,o.alpha=this.alpha,o;switch(n=this.hue/60,e=Math.floor(n),t=n-e,n=this.value*(1-this.saturation),i=this.value*(1-this.saturation*t),t=this.value*(1-this.saturation*(1-t)),e){case 0:o.red=this.value,o.green=t,o.blue=n;break;case 1:o.red=i,o.green=this.value,o.blue=n;break;case 2:o.red=n,o.green=this.value,o.blue=t;break;case 3:o.red=n,o.green=i,o.blue=this.value;break;case 4:o.red=t,o.green=n,o.blue=this.value;break;default:o.red=this.value,o.green=n,o.blue=i}return o.alpha=this.alpha,o},toHSL:function(){this._normalise();var e=f.HSL();e.hue=this.hue;var t=(2-this.saturation)*this.value,n=this.saturation*this.value;return t&&2-t&&(n/=1>=t?t:2-t),e.saturation=n,e.lightness=t/2,e.alpha=this.alpha,e},toHSV:function(){return this.clone()}}),o("HSL",{hue:0,saturation:0,lightness:0,alpha:1,darkenByAmount:i(function(e){this.lightness=Math.min(1,Math.max(this.lightness-e,0))}),darkenByRatio:i(function(e){this.lightness=Math.min(1,Math.max(this.lightness*(1-e),0))}),lightenByAmount:i(function(e){this.lightness=Math.min(1,Math.max(this.lightness+e,0))}),lightenByRatio:i(function(e){this.lightness=Math.min(1,Math.max(this.lightness*(1+e),0))}),fromObject:function(e){return"string"==typeof e?this._fromCSS(e):e.hasOwnProperty("hue")&&e.hasOwnProperty("saturation")&&e.hasOwnProperty("lightness")?this._fromHSL(e):void 0},_fromCSS:function(e){if(e=n(e).match(u),!e||1===!!e[1]+!!e[5])return null;var t=f.HSL();return t.hue=(e[2]%360+360)%360,t.saturation=Math.max(0,Math.min(parseInt(e[3],10)/100,1)),t.lightness=Math.max(0,Math.min(parseInt(e[4],10)/100,1)),t.alpha=e[5]?Math.max(0,Math.min(1,parseFloat(e[6]))):1,t},_fromHSL:function(e){var t=f.HSL();return t.hue=e.hue,t.saturation=e.saturation,t.lightness=e.lightness,t.alpha=e.hasOwnProperty("alpha")?e.alpha:1,t},_normalise:function(){this.hue=(this.hue%360+360)%360,this.saturation=Math.min(Math.max(0,this.saturation),1),this.lightness=Math.min(Math.max(0,this.lightness)),this.alpha=Math.min(1,Math.max(0,this.alpha))},toHSL:function(){return this.clone()},toHSV:function(){this._normalise();var e=f.HSV();e.hue=this.hue;var t=2*this.lightness,n=this.saturation*(1>=t?t:2-t);return e.value=(t+n)/2,e.saturation=2*n/(t+n)||0,e.alpha=this.alpha,e},toRGB:function(){return this.toHSV().toRGB()}}),r.isValid=function(e){var t;e=r(e);var n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n>0},net.brehaut.Color=r}.call(net.brehaut),"undefined"!=typeof module&&(module.exports=net.brehaut.Color),function(){var e,t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g,v,y,w,b,k,C,x,T,S,G,A,M,z,V,R,E,O,I,F,N;e=[{name:"backgroundColor",label:"Background","default":"#FFFFFF"},{name:"primaryColor",label:"Primary color","default":"#00BCD4",withTextColorVariation:!0},{name:"actionColor",label:"Links & Buttons","default":"#009688",withTextColorVariation:!0},{name:"highlightColor",label:"Tab highlight","default":"#FFFF8D"},{name:"mainTextColor",label:"Main text","default":"#212121"},{name:"secondaryTextColor",label:"Secondary text","default":"#757575"}],c=WidgetSettings.Dispatcher,C=WidgetSettings.Store,WidgetSettings.Main=React.createClass({displayName:"Main",getInitialState:function(){return{page:"list"}},componentDidMount:function(){return c.on("widget:new",this.onCreate),c.on("widget:delete",this.onDelete),c.on("widget:edit",this.onEdit),c.on("widget:list",this.openList),C.on("change",this.reRender)},componentWillUnmount:function(){return c.off("widget:new",this.onCreate),c.off("widget:edit",this.onEdit),c.off("widget:list",this.openList),C.off("change",this.reRender)},reRender:function(){var e;return e=function(){return null},this.forceUpdate(e)},render:function(){switch(this.state.page){case"list":return React.createElement(R,React.__spread({},this.props,{key:1}));case"wizard":return React.createElement(E,React.__spread({},this.props,{widget:this.state.widget,key:2,removeOnAbort:!0}))}},openList:function(e){return this.setState({widget:null,page:"list"})},onCreate:function(e){return analytics.track("Created Widget",{},{},function(t){return function(){return t.setState({widget:e,page:"wizard"})}}(this))},onDelete:function(e){return analytics.track("Deleted Widget")},onEdit:function(e){return e.settings||(e.settings={}),c.editWidget(e.uuid)}}),WidgetSettings.Wizard=E=React.createClass({displayName:"Wizard",getInitialState:function(){return{step:this.props.step||1}},componentDidMount:function(){return this._trackStep()},nextStep:function(){return c.incrementStep(this.props.widget),c.saveWidget(this.props.widget,function(e){return function(){return e.setState({step:e.state.step+1}),e._trackStep()}}(this))},publishAndNextStep:function(){return c.incrementStep(this.props.widget),c.publishWidget(this.props.widget,function(e){return function(){return e.setState({step:e.state.step+1}),e._trackStep()}}(this))},lastStep:function(){return c.incrementStep(this.props.widget),c.publishWidgetAndShowOnKb(this.props.widget,function(e){return function(){return analytics.track("Completed Widget Onboarding",{},{},c.showWidgetList)}}(this))},render:function(){var e,t;switch(e=this.state.step,t=this.props.widget,e){case 1:return React.createElement(m,{onAbort:this.abort,widget:t,nextStep:this.nextStep});case 2:return React.createElement(k,{onAbort:this.abort,widget:t,nextStep:this.publishAndNextStep});case 3:return React.createElement(S,{onAbort:this.abort,widget:t,nextStep:this.lastStep})}},abort:function(){var e,t;return t=this.props.widget,e=function(e){return function(){return c.showWidgetList(),GrooveClient.navigate("/groove_client/settings/widget")}}(this),this.props.removeOnAbort?c.removeWidget(t.uuid).done(e):e(),null},_trackStep:function(){return analytics.page("Widget Onboarding Step "+this.state.step,{category:"Settings"})}}),R=React.createClass({displayName:"WidgetsList",componentDidMount:function(){return analytics.page("Widget Settings List",{category:"Settings"})},render:function(){var e,t;return t=C.get("widgets"),e=this.props.onEdit,React.createElement("div",null,React.createElement("div",{className:"box-c-toolbar ws-box-c-toolbar"},React.createElement("h1",null,"Widgets"),React.createElement("div",{className:"ws-toolbarCTA"},React.createElement(n,{outline:!0,onClick:c.startNewWidget},"Create widget"))),React.createElement("div",{className:"WidgetList"},React.createElement("div",{className:"wl-list"},t.map(function(t,n){return React.createElement(G,{widget:t,key:n,onEdit:e})}))))}}),G=React.createClass({displayName:"Widget",render:function(){var e,t,n,i;return i=this.props.widget,t=i.settings||{},e=t.name||i.uuid,n=t.tabs||[],React.createElement("div",{
className:"wl-Widget"},React.createElement("div",null,React.createElement("div",{className:"wl-Widget_name",onClick:this.handleClick},e," Widget"),React.createElement("div",{className:"wl-Widget_tabs"},n.map(function(e){return e.name}).join(" | "))),React.createElement("div",{className:"wl-Widget_cta"},React.createElement("a",{className:"asv2-Icon asv2-Icon-settings",onClick:this.handleClick},"Modify"),React.createElement("a",{className:"asv2-Icon asv2-Icon-delete",onClick:this.handleRemove},"Remove")))},handleClick:function(){return c.trigger("widget:edit",this.props.widget)},handleRemove:function(){return confirm("Are you sure?")?c.removeWidget(this.props.widget.uuid):void 0}}),m=React.createClass({displayName:"FirstStep",render:function(){return React.createElement("div",{className:"WidgetSettings"},React.createElement(w,{step:1}),React.createElement("div",{className:"ws-panel"},React.createElement("div",{className:"ws-preview"},React.createElement(t,null,React.createElement(A,{widget:this.props.widget}))),React.createElement("div",{className:"ws-controls"},React.createElement("div",null,React.createElement("div",null,"Help Where Your Customers Need It"),React.createElement(f,null,"Your customers are always going to have questions, but do they always ask them? Our customizable widget let's your customers get the answers when they need them. Whether on their own via your searchable knowledge base, or by connecting to your agents without leaving the page. "),React.createElement(f,null,"Get Started below..."),React.createElement("div",{className:"asv2-u-mt2"},"Start by picking a button"),React.createElement(f,null,"Pick the style that matches your site best. You'll be able to change the colors later. "),React.createElement("div",{className:"asv2-u-mt2"},React.createElement(g,{widget:this.props.widget,name:"buttonType",choices:[{text:"Show circle button",value:"circle"},{text:"Show rectangle button",value:"rectangle"}]}),React.createElement(g,{widget:this.props.widget,name:"buttonPosition",choices:[{text:"in the bottom right corner",value:"bottom-right"},{text:"in the bottom left corner",value:"bottom-left"}]}))),React.createElement("div",{className:"asv2-u-mt3"},React.createElement(n,{onClick:this.props.nextStep},"Continue"),React.createElement(n,{clear:!0,onClick:this.abort},"Cancel")))))},abort:function(){return this.props.onAbort&&this.props.onAbort(),null}}),k=React.createClass({displayName:"SecondStep",render:function(){return React.createElement("div",{className:"WidgetSettings"},React.createElement(w,{step:2}),React.createElement(p,React.__spread({},this.props,{showButtons:!0})))}}),WidgetSettings.Editor=React.createClass({displayName:"Editor",getInitialState:function(){return{view:"editor"}},componentDidMount:function(){return C.on("change",this.reRender),analytics.page("Widget Settings",{category:"Settings"})},componentWillUnmount:function(){return C.off("change",this.reRender)},reRender:function(){return this.forceUpdate(function(){return null})},tabChanged:function(){var e,t;return t=_.clone(this.props.widget.settings),e=_.clone(this.props.widget.published_settings),delete t.name,null!=e&&delete e.name,JSON.stringify(t)!==JSON.stringify(e)},showCode:function(){return this.setState({view:"code"})},showEditor:function(){return this.setState({view:"editor"})},showList:function(){return c.showWidgetList(),GrooveClient.navigate("/groove_client/settings/widget")},publishWidget:function(){return c.publishWidget(this.props.widget)},openCodeModal:function(){return document.querySelector(".box-a-header").style.zIndex=0,document.querySelector(".box-b-sidebar-left").style.zIndex=0,document.querySelector(".box-b-main").style.background="transparent",this.showCode()},closeCodeModal:function(){return document.querySelector(".box-a-header").style.zIndex="",document.querySelector(".box-b-sidebar-left").style.zIndex="",document.querySelector(".box-b-main").style.background="",this.showEditor()},render:function(){var e,t,o,r;return r=this.props.widget,r.show_on_kb?(o=[],e=this.tabChanged()?React.createElement("div",{className:"ws-PublishStatus ws-PublishStatus-has-changes"},React.createElement("div",{className:"ws-PublishStatus_message"},"Settings below ",React.createElement("b",null,"are not live")," on your site"),React.createElement(n,{outline:!0,onClick:this.publishWidget},"Publish")):React.createElement("div",{className:"ws-PublishStatus"},React.createElement("div",{className:"ws-PublishStatus_message"},"Settings below are live on your site"),React.createElement(n,{outline:!0,disabled:!0,onClick:this.publishWidget},"Publish")),"code"===this.state.view&&o.push(React.createElement(y,{name:"Widget Code",isOpened:!0,close:this.closeCodeModal,key:"widgetcode"},React.createElement(i,{widget:this.props.widget,hideControls:!0}))),o.push(React.createElement(p,React.__spread({},this.props,{nextStep:this.nextStep,key:"editpanel"}),React.createElement("div",{className:"asv2-u-mt2 ws-installButton"},React.createElement(n,{outline:!0,onClick:this.openCodeModal},"Install on your site")))),React.createElement("div",null,React.createElement("div",{className:"box-c-toolbar ws-box-c-toolbar"},React.createElement("a",{className:"nav-back-button",onClick:this.showList},React.createElement("span",null,"Back")),React.createElement(h,{widget:this.props.widget}),React.createElement("div",{className:"ws-toolbarCTA"},e)),React.createElement("div",{className:"WidgetSettings"},o))):(t=r.step||1,React.createElement(E,{widget:r,step:t,removeOnAbort:!1}))},nextStep:function(){return c.saveWidget(this.props.widget,function(e){return function(){return GrooveClient.navigate("/groove_client/settings/widget")}}(this))}}),p=React.createClass({displayName:"EditPanel",getInitialState:function(){var e;return this.props.widget.settings.tabs=this.props.widget.settings.tabs||[],e=this.props.widget.settings.tabs||[],{tab:e[0],tabModalOpened:!1}},changeTab:function(e){return this.setState({tab:e})},openTabModal:function(){return document.querySelector(".box-a-header").style.zIndex=0,document.querySelector(".box-b-sidebar-left").style.zIndex=0,document.querySelector(".box-b-main").style.background="transparent",this.setState({tabModalOpened:!0})},closeTabModal:function(){return document.querySelector(".box-a-header").style.zIndex="",document.querySelector(".box-b-sidebar-left").style.zIndex="",document.querySelector(".box-b-main").style.background="",this.setState({tabModalOpened:!1})},addKBTab:function(){return this.addTab("kb")},addContactTab:function(){return this.addTab("contact")},addTab:function(e){var t,n;return n=this.props.widget.settings.tabs,n.length>=3?void alert("max tabs"):(t={name:"New",type:e,"new":!0,settings:{}},n.push(t),this.changeTab(t),this.setState({tabModalOpened:!1}))},render:function(){var i,o,r;return r=this.props.widget.settings.tabs||[],o=this.state.tab?React.createElement(T,{widget:this.props.widget,tab:this.state.tab,onRemove:this.onTabRemove}):React.createElement("div",null,"No tabs added yet"),i=this.props.showButtons?React.createElement("div",{className:"asv2-u-mt3"},React.createElement(n,{onClick:this.props.nextStep},"Continue"),React.createElement(n,{clear:!0,onClick:this.abort},"Cancel")):void 0,React.createElement("div",{className:"ws-panel"},React.createElement("div",{className:"ws-preview"},React.createElement("div",{className:"ws-WidgetPreview"},React.createElement(l,{widget:this.props.widget,baseColors:e}),React.createElement("div",{className:"ws-WidgetPreview_tabs"},r.map(function(e,t){return React.createElement(V,{widget:this.props.widget,key:t,index:t,tab:e,currentTab:this.state.tab,onClick:function(){this.changeTab(e)}.bind(this)},e.name)}.bind(this))),React.createElement("div",{className:"ws-WidgetPreview_content ws-WidgetPreview_backgroundColorBg"},React.createElement(z,{tab:this.state.tab,settings:this.props.widget.settings}))),React.createElement(t,{dark:"dark-colors"===this.props.widget.settings.color_scheme},React.createElement(A,{widget:this.props.widget}))),React.createElement("div",{className:"ws-controls"},o,React.createElement("div",{className:"asv2-u-mt2 asv2-u-dashed-top"},React.createElement("div",{className:"asv2-u-mt2 asv2-u-color-hint"},"General Settings"),React.createElement("div",{className:"asv2-u-mt2"},React.createElement(g,{widget:this.props.widget,name:"color_scheme",choices:[{text:"Use default color scheme",value:"light-colors"},{text:"Use custom color scheme",value:"custom-colors"}]}),React.createElement(s,{widget:this.props.widget})),React.createElement("div",{className:"asv2-u-mt2"},React.createElement(n,{outline:!0,onClick:this.openTabModal},"Add another tab")),React.createElement(y,{name:"Add Another Tab to Your Widget",isOpened:this.state.tabModalOpened,close:this.closeTabModal},React.createElement(f,null,"Let your customers help themselves by adding a searchable knowledge base to your widget, and watch support request numbers plummet."),React.createElement("div",{className:"asv2-u-mt1 asv2-u-mb3"},React.createElement(n,{outline:!0,onClick:this.addKBTab},"Add Knowledge Base")),React.createElement(f,null,"Even the best knowledge base can't answer every question, but we've got you covered. Add one more contact forms and direct requests to the right mailbox everytime."),React.createElement("div",{className:"asv2-u-mt1"},React.createElement(n,{outline:!0,onClick:this.addContactTab},"Add Contact Form")),React.createElement("div",{className:"asv2-u-mt3 asv2-u-fr"},React.createElement(n,{text:!0,onClick:this.closeTabModal},"Cancel")))),React.createElement("div",{className:"asv2-u-mt2 asv2-u-dashed-top"},React.createElement("div",{className:"asv2-u-mt2 asv2-u-color-hint"},"When closed"),React.createElement("div",{className:"asv2-u-mt1"},React.createElement(g,{widget:this.props.widget,name:"buttonType",choices:[{text:"Show circle button",value:"circle"},{text:"Show rectangle button",value:"rectangle"}]}),React.createElement(g,{widget:this.props.widget,name:"buttonPosition",choices:[{text:"in the bottom right corner",value:"bottom-right"},{text:"in the bottom left corner",value:"bottom-left"}]}))),i,this.props.children))},onTabRemove:function(){var e;return e=this.props.widget.settings.tabs||[],this.changeTab(e[0])},abort:function(){return this.props.onAbort&&this.props.onAbort(),null}}),M=React.createClass({displayName:"WidgetChatSettingsPanel",getInitialState:function(){return{showModal:!1}},render:function(){var e,t;return t={minHeight:"30px"},e=[],this.hasOlarkInstalled()&&this.shouldShowOptions()?e.push(React.createElement("div",{className:"asv2-u-mt2",style:t,key:1},React.createElement("span",{className:"asv2-u-font-hint",style:{marginRight:"-3px"}},"Site ID:"),React.createElement(g,{ref:"olark_site_id",widget:this.props.widget,onChange:this.onOlarkSiteIdChange,name:"olark_site_id",choices:this.getIntegrations()}))):e.push(React.createElement("div",{className:"asv2-u-mt2",style:t,key:1},React.createElement(n,{outline:!0,onClick:this.addOlark},"Add Olark"))),this.state.showModal&&e.push(React.createElement(ChatSettings.OlarkIntegrationEditModal,{integration:this.state.integration,key:2,close:this.onCloseModal})),React.createElement("div",{className:"asv2-u-mt2"},React.createElement("span",{className:"asv2-Switch_label"},"Use Olark to chat with my customers"),React.createElement(f,null,"Connect your Site ID, and chat in Olark with customers via your Groove widget. You can even send transcripts to your mailbox and to keep the conversation going by email."),e)},onCloseModal:function(e){var t,n;return e.success?(n=ChatSettings.Store.get("integrations"),t=_.findWhere(n,{id:e.id}),c.updateWidget(this.props.widget,"olark_site_id",t.external_id).done(function(e){return function(){return e.hideModal()}}(this))):this.state.integration?ChatSettings.Dispatcher.removeIntegration(this.state.integration.id).done(function(e){return function(t){return e.hideModal()}}(this)):void 0},showModal:function(){return this.setState({showModal:!0})},hideModal:function(){return this.setState({showModal:!1,integration:null})},olarkIsInstalled:function(){return ChatSettings.Store.get("integrations").length>0},shouldShowOptions:function(){var e;return e=this.props.widget.settings||{},e.olark_site_id&&ChatSettings.Store.get("integrations").length>0},getIntegrations:function(){var e,t,n,i,o,r;for(t=ChatSettings.Store.get("integrations"),o=[],r=this.props.widget.settings||{},r.olark_site_id&&o.push({value:-1,text:"Remove from widget"}),n=0,i=t.length;i>n;n++)e=t[n],o.push({value:e.external_id,text:e.external_id||e.token});return o.push({value:-2,text:"Add Site ID"}),o},addOlark:function(){var e,t,n;return t=ChatSettings.Store.get("integrations"),n=_.filter(t,function(e){return function(e){return null!==e.external_id&&""!==e.external_id}}(this)),n.length>0?(e=n[0],c.updateWidget(this.props.widget,"olark_site_id",e.external_id)):0===n.length&&t.length>0?(e=t[0],this.setState({integration:e}),this.showModal()):this.openNewIntegrationModal()},hasOlarkInstalled:function(){return GrooveClient.data.account.get("prefers_olark_installed")},onOlarkSiteIdChange:function(e){return"-2"===e?this.openNewIntegrationModal():"-1"===e?c.updateWidget(this.props.widget,"olark_site_id",null):c.updateWidget(this.props.widget,"olark_site_id",e)},openNewIntegrationModal:function(){return ChatSettings.Dispatcher.createIntegration({mailbox_id:this.getFirstMailboxId()}).done(function(e){return function(t){return e.setState({integration:t}),e.showModal()}}(this)),!0},getFirstMailboxId:function(){var e;return e=GrooveClient.data.mailboxes.models[0],e?e.id:void 0}}),z=React.createClass({displayName:"WidgetPreviewContent",getInitialState:function(){return{contact:{activePage:"form"},formHeight:0}},switchState:function(e){return"contact"===this.props.tab.type&&"form"===this.state.contact.activePage&&this.setState({formHeight:$(this.refs.contactForm.getDOMNode()).height()}),this.setState({contact:{activePage:e}})},render:function(){var e,t,n,i,o,r;switch(o=this.props.tab,r=o.type,t=this.props.settings,r){case"contact":switch(e=this.state.contact.activePage,n=React.createElement("div",{className:"ws-preview_stateSwitcher"},React.createElement(g,{choices:[{text:"Form",value:"form"},{text:"Confirmation",value:"confirmation"}],defaultValue:e,onChange:this.switchState.bind(this)})),e){case"form":return o.settings.showRecommended&&(i={opacity:1}),React.createElement("div",{style:{position:"relative"},ref:"contactForm"},React.createElement("div",{className:"ws-WidgetPreview_Intro ws-WidgetPreview_backgroundColorDarkBg"},React.createElement("div",{className:"ws-WidgetPreview_Intro_headline ws-WidgetPreview_primaryColor"},React.createElement(d,{textKey:"headline",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_Intro_subheading ws-WidgetPreview_mainTextColor"},React.createElement(d,{textKey:"subheading",targetObject:this.props.tab}))),React.createElement("div",{className:"ws-WidgetPreview_ContactForm ws-WidgetPreview_backgroundColorBg"},React.createElement("div",{className:"ws-WidgetPreview_ContactForm_input ws-WidgetPreview_backgroundColorDarkerBorder"},React.createElement(d,{textKey:"email_placeholder",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_subject-and-suggestions"},React.createElement("div",{className:"ws-WidgetPreview_ContactForm_input ws-WidgetPreview_backgroundColorDarkerBorder"},React.createElement(d,{textKey:"subject_placeholder",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_actionColor ws-WidgetPreview_suggestions",style:i},"3 ",React.createElement(d,{textKey:"matching_articles",targetObject:this.props.tab}),React.createElement("span",{className:"ws-WidgetPreview_suggestions_arrow"},"\u276f"))),React.createElement("div",{className:"ws-WidgetPreview_ContactForm_textarea ws-WidgetPreview_backgroundColorDarkerBorder"},React.createElement(d,{textKey:"message_placeholder",targetObject:this.props.tab})),React.createElement("div",{className:"asv2-u-mb1"},React.createElement(d,{className:"ws-WidgetPreview_Button ws-WidgetPreview_actionColorBgWithText ws-WidgetPreview_actionColorLightInteractionBg",textKey:"email_button",targetObject:this.props.tab}),React.createElement(d,{className:"ws-WidgetPreview_Button ws-WidgetPreview_Button-clear ws-WidgetPreview_secondaryTextColor",textKey:"cancel_button",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_HintText ws-WidgetPreview_secondaryTextColor"},React.createElement(d,{textKey:"footer",targetObject:this.props.tab}))),n);case"confirmation":return React.createElement("div",{className:"ws-WidgetPreview_contactConfirmation_container ws-WidgetPreview_backgroundColorDarkBg",style:{position:"relative",minHeight:this.state.formHeight}},React.createElement("div",{className:"ws-WidgetPreview_contactConfirmation ws-WidgetPreview_backgroundColorBg ws-WidgetPreview_backgroundColorDarkerBorder"},React.createElement("h1",{className:"ws-WidgetPreview_contactConfirmation_header ws-WidgetPreview_mainTextColor"},React.createElement(d,{textKey:"confirmation_headline",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_contactConfirmation_message ws-WidgetPreview_secondaryTextColor"},React.createElement(d,{textKey:"confirmation_message",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_contactConfirmation_close"},React.createElement("a",{className:"ws-WidgetPreview_actionColor"},React.createElement(d,{textKey:"confirmation_close",targetObject:this.props.tab})))),n)}break;case"kb":return React.createElement("div",{className:"ws-WidgetPreview_backgroundColorDarkBg"},React.createElement("div",{className:"ws-WidgetPreview_Intro ws-WidgetPreview_backgroundColorDarkBg"},React.createElement("div",{className:"ws-WidgetPreview_Intro_headline ws-WidgetPreview_primaryColor"},React.createElement(d,{textKey:"headline",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_Intro_subheading ws-WidgetPreview_mainTextColor"},React.createElement(d,{textKey:"subheading",targetObject:this.props.tab}))),React.createElement("div",{className:"ws-WidgetPreview_Search"},React.createElement(d,{textKey:"search_placeholder",targetObject:this.props.tab})),React.createElement("div",{className:"ws-WidgetPreview_visualBreak"}),React.createElement("div",{className:"ws-WidgetPreview_ChatStarter ws-WidgetPreview_backgroundColorBg"},React.createElement("div",{className:"ws-WidgetPreview_HintText ws-WidgetPreview_secondaryTextColor"},React.createElement(d,{textKey:"did_not_find",targetObject:this.props.tab})),React.createElement("div",null,React.createElement(d,{className:"ws-WidgetPreview_Button ws-WidgetPreview_actionColorBgWithText ws-WidgetPreview_actionColorLightInteractionBg",textKey:"email_button",targetObject:this.props.tab}))))}}}),y=React.createClass({displayName:"Modal",render:function(){var e;return e=React.addons.classSet({"asv2-Modal":!0,"asv2-Modal-is-opened":this.props.isOpened}),React.createElement("div",{className:e},React.createElement("div",{className:"asv2-Modal_content"},React.createElement("div",{className:"asv2-Modal_name"},this.props.name),this.props.children,React.createElement("div",{className:"asv2-Modal_close",onClick:this.props.close},"\xd7")),React.createElement("div",{className:"asv2-Modal_overlay",onClick:this.props.close}))}}),V=React.createClass({displayName:"WidgetPreviewTab",render:function(){var e;return e=React.addons.classSet({"ws-WidgetPreview_tab":!0,"ws-WidgetPreview_tab-selected":this.props.tab===this.props.currentTab,"ws-WidgetPreview_primaryColorBgWithText":!0}),React.createElement("span",{draggable:!0,onDragStart:this.onDragStart,onDrop:this.onDragDrop,onDragOver:this.onDragOver,className:e,onClick:this.props.onClick},this.props.children)},onDragOver:function(e){return e.preventDefault(),e.stopPropagation(),C.currentlyHovered=this.props.index},onDragStart:function(e){return C.currentlyDragged=this.props.index,e.dataTransfer.setData("tabIndex",this.props.index)},onDragDrop:function(e){var t,n;return e.preventDefault(),n=parseInt(e.dataTransfer.getData("tabIndex")),t=this.props.index,c.swapTabs(this.props.widget,n,t)}}),t=React.createClass({displayName:"BrowserPreview",render:function(){var e;return e=React.addons.classSet({"ws-BrowserPreview":!0,"ws-BrowserPreview-dark":this.props.dark}),React.createElement("div",{className:e},React.createElement("div",{className:"ws-BrowserPreview_chrome"},React.createElement("div",{className:"ws-BrowserPreview_chrome_buttons"},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null)),React.createElement("div",{className:"ws-BrowserPreview_chrome_addressBar"},"http://example.com/")),React.createElement("div",{className:"ws-BrowserPreview_content"},this.props.children))}}),A=React.createClass({displayName:"WidgetButton",render:function(){var e,t,n,i,o,r;return r=this.props.widget.settings,t=r.buttonType||"circle",e=r.buttonPosition||"bottom-right",i=r.color_scheme||"light-colors",n="ws-WidgetButton ws-WidgetButton-"+t+" ws-WidgetButton-"+e+" ws-WidgetButton-"+i+" ws-WidgetPreview_primaryColorBg ws-WidgetPreview_backgroundColor",o="circle"===t?null:this.props.children,"circle"===t?React.createElement("div",{className:n}):React.createElement(d,{className:n,textKey:"text_button",targetObject:this.props.widget,targetType:"widget"})}}),O=function(e,t,n){return n=n||[{suffix:"Light",method:"lighten",amount:.025},{suffix:"Lighter",method:"lighten",amount:.2},{suffix:"Lightest",method:"lighten",amount:.4},{suffix:"Dark",method:"darken",amount:.025},{suffix:"Darker",method:"darken",amount:.2},{suffix:"Darkest",method:"darken",amount:.4}],_.flatten(e.map(function(e){return n.map(function(n){var i,o,r,s,a;return i=net.brehaut.Color,r=Boolean(t[e.name]),o=t[e.name]||e["default"],s=""+e.name+n.suffix,a=i(o)[n.method+"ByAmount"](n.amount).toString(),{name:s,"default":a,shouldSave:r}})}))},N=function(e,t){var n;return n={},e.forEach(function(e){var i;return i=t.settings[e.name],e.shouldSave&&i!==e["default"]?n[e.name]=e["default"]:void 0}),_.isEmpty(n)?void 0:c.batchUpdateWidget(t,n)},l=React.createClass({displayName:"CustomColorschemeStyles",render:function(){var e,t,n,i,o,r;return r=this.props.widget,e=this.props.baseColors,n=r.settings,"custom-colors"!==n.color_scheme?React.createElement("style",null):(t=O(e,n),N(t,r),i=e.concat(t).map(function(e){var t,i,o,r,s;return s=n[e.name]||e["default"],i=".ws-WidgetPreview_"+e.name+" { color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Hover:hover { color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Active:active { color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Focus:focus { color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Interaction:hover,\n.ws-WidgetPreview_"+e.name+"Interaction:active,\n.ws-WidgetPreview_"+e.name+"Interaction:focus { color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Border.ws-WidgetPreview_"+e.name+"Border { border-color: "+s+" }\n.ws-WidgetPreview_"+e.name+"Bg { background-color: "+s+" }\n.ws-WidgetPreview_"+e.name+"HoverBg:hover { background-color: "+s+" }\n.ws-WidgetPreview_"+e.name+"ActiveBg:active { background-color: "+s+" }\n.ws-WidgetPreview_"+e.name+"FocusBg:focus { background-color: "+s+" }\n.ws-WidgetPreview_"+e.name+"InteractionBg:hover,\n.ws-WidgetPreview_"+e.name+"InteractionBg:active,\n.ws-WidgetPreview_"+e.name+"InteractionBg:focus { background-color: "+s+" }",e.withTextColorVariation&&(t=net.brehaut.Color,o=t(s).getLightness(),r=.5>o?"#fff":"#222",i+=".ws-WidgetPreview_"+e.name+"BgWithText { color: "+r+"; background-color: "+s+" }"),i}),o=n.highlightColor||e.filter(function(e){return"highlightColor"===e.name})["default"],i.push(".ws-WidgetPreview_tab-selected { box-shadow: inset 0 -2px "+o+" }"),React.createElement("style",null,i.join("\n")))}}),T=React.createClass({displayName:"TabEditor",render:function(){var e;return e=function(){switch(this.props.tab.type){case"kb":return React.createElement(v,{tab:this.props.tab});case"contact":return React.createElement(a,{tab:this.props.tab,widget:this.props.widget})}}.call(this),React.createElement("div",null,React.createElement("a",{className:"asv2-Icon asv2-Icon-delete ws-Icon-Tab-delete",onClick:this.removeTab},"Delete"),e)},removeTab:function(){return c.removeTab(this.props.widget,this.props.tab),this.props.onRemove?this.props.onRemove():void 0}}),v=React.createClass({displayName:"KBTabEditor",render:function(){return React.createElement("div",null,React.createElement("div",null,React.createElement(u,{tab:this.props.tab,name:this.props.tab.name}),React.createElement("div",{className:"asv2-u-mt2"},React.createElement(x,{tab:this.props.tab,name:"footerOnEveryPage",label:"Show contact button at the bottom of every article"}),React.createElement(f,null,"We suggest leaving this on, but turning it off will reduce the number of emails you receive."))))}}),a=React.createClass({displayName:"ContactTabEditor",canShowChatSettings:function(){return GrooveClient.data.account.get("prefers_new_widget_chat_access")},render:function(){var e;return e=null,this.canShowChatSettings()&&(e=React.createElement(M,{widget:this.props.widget})),React.createElement("div",null,React.createElement("div",null,React.createElement(u,{tab:this.props.tab,name:this.props.tab.name})),React.createElement("div",null,React.createElement("span",{className:"asv2-u-font-hint",style:{marginRight:"-3px"}},"Send tickets to"),React.createElement(g,{tab:this.props.tab,name:"mailboxId",choices:this.getMailboxes()}),React.createElement(f,null,"All messages sent to through this form will show up in the above mailbox. Use multiple tabs for different departments, e.g. support and sales.")),React.createElement("div",{className:"asv2-u-mt2"},React.createElement(x,{tab:this.props.tab,name:"showRecommended",label:"Show recommended articles while typing subject."}),React.createElement(f,null,"We suggest leaving this on to reduce tickets for common questions.")),e)},getMailboxes:function(){var e,t,n,i,o;for(i=GrooveClient.data.mailboxes.models,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push({value:n.id,text:n.get("name")});return o}}),i=React.createClass({displayName:"CodeScreen",getInitialState:function(){return{copyStatus:null}},componentDidMount:function(){return this.clipboard=new Clipboard(this.getDOMNode().querySelector("[data-clipboard-trigger]"),{target:function(e){return function(t){return e.getDOMNode().querySelector("[data-clipboard-target]")}}(this)}),this.clipboard.on("success",function(e){return function(t){return e.setState({copyStatus:"success"}),t.clearSelection()}}(this)),this.clipboard.on("error",function(e){return function(t){return e.setState({copyStatus:"error"})}}(this))},render:function(){var e,t,i,r,s;return i=window.location.host.match("staging.groovehq")?"groove-widget-staging.s3.amazonaws.com":"groove-widget-production.s3.amazonaws.com",r="<!-- BEGIN GROOVE WIDGET CODE -->\n<script id=\"grv-widget\">\n  /*<![CDATA[*/\n  window.groove = window.groove || {}; groove.widget = function(){ groove._widgetQueue.push(Array.prototype.slice.call(arguments)); }; groove._widgetQueue = [];\n  groove.widget('setWidgetId', '"+this.props.widget.uuid+'\');\n  !function(g,r,v){var a,c,n=r.createElement("iframe");(n.frameElement||n).style.cssText="width: 0; height: 0; border: 0",n.title="",n.role="presentation",n.src="javascript:false",r.body.appendChild(n);try{a=n.contentWindow.document}catch(b){c=r.domain;var d="javascript:document.write(\'<head><script>document.domain=\\""+c+"\\";</",i="script></head><body></body>\')";n.src=d+i,a=n.contentWindow.document}var s="https:"==r.location.protocol?"https://":"http://",p="http://'+i+'".replace("http://",s);n.className="grv-widget-tag",a.open()._l=function(){c&&(this.domain=c);var t=this.createElement("script");t.type="text/javascript",t.charset="utf-8",t.async=!0,t.src=p+"/loader.js",this.body.appendChild(t)},a.write(\'<body onload="document._l();">\'),a.close()}(window,document);\n  /*]]>*/\n</script>\n<!-- END GROOVE WIDGET CODE -->',s=[],this.props.hideControls||s.push(React.createElement(o,{nextStep:this.props.nextStep})),e=React.addons.classSet({"ws-preview":!0,"ws-preview-solo":this.props.hideControls}),t=null,"success"===this.state.copyStatus&&(t=React.createElement("div",{className:"ws-EmbedCode_copied"},"Copied to clipboard.")),React.createElement("div",{className:"ws-panel"},React.createElement("div",{className:e},React.createElement("div",{className:"ws-EmbedCode"},React.createElement("div",{className:"ws-EmbedCode_header"},"Copy the snippet below to your clipboard or email it to a dev on your team"),t,React.createElement("div",{className:"ws-EmbedCode_code"},React.createElement("pre",null,React.createElement("code",{"data-clipboard-target":!0},r)),React.createElement("div",{"data-clipboard-trigger":!0,className:"asv2-Icon asv2-Icon-copy",title:"Copy to clipboard"})),React.createElement("div",{className:"ws-EmbedCode_cta"},React.createElement("span",{className:"ws-EmbedCode_ctaEmoji"},"\ud83d\ude48"),React.createElement("input",{ref:"code_email",type:"email",placeholder:"dev@example.com"}),React.createElement(n,{outline:!0,onClick:this.sendCode},"Email code")))),s)},sendCode:function(){var e;return e=this.refs.code_email.getDOMNode().value,_.isEmpty(e)?alert("Please provide email address to send the code to."):c.sendWidgetCode(this.props.widget,e)}}),o=React.createClass({displayName:"CodeScreenControls",render:function(){return React.createElement("div",{className:"ws-controls"},React.createElement("div",null,React.createElement("div",null,"You can do this :)"),React.createElement(f,null,"Simply copy the code on the right and place it before the closing </body> tag. "),React.createElement("div",{className:"asv2-u-mt2"},"Help Where Your Customers Need It"),React.createElement(f,null,"Your customers are always going to have questions, but do they always ask them? Our customizable widget lets your customers get the answers when they need them. Whether on their own via your searchable knowledge base, or by connecting to your agents without leaving the page. ")),React.createElement("div",{className:"asv2-u-mt3"},React.createElement(n,{onClick:this.props.nextStep},"Ok, done")))}}),S=React.createClass({displayName:"ThirdStep",render:function(){return React.createElement("div",{className:"WidgetSettings"},React.createElement(w,{step:3}),React.createElement(i,{widget:this.props.widget,nextStep:this.props.nextStep}))},abort:function(){return this.props.onAbort&&this.props.onAbort(),null}}),w=React.createClass({displayName:"ProgressBar",getInitialState:function(){return{steps:["Getting started","Customize look & feel","Install on your site"]}},render:function(){var e;return e=this.props.step,React.createElement("div",{className:"ws-ProgressBar"},this.state.steps.map(function(t,n){return n+=1,React.createElement(b,{active:e===n,completed:e>n,key:n},n+". "+t)}))}}),b=React.createClass({displayName:"ProgressBarItem",render:function(){var e;return e=React.addons.classSet({"ws-ProgressBar_item":!0,"ws-ProgressBar_item-active":this.props.active,"ws-ProgressBar_item-competed":this.props.completed}),React.createElement("div",{className:e},this.props.children)}}),s=React.createClass({displayName:"ColorPalette",render:function(){var t,n,i;return i=this.props.widget,n=i.settings.color_scheme,t=["backgroundColor",".","primaryColor","highlightColor","mainTextColor","secondaryTextColor","actionColor","."],"custom-colors"===n?React.createElement("div",null,React.createElement(f,null,"See what your widget will look like with any color. Use any valid CSS value, e.g. #FFFFFF, rgb(255,255,255) or just white."),React.createElement("div",{className:"ws-ColorInputs"},t.map(function(t,n){var o=e.filter(function(e){return e.name===t})[0]||{placeholder:!0,name:n};return React.createElement(r,{name:o.name,label:o.label,"default":o["default"],placeholder:o.placeholder,widget:i,key:o.name})}))):React.createElement(f,null,"Select the theme that best matches your site. Default theme is continuously optimized to increase customer success.")}}),r=React.createClass({displayName:"ColorInput",render:function(){var e,t,n;return n=this.props.placeholder===!0,e=this.props.widget.settings[this.props.name],t=this.props["default"],n?React.createElement("div",{className:"ws-ColorInput ws-ColorInput-placeholder"}):React.createElement("label",{className:"ws-ColorInput"},React.createElement("span",{className:"ws-ColorInput_preview",style:{backgroundColor:e||t}}),React.createElement("div",{className:"ws-ColorInput_inputLabelParent"},React.createElement("input",{className:"ws-ColorInput_input",name:this.props.name,placeholder:t,defaultValue:e,type:"text",ref:"colorInput",onInput:this.debouncedOnInput,
onKeyDown:this.onKeyDown,onFocus:this.selectText}),React.createElement("span",{className:"ws-ColorInput_label"},this.props.label)))},selectText:function(e){return e.target.select()},onKeyDown:function(e){return"Enter"===e.key?e.target.blur():void 0},onInput:function(){var e;return e=this.refs.colorInput.getDOMNode().value,_.isEmpty(e)?c.updateWidget(this.props.widget,this.props.name,this.props["default"]):c.updateWidget(this.props.widget,this.props.name,e)},componentWillMount:function(){return this.debouncedOnInput=_.debounce(this.onInput,250)}}),h=React.createClass({displayName:"EditableWidgetName",render:function(){return this.debouncedOnChange||(this.debouncedOnChange=_.debounce(this.onChange.bind(this),250)),React.createElement("h1",{className:"ws-EditableWidgetName"},React.createElement("input",{defaultValue:this.props.widget.settings.name||"Support",onChange:this.debouncedOnChange,type:"text",ref:"nameInput"}),React.createElement("span",null,"Widget Settings"))},autoWidth:function(e){var t,n,i,o;return i=e.value,n=getComputedStyle(e),t=n.fontStyle+" "+n.fontVariant+" "+n.fontWeight+" "+n.fontSize+"/"+n.lineHeight+" "+n.fontFamily,o=F(i,t).width,e.style.width=o+"px"},componentDidMount:function(){return setTimeout(function(e){return function(){return e.autoWidth(e.refs.nameInput.getDOMNode())}}(this),0)},onChange:function(){var e,t;return e=this.refs.nameInput.getDOMNode(),this.autoWidth(e),t=e.value,_.isEmpty(t)?c.updateWidget(this.props.widget,"name","Support"):c.updateWidget(this.props.widget,"name",t),this.timeout=null}}),u=React.createClass({displayName:"EditableTabName",getInitialState:function(){return{error:null}},render:function(){var e,t;return e=React.addons.classSet({"ws-EditableTabName":!0,"ws-EditableTabName-has-errors":this.state.error}),t=[],this.state.error&&t.push(React.createElement("p",{className:"error"},this.state.error)),React.createElement("div",{className:e},React.createElement("input",{type:"text",onChange:this.onChange,onInput:this.onInput,value:this.props.name,ref:"nameInput"}),React.createElement("span",null,"Tab"),t)},autoWidth:function(e){var t,n,i,o;return i=e.value,n=getComputedStyle(e),t=n.fontStyle+" "+n.fontVariant+" "+n.fontWeight+" "+n.fontSize+"/"+n.lineHeight+" "+n.fontFamily,o=F(i,t).width,15>o&&(o=15),e.style.width=o+"px"},componentDidMount:function(){return this.props.tab["new"]&&(delete this.props.tab["new"],this.refs.nameInput.getDOMNode().focus(),this.refs.nameInput.getDOMNode().select()),setTimeout(function(e){return function(){return e.autoWidth(e.refs.nameInput.getDOMNode())}}(this),0)},onChange:function(e){var t;return this.autoWidth(this.refs.nameInput.getDOMNode()),t=e.target.value,_.isEmpty(t)?(this.setState({error:"Tab name cannot be empty"}),c.updateTab(this.props.tab,{name:""})):(this.setState({error:null}),c.updateTab(this.props.tab,{name:e.target.value}))}}),g=React.createClass({displayName:"InlineDropdown",render:function(){var e,t;return t=function(e){return function(t){return e.selectField=t}}(this),e=this.props.choices.map(function(e){return function(e,t){return React.createElement("option",{value:e.value,key:t},e.text)}}(this)),React.createElement("select",{className:"asv2-InlineDropdown no-uniform",name:this.props.name,value:this.currentValue(),defaultValue:this.props.defaultValue,ref:t,onChange:this.onChange},e)},currentValue:function(){var e,t,n,i;return t={},(i=this.props.widget)&&(t=i.settings||t),(n=this.props.tab)&&(t=n.settings||t),e=this.props.name,t[e]},autoWidth:function(e){var t,n;return n=e.options[e.selectedIndex],t=6,e.style.width=I(n).width+t+"px"},componentDidMount:function(){return setTimeout(function(e){return function(){return e.autoWidth(e.getDOMNode())}}(this),0)},onChange:function(e){var t,n,i,o;return i=this.selectField.getDOMNode(),t=i.name,o=i.value,this.autoWidth(i),this.props.onChange?void this.props.onChange(o):(this.props.widget&&c.updateWidget(this.props.widget,t,o),this.props.tab?c.updateTab(this.props.tab,(n={},n[""+t]=o,n)):void 0)}}),x=React.createClass({displayName:"Switch",render:function(){var e;return e=function(e){return function(t){return e.input=t}}(this),React.createElement("label",{className:"asv2-Switch"},React.createElement("input",{ref:e,onClick:this.onClick,type:"checkbox",checked:this.currentValue(),name:this.props.name,className:"asv2-Switch_input",onChange:function(){}}),React.createElement("span",{className:"asv2-Switch_label"},this.props.label),React.createElement("div",{className:"asv2-Switch_track"}),React.createElement("div",{className:"asv2-Switch_thumb"}))},currentValue:function(){var e,t,n,i,o;return t={},(o=this.props.widget)&&(t=o.settings||t),(n=this.props.tab)&&(t=n.settings||t),e=this.props.name,i=t[e]||!1,"true"===i.toString()},onClick:function(){var e,t,n;return n=this.input.getDOMNode().checked,e=this.props.name,this.props.widget&&c.updateWidget(this.props.widget,e,n),this.props.tab?c.updateTab(this.props.tab,(t={},t[""+e]=n,t)):void 0}}),n=React.createClass({displayName:"Button",render:function(){var e;return e=React.addons.classSet({"asv2-Button":!0,"asv2-Button-clear":this.props.clear,"asv2-Button-outline":this.props.outline,"asv2-Button-text":this.props.text}),React.createElement("button",{onClick:this.props.onClick,className:e,disabled:this.props.disabled},this.props.children)}}),f=React.createClass({displayName:"HintText",render:function(){return React.createElement("div",{className:"ws-HintText"},this.props.children)}}),d=React.createClass({displayName:"EditableText",getInitialState:function(){return{editing:!1}},componentWillReceiveProps:function(e){if(e.widget&&e.tab)throw new Error("EditableText component can either have a tab or widget prop specified, not both.")},startEditing:function(){return this.state.editing?void 0:this.setState({editing:!0})},stopEditing:function(e){return this.state.editing?(this.setState({editing:!1}),_.isEmpty(this.getText().replace(/\s/g,""))&&(this.refs.editor.getDOMNode().textContent=this.getDefaultText()),c.setTranslation(this.props.textKey,this.getText(),this.props.targetObject,this.props.targetType)):void 0},componentDidUpdate:function(){return this.isDefaultText()&&this.state.editing?_.defer(function(){return document.execCommand("selectAll"),document.execCommand("delete")}):void 0},getDefaultText:function(){return c.getDefaultTranslation(this.props.textKey,this.props.targetType||this.props.targetObject.type)},getText:function(){return this.refs.editor.getDOMNode().textContent||""},isDefaultText:function(){return this.getText()===this.getDefaultText()},handleKeyDown:function(e){var t;return t=e.charCode||e.keyCode,13===t||27===t?(27===t&&(this.refs.editor.getDOMNode().textContent=c.getTranslation(this.props.textKey,this.props.targetObject,this.props.targetType)),this.refs.editor.getDOMNode().blur(),window.getSelection().removeAllRanges(),e.preventDefault()):void 0},handlePaste:function(e){var t,n;return n=null!=(t=e.clipboardData||window.clipboardData)?t.getData("text/plain"):void 0,document.execCommand("insertHTML",!1,n),e.preventDefault()},render:function(){var e,t;return t={__html:c.getTranslation(this.props.textKey,this.props.targetObject,this.props.targetType)},e=(this.props.className||"")+" ws-WidgetPreview_editable-text",this.state.editing?React.createElement("span",{className:e,ref:"editor",onPaste:this.handlePaste,onBlur:this.stopEditing,onKeyDown:this.handleKeyDown,contentEditable:"true",dangerouslySetInnerHTML:t}):React.createElement("span",{className:e,ref:"editor",onFocus:this.startEditing,contentEditable:"true",dangerouslySetInnerHTML:t})}}),I=function(e){var t;return t=getComputedStyle(e),F(e.textContent,t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+t.fontSize+"/"+t.lineHeight+" "+t.fontFamily)},F=function(e,t,n){var i,o;return null==n&&(n=document.body),i=document.createElement("span"),i.style.cssText="position:fixed; visibility:hidden; z-index:-1000; pointer-events:none; white-space:pre;",i.style.font=t,i.textContent=e,n.appendChild(i),o={width:i.scrollWidth,height:i.scrollHeight},n.removeChild(i),o}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Widget=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return $.when(WidgetSettings.Dispatcher.ensureStore(),ChatSettings.Dispatcher.ensureStore()).done(function(e){return function(t){return e.renderReact()}}(this))},n.prototype.renderReact=function(e){var t;return this.$el.addClass("box-b-main"),this.$el.html('<div class="box-b-wrap center-panel">'),t=this.reactContainer(),React.render(React.createElement(WidgetSettings.Main),t)},n.prototype.leave=function(){var e;return e=this.reactContainer(),e&&React.unmountComponentAtNode(e),n.__super__.leave.apply(this,arguments)},n.prototype.reactContainer=function(){return this.el.querySelector(".box-b-wrap")},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.WidgetDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return $.when(WidgetSettings.Dispatcher.ensureStore(),ChatSettings.Dispatcher.ensureStore()).done(function(e){return function(t){return e.renderReact()}}(this))},n.prototype.renderReact=function(){var e,t,n,i;return this.$el.addClass("box-b-main"),this.$el.html('<div class="box-b-wrap center-panel">'),e=this.reactContainer(),t=window.location.pathname.split("../index.html").pop(),i=WidgetSettings.Store.get("widgets"),n=_.find(i,function(e){return e.uuid===t}),React.render(React.createElement(WidgetSettings.Editor,{widget:n}),e)},n.prototype.leave=function(){var e;return e=this.reactContainer(),e&&React.unmountComponentAtNode(e),n.__super__.leave.apply(this,arguments)},n.prototype.reactContainer=function(){return this.el.querySelector(".box-b-wrap")},n}(GrooveClient.Views.SettingsView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AddLabelsDropdown=function(n){function i(){return this.hideForm=e(this.hideForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="action-label ticket-action",i.prototype.template=JST["shared/add_labels_dropdown_form"],i.prototype.events={click:"showForm","submit form":"formSubmit","keyup form":"keyupForm"},i.prototype.initialize=function(){return this.listenTo(GrooveClient.data.labels,"add remove",function(e){return function(){return delete e.form}}(this))},i.prototype.renderForm=function(){var e;return this.$("form").remove(),e=this.template(),this.form=$(e),Groove.UI.tokenizedLabels(this.form),this.$el.append(this.form.hide())},i.prototype.render=function(){return this.$el.data({name:"label"}).html("<span>Add Labels</span>"),this.setupTooltip(),this.renderForm(),this},i.prototype.showForm=function(e){return!$(e.target).is(":submit")&&this.$el.hasClass("selected")?!1:(this.form||this.renderForm(),this.timeStamp=null!=e?e.timeStamp:void 0,$(document.body).on("click."+this.cid,this.hideForm),this.$el.trigger("dropdown:show"),this.$el.addClass("selected"),this.form.show())},i.prototype.hideForm=function(e){return(null!=e?e.timeStamp:void 0)!==this.timeStamp?($(document.body).unbind("."+this.cid),this.form.hide(),this.$el.removeClass("selected"),this.$el.trigger("dropdown:hide")):void 0},i.prototype.formSubmit=function(e){var t;return t=$.trim(this.form.find(".param").val()),t&&(this.$el.trigger("labels:add",t),this.hideForm(),this.renderForm()),!1},i.prototype.keyupForm=function(e){return 27===(null!=e?e.keyCode:void 0)?this.hideForm():void 0},i.prototype.setupTooltip=function(){return this.$el.qtip({content:{text:"Change Labels"},position:{my:"top center",at:"bottom center",adjust:{y:5}},style:{classes:"ui-tooltip-shadow ui-tooltip-tipsy"},hide:{event:"click mouseleave"}})},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.Notification=function(n){function i(){return this.remove=e(this.remove,this),this.fadeOut=e(this.fadeOut,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.NOTIFICATIONS=_([]),i.prototype.FADE_DELAY=5e3,i.MARGIN=5,i.prototype.template=JST["shared/notification"],i.prototype.className="notification-popup",i.prototype.events={"click .notification-close-button":"remove",mouseenter:"stopFadeDelay",mouseleave:"startFadeDelay","click a[role]":function(e){return this.onClick?(this.onClick(e),_.delay(this.fadeOut,100)):void 0}},i.prototype.initialize=function(e){return this.title=e.title,this.message=e.message,this.delay=e.delay,this.onClick=e.onClick,null!=this.delay?this.delay:this.delay=this.FADE_DELAY},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{title:this.title,message:this.message})},i.prototype.elementRect=function(e,t){var n;return t||(t=e.offset(),t.top-=$(window).scrollTop()),n={height:e.outerHeight(),width:e.outerWidth()},{top:t.top,right:t.left+n.width,bottom:t.top+n.height,left:t.left}},i.prototype.fitsInto=function(e,t){var n,i,o,r,s,a;for(r=this.elementRect(this.$el,{top:e,left:$(window).width()-t-this.$el.outerWidth()}),a=this.constructor.NOTIFICATIONS.toArray(),n=0,i=a.length;i>n;n++)if(o=a[n],s=this.elementRect(o.$el),!(s.left>r.right||s.right<r.left||s.top>r.bottom||s.bottom<r.top))return!1;return!0},i.prototype.nextPosition=function(){var e,t,n,i,o,r,s,a;if(e={top:this.constructor.MARGIN,right:this.constructor.MARGIN},this.fitsInto(e.top,e.right))return e;for(a=this.constructor.NOTIFICATIONS.toArray().reverse(),n=0,i=a.length;i>n;n++)if(o=a[n],r=o.$el.offset(),t=o.$el.outerHeight(),r.top-=$(window).scrollTop(),s={top:r.top+t+this.constructor.MARGIN,right:parseInt(o.$el.css("right"))},this.fitsInto(s.top,s.right))return s;return e},i.prototype.show=function(){return this.render().startFadeDelay().$el.appendTo(document.body),this.$el.css(_.extend(this.nextPosition(),{position:"fixed",zIndex:1099})),this.constructor.NOTIFICATIONS.push(this)},i.prototype.stopFadeDelay=function(){return clearTimeout(this.fadeDelay)},i.prototype.startFadeDelay=function(){return this.stopFadeDelay(),this.fadeDelay=_.delay(this.fadeOut,this.delay),this},i.prototype.fadeOut=function(){return this.$el.fadeOut("slow",this.remove)},i.prototype.remove=function(){return this.stopFadeDelay(),this.leave(),i.__super__.remove.apply(this,arguments),this.constructor.NOTIFICATIONS=_(this.constructor.NOTIFICATIONS.reject(function(e){return function(t){return t===e}}(this))),!1},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Alert=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.FADE_DELAY=72e3,n.prototype.className="alert-popup",n}(GrooveClient.Views.Notification)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Blankable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){var e;return this.$(".non-blank-state, .blank-state").hide(),e="add remove reset sync fetch:complete",this.listenTo(this.collection,e,this.render)},n.prototype.render=function(){return this.collection.fetching?void 0:this.collection.isEmpty()?(this.$(".non-blank-state").hide(),this.$(".blank-state").show()):(this.$(".non-blank-state").show(),this.$(".blank-state").hide())},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.ConfirmationModal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/confirmation_modal"],n.prototype.events={"click .close-modal":"close","click .execute-callback":"confirm"},n.prototype.initialize=function(e){return null==e&&(e={}),_.extend(this,e)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{button:this.button,title:this.title,content:this.content})},n.prototype.close=function(e){return n.__super__.close.apply(this,arguments),!1},n.prototype.confirm=function(e){return"function"==typeof this.onConfirm&&this.onConfirm(),this.close()},n}(GrooveClient.Views.FancyboxView),GrooveClient.Views.ConfirmationModal.show=function(){return function(e,t,n){n.prototype=e.prototype;var i=new n,o=e.apply(i,t);return Object(o)===o?o:i}(GrooveClient.Views.ConfirmationModal,arguments,function(){}).appear()}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CopyButton=function(n){function i(){return this.leave=e(this.leave,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.tagName="a",i.prototype.className="action button",i.prototype.attributes={href:"#copy"},i.prototype.initialize=function(e){return this.text=e.text,this.value=e.value,e},i.prototype.render=function(){var e;return this.$el.text(this.text),e=function(e){return function(){return e.$el.zclip({path:"/assets/ZeroClipboard.swf",copy:e.value,afterCopy:function(){return e.trigger("copy",e,_.result(e.value))}})}}(this),setTimeout(e,100)},i.prototype.leave=function(){return this.$el.zclip("remove"),i.__super__.leave.apply(this,arguments)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FeedbackForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/feedback_form"],n.prototype.id="trends-feedback",n.prototype.events={"focus #content":function(e){var t;return this.$el.addClass("active"),t=this.$("#content"),t.hasClass("elastic")?void 0:t.addClass("elastic").elastic()},"blur #content":function(e){return this.content().length>0?void 0:this._resetForm()},"submit #new-feedback":function(e){var t;return e.preventDefault(),t=this.content(),t.length>0?this.saveFeedback(t):void 0}},n.prototype.render=function(){var e;return n.__super__.render.apply(this,arguments),window.GrooveWidget&&(e=$(GrooveWidget.container),e.css({left:"auto",right:"50px"}),this.on("leave",function(){return e.css({left:"50px",right:"auto"})})),this},n.prototype.saveFeedback=function(e){var t;return t=new GrooveClient.Models.Feedback({body:e}),t.save({},{wait:!0,complete:function(e){return function(){var t;return e._resetForm(),t={title:"Thank You!  Your feedback is appreciated."},new GrooveClient.Views.Notification(t).show()}}(this)})},n.prototype.content=function(){return $.trim(this.$("#content").val())},n.prototype._resetForm=function(){return this.$("#content").removeAttr("style").val(""),this.$el.removeClass("active")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.FlashMessage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-a-flash",n.prototype.template=JST["shared/flash_message"],n.prototype.events={click:"remove"},n.prototype.initialize=function(){return GrooveClient.on("flashMessage",this.render,this)},n.prototype.render=function(e){var t,n;return Groove.UI.hideLoading(),this.$el.html(this.template({message:e})),t="alert"===e.type?4e3:2e3,n=this.$("."+e.type),$("body").append(this.el),n.pause(t).fadeOut("1000",function(){return $(this).remove()}),this},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.MainMenu=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.account=GrooveClient.data.account,this.account.isInactive()?(this.$el.addClass("inactive"),this.$el.html(this.account.get("expiry_alert")?"Your account has expired due to a failed payment":"Your free trial period has ended")):void 0},n.prototype.highlight=function(e){var t;return t=this.$("li span:contains('"+e+"')"),this.highlightElement(t.closest("a"))},n.prototype.highlightElement=function(e){return this.$("li").removeClass("simple-navigation-active-leaf selected").find("a").removeClass("selected"),e.addClass("selected").closest("li").addClass("selected simple-navigation-active-leaf")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.Mentions=function(n){function i(){return this.setPosition=e(this.setPosition,this),this.removeMentionFromEditor=e(this.removeMentionFromEditor,this),this.renderAgentList=e(this.renderAgentList,this),this.searchNames=e(this.searchNames,this),this.focusAtEndOfInput=e(this.focusAtEndOfInput,this),this.render=e(this.render,this),this.watchEditor=e(this.watchEditor,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["shared/mentions"],i.prototype.agentListPartial=JST["mentions/agent_list"],i.prototype.className="InlineDropdown u-font-smoothing-grayscale",i.prototype.id="mentions-dropdown",i.prototype.selection=null,i.prototype.position={top:0,left:0},i.prototype.KEYS=$.ui.keyCode,i.prototype.events={"click li.Agent":function(e){return e.preventDefault(),this.addSuggestionToEditor($(e.currentTarget))},"click .InlineDropdown_close":function(e){return e.preventDefault(),this.removeMentionFromEditor()},"keydown input":function(e){var t;switch(e.which){case this.KEYS.UP:return e.preventDefault(),this.navigateToSuggestion("prev");case this.KEYS.DOWN:return e.preventDefault(),this.navigateToSuggestion("next");case this.KEYS.ESCAPE:return this.removeMentionFromEditor();case this.KEYS.TAB:case this.KEYS.ENTER:case this.KEYS.RIGHT:return e.preventDefault(!0),this.addSuggestionToEditor(this.selectedSuggestion());case this.KEYS.SPACE:return t=$(e.target).val().replace("@",""),this.collection.findWhere({text:t})?this.addUsernameToEditor(t):this.addUnknownUsernameToEditor(t,!0)}},"input input":function(e){var t;return t=$(e.target).val(),_.isEmpty(t)?this.removeMentionFromEditor():this.searchNames(t.replace("@",""))},click:function(e){return e.stopPropagation()}},i.prototype.initialize=function(e){return this.collection=e.collection,this.replyForm=e.replyForm,this.replyForm.editor.on("contentDom",this.watchEditor),this.hide()},i.prototype.watchEditor=function(){var e,t;return t={focus:function(e){return function(){return e.isRendered()?e.removeMentionFromEditor():void 0}}(this),keypress:function(e){return function(t){var n;return n=t.data,"@"===String.fromCharCode(n.$.which)?e.render(e.replyForm.editor.getSelection()):void 0}}(this),keyup:function(e){return function(t){var n,i,o,r,s;return n=t.data,i=n.getKeystroke(),i===e.KEYS.BACKSPACE||i===e.KEYS.ALT?(r=e.replyForm.editor.getSelection(),o=r.getRanges()[0].startContainer.$,s=o.textContent,"@"===s[0]&&1===s.split(" ").length?(s=s.slice(1),o.textContent="",s.length&&e.collection.findWhere({text:s})&&(s=""),e.render(r,s)):void 0):void 0}}(this)},e=this.replyForm.editor.editable(),_.each(t,function(t){return function(n,i){return e.attachListener(e,i,function(e){return"note"===t.replyForm.tab?n(e):void 0})}}(this))},i.prototype.render=function(e,t){return null==e&&(e=null),null==t&&(t=""),"note"!==this.replyForm.tab||this.isRendered()?void 0:(this.selection=e,delete this._cursorPosition,delete this._suggestions,this.delegateEvents(),GrooveClient.body.on({click:this.removeMentionFromEditor}),this.$el.html(this.template({text:t})),this.replyForm.$el.prepend(this.el),this.searchNames(t),_.delay(this.focusAtEndOfInput))},i.prototype.hide=function(){return this.undelegateEvents(),GrooveClient.body.off({click:this.removeMentionFromEditor}),this.$el.remove()},i.prototype.isRendered=function(){return null!==this.el.parentNode},i.prototype.cursorPosition=function(){var e,t,n,i,o;if(this._cursorPosition)return this._cursorPosition;for(e=this.replyForm.editor.document.createElement("img",{attributes:{src:"null",width:0,height:0}}),this.replyForm.editor.insertElement(e),i=0,o=0,n=e.$;;)if(i+=n.offsetLeft,o+=n.offsetTop,n=n.offsetParent,!n.offsetParent)break;return t=this.replyForm.editor.document.$.documentElement,i+=n.offsetLeft-t.scrollLeft,o+=n.offsetTop-t.scrollTop,e.remove(),this._cursorPosition={top:o,left:i}},i.prototype.focusAtEndOfInput=function(){return Groove.Util.moveCursorToEnd(this.$("input").focus()[0])},i.prototype.searchNames=function(e){var t;return t=_.first(this.collection.search(e),6),_.isEmpty(t)?this.addUnknownUsernameToEditor(e):(this.selectedUsername=_.last(t),this.renderAgentList(t))},i.prototype.renderAgentList=function(e){var t;return t=this.agentListPartial({usernames:e,isSelected:function(e){return function(t){return t===e.selectedUsername?"Agent-selected":void 0}}(this)}),null==this._suggestions&&(this._suggestions=this.$("ol.AgentsList")),this._suggestions.html(t),this.setPosition()},i.prototype.addSuggestionToEditor=function(e){return this.addUsernameToEditor(e.data("username"))},i.prototype.addUsernameToEditor=function(e){var t,n;return n=document.createElement("span"),t=document.createElement("span"),t.className="mentions-username",t.textContent="@"+e,n.appendChild(t),n.appendChild(document.createTextNode("\xa0")),n.appendChild(document.createElement("span")),this.addNodeToEditor(n),this.hide(),this._focusAtEndOf(t.parentNode)},i.prototype.addUnknownUsernameToEditor=function(e,t){var n,i;return null==t&&(t=!1),i="@"+e,t&&(i+="\xa0"),n=document.createTextNode(i),this.addNodeToEditor(n),this.hide(),this._focusAtEndOf(n.parentNode)},i.prototype.removeMentionFromEditor=function(){var e,t;return t=this.editorElement(),e="\xa0@"===t.textContent?(t.textContent="\xa0",t):this.addNodeToEditor(document.createTextNode("\xa0")),this.hide(),this._focusAtEndOf(e.parentNode)},i.prototype.editorRange=function(){return this.selection.getRanges()[0]},i.prototype.editorElement=function(e){return null==e&&(e=this.editorRange()),e.startContainer.$},i.prototype.addNodeToEditor=function(e){var t,n,i,o,r,s,a,l;return i=this.replyForm.editor.element.getId(),a=this.editorRange(),l=parseInt(a.startOffset-1)||0,n=this.editorElement(a),t=$("#"+i),s=t.parent(),r=e.textContent,o=n.textContent,e.textContent!==o.slice(0,-1)?(n.textContent=n.textContent.substr(0,l),n.nextSibling?n.parentNode.insertBefore(e,n.nextSibling):n.parentNode.appendChild(e),e):void 0},i.prototype.setPosition=function(){var e;return e=this.replyForm.$el,null==e.toolbarHeight&&(e.toolbarHeight=$(".ticket_top_actions",e).outerHeight()),this.$el.css({bottom:e.outerHeight()-e.toolbarHeight-25-this.cursorPosition().top,left:this.cursorPosition().left+3})},i.prototype._focusAtEndOf=function(e){var t,n;if(!$.browser.msie)return this.replyForm.editor.focus(),n=this.replyForm.editor.createRange(),t=new CKEDITOR.dom.element(e),n.moveToElementEditablePosition(t,!0),n.select()},i.prototype.selectedSuggestion=function(){return this._suggestions.find("[data-username="+this.selectedUsername.get("text")+"]")},i.prototype.navigateToSuggestion=function(e){var t,n;return t=this.selectedSuggestion(),n=t[e]().addClass("Agent-selected"),n.size()?(t.removeClass("Agent-selected"),this.selectedUsername=this.collection.findWhere({text:n.data("username")})):void 0},i}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SearchBox=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"groove-search:submit":"submitSearch"},n.prototype.initialize=function(){return this.listenTo(Backbone.history,"route",this.update)},n.prototype.currentSearchType=function(){return $("#search input").attr("data-type")},n.prototype.searchType=function(){return"tickets"},n.prototype.update=function(){var e,t;if(GrooveClient.bootstrapped)return e=this.$("#search input"),e.length&&(null!=(t=GrooveClient.data.account)?t.isActive():void 0)?(this.currentSearchType()!==this.searchType()&&e.val(""),e.attr({"data-type":this.searchType()})):e.hide()},n.prototype.submitSearch=function(e){var t,n;switch(GrooveClient.routers.tickets.clearSearch(),t=$(e.target),n=encodeURIComponent(t.val()),this.currentSearchType()){case"tickets":return this.navigate("search/"+n)}},n.prototype.navigate=function(e){return GrooveClient.navigate(GrooveClient.path(e))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SelectDropDown=function(n){function i(){return this.hideOptions=e(this.hideOptions,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="pretty-dropdown",i.prototype.template=JST["shared/drop_down"],i.prototype.events={"click .pretty-selector":"showOptions","click li a":"selectOption"},i.prototype.initialize=function(e){return this.blank=e.blank,this.title=e.title,this.name=e.name,this.$el.addClass(this.name+"-dropdown"),this.setOptions(e.options),this.selectedValue=e.selected===!1?null:null!=e.selected?String(e.selected):this.options.length?String(this.options[0][1]):void 0},i.prototype.setOptions=function(e){if(this.options=e instanceof Backbone.Collection?e.map(function(e){return[e.get("name"),e.id]}):e,null==this.options)throw"GrooveClient.Views.SelectDropDown view requires options";return null!=this.blank?this.options.unshift([this.blank,""]):void 0},i.prototype.renderTemplate=function(){var e,t;return null!=this.selectedValue&&(t=this.getOptionByValue()||this.options[0],e=null!=t?t[0]:void 0),null==e&&(e=this.title||""),i.__super__.renderTemplate.call(this,{options:this.options,name:this.name,selectedValue:this.selectedValue,selectedName:e}),this.$(".pretty-options").hide(),this.highlightSelected(),this},i.prototype.highlightSelected=function(){return null!=this.selectedValue?(this.$("li.selected").removeClass("selected"),this.$("a[data-value='"+this.selectedValue+"']").closest("li").addClass("selected")):void 0},i.prototype.getOptionByValue=function(e){return null==e&&(e=this.selectedValue),_.detect(this.options,function(t){return String(t[1])===String(e)})},i.prototype.hideOptions=function(e){return(null!=e?e.timeStamp:void 0)!==this.timeStamp?($(document.body).unbind("."+this.cid),this.overflowedElement.css({maxHeight:!1}),this.prettySelector.removeClass("selected"),this.prettyOptions.hide(),this.$el.trigger("dropdown:hide")):void 0},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$el.attr("data-name",this.name),this.title&&this.$el.attr({title:this.title}).addClass("qtip-tipsy"),this.prettyOptions=this.$(".pretty-options"),
this.prettySelector=this.$(".pretty-selector"),this.overflowedElement=this.$("ul"),this},i.prototype.selectOption=function(e){return this.selectValue($(e.target).data("value")),this.$("input").change(),this.hideOptions(),!1},i.prototype.selectValue=function(e){return null==e&&(e=""),e=String(e),e===this.selectedValue?!1:(this.$el.trigger("dropdown:change",e),null!=this.selectedValue?(this.selectedValue=e,this.$("input").val(e),this.highlightSelected()):void 0)},i.prototype.showOptions=function(e){var t;if(!this.prettySelector.hasClass("selected"))return this.timeStamp=null!=e?e.timeStamp:void 0,$(document.body).on("click."+this.cid+" dropdown:click."+this.cid,this.hideOptions),t=this.prettySelector.outerWidth()-this.prettyOptions.outerWidth(),t=~~(t/2),this.$el.hasClass("first")&&(t+=20),this.prettyOptions.show().css("left",t),this.prettySelector.addClass("selected"),$(".ui-tooltip").removeClass("ui-tooltip-focus").css("display","none"),this.$el.trigger("dropdown:show")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Sorter=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/sorter"],n.prototype.sortables=[],n.prototype.events={"click .order-by":"showOptions","click .sortable a":"resort"},n.prototype.initialize=function(){return null!=this.defaultOrder?this.defaultOrder:this.defaultOrder=this.sortables[0]},n.prototype.resort=function(e){return e.preventDefault(),this.collection.order_by=this.$(e.target).data(),this.collection.currentPage=1,this.collection.fetch({reset:!0}),this.render(),!1},n.prototype.render=function(){var e;return e=this.findSelected(),this.renderTemplate({selected:e,sortables:this.sortables}),this.$("."+e.column+"."+e.direction).addClass("selected"),this},n.prototype.findSelected=function(){var e,t;return void 0===this.collection.order_by?this.defaultOrder:(e=this.collection.order_by,t=_.find(this.sortables,function(t){return t.column===e.column&&t.direction===e.direction}),t||this.defaultOrder)},n.prototype.showOptions=function(e){var t,n,i,o;return e.preventDefault(),i=this.$(".sortables"),n=this.$(".order-by"),t=$(document.body),o=function(e){return function(r){return r&&-1!==$(r.target).parents().toArray().indexOf(e.el)?void 0:(n.removeClass("selected"),i.hide(),t.unbind("click",o))}}(this),t.click(o),n.hasClass("selected")?o():(i.show(),n.addClass("selected"))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.SystemAnnouncement=function(n){function i(){return this.hide=e(this.hide,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="system-announcement",i.prototype.template=JST["shared/system_announcement"],i.prototype.events={"click #announcement_close":"hide"},i.prototype.initialize=function(e){return this.announcement=e.announcement},i.prototype.render=function(){return this.renderTemplate({announcement:this.announcement})},i.prototype.hide=function(){return this.remove(),GrooveClient.data.systemAnnouncement=null,$.cookie("announcement_opened",null,{path:"/"}),!1},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketActionsDropDown=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/drop_down"],n.prototype.events={"click .pretty-selector":"showOptions","click li a":"selectOption"},n.prototype.initialize=function(e){var t;return this.options=e.options,this.name=e.name,this.selectedValue=(null!=(t=e.selectedValue)?t.toString():void 0)||"",this.$el.addClass(this.name+"-dropdown")},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{options:this.options,name:this.name,selectedValue:this.selectedValue})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.setState(),this},n.prototype.selectOption=function(e){return this.selectValue($(e.target).data("value")),this.$("input").change(),!1},n.prototype.selectValue=function(e){return null==e&&(e=""),e=String(e),e===this.selectedValue?!1:(this.selectedValue=e,this.setState())},n.prototype.setState=function(){return this.$(".pretty-options").hide(),this.$("input[name=ticket-actions]").val(this.selectedValue)},n}(GrooveClient.Views.SelectDropDown)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketCommentActionsDropDown=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/comments_drop_down"],n.prototype.events={"click .pretty-selector":"showOptions"},n}(GrooveClient.Views.SelectDropDown)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Walkthrough=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/walkthrough"],n.prototype.className="box-b-main walkthrough",n.prototype.events={"click .walkthrough-hide-link":"hideWalkthrough","click .walkthrough-nav a":"selectStep"},n.prototype.render=function(){return this.renderTemplate({namespace:this.namespace,pages:this.pages,page:this.page}),this.renderContent(),this.setupFancybox(),this},n.prototype.renderContent=function(){var e;return this.$(".walkthrough-nav li").removeClass("selected").filter(".nav-i-"+this.page).addClass("selected"),(e=JST[this.namespace+"/welcome/"+this.page])?this.$(".walkthrough-content").html(e()):void 0},n.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},n.prototype.hideWalkthrough=function(){return $(".box-a-nav-main #nav-i-welcome").remove(),GrooveClient.data.currentUser.save({json:{hide_welcome_screen:!0},hide_welcome_screen:!0}),GrooveClient.navigate()},n.prototype.selectStep=function(e){return this.page=$(e.target).attr("data-page"),this.render(),!1},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CustomProfile=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-c-custom-profile left",n.prototype.render=function(){return this.$el.html(this.model.get("html")),this.addTargetBlank()},n.prototype.addTargetBlank=function(){return this.$("a:not([target])").attr("target","_blank")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CustomerApps=function(n){function i(){return this.apiLinkFailure=e(this.apiLinkFailure,this),this.apiLinkSuccess=e(this.apiLinkSuccess,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="box-c-customer-info",i.prototype.template=JST["shared/sidebars/customer_apps"],i.prototype.events={"click .api-link.not-linked":"linkUserToApi"},i.prototype.initialize=function(e){return null==e&&(e={}),this.enduser=e.enduser,this.app_installations=new GrooveClient.Collections.AppInstallations({user_id:this.enduser.id})},i.prototype.render=function(){return this.app_installations.fetch({success:function(e){return function(){return e.renderTemplate({enduser:e.enduser,app_installations:e.app_installations.models},e)}}(this)})},i.prototype.linkUserToApi=function(e){var t,n,i;return e.preventDefault(),e.stopImmediatePropagation(),t=$(e.target),t.hasClass("user")&&(t=t.parent()),n=t.attr("href"),i=t.attr("data-user-id"),$.ajax({type:"POST",url:n,dataType:"json",data:{user_id:i},success:function(e){return function(n){return e.apiLinkSuccess(t,n)}}(this),failure:this.apiLinkFailure})},i.prototype.apiLinkSuccess=function(e,t){var n;return e.attr({href:t.api_user_url}),e.find("span.user").text(t.user_name),e.removeClass("not-linked").addClass("linked"),t.app_user_champion===!0&&e.find("span.user").addClass("champion"),n=t.user_name+" was successfully linked to "+t.app_name+".",GrooveClient.trigger("flashMessage",{type:"notice",body:n})},i.prototype.apiLinkFailure=function(e){return GrooveClient.trigger("flashMessage",{type:"notice",body:"An unexpected error occured while attempting to link user. Please try again in a few minutes."})},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CustomerHistory=function(n){function i(){return this.showAll=e(this.showAll,this),this._renderMergeModal=e(this._renderMergeModal,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="customer-history-sidebar",i.prototype.className="box-c-customer-tickets",i.prototype.template=JST["shared/sidebars/customer_history"],i.prototype["default"]=5,i.prototype.events={"click a[role='showAll']":function(e){return e.preventDefault(),this.hideShowMore($(e.currentTarget)),this.$(".loading-more").show(),this.fetchAll()},"mouseenter li":function(e){return this._renderMergeButton($(e.currentTarget))},"mouseleave li":function(e){return this._removeMergeButton($(e.currentTarget))},"click a[role='merge']":function(e){var t,n,i;return e.preventDefault(),t=$(e.currentTarget),this._disableMergeButton(t),n=t.parents("li"),i=this.collection.get(n.data("cid")),this._renderMergeModal(i).done(function(e){return function(){return e._removeMergeButton(n)}}(this))}},i.prototype.initialize=function(){return this.enduser=this.collection.enduser,this.ticket=this.collection.ticket,this.listenTo(this.collection,"reset",this.render),this.listenTo(GrooveClient,"tickets:delete",this.removeTicket,this)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{tickets:this.collection.models,showAll:this.showAll})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.showPreviousTickets(),this},i.prototype._renderMergeButton=function(e){return e.append('<span class="merge-button-wrapper">\n  <a class="merge-button" role="merge" href="#">merge</a>\n</span>')},i.prototype._disableMergeButton=function(e){return e.addClass("loading").removeProp("role")},i.prototype._removeMergeButton=function(e){return e.find("span.merge-button-wrapper").remove()},i.prototype._renderMergeModal=function(e){return e.comments.isEmpty()?e.fetch({success:this._renderMergeModal}):new jQuery.Deferred(function(t){return function(){var n;return n=new GrooveClient.Views.MergePreviousTicketFancybox({model:e,parentTicket:t.ticket}),n.appear()}}(this))},i.prototype.showPreviousTickets=function(){return this.collection.length?this.$el.show():this.$el.hide()},i.prototype.hideShowMore=function(e){return e.hide()},i.prototype.showAll=function(){return this.collection.length===this["default"]?!0:!1},i.prototype.fetchAll=function(){return this.collection.fetch({reset:!0,data:{limit:100},success:function(e){return function(){return e.$(".loading-more").hide()}}(this)})},i.prototype.removeTicket=function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)i=e[t],this.collection.remove(i);return this.collection.trigger("reset")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.CustomerInfo=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="customer-profile",n.prototype.className="box-c-customer-info",n.prototype.template=JST["shared/sidebars/customer_info"],n.prototype.events={"click a[href^=mailto]":function(e){return this.ticket.isOnboardingTicket()?void 0:Groove.Util.handleMailToClick(e)}},n.prototype.initialize=function(e){return this.ticket=e.ticket,this.listenTo(this.model,"change",this.render,this)},n.prototype.render=function(){var e;return this.renderTemplate({ticketType:this.ticket.get("ticket_type"),name:this.model.get("name"),invalidEmail:this.model.hasInvalidEmail(),email:this.model.get("email"),profileUrl:this.model.personContactUrl(),avatarUrl:this._avatarUrl(),title:this.model.get("title"),companyName:this.model.get("company_name"),phoneNumber:this.model.get("phone_number"),location:this.model.get("location"),website:{url:this.model.get("website_url"),label:this._websiteLabel()},twitter:{username:this.model.get("twitter_username"),url:"https://twitter.com/"+this.model.get("twitter_username")},facebook:{uid:this.model.get("fb_uid")},legacy:{about:this.model.get("about")}}),e=new GrooveClient.Views.SelectDropDown({name:"customer-actions",title:"",options:[["Edit Customer Info","edit"],["Change Customer","change"]]}),this.prependChild(e),this},n.prototype._avatarUrl=function(){var e;return e=new GrooveClient.Views.User({model:this.model}),$(e.avatarImage()).prop("src")},n.prototype._websiteLabel=function(){var e;return null!=(e=this.model.get("website_url"))?e.replace(/https?:\/\//,""):void 0},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.EmailMarketingIntegration=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="integration",i.prototype.template=JST["shared/sidebars/email_marketing/integration"],i.prototype.events={'click a[role="unsubscribe"]':function(e){var t;return confirm("Are you sure?")?(t=$(e.target).data("cid"),this.subscriptions.get(t).destroy()):void 0},"mouseenter li":function(e){return this._unsubscribeButton($(e.currentTarget)).show()},"mouseleave li":function(e){return this._unsubscribeButton($(e.currentTarget)).hide()},'click a[role="refresh"]':function(){return this._renderLoadingState(),this.subscriptions.fetch({data:{expire:!0}})},"change select":function(e){return this.subscriptions.create({list_id:$(e.target).val()})}},i.prototype.initialize=function(e){var t;return t=e.enduser,this.subscriptions=this.model.subscriptionsFor(t),this.enduser=t,this.listenTo(this.subscriptions,"fetch:complete add remove",this.render)},i.prototype.renderTemplate=function(e){var t,n,o;return null==e&&(e={}),o=function(){var e,t,i,o;for(i=this.subscriptions.models,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(_.extend(_.clone(n.attributes),{cid:n.cid,url:this._subcriptionUrl(n),subscribedAt:this._subscribedAt(n),name:n.get("list_name")||this.model.lists.getName(n.get("list_id"))}));return o}.call(this),t=function(){var e,t,i,o;for(i=this.model.lists.subscribable(this.subscriptions),o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(n.attributes);return o}.call(this),i.__super__.renderTemplate.call(this,_.extend(e,{headline:this.model.get("displayable_name"),subscriptions:o,lists:t}))},i.prototype.render=function(){return this.subscriptions.wasFetched?i.__super__.render.apply(this,arguments):void(this.subscriptions.fetching||this.subscriptions.fetch({reset:!0,global:!0}))},i.prototype._subscribedAt=function(e){return e.get("subscribed_at")?moment(e.get("subscribed_at")).format("MMM D, YYYY"):void 0},i.prototype._subcriptionUrl=function(e){return"MailChimp"===this.model.get("type")?"/email_marketing/integrations/"+this.model.id+"/subscription_redirects/"+e.get("list_id")+"?enduser_id="+this.enduser.id:void 0},i.prototype._renderLoadingState=function(){return this.$el.html(this.$("h3")[0].outerHTML+" Loading...")},i.prototype._unsubscribeButton=function(e){return e.children('a[role="unsubscribe"]')},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.EmailMarketingProfile=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="email-marketing-profile",i.prototype.className="box-c-customer-info",i.prototype.initialize=function(e){return this.ticket=e.ticket,this.listenTo(this.collection,"fetch:complete",this.render)},i.prototype.render=function(){var e,t,n,o,r,s;if(i.__super__.render.apply(this,arguments),!this.collection.wasFetched)return void(this.collection.fetching||this.collection.fetch({reset:!0,global:!0}));for(o=this.collection.models,r=[],e=0,t=o.length;t>e;e++)n=o[e],this._isActiveForMailbox(n)&&(s=new GrooveClient.Views.EmailMarketingIntegration({model:n,enduser:this.ticket.enduser}),r.push(this.appendChild(s)));return r},i.prototype._isActiveForMailbox=function(e){return null!=e.mailboxSettings.getByMailboxId(this.ticket.get("mailbox_id"))},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.HistoryItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/sidebars/history_item"],n.prototype.tagName="li",n.prototype.events={"click .remove":"remove"},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,historyItem:this.model})},n.prototype.remove=function(){return this.model.destroy(),!1},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.HistoryItems=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.maxDisplayed=5,n.prototype.template=JST["shared/sidebars/history_items"],n.prototype.className="box-c-recently-viewed",n.prototype.initialize=function(){return this.collection=GrooveClient.data.historyItems,this.listenTo(this.collection,"remove",this.render)},n.prototype.render=function(){return n.__super__.render.call(this),this.renderHistoryItems(),this.collection.isEmpty()?this.$("#nav-i-recent-tickets").hide():this.$("##nav-i-recent-tickets > a").attr("href",this.collection.first().path()),this},n.prototype.renderHistoryItems=function(){return _.each(this.collection.slice(0,+(this.maxDisplayed-1)+1||9e9),this.appendItem,this),this.highlightSelectedFilter()},n.prototype.highlightSelectedFilter=function(){var e,t,n;return n=window.location.href,(t=n.match(/\/tickets\/overview|\/tickets\/leaderboard|\/tickets\/ratings/))&&(e=this.$("#nav-i-tickets_overview")),null!=e?(e.addClass("selected simple-navigation-active-leaf"),e.find("a").addClass("selected")):void 0},n.prototype.appendItem=function(e){var t;return t=new GrooveClient.Views.HistoryItem({model:e}),this.model&&e.id===this.model.id&&(this.$("#nav-i-recent-tickets").addClass("selected"),t.$el.addClass("selected simple-navigation-active-leaf")),t.$el.addClass("nav-i-ticket"),this.appendChildTo(t,"#nav-i-recent-tickets ul")},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.OtherSocialProfiles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="otherSocialProfiles",n.prototype.tagName="ul",n.prototype.template=JST["shared/sidebars/other_social_profiles"],n.prototype.SOCIAL_IDS={facebook:"facebook_uid",linkedin:"linkedin_username",googlePlus:"google_plus_uid"},n.prototype.render=function(){var e,t,n,i;return t=function(){var t,o;t=this.SOCIAL_IDS,o=[];for(n in t)e=t[n],this.model.has(e)&&(i=this._linkUrl(n,this.model.get(e)),o.push({type:n,url:i}));return o}.call(this),this.renderTemplate({profiles:t})},n.prototype._linkUrl=function(e,t){switch(e){case"facebook":return"http://facebook.com/"+t;case"linkedin":return"https://linkedin.com/in/"+t;case"google_plus":return"http://plus.google.com/"+t}},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.PopularLabels=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["shared/sidebars/popular_labels"],n.prototype.className="box-c-popular-labels",n.prototype.initialize=function(){return this.popular=GrooveClient.data.labels.first(8)},n.prototype.render=function(){var e,t,i,o;for(n.__super__.render.call(this),this.$(".fancybox").fancybox(Groove.Fancybox.params.one),o=this.popular,e=0,i=o.length;i>e;e++)t=o[e],this.appendLabel(t);return this},n.prototype.appendLabel=function(e){var t,n;return n=new GrooveClient.Views.Label({model:e,trackSelection:!0}),t=$("<li>").html(this.renderChild(n).el),this.$(".nav-labels").append(t)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.RecentActivity=function(n){function i(){return this.scroll=e(this.scroll,this),this.fetchMoreTimelineEvents=e(this.fetchMoreTimelineEvents,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["shared/sidebars/recent_activity"],i.prototype.className="box-c-recent-activity",i.prototype.updateInterval=3e4,i.prototype.initialize=function(){return this.timelineEvents=GrooveClient.data.timelineEvents,this.listenTo(this.timelineEvents,"sync",this.updateView),this.listenTo(this.timelineEvents,"add",function(e,t){return this.addTimelineEvent(e,0,t),this.updateView()}),this.listenTo(this.timelineEvents,"remove",this.removeFromList)},i.prototype.fetchMoreTimelineEvents=function(){return this.timelineEvents.fetchMore()},i.prototype.scroll=function(){var e;return e=this.$(".timeline-events"),e.scrollTop()+e.height()>e.get(0).scrollHeight-this.$(".loading-more").height()?this.fetchMoreTimelineEvents():void 0},i.prototype.render=function(){return this.renderTemplate(),this.renderTimelineEvents(),this.updateView(),this.$(".timeline-events").scroll(this.scroll),this},i.prototype.renderTimelineEvents=function(){return this.$("ul").empty(),this.timelineEvents.each(this.addTimelineEvent,this),this},i.prototype.updateView=function(){return this.$(".loading-more").toggle(this.timelineEvents.hasMore),this.$(".empty").toggle(!this.timelineEvents.length)},i.prototype.allowedToView=function(e){var t;return~(null!=(t=e.get("visible_to_agents"))?t.indexOf(GrooveClient.data.currentUser.id):void 0)},i.prototype.addTimelineEvent=function(e,t,n){var i;if(this.allowedToView(e))return i=new GrooveClient.Views.TimelineEvent({model:e}),this.insertChildAtIndexTo(i,t,"ul")},i.prototype.removeFromList=function(e){var t;return t=_.find(this._children,function(t){return t.model===e}),t?(t.leave(),t.remove()):void 0},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SetupMailboxRightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this},n}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SocialProfiles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="socialProfiles",n.prototype.className="box-c-customer-info",n.prototype.initialize=function(){var e;return this.model.has("twitter_username")?null!=(e=this.model).twitterProfile?e.twitterProfile:e.twitterProfile=new GrooveClient.Models.TwitterProfile({account_id:GrooveClient.data.account.id,user_id:this.model.id,username:this.model.get("twitter_username")}):void 0},n.prototype.render=function(){return this.model.twitterProfile&&this.appendChild(new GrooveClient.Views.TwitterProfile({model:this.model.twitterProfile})),this.appendChild(new GrooveClient.Views.OtherSocialProfiles({model:this.model}))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketShowRightSidebar=function(n){function i(){return this.addCustomProfile=e(this.addCustomProfile,this),this.editUserInfo=e(this.editUserInfo,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={"change input[name=customer-actions]":function(e){var t;switch(t=$(e.target).val()){case"edit":return this.editUserInfo();case"change":return this.renderChangeEnduserComponent()}}},i.prototype.render=function(){var e,t,n,o;return i.__super__.render.apply(this,arguments),e=GrooveClient.data.account,o=this.model,n=o.enduser,this.appendView(new GrooveClient.Views.CustomerInfo({model:n,ticket:o})),this.appendView(new GrooveClient.Views.SocialProfiles({model:n})),e.get("prefers_legacy_crm_app_installed")&&this.appendView(new GrooveClient.Views.CustomerApps({enduser:n})),this.model.get("platform")&&this.appendView(new GrooveClient.Views.TrackingDetails({model:this.model})),t=new GrooveClient.Collections.OtherCustomerTickets({enduser:n,ticket:o,limit:5}),t.fetch({reset:!0,global:!1}),this.appendView(new GrooveClient.Views.CustomerHistory({collection:t})),e.get("prefers_email_marketing_profile_installed")&&this._appendEmailMarketingProfile(),e.get("prefers_custom_profile_app_installed")&&n.get("email")&&this.addCustomProfile(),this},i.prototype.editUserInfo=function(){var e;return e=new GrooveClient.Views.CustomerEditForm({model:this.model.enduser,ticket:this.model}),e.appear(),!1},i.prototype.renderChangeEnduserComponent=function(){return React.render(React.createElement(EnduserSearch.Form),this.el),EnduserSearch.setCurrentEnduserId(this.model.enduser.id),this.listenTo(EnduserSearch,"close",function(e){return function(t){return t?e.model.saveEnduser(t).then(function(){return e.unrenderChangeEnduserComponent()}):e.unrenderChangeEnduserComponent()}}(this))},i.prototype.unrenderChangeEnduserComponent=function(){return React.unmountComponentAtNode(this.el),this.stopListening(EnduserSearch,"close"),this.render()},i.prototype._appendEmailMarketingProfile=function(){var e;return e=new GrooveClient.Views.EmailMarketingProfile({collection:GrooveClient.data.emailMarketing.integrations,ticket:this.model}),this.appendView(e)},i.prototype.addCustomProfile=function(){var e,t;return t=this.model.enduser,e=new GrooveClient.Models.CustomProfile({id:null!=t?t.get("id"):void 0}),e.fetch({success:function(t){return function(){return t.appendView(new GrooveClient.Views.CustomProfile({model:e}))}}(this)})},i}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsLeftSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-b-sidebar-left page-tickets",n.prototype.initialize=function(){return this.model?this.activeMailboxId=this._isForMailbox()?this.model.id:this.model.get("mailbox_id"):void 0},n.prototype.render=function(){return this.appendChild(new GrooveClient.Views.TicketsMenu({activeMailboxId:this.activeMailboxId})),this},n.prototype._isForMailbox=function(){return"Mailbox"===this.model.constructor.name},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketForm=function(n){function i(){return this.ticketSaved=e(this.ticketSaved,this),this.ticketSaveFailed=e(this.ticketSaveFailed,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={"submit form.ticket":"saveTicket"},i.prototype.isPrivate=!1,i.prototype.render=function(){var e;return i.__super__.render.apply(this,arguments),e=this.$("form.ticket").get(0),this.errorForm=new GrooveClient.Views.ErrorForm({el:e}),this.renderLabels(),this.updateViews(),this.renderAssignee(),this},i.prototype.renderTemplate=function(e){return null==e&&(e={}),i.__super__.renderTemplate.call(this,_.extend(e,{view:this,ticket:this.model}))},i.prototype.renderAssignee=function(){return this.$("#reply-assignee-dropdowns").empty(),this.renderChild(new GrooveClient.Views.Assignee({form:this,el:this.$("#reply-assignee-dropdowns").get(0)}))},i.prototype.renderAttachmentsForm=function(e){var t;return null==e&&(e=!1),this.model.isTwitterTicket()?void 0:(t=new GrooveClient.Views.AttachmentsForm({parentForm:this.$("form"),ticket:this.model}),this.listenTo(t.collection,"add",function(e){return function(){return e.trigger("attachments:add")}}(this)),this.listenTo(t.collection,"remove",function(e){return function(){return e.trigger("attachments:remove")}}(this)),this.replaceWithChild(t,".comment_attachments_wrapper"),e?t.onSwap():void 0)},i.prototype.updateViews=function(e){return null==e&&(e=!1),this.renderAttachmentsForm(e),this.setupFancybox()},i.prototype.onSwap=function(){return Groove.UI.autocompletion(),this.$el.find(".autogrow").elastic()},i.prototype.renderLabels=function(){var e;return e=new GrooveClient.Views.Labels({model:this.model}),this.renderChildInto(e,".ticket-labels")},i.prototype.saveMethod=function(){return"save"},i.prototype.saveTicket=function(e){return this.$("input.label-tokens[data-save-url]").prop("disabled",!0),this.model[this.saveMethod()](this.formSerialize(),{wait:!0,success:this.ticketSaved,error:this.ticketSaveFailed}),!1},i.prototype.ticketSaveFailed=function(e,t){var n,i,o;try{return i=$.parseJSON(t.responseText),null!=i.result?GrooveClient.trigger("flashMessage",{type:"alert",body:i.message}):(i["comments_attributes[0].html_body"]=i,this.errorForm.showErrors(i))}catch(r){return n=r,o={title:"There was a problem saving your reply. Please try again in a few minutes."},new GrooveClient.Views.Notification(o).show()}},i.prototype.ticketSaved=function(e,t){var n,i,o;return $.fancybox.close(),GrooveClient.trigger("tickets:update",t),GrooveClient.trigger("flashMessage",{
type:"notice",body:"Ticket created successfully."}),o=GrooveClient.data,i=o.mailboxes,n=o.account,!i.isEmpty()&&n.get("prefers_grouping_filters_by_mailbox")?GrooveClient.navigate(i.first().filters.first().url()):GrooveClient.navigate(GrooveClient.data.filters.first().url())},i.prototype.defaultComment=function(){return{"private":this.isPrivate,type:this.defaultCommentType(),agent_response:!0}},i.prototype.defaultCommentType=function(){return"Comment"},i.prototype._hasBodyContent=function(){return this._emptyBodyContent()===!1},i.prototype._emptyBodyContent=function(){var e;return e=this.editor.document.getBody().getText().replace(/[^\w\s]/gi,""),this.model.isTwitterTicket()&&(e=e.replace(/^@\w+\s*$/,"")),_.isEmpty(e)},i.prototype.formSerialize=function(){var e,t;return t=this.formAttrs||this.$("form.ticket").toObject(),t.comments_attributes&&(e=_.extend(this.defaultComment(),t.comments_attributes[0]),this._emptyBodyContent()?e.body="":e.body=this.editor.getData(),t.comments_attributes={0:e}),this.closed&&(t.state="closed"),t},i.prototype.selectOption=function(e,t,n){var i;return i=String(t)===String(n),$("<option>",{value:t,text:e,selected:i}).outerHTML()},i.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NewTicketFormX=function(n){function i(){return this.renderEditor=e(this.renderEditor,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/form"],i.prototype.className="box-b-new-ticket",i.prototype.events={"submit form.ticket":"saveTicket","click #ticket_add_additional_details a":"showAdditionalDetails","click [name=send_copy_to_enduser]":"updateCommentType","change #comment_template_id":"insertCannedReply"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$("#new_ticket").append('<input type="hidden" name="enduser_populate_profile_now" value="true">'),_.defer(this.renderEditor),this},i.prototype.renderEditor=function(){return this.editor=i.__super__.renderEditor.call(this,"ticket_comments_attributes_0_body",{height:100,autoGrow_maxHeight:200})},i.prototype.updateViews=function(){return this.$("#ticket_enduser_name").on("autocomplete:onselect",function(e){return function(t,n){return e.$("#ticket_enduser_email").val(n.email)}}(this)),this.$("#ticket_enduser_email").on("autocomplete:onselect",function(e){return function(t,n){return e.$("#ticket_enduser_name").val(n.name)}}(this)),this.$(".placeholder-label").placeholderLabel(),i.__super__.updateViews.apply(this,arguments)},i.prototype.showAdditionalDetails=function(){return this.$("#ticket_add_additional_details").hide(),this.$(".new-ticket-additional-details").show(),!1},i.prototype.updateCommentType=function(){return this.isPrivate="0"===this.$("[name=send_copy_to_enduser]:checked").val(),this.$el.toggleClass("note",this.isPrivate),this.$("#ticket_submit").val(this.isPrivate?"Create Ticket":"Send Message")},i.prototype.insertCannedReply=function(){var e,t,n,i,o,r;return e=this.$("#comment_template_id").val(),e&&e.length>0&&(i=this.$("#ticket_enduser_name").val(),o=i.split(/\s+/,2),n={full_name:i,first_name:o[0],last_name:o[1],email:this.$("#ticket_enduser_email").val(),agent_firstname:GrooveClient.data.currentUser.get("first_name")},r=GrooveClient.data.commentTemplates.get(e),this.$("#ticket_title").val(r.get("title")).trigger("focus"),t=this.editor.getData()+r.interpolatedBody(n),this.editor.setData(t),this.editor.focus()),this.$("#comment_template_id").val(""),$.uniform.update(this.$("#comment_template_id"))},i}(GrooveClient.Views.TicketForm)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NewTicketFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="fancybox-tour fancybox-dark-header",i.prototype.contents=GrooveClient.Views.NewTicketFormX,i.appear=function(){var e;return e=new GrooveClient.Models.Ticket({labels:[]}),new GrooveClient.Views.NewTicketFancybox({model:e}).appear(),!1},i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:800})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketsMenu=function(n){function i(){return this.renderFiltersMenu=e(this.renderFiltersMenu,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["shared/sidebars/tickets_menu"],i.prototype.id="menu",i.prototype.className="nav-sec",i.prototype.events={"click #nav-i-new-ticket":function(e){return e.preventDefault(),GrooveClient.navigate(GrooveClient.path("tickets/new"))}},i.prototype.initialize=function(e){var t;return null==e&&(e={}),t=GrooveClient.data,this.account=t.account,this.mailboxes=t.mailboxes,this.setActiveMailbox(e.activeMailboxId),this.listenTo(this.account,"change:prefers_grouping_filters_by_mailbox",this.renderFiltersMenu)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderFiltersMenu(),this.setupFancybox(),this},i.prototype.renderFiltersMenu=function(){var e,t,n;return this.$(".nav-i-filters").remove(),t=!this.mailboxes.isEmpty(),e=this.account.get("prefers_grouping_filters_by_mailbox"),t&&e?this.appendMailboxes():(null!=(n=this._filters)&&n.leave(),this._filters=this._renderFilters({hasMailbox:t,groupByMailbox:e}))},i.prototype.setActiveMailbox=function(e){return this.activeMailboxId=e},i.prototype.appendMailboxes=function(){var e,t,n,i,o;for(i=this.mailboxes.models,o=[],e=0,t=i.length;t>e;e++)n=i[e],n.filters.isEmpty()||o.push(this.appendMailbox(n));return o},i.prototype.appendMailbox=function(e){var t;return t=this._mailboxMenu(e),this.appendChildTo(t,"> ul.folders"),t.active&&!e.isState("confirmed","active")?this._hideNewTicketButtonUntilConfirmed(e):void 0},i.prototype._mailboxMenu=function(e){var t;return t=e.id===this.activeMailboxId,new GrooveClient.Views.MenuMailbox({model:e,active:t})},i.prototype._renderFirstMailbox=function(e){return this._filters.leave(),this.setActiveMailbox(e.id),this.replaceWithChild(this._mailboxMenu(e),this._filters.el),delete this._filters},i.prototype._renderFilters=function(e){var t,n;return t=GrooveClient.data.filters,n=new GrooveClient.Views.FiltersListMenu({collection:t}),this._doesntWantMailbox(e)||(this.$("#nav-i-new-ticket").hide(),this._listenForFirstMailbox()),this.appendChildTo(n,"> ul.folders"),n},i.prototype._doesntWantMailbox=function(e){return e.hasMailbox||!e.groupByMailbox},i.prototype._listenForFirstMailbox=function(){return this.listenToOnce(this.mailboxes,"add",function(e){return function(t,n){return GrooveClient.data.filters.once("sync",function(){return e._renderFirstMailbox(t)})}}(this))},i.prototype._hideNewTicketButtonUntilConfirmed=function(e){var t;if(!this._newTicketButtonHidden)return this._newTicketButtonHidden=!0,t=this.$("#nav-i-new-ticket").hide(),e.once("confirm",function(){return t.show()})},i.prototype.setupFancybox=function(){return this.$("a.fancybox").fancybox(Groove.Fancybox.params.one)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsRightSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.currentUser=GrooveClient.data.currentUser,this.account=GrooveClient.data.account},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.appendView(new GrooveClient.Views.RecentActivity),this},n}(GrooveClient.Views.RightSidebar)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketsSearchSidebar=function(n){function i(){return this._toggleClearFilters=e(this._toggleClearFilters,this),this._fetchCollection=e(this._fetchCollection,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["shared/sidebars/tickets_search_sidebar"],i.prototype.id="searchSidebar",i.prototype.className="box-b-sidebar-left filterable page-tickets",i.prototype.events={"change #updatedAt select":function(e){return this._setRange(e.target.value)},"click ul.filter li":function(e){return this._toggleFilter($(e.target))},'click a[href="#clearFilters"]':function(e){return e.preventDefault(),this._clearFilters()}},i.prototype.initialize=function(){var e;return this.model=this.collection.query,e=_.debounce(this._fetchCollection,500),this.listenTo(this.model,"change:updated_in_last",e),this.listenTo(this.model,"change:facet",e),this.listenTo(this.model,"change:facet",this._toggleClearFilters),this.listenTo(this.model,"reset:facets",this.render),this.listenTo(this.model,"reset:facets",this._toggleClearFilters)},i.prototype.render=function(){var e,t,n,i,o,r,s,a,l;if(void 0!==this.model.facets)return n=GrooveClient.data,t=this.model.get("updated_in_last"),r=function(){var e,t,o,r;for(o=this._facets("mailbox_id"),r=[],e=0,t=o.length;t>e;e++)i=o[e],s=n.mailboxes.get(i),s?r.push({id:i,name:s.get("name")}):r.push(void 0);return r}.call(this),e=function(){var e,t,o,r;for(o=this._facets("assignee_id"),r=[],e=0,t=o.length;t>e;e++)i=o[e],s=n.agents.get(i),s?r.push({id:i,name:s.get("name"),avatar:this._avatar(s)}):r.push(void 0);return r}.call(this),o=function(){var e;e=[];for(i in this.model.facets.label_ids)s=n.labels.get(i),s?e.push({id:i,name:s.get("name").toUpperCase()}):e.push(void 0);return e}.call(this),l=function(){var e,t,n,i;for(n=this._facets("state"),i=[],e=0,t=n.length;t>e;e++)a=n[e],i.push({name:this._humanizedState(a),value:a});return i}.call(this),this.renderTemplate({query:this.model,mailboxes:_.sortBy(_.compact(r),this._byName),agents:_.sortBy(_.compact(e),this._byName),isSelected:function(e,t){return this.query.hasFilter(e,t)?"on":""},ranges:["anytime","day","week","year"],rangeClass:"anytime"===t?"":"on",isSelectedRange:function(e){return e===t},states:_.sortBy(l,this._statePosition),labels:_.sortBy(_.compact(o),this._byName)}),this},i.prototype._facets=function(e){var t,n;return t=function(){var t,n,i,o;for(i=_.keys(this.model.facets[e]),o=[],t=0,n=i.length;n>t;t++)e=i[t],_.isString(e)&&null!=e.match(/^\d+$/)?o.push(parseInt(e)):o.push(e);return o}.call(this),this.model.has(e)?(n=this.model.get(e),_.union(t,n)):t},i.prototype._byName=function(e){return e.name},i.prototype._statePosition=function(e){return _.indexOf(["unread","open","follow_up","pending","closed"],e.value)},i.prototype._avatar=function(e){var t;if(e)return t=new GrooveClient.Views.User({model:e}),t.avatarImage({size:30})},i.prototype._humanizedState=function(e){var t;return"unread"===e?"Unread":(t=GrooveClient.data.ticketSettings.states,_.find(t,function(t){return t[1]===e})[0])},i.prototype._fetchCollection=function(){return this.collection.fetch({reset:!0})},i.prototype._setRange=function(e){return this.$("#updatedAt").toggleClass("on","anytime"!==e),this.model.set("updated_in_last",e)},i.prototype._toggleFilter=function(e){var t,n;return t=e.parent().data("filter"),n=e.is(".on")?"remove":"add",e[n+"Class"]("on"),this.model[n+"Filter"](t,e.data("value"))},i.prototype._clearFilters=function(){return this.$('a[href="#clearFilters"]').fadeOut(),this.model.clearFilters(),this.$("li.on").removeClass("on")},i.prototype._toggleClearFilters=function(){var e;return e=this.$("li.on").length>0?"fadeIn":"fadeOut",this.$('a[href="#clearFilters"]')[e]()},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrackingDetails=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-c-customer-info",n.prototype.template=JST["shared/sidebars/tracking_details"],n.prototype.initialize=function(){return this.ticket=this.model},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{ticket:this.ticket})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsLeftSidebar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/left_sidebar"],n.prototype.className="box-b-sidebar-left",n.prototype.id="trends-left-sidebar",n.prototype.initialize=function(){return this.query=this.model.query},n.prototype.events={"change div.dateRange select":function(e){var t;return t=$(e.target).val(),this._navigateToRange(t),_.defer(function(e){return function(){return e.track("Changed_Trends_Date_Range",{last_trends_date_range:t})}}(this))}},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.replaceWithChild(new GrooveClient.Views.FeedbackForm,"#trends-feedback"),this},n.prototype.renderTemplate=function(){var e;return e=this.query.get("range"),n.__super__.renderTemplate.call(this,{range:e,ranges:this.query.ranges,tickets:this._ticketsContext(e),knowledgeBase:this._knowledgeBaseContext(e),isRange:function(e){return e===this.range},selectedFolder:function(e){return e.isSelected?"selected":void 0},activeLeaf:function(e){return e?"simple-navigation-active-leaf":void 0}})},n.prototype._ticketsContext=function(e){var t,n,i,o,r,s,a;return s=this.query.get("mailbox_id"),a="/groove_client/trends/tickets",t=this.model.get("current"),n=null!=t,i=function(){var i,l,c,p;for(c=GrooveClient.data.mailboxes.models,p=[],i=0,l=c.length;l>i;i++)o=c[i],r=n?a+"/in/"+o.id+"/"+t+"/"+e:a+"/in/"+o.id+"/"+e,p.push({id:o.id,name:o.get("name"),path:r,isSelected:o.id===s});return p}(),r=n?a+"/"+t+"/"+e:a+"/"+e,{path:r,isSelected:"Knowledge Base"!==this.model.get("name"),mailboxes:i,hasMultipleMailboxes:i.length>1,hasSelectedMailbox:null!=s}},n.prototype._knowledgeBaseContext=function(e){return{path:"/groove_client/trends/knowledge_base/"+e,isSelected:"Knowledge Base"===this.model.get("name")}},n.prototype._navigateToRange=function(e){var t;return t=document.location.pathname.replace(this.query.get("range"),e),GrooveClient.navigate(t)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrialLeft=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-c-trial-end",n.prototype.initialize=function(){var e;return e=GrooveClient.data,this.currentUser=e.currentUser,this.account=e.account,e},n.prototype.needed=function(){return this.account.isTrial()&&this.account.missingPaymentCredentials()&&this.currentUser.isOwner()},n.prototype.render=function(){var e,t;return e=this.account.get("trial_days_left"),t="<strong>"+e+"</strong> ",this.$el.addClass(e>7?"green":e>4?"yellow":"red"),t+=e>1?"days":"day",t+=" left in your trial",this.$el.html(t),this.$el.append($("<a>",{text:"Buy Now",href:GrooveClient.path("billing")}))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TwitterProfile=function(n){function i(){return this._render=e(this._render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="twitterProfile",i.prototype.template=JST["shared/sidebars/twitter_profile"],i.prototype.render=function(){return this.model.id?this._render():(this.$el.addClass("loading"),this.model.fetch({success:function(e){return function(){return e.$el.removeClass("loading"),e._render()}}(this)}),this)},i.prototype._render=function(){return this.renderTemplate(_.extend(this.model.attributes,{twitterUrl:"http://twitter.com/"+this.model.get("username")})),this},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.Assignee=function(n){function i(){return this.updateAgents=e(this.updateAgents,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/assignee"],i.prototype.events=function(){return{"change [name=assignee_group_id]":this.updateAgents}},i.prototype.initialize=function(e){return this.form=e.form,this.label=e.label||"Assign to",this.model=this.form.model,this.groups=GrooveClient.data.groups},i.prototype.render=function(){return this.$el.prepend(this.template({label:this.label,form:this.form,ticket:this.model,groups:this.groups})),this.updateAgents(),this},i.prototype.updateAgents=function(){var e,t,n,i,o,r,s;for(r=~~this.$("[name=assignee_group_id]").val(),r>0?this.agents=this.groups.get(r).users:this.agents=GrooveClient.data.agents,t=this.$("[name=assignee_id]"),s=~~t.val(),$('option[value!=" "]',t).remove(),o=this.agents.where({archived:!1}),n=0,i=o.length;i>n;n++)e=o[n],t.append(this.form.selectOption(e.get("name"),e.id,s));return _.defer(Groove.UI.dropdowns)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CannedRepliesDropdown=function(n){function i(){return this.toggleArrows=e(this.toggleArrows,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="canned-replies-dropdown",i.prototype.template=JST["tickets/canned_replies_dropdown"],i.prototype.events={"click a":function(e){return e.preventDefault()},"click h3":"toggleCategory","mouseover a.more":"scroll","mouseleave a.more":"stopScrolling","click .category li":"select","click #template-search":function(e){return e.stopPropagation()},"keyup #template-search":"searchTemplates","keydown #template-search":"keyDownTemplateSearch","click #cancel-template-search":"resetSearch"},i.prototype.KEYS=$.ui.keyCode,i.prototype.initialize=function(e){return null==e&&(e={}),this.form_id=e.form_id},i.prototype.renderTemplate=function(){var e,t;return e=this.collection.byCategoryName(),t=_.sortBy(_.keys(e),function(e){return e.toLowerCase()}),this.otherIsOnlyCategory=(null!=e?e.Other:void 0)&&1===t.length,i.__super__.renderTemplate.call(this,{categories:e,otherIsOnlyCategory:this.otherIsOnlyCategory,categoryKeys:t})},i.prototype.render=function(){var e,t,n;return i.__super__.render.apply(this,arguments),t=document.getElementById(this.form_id||"ticket_edit"),this.maxHeight=t.getBoundingClientRect().bottom-150,this.body=this.$("div.body").on("scroll",this.toggleArrows).css("max-height",this.maxHeight+"px"),this.arrows={up:this.$('a[data-direction="up"]'),down:this.$('a[data-direction="down"]')},n=function(e){return function(){return e.leave()}}(this),e=$(document.body).on({click:n,keydown:function(e){return 27===e.keyCode?n():void 0}}),this.once("leave",function(){return e.off({click:n,keydown:n})}),this.once("append",function(e){return function(){return e._resetBottom(),e.body.height()<e.maxHeight?void 0:e._toggleArrow("down",!0)}}(this)),_.defer(this.focusOnSearch)},i.prototype.scroll=function(e){var t,n,i,o;return t=$(e.target).data("direction"),n=23*("up"===t?-1:1),o=this.body.scrollTop(),i=function(e){return function(){return o+=n,e.body.animate({scrollTop:o},40)}}(this),i(),this._scrollInterval=setInterval(i,40)},i.prototype.stopScrolling=function(){return clearInterval(this._scrollInterval)},i.prototype.toggleArrows=function(){var e,t,n;return e=this.body[0],n=0!==e.scrollTop,this._toggleArrow("up",n),t=e.scrollHeight-e.scrollTop!==e.clientHeight,this._toggleArrow("down",t)},i.prototype._toggleArrow=function(e,t){return this.arrows[e].toggleClass("scrollable",t)},i.prototype.select=function(e){return this.trigger("select",$(e.target).data("id"))},i.prototype.toggleCategory=function(e){var t;return e.stopPropagation(),t=$(e.target).parent(".category"),this.$(".category").not(t).removeClass("active"),t.toggleClass("active"),this._resetBottom(),this.focusOnSearch()},i.prototype.searchTemplates=function(e){var t,n,i,o,r,s;if(!_.contains([this.KEYS.UP,this.KEYS.DOWN,this.KEYS.LEFT,this.KEYS.RIGHT],e.which))return this.resetSearchResults(),s=$.trim($(e.target).val()),s.length?(this.$("#cancel-template-search").show(),this.allTemplates||(this.allTemplates=function(){var e,n;e=this.collection.models,n=[];for(t in e)r=e[t],n.push(r);return n}.call(this)),n=new RegExp(Groove.Util.escapeRegex(s),"gi"),i=this.allTemplates.filter(function(e){var t;return null!=(t=e.get("title"))?t.match(n):void 0}),o=i.map(function(e){return e.id}),this.showSearchResults(o)):void this.resetSearch(e)},i.prototype.resetSearchResults=function(){return this.$(".empty-search-results").hide(),this.$("#cancel-template-search").hide(),this.$(".category").show().removeClass("active"),this.$(".category li").removeClass("found").show(),this._resetKeyedFocus(),this._resetBottom()},i.prototype.showSearchResults=function(e){return _.each(e,function(e){return this.$(".category li[data-id='"+e+"']").addClass("found").parents(".category").addClass("active")}),this.$(".category li").not(".found").hide(),this.$(".category").not(".active").hide(),0===this.$(".category.active").length&&this.$(".empty-search-results").show(),this._resetBottom()},i.prototype.resetSearch=function(e){return e.stopPropagation(),this.resetSearchResults(),this.resetOtherCategory(),this.$("#template-search").val(""),this.focusOnSearch()},i.prototype.resetOtherCategory=function(){return this.otherIsOnlyCategory?(this.$(".category.other").addClass("active"),this._resetBottom()):void 0},i.prototype.focusOnSearch=function(){return this.$("#template-search").focus()},i.prototype._resetBottom=function(){var e,t;return e=$("#ticket_edit").height()||$("#new_ticket_body").parent().outerHeight(),t=this.$el.height(),this.$el.css("bottom",t>e?-15:e-t)},i.prototype.keyDownTemplateSearch=function(e){var t,n,i,o,r,s;return o=[this.KEYS.UP,this.KEYS.DOWN],i=[this.KEYS.LEFT],s=[this.KEYS.RIGHT,this.KEYS.TAB,this.KEYS.ENTER],t=_.union(i,s),r={leftActions:i,rightActions:s,$focused:this.$(".focus").last(),category:".category:visible",reply:".category li:visible",hasCategories:!this.$(".category.only").length},_.contains(o,e.which)&&(e.preventDefault(),n=e.which===this.KEYS.DOWN?"down":"up",this.navigateFocus(n,r)),_.contains(t,e.which)?(e.preventDefault(),this.actionKeys(e.which,r)):void 0},i.prototype.actionKeys=function(e,t){var n,i,o,r,s,a,l,c,p;return l=[t.$focused,t.leftActions,t.rightActions,t.category,t.reply],n=l[0],a=l[1],p=l[2],o=l[3],c=l[4],s=_.contains(p,e),r=_.contains(a,e),n.is(o)&&(s&&(n.is(".active")||n.find("h3").click()),r&&n.is(".active")&&n.removeClass("active")),n.is(c)&&(s&&n.click(),r)?(i=n.closest(o),this.focusItem(i)):void 0},i.prototype.focusItem=function(e){return this.$(".focus").removeClass("focus"),e.addClass("focus")},i.prototype.navigateFocus=function(e,t){var n;if(_.contains(["up","down"],e))return"down"===e&&(n=this.getNextItemDown(t)),"up"===e&&(n=this.getNextItemUp(t)),this.focusItem(n),this.scrollToNextFocus(n)},i.prototype.getNextItemUp=function(e){var t,n,i,o,r,s,a,l;return s=[e.$focused,e.category,e.reply,e.hasCategories],t=s[0],o=s[1],a=s[2],r=s[3],t.length?(i=t.prevAll(".category:visible, li:visible").first(),t.is(o)&&i.is(".active")&&(i=i.find("li:visible").last()),i.length||(t.is(o)&&(i=this.$(o).last(),i.is(".active")&&(i=i.find("li:visible").last())),t.is(a)&&(i=r?t.closest(".category"):this.$(a).last()))):(l=a,r&&(l=o,n=this.$(o).last(),n.is(".active")&&(l=a)),i=this.$(l).last()),i},i.prototype.getNextItemDown=function(e){var t,n,i,o,r,s,a;return r=[e.$focused,e.category,e.reply,e.hasCategories],t=r[0],i=r[1],s=r[2],o=r[3],t.length?(n=t.nextAll(":visible").first(),t.is(i)&&t.is(".active")&&(n=t.find("li:visible").first()),n.length||(t.is(i)&&(n=t.is(".active")?t.find("li:visible").first():this.$(".category:visible").first()),t.is(s)&&(n=t.closest(".category").next(),n.length||(n=o?this.$(i).first():this.$(s).first())))):(a=s,o&&(a=i),n=this.$(a).first()),n},i.prototype.scrollToNextFocus=function(e){var t,n,i;return t=e.closest(".body"),n=e.is(".category.active")?e.find("h3").outerHeight():e.outerHeight(),e.position().top+n>t.height()?i=t.scrollTop()+e.position().top-t.height()+n:e.position().top<0&&(i=t.scrollTop()+e.position().top),null!=i?t.stop().animate({scrollTop:i}):void 0},i.prototype._resetKeyedFocus=function(){return this.$(".focus").removeClass("focus")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CannedReplyForm=function(n){function i(){return this.variablesSelect=e(this.variablesSelect,this),this.cannedReplySaved=e(this.cannedReplySaved,this),this.renderVariableInserter=e(this.renderVariableInserter,this),this.renderEditor=e(this.renderEditor,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/canned_reply_form"],i.prototype.className="box-b-new-canned-reply type-expanded",i.prototype.events={"click .cancel_comment_template":"closeForm","submit form.comment-template":"saveCommentTemplate","change .canned_category_select":"changeEditorCategory","change .variable-inserter":"insertVariable"},i.prototype.initialize=function(e){return null==e&&(e={}),this.body=e.body,this.templates=e.templates,this.variables=GrooveClient.Views.CommentTemplatesEditor.VARIABLES,this.categories=GrooveClient.data.commentTemplateCategories,this.listenTo(this.categories,"sync",this.renderCategories)},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$("#comment_template_title").focus(),_.defer(this.renderEditor)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{categories:this.categories,body:this.body,variables:this.variables})},i.prototype.renderCategories=function(){var e;return e=this.$("#canned_category_select").empty(),e.append($("<option>",{text:"All Categories",value:"all"})),this.categories.each(function(t){var n;return n=$("<option>",{text:t.get("name"),value:t.id}),e.append(n)})},i.prototype.renderEditor=function(){return this.editor=i.__super__.renderEditor.call(this,"comment_template_body",{height:100,on:{instanceReady:this.renderVariableInserter}})},i.prototype.renderVariableInserter=function(){return this.$(".cke_top").append(this.variablesSelect()),this.$(".variable-inserter").uniform()},i.prototype.setReplyText=function(){var e;return e=this.$("#comment_template_body"),e.val(this.body)},i.prototype.saveCommentTemplate=function(e){var t,n,i,o,r,s,a,l;for(n=$(e.target),a=new GrooveClient.Models.CommentTemplate,r={},s=["title","body","category_id"],i=0,o=s.length;o>i;i++)t=s[i],l=n.find("[name$='["+t+"]']").val(),l&&"category_id"===t&&(l=~~l),r[t]=l;return a.save(r,{wait:!0,success:this.cannedReplySaved,error:this.cannedReplyFailed}),!1},i.prototype.cannedReplySaved=function(e){return this.templates.add(e),this.closeForm(),GrooveClient.trigger("flashMessage",{type:"notice",body:"Canned reply was successfully saved"})},i.prototype.cannedReplyFailed=function(){return GrooveClient.trigger("flashMessage",{type:"notice",body:"There was a problem saving the canned reply"})},i.prototype.changeEditorCategory=function(e){var t,n,i,o;if(i=$(e.target),o=i.val(),"add"===o){if(n=prompt("Enter new category name"),!n)return;return t=new GrooveClient.Models.CommentTemplateCategory,this.categories.add(t),t.save({name:n},{success:function(){var e;return e=i.find("option:last"),e.before($("<option>",{text:t.get("name"),value:t.id})),i.val(t.id),$.uniform.update(i)},error:function(e,t){return i.val(""),$.uniform.update(i),GrooveClient.trigger("flashMessage",{type:"alert",body:t})}})}},i.prototype.variablesSelect=function(e){return null==e&&(e={}),null==e.variables&&(e.variables=GrooveClient.Views.CommentTemplatesEditor.VARIABLES),JST["tickets/canned_replies/variables_select"](e)},i.prototype.insertVariable=function(e){var t,n;return t=$(e.target),(n=t.val())?(t.val(""),$.uniform.update(t),this.editor.insertText("%{"+n+"}"),!1):!1},i.prototype.closeForm=function(e){return $.fancybox.close(),!1},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CannedReplyFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.contents=GrooveClient.Views.CannedReplyForm,i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:640})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.StateSelector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/form/state_selector"],n.prototype.tagName="ul",n.prototype.className="submit-states",n.prototype.events=function(){return{"click li":function(e){var t;return e.preventDefault(),t=$(e.target).closest("li"),t.hasClass("selected")||this._updateForm(t.data()),this.remove()}}},n.prototype.initialize=function(e){this.button=e.button,this.hiddenField=e.hiddenField,this.sendCopy=e.sendCopy},n.prototype.renderTemplate=function(){var e,t;return t=function(){var t,n,i,o;for(i=GrooveClient.data.ticketReplyStates,o=[],t=0,n=i.length;n>t;t++)e=i[t],
o.push({humanized:e[0],value:e[1]});return o}(),n.__super__.renderTemplate.call(this,{states:t,currentState:{value:this.hiddenField.val()},classFor:function(e){var t;return t=_.clone(e),e===this.currentState.value&&(t+=" selected"),t}})},n.prototype._updateForm=function(e){return this.hiddenField.val(e.value),this.button.val(this.sendCopy?"Send as "+e.humanized:"Post as "+e.humanized)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){GrooveClient.Views.WithAttachments={renderAttachmentsForm:function(){var e,t,n;if(!this.model.isTwitterTicket())return e=this.$("form"),t=function(e){return function(t){return e.$(".attach-button").click(),!1}}(this),e.on("click","#attachments-button",t),this.on("remove",function(n){return function(){return console.log("removed"),e.off("click","#attachments-button",t)}}(this)),n=new GrooveClient.Views.AttachmentsForm({parentForm:e}),this.listenTo(n.collection,"add",function(e){return function(){return e.trigger("attachments:add")}}(this)),this.listenTo(n.collection,"remove",function(e){return function(){return e.trigger("attachments:remove")}}(this)),this.replaceWithChild(n,".comment_attachments_wrapper"),n.onSwap()}}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.Labels=function(n){function i(){return this.labelsUpdated=e(this.labelsUpdated,this),this.updateViews=e(this.updateViews,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/labels"],i.prototype.initialize=function(){return this.listenTo(GrooveClient.data.labels,"reset",this.render),this.listenTo(this.model,"labels:change",function(e){return e.view!==this?this.render():void 0})},i.prototype.render=function(e){return this.renderTemplate({ticket:this.model}),this.updateViews(),this},i.prototype.updateViews=function(){return Groove.UI.tokenizedLabels(this.el,this.labelsUpdated)},i.prototype.labelsUpdated=function(e){return GrooveClient.data.labels.add(e.labels),GrooveClient.trigger("tickets:update",e)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsMassActions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click .action-label":"toggleLabelForm","click .action-delete":"massDelete","click .discard-drafts.button":"discardDrafts","dropdown:change .pretty-dropdown":"performMassAction","labels:add .action-label":"performMassAction",reset:"render"},n.prototype.template=JST["tickets/mass_actions"],n.prototype.className="box-c-mass-actions",n.prototype.initialize=function(e){return this.indexView=e.indexView},n.prototype.render=function(){return this.renderTemplate({collection:this.indexView.collection}),this.renderDropdowns(),this},n.prototype.renderDropdowns=function(){var e,t,n,i,o,r,s;return o=!1,e=GrooveClient.data.agents,i=new Backbone.Collection(e.where({archived:!1})),n="assignee_id",t="Anyone",r="Assign To",s=new GrooveClient.Views.SelectDropDown({name:n,options:i,blank:t,selected:o,title:r}),this.replaceWithChild(s,".assign-to-dropdown"),GrooveClient.data.groups.length>0&&(i=GrooveClient.data.groups,n="assignee_group_id",t="None",r="Assign To Group",s=new GrooveClient.Views.SelectDropDown({name:n,options:i,blank:t,selected:o,title:r}),this.replaceWithChild(s,".assign-to-group-dropdown")),i=_.map(GrooveClient.data.account.accessibleMailboxesToMove(),function(e){return[e.get("name"),e.get("id")]}),n="mailbox_id",r="Change Mailbox",s=new GrooveClient.Views.SelectDropDown({name:n,options:i,selected:o,title:r}),i.length>1&&this.replaceWithChild(s,".change-mailbox-dropdown"),i=GrooveClient.data.ticketSettings.states,n="state",r="Change Status",s=new GrooveClient.Views.SelectDropDown({name:n,options:i,selected:o,title:r}),this.replaceWithChild(s,".change-status-dropdown"),s=new GrooveClient.Views.AddLabelsDropdown,this.replaceWithChild(s,".add-labels-dropdown"),this.$(".box-c-ticket-actions > :eq(0)").addClass("first"),this.$(".box-c-ticket-actions > :eq(1)").addClass("second")},n.prototype.stopPropagation=function(e){return e.stopPropagation(),!1},n.prototype.massActionsCollection=function(){return new GrooveClient.Collections.TicketsMassActions(this.indexView.getSelectedTickets())},n.prototype.massDelete=function(){return confirm("Are you sure you want to delete these tickets?")?this.massActionsCollection().massDelete():void 0},n.prototype.performMassAction=function(e,t){var n,i,o;switch(i=$(e.target),o=i.data("name"),n=this.massActionsCollection(),o){case"label":n.label(t);break;case"mailbox_id":n.mailbox(t);break;case"assignee_id":n.assign(t);break;case"assignee_group_id":n.assign_group(t);break;case"state":n.status(t)}return!1},n.prototype.discardDrafts=function(){return this.massActionsCollection().discardDraft()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MergePreviousTicket=function(n){function i(){return this.mergeError=e(this.mergeError,this),this.mergeSuccess=e(this.mergeSuccess,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/merge_previous"],i.prototype.className="box-b-merge-ticket type-expanded",i.prototype.events={"click button[role='merge']":function(e){return e.preventDefault(),this.disableButtons($(e.currentTarget)),this.mergeTicket()},"click a[role='closeModal']":function(e){return e.preventDefault(),$.fancybox.close()}},i.prototype.initialize=function(e){return this.parentTicket=e.parentTicket,null!=this.model.enduser?this.enduserView=new GrooveClient.Views.User({model:this.model.enduser}):void 0},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderTicketEventItems(),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{view:this,ticket:this.model,parentTicket:this.parentTicket,enduserView:this.enduserView,formattedDate:Groove.Util.formattedDateTime(this.model.get("created_at"))})},i.prototype.disableButtons=function(e){return this.$(".close").hide(),this.$(".fancybox-close").hide(),e.text("Merging...").attr("disabled","disabled").fadeTo(0,.75)},i.prototype.mergeTicket=function(){return this.childTicketId=this.model.get("id"),this.parentTicketId=this.parentTicket.get("id"),$.ajax({url:"/api/tickets/"+this.parentTicketId+"/merge/"+this.childTicketId+"?destroy=true",type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",success:this.mergeSuccess,error:this.mergeError})},i.prototype.mergeSuccess=function(e){var t,n;return $.fancybox.close(),n=_.select(e,function(e){return function(t){return t.id===parseInt(e.parentTicketId)}}(this)),t=_.find(e,function(e){return function(t){return t.id===parseInt(e.childTicketId)}}(this)),GrooveClient.trigger("tickets:update",n),t&&GrooveClient.trigger("tickets:delete",t),GrooveClient.trigger("flashMessage",{type:"notice",body:"Ticket sucessfully merged."}),History.replaceState({},null,"/groove_client/tickets/"+this.parentTicketId),this.parentTicketId=null,this.childTicketId=null},i.prototype.mergeError=function(e){return $.fancybox.close(),GrooveClient.trigger("flashMessage",{type:"alert",body:"An unexpected error occured while attempting to merge ticket. Please try again in a few minutes."})},i.prototype.firstCommentBody=function(){var e,t,n,i;return t=this.model.comments.first(),e=$.trim(t.sanitizedBody()),n=$.trim(this.model.get("title")),n&&0===e.indexOf(n)?(i=new RegExp(Groove.Util.escapeRegex(n)+" ?.?( |<br>)+"),e.replace(i,"")):e},i.prototype.renderTicketEventItems=function(){var e,t,n,i,o,r,s;for(this.$("#comments-feed").empty(),s=this.filterForwardingEvents(),n=_.union(this.model.comments.replies(),s),r=function(e){return moment(e.get("created_at")).valueOf()},o=_.sortBy(n,r),e=0,i=o.length;i>e;e++)t=o[e],this.appendTicketEventItem(t);return this},i.prototype.filterForwardingEvents=function(){return _.reject(this.model.timelineEvents.models,function(e){return"ticket_forwarded"===e.get("event_type")&&null!=e.get("secondary_subject_id")})},i.prototype.appendTicketEventItem=function(e){var t;return t=e instanceof GrooveClient.Models.Comment?GrooveClient.Views.CommentItem:GrooveClient.Views.TicketTimelineEvent,this.appendChildTo(new t({model:e}),"#comments-feed")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MergePreviousTicketFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="",i.prototype.contents=GrooveClient.Views.MergePreviousTicket,i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:640,scrolling:"yes",centerOnScroll:!0,autoScale:!0})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MergeTicketForm=function(n){function i(){return this.mergeError=e(this.mergeError,this),this.mergeSuccess=e(this.mergeSuccess,this),this.updateTimeAgo=e(this.updateTimeAgo,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/merge_form"],i.prototype.className="box-b-merge-ticket type-expanded",i.prototype.events={"click input.to-merge":"resultSelected","keypress input#merge-ticket-search":"mergeSearch","submit form.merge-ticket":"mergeTickets"},i.prototype.initialize=function(){return this.ticketView=new GrooveClient.Views.Ticket({model:this.model}),this.ticketsToMerge=new GrooveClient.Collections.Tickets,this.listenTo(this.ticketsToMerge,"reset",this.renderTicketsToMerge),this.enduserView=this.ticketView.enduserView},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderTicketItem(),this.updateTimeAgo(),this.initRecentTickets(),this.showRecentTickets(),this},i.prototype.renderTicketItem=function(){var e;return e=new GrooveClient.Views.TicketItem({model:this.model}),this.replaceWithChild(e,".item")},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{view:this,ticket:this.model,enduserView:this.enduserView})},i.prototype.updateTimeAgo=function(){var e;return e=Groove.Util.timeAgo(this.model.get("updated_at")),this.$el.find(".updated-at.autoupdate").text(e)},i.prototype.resultSelected=function(e){return this.$(".result").removeClass("selected"),$(e.target).parents(".result").addClass("selected"),this.$(".search-error").hide()},i.prototype.initRecentTickets=function(){var e,t,n,i;this.recentTickets=new GrooveClient.Collections.Tickets,t=GrooveClient.data.historyItems.models,i=[];for(n in t)e=t[n],this.isTicketHistoryItem(e)&&i.push(this.recentTickets.add(e.get("ticket")));return i},i.prototype.showRecentTickets=function(){return this.ticketsToMerge.reset(this.recentTickets.models),this.$(".results:not(:empty)").prepend("<h2>Or select from your recently viewed tickets:</h2>")},i.prototype.isTicketHistoryItem=function(e){var t;return"Ticket"!==e.get("type")?!1:(t=e.get("ticket"),null!=t&&t instanceof GrooveClient.Models.Ticket)},i.prototype.renderTicketsToMerge=function(){var e,t,n,i,o;for(e=this.$el.find(".results"),e.empty(),i=this.ticketsToMerge.models,t=0,n=i.length;n>t;t++)o=i[t],this.appendTicketToMerge(e,o);return this.addResultsStyling(),this.displayMergeButton(),this.searchFocus()},i.prototype.appendTicketToMerge=function(e,t){var n;if(!this.sameTicket(t)&&!this.ticketClosed(t))return n=new GrooveClient.Views.TicketToMergeItem({model:t}),this.$el.find(".results").append(n.render().el)},i.prototype.sameTicket=function(e){return this.model.get("account_ticket_number")===e.get("account_ticket_number")},i.prototype.ticketClosed=function(e){return"closed"===e.get("state")},i.prototype.searchFocus=function(){return this.$("#merge-ticket-search").focus(),this.$("#merge-ticket-search").select()},i.prototype.mergeSearch=function(e){var t;if(13===e.keyCode){if(e.preventDefault(),t=$.trim($(e.target).val()),0===t.length)return;return t.match(/^(\#)?\d+$/)?this.searchById(t):this.searchByTitle(t)}},i.prototype.mergeTickets=function(e){var t,n;return e.preventDefault(),this.parentTicketId=this.$("#parent-ticket-id").val(),this.childTicketId=this.$(".to-merge:checked").val(),(null!=(t=this.childTicketId)?t.length:void 0)?(n="/api/tickets/"+this.childTicketId+"/merge/"+this.parentTicketId,$.ajax({url:n,type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",success:this.mergeSuccess,error:this.mergeError})):void this.displayNoSelectionError()},i.prototype.mergeSuccess=function(e){var t,n;return $.fancybox.close(),n=_.select(e,function(e){return function(t){return t.id===parseInt(e.childTicketId)}}(this)),t=_.find(e,function(e){return function(t){return t.id===parseInt(e.parentTicketId)}}(this)),GrooveClient.trigger("tickets:update",n),t&&GrooveClient.trigger("tickets:delete",t),GrooveClient.trigger("flashMessage",{type:"notice",body:"Ticket sucessfully merged."}),History.replaceState({},null,"/groove_client/tickets/"+this.childTicketId),this.childTicketId=null,this.parentTicketId=null},i.prototype.mergeError=function(e){return $.fancybox.close(),GrooveClient.trigger("flashMessage",{type:"alert",body:"An unexpected error occured while attempting to merge ticket. Please try again in a few minutes."})},i.prototype.searchById=function(e){var t,n;return n=Number(e.replace(/\D/g,"")),this.model.get("account_ticket_number")===n?void this.displaySearchError("selfMerge",n):(t=$.getJSON("/api/tickets/search/account_ticket_number/"+n),t.success(function(e){return function(t){var n;return n=new GrooveClient.Models.Ticket(t),e.ticketsToMerge.reset([n])}}(this)),t.error(function(e){return function(){return e.displaySearchError("id",n)}}(this)))},i.prototype.searchByTitle=function(e){var t;return t=new GrooveClient.Collections.SearchTickets(e),t.fetch({success:function(t){return function(n){return n.length>0?t.ticketsToMerge.reset(n.models):t.displaySearchError("title",e)}}(this),error:function(t){return function(n){return t.displaySearchError("title",e)}}(this)})},i.prototype.addResultsStyling=function(){var e;return e=this.$el.find(".result"),e.filter(":even").addClass("even"),e.filter(":odd").addClass("odd")},i.prototype.displayMergeButton=function(){var e;return e=this.$(".results:not(:empty)"),0===e.length?this.$(".merge-ticket-buttons").hide():this.$(".merge-ticket-buttons").show()},i.prototype.displaySearchError=function(e,t,n){var i;return i="selfMerge"===e?"You cannot merge a ticket with itself":"A ticket with the "+e+" <i>"+t+"</i> could not be found",this.$el.find(".results").html("<div class='search-error'>"+i+"</div>"),this.$(".merge-ticket-buttons").hide()},i.prototype.displayNoSelectionError=function(){var e;return e="Please select a ticket to merge",this.$el.find(".results").prepend("<div class='search-error'>"+e+"</div>")},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.MergeTicketFancybox=function(n){function i(){return this.onShow=e(this.onShow,this),this.onStart=e(this.onStart,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.CUSTOM_FANCYBOX_CLASS="",i.prototype.contents=GrooveClient.Views.MergeTicketForm,i.prototype.fancyboxOptions=function(){return _.extend(i.__super__.fancyboxOptions.call(this),{onStart:this.onStart,width:640})},i.prototype.onStart=function(){return $(document.body).addClass(this.CUSTOM_FANCYBOX_CLASS),!0},i.prototype.onShow=function(){return $("#fancybox-close").hide(),i.__super__.onShow.apply(this,arguments)},i.prototype.onClose=function(){return i.__super__.onClose.apply(this,arguments),$(document.body).removeClass(this.CUSTOM_FANCYBOX_CLASS)},i.prototype.appear=function(){return i.__super__.appear.apply(this,arguments),Groove.UI.dropdowns()},i}(GrooveClient.Views.FancyboxView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NewTicketForm=function(n){function i(){return this.handleFailure=e(this.handleFailure,this),this.handleSuccess=e(this.handleSuccess,this),this.saveTicket=e(this.saveTicket,this),this.submitButton=e(this.submitButton,this),this.agents=e(this.agents,this),this.groups=e(this.groups,this),this.mailboxes=e(this.mailboxes,this),this.customerInfo=e(this.customerInfo,this),this._setupAutocompletes=e(this._setupAutocompletes,this),this.insertCannedReply=e(this.insertCannedReply,this),this.renderLabels=e(this.renderLabels,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/new_ticket_form"],i.prototype.id="new-ticket-container",i.prototype.sendCopy=!0,i.prototype.events={"click #do_not_send_copy":function(e){return this.clearErrors(),this.$el.addClass("private"),this.$("#cc-bcc-addresses").empty(),$("#phone-number").html(this.phoneNumber()),this.sendCopy=!1,this.$("#ticket_submit").val("Post as "+this.$("#ticket_state").val()),this.$("#cc, #bcc, #canned-replies").fadeOut()},"click #send_copy":function(e){return this.clearErrors(),this.$el.removeClass("private"),this.$("#cc, #bcc, #canned-replies").fadeIn(),this.$("#phone-number").empty(),this.sendCopy=!0,this.$("#ticket_submit").val("Send as "+this.$("#ticket_state").val())},"click #ticket-state-changer":function(e){var t;return e.preventDefault(),t=new GrooveClient.Views.StateSelector({button:this.$("#ticket_submit"),hiddenField:this.$("#ticket_state"),sendCopy:this.sendCopy}),this.appendChildBefore(t,"#assignment-dropdowns")},"submit #new-ticket":function(e){return e.preventDefault(),this.saveTicket($(e.target))},"click .nav-back-button":function(e){return e.preventDefault(),window.history.back()},"click #cc":function(e){return e.preventDefault(),$(e.target).hide(),this._renderAddressInput({type:"cc",label:"Cc"})},"click #bcc":function(e){return GrooveClient.data.account.isTrial()?void 0:(e.preventDefault(),$(e.target).hide(),this._renderAddressInput({type:"bcc",label:"Bcc"}))},'click #canned-replies a[href="#show-dropdown"]':"renderCannedRepliesDropdown","click #ticket-labels":function(e){return e.preventDefault(),this.$("#token-input-ticket_label_string").focus()},"focus #ticket-labels":"setLabelInputStyles","blur #ticket-labels":"removeLabelInputStyles"},i.prototype.initialize=function(e){return null==e&&(e={}),this.endUserEmail=e.email,this.templates=GrooveClient.data.commentTemplates,this.labelsContainerId="#ticket-labels",this.listenTo(this.model,"change:phone_number",function(e){return this.model.phone_number=e,this.$("#ticket_enduser_phone_number").val=e})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),_.defer(function(e){return function(){return e._setupAutocompletes(),e.bodyEditor=e.renderEditor("ticket_body",{height:100,removeButtons:"Source"}),e.renderAssignee(),e.renderLabels(),e.renderAttachmentsForm(),_.isEmpty(e.endUserEmail)?void 0:e.prefillEndUserFromEmail()}}(this)),this},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{model:this.model,currentState:{value:"closed"},defaultReplyState:{value:this.defaultReplyState(),text:this.defaultReplyText()},customerInfo:this.customerInfo,mailboxes:this.mailboxes,groups:this.groups,agents:this.agents,hasTemplates:this.templates.length>0})},i.prototype.renderEditor=function(e,t){return null==t&&(t={}),_.extend(t,{bodyId:"ticket-body",width:622}),i.__super__.renderEditor.call(this,e,t)},i.prototype.renderAssignee=function(){var e;return e=this.$("#assignment-dropdowns"),e.empty(),this.renderChild(new GrooveClient.Views.Assignee({form:this,el:e,model:this.ticket}))},i.prototype.renderCannedRepliesDropdown=function(e){var t,n;return e.preventDefault(),e.stopPropagation(),n=this.$(e.target),t=new GrooveClient.Views.CannedRepliesDropdown({collection:this.templates,form_id:"new-ticket"}),t.on({select:function(e){return function(t){return e.insertCannedReply(t)}}(this),leave:function(e){return function(){return t.$el.replaceWith(n),e.bodyEditor.focus()}}(this)}),this.replaceWithChild(t,n),t.trigger("append"),this.cannedRepliesDropDown=t},i.prototype.renderLabels=function(){var e,t;return t=new GrooveClient.Views.Labels({model:this.model}),e=this.renderChildInto(t,this.labelsContainerId),this.setLabelInputPlaceholder(),this.removeTokenInputPlaceholder(),e.find("input").prop({placeholder:"",tabindex:14}),e.prepend('<a href="#add-label">Add Tag</a>'),this.$(".box-b-wrap.center-panel").css("overflow","visible")},i.prototype._renderAddressInput=function(e){var t,n;return n=$(JST["tickets/new/cc_bcc_address"](e)),t="bcc"===e.type?"append":"prepend",this.$("#cc-bcc-addresses")[t](n),n.find("input").focus()},i.prototype.setLabelInputStyles=function(e){return $(e.target).parent("li").addClass("active"),this.removeLabelInputPlaceholder(),this.removeTokenInputPlaceholder()},i.prototype.setLabelInputPlaceholder=function(){return this.$(this.labelsContainerId).css("width","10px")},i.prototype.removeLabelInputStyles=function(e){return $(e.target).parent("li").removeClass("active"),this.setLabelInputPlaceholder(),this.removeTokenInputPlaceholder()},i.prototype.removeLabelInputPlaceholder=function(){return this.$(this.labelsContainerId).attr("placeholder","").css("width","12px")},i.prototype.removeTokenInputPlaceholder=function(){return this.$(".token-input-placeholder").remove()},i.prototype.insertCannedReply=function(e){var t,n,i,o,r,s,a,l,c,p;return o=this.$("#ticket_enduser_name").val(),l=o.split(/\s+/,2),i=l[0],r=l[1],t={full_name:o,first_name:i,last_name:r,email:this.$("#ticket_enduser_email").val(),agent_firstname:GrooveClient.data.currentUser.get("first_name")},c=this.templates.get(e),n=this.bodyEditor.getData(),a="&nbsp;"===n.slice(-6)&&"<br />"===n.slice(-13,-7)?n.replace(/(&nbsp;)+$/g,""):n,s=a+c.interpolatedBody(t),p=this.$("#ticket_title"),_.isEmpty(p.val())&&p.val(c.get("subject")),this.bodyEditor.insertHtml(c.interpolatedBody(t)),this.bodyEditor.focus(),this.track("inserted_canned_text",{has_used_canned_text:1})},i.prototype._setupAutocompletes=function(){var e,t;return Groove.UI.autocompletion(),t=this.$("#ticket_enduser_name"),e=this.$("#ticket_enduser_email"),t.on("autocomplete:onselect",function(t){return function(n,i){return e.val(i.email),t.model.trigger("change:phone_number",i.phone_number)}}(this)),e.on("autocomplete:onselect",function(e){return function(n,i){return t.val(i.full_name),e.model.trigger("change:phone_number",i.phone_number)}}(this)),t.focus()},i.prototype.prefillEndUserFromEmail=function(){var e;return e=this.$("#ticket_enduser_email"),$.getJSON(e.attr("data-autocomplete"),{term:this.endUserEmail}).done(function(t){return function(n){var i,o;return i=_.isEmpty(n)?t.endUserEmail:null!=(o=n[0])?o.email:void 0,e.val(i),_.isEmpty(n)?void 0:e.trigger("autocomplete:onselect",n)}}(this))},i.prototype.customerInfo=function(e){return null==e&&(e={}),e.titleize=this._titleize,JST["tickets/new/customer_info"](e)},i.prototype.phoneNumber=function(e){return null==e&&(e={}),e.phone_number=this.model.phone_number,JST["tickets/new/phone_number"](e)},i.prototype.mailboxes=function(e){return null==e&&(e={}),e.mailboxes=GrooveClient.data.mailboxes.models,0!==e.mailboxes.length?(e.preferred_mailbox_id=GrooveClient.data.preferredMailboxId,JST["tickets/new/mailboxes"](e)):void 0},i.prototype.groups=function(e){return null==e&&(e={}),e.models=GrooveClient.data.groups.sortBy(function(e){return e.get("name")}),0!==e.models.length?(e.select_name="assignee_group_id",e.default_option={name:"Any",value:""},e.label="Group",JST["tickets/new/select_box"](e)):void 0},i.prototype.agents=function(e){return null==e&&(e={}),e.models=GrooveClient.data.agents.sortBy(function(e){return e.get("name")}),e.select_name="assignee_id",e.default_option={name:"Anyone",value:""},e.label="Agent",JST["tickets/new/select_box"](e)},i.prototype.submitButton=function(e){var t;return null==e&&(e={}),e.states=function(){var e,n,i,o;for(i=GrooveClient.data.ticketReplyStates,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(new Backbone.Model({name:t[0],value:t[1]}));return o}(),JST["tickets/new/submit_button"](e)},i.prototype.showSubmitOptions=function(){var e,t,n,i;return n=this.$(".submit-states"),t=this.$("#ticket-state-changer"),e=$(document.body),i=function(o){return function(o){return n.hide(),t.removeClass("selected"),e.unbind("click",i)}}(this),e.click(i),n.show(),t.addClass("selected"),!1},i.prototype.defaultReplyState=function(){return GrooveClient.data.account.get("prefers_reply_button")},i.prototype.defaultReplyText=function(){return _.find(GrooveClient.data.ticketReplyStates,function(e){return function(t){return t[1]===e.defaultReplyState()}}(this))[0]},i.prototype.defaultComment=function(){return{"private":!1,agent_response:!0}},i.prototype.saveTicket=function(e){return this.clearErrors(),this.model.save(this.serializeForm(e),{wait:!0,success:this.handleSuccess,error:this.handleFailure})},i.prototype.serializeForm=function(e){var t,n;return n=this.formAttrs||e.toObject(),n.comments_attributes&&(t=_.extend(this.defaultComment(),n.comments_attributes[0]),t["private"]="0"===n.send_copy_to_enduser,n.comments_attributes={0:t}),this.closed&&(n.state="closed"),n.client_id=GrooveChat.getClientId(),n},i.prototype.handleSuccess=function(e,t){return this.track("Used_New_Ticket_Form",{has_used_new_ticket_form:1}),GrooveClient.data.preferredMailboxId=this.model.get("mailbox_id"),GrooveClient.trigger("tickets:create",t),GrooveClient.navigate(GrooveClient.path("tickets/"+this.model.id))},i.prototype.handleFailure=function(e,t){var n;return n=$.parseJSON(t.responseText),this.displayErrors(n)},i.prototype.displayErrors=function(e){var t,n,i;i=[];for(t in e)n=e[t],i.push(this.displayError(t,n));return i},i.prototype.displayError=function(e,t){return"comments"===e?(this.$("#editor-container").addClass("error"),this.$("#comment-errors").html("<p class='error-block'>"+t.join(", ")+"</p>")):this.$("input#ticket_"+e).after("<p class='error-block'>"+t.join(", ")+"</p>").parent("div").addClass("error")},i.prototype.clearErrors=function(){return this.$("div.error").removeClass("error"),this.$(".error-block").remove()},i.prototype._titleize=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},i.prototype.selectOption=function(e,t,n){var i;return i=String(t)===String(n),$("<option>",{value:t,text:e,selected:i}).outerHTML()},i}(GrooveClient.Views.MainView),_.extend(GrooveClient.Views.NewTicketForm.prototype,GrooveClient.Mixins.GroupAndAssigneeDropdowns,GrooveClient.Views.WithAttachments)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.NewTicket=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.NewTicketForm,n.prototype.leftSidebar=GrooveClient.Views.TicketsLeftSidebar,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.NotePlaceholder=function(n){function i(){return this.toggle=e(this.toggle,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.TEXT="@mention your teammates and they'll be notified via email",i.prototype.className="NotePlaceholder",i.prototype.initialize=function(e){var t;return this.editor=e.editor,t=e.userInput,t&&""!==$.trim(t)?this.$el.css({opacity:0}):void 0},i.prototype.render=function(){return this.el.textContent=this.TEXT,this.editor.on("contentDom",function(e){return function(){return e.editor.editable().attachListener(e.editor.document,"input",e.toggle)}}(this))},i.prototype.toggle=function(e){var t,n;return n=e.editor,t=e.data,this.$el.css({opacity:""===t.$.target.textContent?1:0})},i.prototype.remove=function(){var e;return(e=this.editor.editable())&&e.removeListener(this.editor.document,"input",this.toggle),i.__super__.remove.apply(this,arguments)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketPreview=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="ticket item",i.prototype.template=JST["tickets/preview"],i.prototype.initialize=function(){return this.on("leave",this.remove,this)},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{view:this,ticket:this.model})},i.prototype.render=function(){return this.model.comments.isEmpty()?this.model.fetchComments({success:this.render}):(this.renderTemplate(),this.renderCommentItems(),this)},i.prototype.renderCommentItems=function(){var e,t,n,i;for(i=_.clone(this.model.comments.models).reverse(),t=0,n=i.length;n>t;t++)e=i[t],this.appendCommentItem(e);return this},i.prototype.appendCommentItem=function(e){var t;return t=new GrooveClient.Views.CommentItem({model:e}),this.appendChildTo(t,".box-c-comments-feed")},i.prototype.priorityLabel=function(){var e;return e=this.model.get("priority"),GrooveClient.data.ticketSettings.priorities[e]},i}(GrooveClient.Support.CompositeView)}.call(this);var wysihtml5ParserRules={classes:{"wysiwyg-clear-both":1,"wysiwyg-clear-left":1,"wysiwyg-clear-right":1,"wysiwyg-color-aqua":1,"wysiwyg-color-black":1,"wysiwyg-color-blue":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-gray":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-maroon":1,"wysiwyg-color-navy":1,"wysiwyg-color-olive":1,"wysiwyg-color-purple":1,"wysiwyg-color-red":1,"wysiwyg-color-silver":1,"wysiwyg-color-teal":1,"wysiwyg-color-white":1,"wysiwyg-color-yellow":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-xx-small":1,"wysiwyg-text-align-center":1,"wysiwyg-text-align-justify":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-right":1},tags:{tr:{add_class:{align:"align_text"}},strike:{remove:1},form:{rename_tag:"div"},rt:{rename_tag:"span"},code:{},acronym:{rename_tag:"span"},br:{add_class:{clear:"clear_br"}},details:{rename_tag:"div"},h4:{add_class:{align:"align_text"}},em:{},title:{remove:1
},multicol:{rename_tag:"div"},figure:{rename_tag:"div"},xmp:{rename_tag:"span"},small:{rename_tag:"span",set_class:"wysiwyg-font-size-smaller"},area:{remove:1},time:{rename_tag:"span"},dir:{rename_tag:"ul"},bdi:{rename_tag:"span"},command:{remove:1},ul:{},progress:{rename_tag:"span"},dfn:{rename_tag:"span"},iframe:{remove:1},figcaption:{rename_tag:"div"},a:{check_attributes:{href:"url"},set_attributes:{rel:"nofollow",target:"_blank"}},img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"},add_class:{align:"align_img"}},rb:{rename_tag:"span"},footer:{rename_tag:"div"},noframes:{remove:1},abbr:{rename_tag:"span"},u:{},bgsound:{remove:1},sup:{rename_tag:"span"},address:{rename_tag:"div"},basefont:{remove:1},nav:{rename_tag:"div"},h1:{add_class:{align:"align_text"}},head:{remove:1},tbody:{add_class:{align:"align_text"}},dd:{rename_tag:"div"},s:{rename_tag:"span"},li:{},td:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},object:{remove:1},div:{add_class:{align:"align_text"}},option:{rename_tag:"span"},select:{rename_tag:"span"},i:{},track:{remove:1},wbr:{remove:1},fieldset:{rename_tag:"div"},big:{rename_tag:"span",set_class:"wysiwyg-font-size-larger"},button:{rename_tag:"span"},noscript:{remove:1},svg:{remove:1},input:{remove:1},table:{},keygen:{remove:1},h5:{add_class:{align:"align_text"}},meta:{remove:1},map:{rename_tag:"div"},isindex:{remove:1},mark:{rename_tag:"span"},caption:{add_class:{align:"align_text"}},tfoot:{add_class:{align:"align_text"}},base:{remove:1},video:{remove:1},strong:{},canvas:{remove:1},output:{rename_tag:"span"},marquee:{rename_tag:"span"},b:{},q:{check_attributes:{cite:"url"}},applet:{remove:1},span:{},rp:{rename_tag:"span"},spacer:{remove:1},source:{remove:1},aside:{rename_tag:"div"},frame:{remove:1},section:{rename_tag:"div"},body:{rename_tag:"div"},ol:{},nobr:{rename_tag:"span"},html:{rename_tag:"div"},summary:{rename_tag:"span"},"var":{rename_tag:"span"},del:{remove:1},blockquote:{check_attributes:{cite:"url"}},style:{remove:1},device:{remove:1},meter:{rename_tag:"span"},h3:{add_class:{align:"align_text"}},textarea:{rename_tag:"span"},embed:{remove:1},hgroup:{rename_tag:"div"},font:{rename_tag:"span",add_class:{size:"size_font"}},tt:{rename_tag:"span"},noembed:{remove:1},thead:{add_class:{align:"align_text"}},blink:{rename_tag:"span"},plaintext:{rename_tag:"span"},xml:{remove:1},h6:{add_class:{align:"align_text"}},param:{remove:1},th:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},legend:{rename_tag:"span"},hr:{},label:{rename_tag:"span"},dl:{rename_tag:"div"},kbd:{rename_tag:"span"},listing:{rename_tag:"div"},dt:{rename_tag:"span"},nextid:{remove:1},pre:{},center:{rename_tag:"div",set_class:"wysiwyg-text-align-center"},audio:{remove:1},datalist:{rename_tag:"span"},samp:{rename_tag:"span"},col:{remove:1},article:{rename_tag:"div"},cite:{},link:{remove:1},script:{remove:1},bdo:{rename_tag:"span"},menu:{rename_tag:"ul"},colgroup:{remove:1},ruby:{rename_tag:"span"},h2:{add_class:{align:"align_text"}},ins:{rename_tag:"span"},p:{add_class:{align:"align_text"}},sub:{rename_tag:"span"},comment:{remove:1},frameset:{remove:1},optgroup:{rename_tag:"span"},header:{rename_tag:"div"}}};(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.ReplyForm=function(n){function i(){return this.insertCommentTemplate=e(this.insertCommentTemplate,this),this.showRecipient=e(this.showRecipient,this),this.hideRecipient=e(this.hideRecipient,this),this.editorKeyDown=e(this.editorKeyDown,this),this.editorKeyUp=e(this.editorKeyUp,this),this.ticketSaved=e(this.ticketSaved,this),this.draftSaved=e(this.draftSaved,this),this.saveDraft=e(this.saveDraft,this),this.updateSavedDraftAt=e(this.updateSavedDraftAt,this),this.updateSubmitButton=e(this.updateSubmitButton,this),this.focusOnTextarea=e(this.focusOnTextarea,this),this.exitViewMode=e(this.exitViewMode,this),this.hideCannedReplies=e(this.hideCannedReplies,this),this.resizeEditor=e(this.resizeEditor,this),this.renderEditor=e(this.renderEditor,this),this.cacheReplyableAndReRender=e(this.cacheReplyableAndReRender,this),this.reRenderToDropdownOptions=e(this.reRenderToDropdownOptions,this),this.renderToDropdownOptions=e(this.renderToDropdownOptions,this),this.updateAssignee=e(this.updateAssignee,this),this.fetchAndToggleForwardRecipients=e(this.fetchAndToggleForwardRecipients,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.saveDraftDelay=1e3,i.prototype.template=JST["tickets/reply_form"],i.prototype.className="box-c-reply-add public-reply-add reply",i.prototype.events={"submit form.ticket":"saveTicket","click #reply-type-switcher a":"selectTab","click .submit-states a":"selectState","keyup input[type=text].draft-attribute":"saveDraft","change .draft-attribute":"saveDraft","click .exit-view-mode":"exitViewMode","click #add_this_note":"trackNote","click #ticket_submit":"trackReply","click #discard-draft":"discardDraft","click #ticket-state-changer":"showSubmitOptions","click #attachments-button":"clickHiddenAttachmentButton","change [name=reply-addresses-actions]":"replyAddressActions","click #toggle-editor-toolbar a":"toggleEditorToolbar",'click #canned-replies a[href="#show-dropdown"]':"renderCannedRepliesDropdown","click .current-mailbox":"showMailboxList","change select#mailbox_id":"updateFromAddress","click .reply-recipients .from":"toggleFrom","click .reply-recipients .cc":"toggleCc","click .reply-recipients .bcc":"toggleBcc","click .token-input-token[data-url] p span":"followLabelLink",'click a[href="#add-label"]':"focusLabelInput","click .ticket-labels":"focusLabelInput","click .token-input-token":"showLabelsList","click #save-canned-reply":"saveAsCannedReply","focus #token-input-public-reply-add_ticket_label_string":"setLabelInputStyles","blur #token-input-public-reply-add_ticket_label_string":"removeLabelInputStyles","focus .reply-addresses-list input":"clearErrors","change #recipient_id":"handleRecipientChange","focus #ticket_submit":"toggleStateButtonFocus","blur #ticket_submit":"toggleStateButtonFocus",keydown:"replyFormKeyDown","keydown #ticket_submit":"submitKeyDown"},i.prototype.initialize=function(){return this.tab="reply",this.commentTemplates=GrooveClient.data.commentTemplates,this.ccField=this._ccField(),this.bccField=this._bccField(),this.replyableUsers=[],this.commentTemplates.isEmpty()&&this.listenForFirstCannedReply(),this.listenTo(this.model,"change:assignee_id",this.updateAssignee),this.listenTo(this.model,"change:assignee_group_id",this.updateAssignee),this.listenTo(this.model,"new:comments new:timeline_events",this.reRenderToDropdownOptions),this.listenTo(this.model,"change",function(e){return function(){return e.model.hasChanged("enduser")?e.reRenderToDropdownOptions():void 0}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{toDropdownOptions:this._toDropdownOptions(),ccField:this.ccField,bccField:this.bccField})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this._updateState(this.defaultReplyState()),this.updateFromAddress(),this.bindForwardAddressAutocomplete(),this.toggleReplyClassForRecipient(),_.defer(function(e){return function(){var t,n,i;return e.wrapper=e.$el.parents(".tabs"),e.activity=$("#activity"),i=$(".box-a-header").outerHeight()+$(".box-c-toolbar").outerHeight(),t=function(){return GrooveClient.window.height()-i},e.viewportHeight=t(),n=_.throttle(function(){return e.viewportHeight=t()},100,{leading:!1}),e.listenTo(GrooveClient,"window:resize",n),e.firstCommentHeight=$(".box-c-tickets-show").outerHeight(),e.renderEditor()}}(this))},i.prototype.fetchAndToggleForwardRecipients=function(e,t){var n,i;return null==t&&(t={}),(n=this._cachedForwardRecipients(e))?this._immediateResponse(n):(this._forwardingRecipients={term:e},t.autocomplete||(e+=","),i=$.get("/api/v2/forward_recipients.json",{term:e}),i.done(function(e){return function(t){return e._forwardingRecipients.data=t,e.toggleForwardClassForRecipient(t.has_collaborator,t.has_agent)}}(this)),i)},i.prototype._cachedForwardRecipients=function(e){var t,n,i,o;if(null!=(o=t=this._forwardingRecipients)?o.data:void 0)return i=this._endsWithComma(e),!i&&e.length<t.term.length?void delete this._forwardingRecipients:i?(n=t.data,delete this._forwardingRecipients,n.has_collaborator||(n.has_collaborator=0===n.recipients.length),this.toggleForwardClassForRecipient(n.has_collaborator,n.has_agent),n.recipients=[],n):this._noPossibleForwardRecipients(e,t)?(this._forwardingRecipients.data.term=e,this._forwardingRecipients.data.has_collaborator=!0,this._forwardingRecipients.data):void 0},i.prototype._immediateResponse=function(e){return jQuery.Deferred(function(){return this.resolve(e)})},i.prototype._noPossibleForwardRecipients=function(e,t){return this._continuesCachedTerm(e,t)&&0===t.data.recipients.length},i.prototype._continuesCachedTerm=function(e,t){return e.length>t.term.length&&e.substring(0,t.term.length-1)===t.term},i.prototype.bindForwardAddressAutocomplete=function(){var e;return e=this.$('input[name="forwarding_address"]').autocomplete({delay:150,autoFocus:!0,source:function(e){return function(t,n){var i;return i=t.term,e.fetchAndToggleForwardRecipients(i,{autocomplete:!0}).done(function(e){return n(e.recipients)})}}(this),change:function(t){return function(n,i){var o,r;return e=$(n.target),r=e.val().replace(/[ ,]+$/,""),e.val(r),""===r?!1:(o=t._cachedForwardRecipients(r))?t.toggleForwardClassForRecipient(o.has_collaborator,o.has_agent):void 0}}(this),focus:function(e){return function(e,t){return!1}}(this),select:function(e){return function(t,n){var i,o,r,s,a;return i=$(this),s=_.initial(i.val().split(",")),a=s.length>=1?s.join(",")+", "+n.item.value+", ":n.item.value+", ",i.val(a),o=e._forwardingRecipients.data,r="collaborator"===n.item.role?[!0,o.has_agent]:[o.has_collaborator,!0],e.toggleForwardClassForRecipient.apply(e,r),delete e._forwardingRecipients,t.preventDefault()}}(this)}),this.$(".ui-autocomplete-input").each(function(e,t){var n,i;return n=$(t).data("autocomplete"),"undefined"!=typeof n?(i=n.menu.options.blur,n.menu.options.blur=function(e,t){return 0===n.pending?i.apply(this,arguments):void 0}):void 0}),e.on("input",function(e){return function(t){return""===$(t.target).val()?e.toggleForwardClassForRecipient(!1):void 0}}(this)),e},i.prototype._endsWithComma=function(e){return null!==e.match(/,\s?$/)},i.prototype.listenForFirstCannedReply=function(){var e;return e=function(){var e;return e=$("#canned-replies").addClass("with-dropdown"),e.find('a[href="#show-dropdown"]').css({display:"inline-block"})},this.listenToOnce(this.commentTemplates,"add",e)},i.prototype.updateAssignee=function(e){return this.renderAssignee(),this.updateTicketAssignee(e),this.updateTicketAssigneeGroup(e)},i.prototype.renderCannedRepliesDropdown=function(e){var t,n;return e.preventDefault(),e.stopPropagation(),n=this.$(e.target),t=new GrooveClient.Views.CannedRepliesDropdown({collection:this.commentTemplates}),t.on({select:function(e){return function(t){return e.insertCannedReply(t)}}(this),leave:function(e){return function(){return t.$el.replaceWith(n),e.focusOnTextarea()}}(this)}),this.replaceWithChild(t,n),t.trigger("append"),this.cannedRepliesDropDown=t},i.prototype.renderToDropdownOptions=function(){return this.recipientField(".add-to").html(this._toDropdownOptions())},i.prototype.reRenderToDropdownOptions=function(){var e,t,n;return e=this.recipientField(".add-to"),n=e.val(),t=e.find("option").length,e.html(this._toDropdownOptions()),n&&t>1&&e.val(n),e.uniform(),this.toggleReplyClassForRecipient(),this.setReplyListStyles(),this.reRenderCcField(),this.reRenderBccField()},i.prototype.cacheReplyableAndReRender=function(){return this.replyableUsers=this.model.replyableUsers.models||[],this.reRenderToDropdownOptions()},i.prototype._toDropdownOptions=function(){var e,t,n,i,o;if(o=this.replyableUsers,_.isEmpty(this.replyableUsers)){if(this.model.hasMultipleReplyableUsers())return _.defer(function(e){return function(){return e.model.replyableUsers.fetch({success:e.cacheReplyableAndReRender})}}(this)),"<option>loading...</option>";o=[this.model.enduser]}return(e=TicketActions.lastReplyableComment())&&(i=null!=(t=_.find(o,{id:e.actor_id}))?t.get("email"):void 0),i||(i=null!=(n=o[0])?n.get("email"):void 0),o=_.sortBy(_.compact(o),function(e){return e.get("name")}),o.unshift(this.model.enduser),o=_.uniq(o,!1,function(e){return e.get("email")}),JST["tickets/reply_form/to"]({users:o,replyToEmail:i})},i.prototype.handleRecipientChange=function(e){return this.toggleReplyClassForRecipient(),this.reRenderCcField(),this.reRenderBccField()},i.prototype.reRenderCcField=function(){return this.ccField=this._ccField(),this._reRenderCcOrBccField("cc",this.ccField)},i.prototype._ccField=function(){return this._findCcOrBcc("cc")},i.prototype.reRenderBccField=function(){return this.bccField=this._bccField(),this._reRenderCcOrBccField("bcc",this.bccField)},i.prototype._bccField=function(){return this._findCcOrBcc("bcc")},i.prototype._findCcOrBcc=function(e){if(this.model.hasMultipleReplyableUsers()){if(_.isEmpty(this.replyableUsers))return;return this._currentReplyableUser().get(e)}return this.model.getCurrent("reply_"+e+"_address")},i.prototype._currentReplyableUser=function(){var e;return e=_.find(this.replyableUsers,{id:this._currentRecipientId()})},i.prototype._currentRecipientId=function(){var e;return e=this.$("#recipient_id"),Number(e.find(":selected").val())},i.prototype._reRenderCcOrBccField=function(e,t){var n,i,o;return i="."+e,o=":input#public-reply-add_ticket_reply_"+e+"_address",n=this.$(o),n.val(t),t?this.showRecipient(i):this.hideRecipient(i)},i.prototype.renderLabels=function(){var e;return e=i.__super__.renderLabels.apply(this,arguments),this.setLabelInputPlaceholder(),this.removeTokenInputPlaceholder(),e.find("input").prop({placeholder:"",tabindex:1}),e.prepend('<a href="#add-label">Add Tag</a>')},i.prototype.renderEditor=function(){var e,t;return e=0,t=[{name:"basicstyles",items:["Bold","Italic","Underline","NumberedList","BulletedList","Link","Unlink","Image"]}],this.editor=i.__super__.renderEditor.call(this,"public-reply-add_ticket_comments_attributes_0_body",{height:60,bodyId:"ticket",uiColor:"transparent",toolbarCanCollapse:!0,toolbarStartupExpanded:!1,toolbar:t,startupShowBorders:!1,autoGrow_maxHeight:0,on:{instanceReady:function(e){return function(){var t,n,i;return e.model.isTwitterTicket()&&e.updateCharCounter(),t=e.editor.editable(),n=function(n,i){return t.attachListener(e.editor.document,n,i)},n("keyup",e.editorKeyUp),n("keyup",_.debounce(e.agentStoppedTyping.bind(e),1e3,!1)),n("keydown",e.editorKeyDown),n("keydown",_.debounce(e.agentTyping.bind(e),1e3,!0)),n("mousedown",e.hideCannedReplies),i=GrooveClient.data.agentUsernames,i.isSearchable()&&!e.isInternetExplorer()&&(e.editor.mentions=new GrooveClient.Views.Mentions({collection:i,replyForm:e})),e.editor.on("blur",function(t){return e.updateCommentTemplateId()}),e.editor.on("paste",function(e){e.data.dataValue=e.data.dataValue+" "},null,null,9),e.editor.scrollable=CKEDITOR.env.quirks?e.editor.document.getBody():e.editor.document.getDocumentElement(),e.editorIsReady=!0,e.on("attachments:add attachments:remove",function(){return e.saveDraft({delay:!1}),e.resizeEditor}),e.model.draftNote&&(e.renderTab("note",{body:e.model.draftNote.body}),e.model.draftNote=void 0),e.focusOnTextarea()}}(this),autoGrow:function(e){return function(t){var n,i,o,r,s,a;return r=t.editor,o=t.data,s=e.wrapper.outerHeight()-1,i=_.min([o.newHeight-o.currentHeight,e.viewportHeight-s]),n=s>=e.viewportHeight,n&&i>=0?!1:(a=s+i,e._toggleEditorScrollbar(a),e._toggleEditorPositioning(a,{scroll:!0}),o.newHeight=o.currentHeight+i)}}(this)}})},i.prototype.isInternetExplorer=function(){return $.browser.msie||/Trident\/7\./.test("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent:void 0)},i.prototype.resizeEditor=function(){return this.editor.execCommand("autogrow")},i.prototype._toggleEditorPositioning=function(e,t){var n,i,o,r,s;return null==t&&(t={scroll:!1}),s=this.firstCommentHeight+this.activity.outerHeight()+e,r=s>=this.viewportHeight,o={queue:!1,duration:0},this.wrapper.toggleClass("fixedAtBottom",r),i=r?e:0,n=t.scroll?"animate":"css",this.activity[n]({"padding-bottom":i+"px"},o),r&&t.scroll?GrooveClient.body.animate({scrollTop:$(document).height()},o):void 0},i.prototype._toggleEditorScrollbar=function(e){var t;return t=e>=this.viewportHeight?"removeStyle":"setStyle",this.editor.scrollable[t]("overflow-y","hidden")},i.prototype.hideCannedReplies=function(){return null!=this.cannedRepliesDropDown?(this.cannedRepliesDropDown.trigger("leave"),this.cannedRepliesDropDown=null):void 0},i.prototype.toggleEditorToolbar=function(e){return e.preventDefault(),null!=this.editorIsReady?($(e.target).closest("li").toggleClass("with-toolbar"),this.editor.execCommand("toolbarCollapse")):void 0},i.prototype.focusLabelInput=function(e){return e.preventDefault(),this.$("#token-input-public-reply-add_ticket_label_string").focus()},i.prototype.clickHiddenAttachmentButton=function(e){return this.$(".attach-button").click(),!1},i.prototype.leave=function(){return i.__super__.leave.apply(this,arguments),this.updateSavedDraftAtTimeout&&clearTimeout(this.updateSavedDraftAtTimeout),this.draftTimeout?this.saveDraft({delay:!1}):void 0},i.prototype.exitViewMode=function(e){return this.$(".box-c-reply-add-wrap").removeClass("view-mode"),this.initReplyRecipients(),this.setReplyListStyles(),!1},i.prototype.setTextarea=function(e,t){var n;return e=null!=e?e:"","note"===this.currentTab()&&null!=(n=this._notePlaceholder)&&n.remove(),this.editor.setData(e,t)},i.prototype.focusOnTextarea=function(){var e,t;return null==this.editor?this.$("textarea.reply").focusPos():(this.editor.focus(),e=this.editor.createRange(),e.moveToElementEditEnd(e.root),null!=(t=this.editor.getSelection())?t.selectRanges([e]):void 0)},i.prototype.resetTextArea=function(){return this.model.isTwitterTicket()?this.setTextarea(this.commentPlainText(),this.focusOnTextarea):this.setTextarea("",this.focusOnTextarea)},i.prototype.assigneeGroupDropDownId=function(){return this.$(".assignee_group_id-dropdown input").val()},i.prototype.hideAssigneeDropdowns=function(){return this.$("#reply-assignee-dropdowns").empty()},i.prototype.updateSubmitButton=function(e){var t,n;return null==e&&(e=this.model.get("state")),t=this.$(".submit-states").hide(),t.find(".selected").removeClass("selected"),t.find("."+e).addClass("selected"),n=this.model.statusLabel(e),this.$("#ticket_submit").val(this.isPrivate?"Post as "+n:"Send as "+n),this.$("#ticket-state-changer").removeClass("selected")},i.prototype.toggleReplyClassForRecipient=function(){var e,t;switch(e=this.$("#recipient_id"),t=e.find(":selected").data("role")){case"collaborator":return this.$el.addClass("third-party");case"enduser":return this.$el.removeClass("third-party")}},i.prototype.toggleForwardClassForRecipient=function(e,t){return null==e&&(e=!1),null==t&&(t=!1),this.$el.toggleClass("private",e||t),this.$el.toggleClass("third-party",e)},i.prototype.updateViews=function(){return this.model.isTwitterTicket()&&(Groove.UI.replyCharCounters(this.el),this.updateCharCounter()),this.isPrivate&&this.renderTab("reply"),this.noteComment=null,clearTimeout(this.updateSavedDraftAtTimeout),this.updateSavedDraftAtTimeout=setInterval(this.updateSavedDraftAt,1e3),this.updateSavedDraftAt(),this.updateSubmitButton(),_.defer(this.exitViewMode),i.__super__.updateViews.apply(this,arguments)},i.prototype.commentPlainText=function(){var e,t,n,i,o;return o=null!=(e=this.model.get("ticket_draft"))&&null!=(t=e.draft_attributes)&&null!=(n=t.comments_attributes)&&null!=(i=n[0])?i.body:void 0,!o&&this.model.isTwitterTicket()&&(o=this.twitterScreenNameText()),o||""},i.prototype.twitterScreenNameText=function(){var e,t;return t=this.model.enduser.get("twitter_username"),e="@"+t+"&nbsp;"},i.prototype.updateSavedDraftAt=function(){var e,t;return e=this.$(".saved-draft-at"),this.model.hasDraft()?(t=this.model.get("ticket_draft").updated_at,t=moment(t).fromNow()):e.empty().hide()},i.prototype.defaultCommentType=function(){return this.isPrivate?"Comment":this.model.isTwitterTicket()?"TwitterComment":this.model.isFacebookTicket()?"FacebookComment":i.__super__.defaultCommentType.apply(this,arguments)},i.prototype.TABS=["reply","note","forward"],i.prototype.renderTab=function(e,t){var n,i,o,r;switch(null==t&&(t={}),this.previousTab=this.tab||"reply",this.tab=e,this.isPrivate="note"===e,this.isForward="forward"===e,this.$el.removeClass("private third-party"),this.$el.removeClass(this.previousTab).addClass(e),this._highlightTab(e),this.isPrivate?(this.privateReplyRecipients(),this._updateState("opened"),this.$el.addClass("private"),this.updateAgents()):(this.publicReplyRecipients(e),this._updateState("reply"===e?this.defaultReplyState():"opened")),i="forward"!==e?this.focusOnTextarea:void 0,n=this.editor.getData(),"note"===this.previousTab?(this.noteComment=n,null!=this._notePlaceholder&&this._notePlaceholder.remove()):this.replyComment=n,this.isPrivate?(clearTimeout(this.draftTimeout),this.setTextarea(this.noteComment,i)):this.setTextarea(this.replyComment,i),e){case"reply":this.handleRecipientChange();break;case"forward":o=$('input[name="forwarding_address"]'),r=o.val(),null!==r.match(/\w/)?this.fetchAndToggleForwardRecipients(r):this.toggleForwardClassForRecipient(),this._reRenderCcOrBccField("cc",""),this._reRenderCcOrBccField("bcc",""),o.focus();break;case"note":this.isInternetExplorer()||this._showNotePlaceholder()}return t.body?_.delay(function(e){return function(){return e.setTextarea(t.body)}}(this)):void 0},i.prototype.currentTab=function(){var e;return e=this.$el,_.find(this.TABS,function(t){return e.hasClass(t)})},i.prototype._updateState=function(e){return this.$("#ticket_state").val(e),this.updateSubmitButton(e)},i.prototype.scrollEditorIntoView=function(){return this.el.scrollIntoView(!1)},i.prototype.selectTab=function(e){var t;return t=e.target.getAttribute("data-editor-tab"),this.scrollEditorIntoView(),t===this.currentTab()?this.focusOnTextarea():this.renderTab(t)},i.prototype._highlightTab=function(e){var t;return t=$("#reply-type-switcher"),t.find("li.selected").removeClass("selected"),t.find("li."+e).addClass("selected")},i.prototype.showSubmitOptions=function(){var e,t,n,i;return i=this.$(".submit-states"),n=this.$("#ticket-state-changer"),e=$(document.body),t=function(o){return function(o){return i.hide(),n.removeClass("selected"),e.unbind("click",t)}}(this),e.click(t),i.show(),n.addClass("selected"),!1},i.prototype.submitStates=function(){return this.$submitStates||(this.$submitStates=this.$(".submit-states"))},i.prototype.submitKeyDown=function(e){var t,n;return n=$(e.currentTarget),t=n.closest("#ticket-state-button"),this.submitOpenStateKeys(e),this.submitStateEnterKey(e)},i.prototype.submitOpenStateKeys=function(e){var t,n,i,o,r;return t=$.ui.keyCode,r=[t.UP,75],i=[t.DOWN,74],o=_.union(r,i,[t.SPACE]),_.contains(o,e.which)?(e.preventDefault(),n=function(){switch(!1){case!_.contains(r,e.which):return 1;case!_.contains(i,e.which):return-1;default:return!1}}(),this.submitStates().is(":visible")||this.submitStates().show(),this.focusNextState(n)):void 0},i.prototype.submitStateEnterKey=function(e){return e.which===$.ui.keyCode.ENTER?(e.preventDefault(),this.submitStates().is(":visible")?(this.submitStates().find(".focus a").click(),$submitButton.focus()):this.clickSubmit()):void 0},i.prototype.focusNextState=function(e){var t,n,i;if(null==e&&(e=!1),this.submitStates().is(":hidden")||!e)return!1;if(i=this.submitStates().children(),t=i.filter(".focus").first(),t.length)return n=function(){switch(e){case 1:return t.get(0)===i.first().get(0)?i.last():t.prev();case-1:return t.get(0)===i.last().get(0)?i.first():t.next();default:return!1}}(),i.removeClass("focus"),n.addClass("focus");switch(e){case 1:return i.last().addClass("focus");case-1:return i.first().addClass("focus");default:return!1}},i.prototype.toggleStateButtonFocus=function(e){var t,n,i;return t=$("#ticket_submit"),n=null!=(i=t.get(0)===document.activeElement)?i:{"true":!1},t.closest("#ticket-state-button").toggleClass("focus",n),n?void 0:this.hideSubmitStates()},i.prototype.hideSubmitStates=function(){return this.submitStates().is(":visible")&&this.submitStates().hide(),this.submitStates().children().removeClass("focus")},i.prototype.selectState=function(e){var t;return this.trackReply(),t=$(e.target).closest("li").data("value"),this.closed="closed"===t,this._updateState(t),!1},i.prototype.saveDraft=function(e){var t;return null==e&&(e={delay:!0}),this.isPrivate||this.isForward||(this.model.hasNoDraft()||this.model.isTwitterTicket())&&this._emptyBodyContent()?void 0:(clearTimeout(this.draftTimeout),t=function(e){return function(){return e.model.saveDraft(e.formSerialize(),{wait:!0,global:!1,success:e.draftSaved})}}(this),e.delay?this.draftTimeout=setTimeout(t,this.saveDraftDelay):t())},i.prototype.draftSaved=function(e,t){return delete this.formAttrs,GrooveClient.trigger("tickets:update",t),this.updateSavedDraftAt()},i.prototype.saveMethod=function(){return this.isPrivate?"save":"saveAndClearDraft"},i.prototype.saveTicket=function(e){return this.$(".comment_attachments tr").length?void e.preventDefault():(this.hasReplyOnSave=this._hasBodyContent(),this.formAttrs=this.$("form.ticket").toObject(),this.formAttrs.reply_cc_address=this.$('input[name="reply_cc_address"]').val(),this.formAttrs.reply_bcc_address=this.$('input[name="reply_bcc_address"]').val(),"forward"===this.tab&&_.isEmpty(this.formAttrs.forwarding_address)?(this.errorForm.showErrors({errors:{"comments.forwarding_address":["Oops, we need to know who you want to forward this ticket to first."]}}),void e.preventDefault()):("forward"!==this.tab&&(this.formAttrs.forwarding_address=""),"reply"!==this.tab&&null!=this.formAttrs.comments_attributes&&delete this.formAttrs.comments_attributes[0].to,clearTimeout(this.draftTimeout),this.$("#ticket_submit").attr("disabled","disabled"),i.__super__.saveTicket.apply(this,arguments)))},i.prototype.ticketSaved=function(e,t){var n,i,o,r,s,a;for(delete this.formAttrs,this.closed=!1,$.fancybox.close(),GrooveClient.trigger("tickets:update",t),GrooveClient.data.preferredMailboxId=this.model.get("mailbox_id"),this.errorForm.clearErrors(),this.trackNote(),a="Ticket",r=this.model.id,i=GrooveClient.data.historyItems.where({type:a,id:r}),o=0,s=i.length;s>o;o++)n=i[o],n.destroy();return this.parent.goBackAfterTicketUpdate(this.hasReplyOnSave)?void 0:(this.updateViews(!0),this._updateState("reply"===this.currentTab()?this.defaultReplyState():"opened"),this.isPrivate?this.resetReplyRecipients():this.initReplyRecipients(),this.$("#ticket_submit").attr("disabled",null),this.resetTextArea())},i.prototype.clearErrors=function(e){var t;return t=$(e.target).closest("li"),t.removeClass("error"),t.find(".inline-errors").remove()},i.prototype.updateCharCounter=function(){var e,t,n;if(this.model.isTwitterTicket())return t=(null!=(n=this.editor)?n.document.getBody().getText():void 0)||this.commentPlainText(),e=140-twttr.txt.getTweetLength(t),this.$(".reply_char_counter .total").text(e)},i.prototype.updateCommentTemplateId=function(){var e;return e=this.editor.getData(),e?void 0:this.$("#comment_template_id").val("")},i.prototype.editorKeyUp=function(e){return 27===e.data.getKey()&&(e.cancel(),this.editor.focusManager.blur()),this.updateCharCounter(),this.saveDraft()},i.prototype.agentTyping=function(e){return this.typingPrintableCharacter(e.data.$.keyCode)?Socket.send({type:"agentTyping",data:this.model.id}):void 0},i.prototype.agentStoppedTyping=function(){return Socket.send({type:"agentStoppedTyping",data:this.model.id})},i.prototype.typingPrintableCharacter=function(e){return e>47&&58>e||32===e||13===e||e>64&&91>e||e>95&&112>e||e>185&&193>e||e>218&&223>e},i.prototype.editorKeyDown=function(e){var t,n,i,o;return n=e.data.$.metaKey,i=e.data.$.ctrlKey,o=e.data.$.shiftKey,t=e.data.$.key||(13===e.data.$.which?"Enter":String.fromCharCode(e.data.$.which)),"Enter"===t&&(n||i)&&(e.data.preventDefault(),this.clickSubmit()),"i"===t.toLowerCase()&&(n||i)&&o?(e.data.preventDefault(),this.clickInsertReply()):void 0},i.prototype.replyFormKeyDown=function(e){return e.which===$.ui.keyCode.ENTER&&(e.metaKey||e.ctrlKey)?this.clickSubmit():void 0},i.prototype.clickInsertReply=function(){return this.$('#canned-replies a[href="#show-dropdown"]').click()},i.prototype.clickSubmit=function(){return this.$("#ticket_submit").click()},i.prototype.initReplyRecipients=function(){switch(this.recipientLinks=this.$("ul.reply-recipients"),this.recipientFields=this.$("ul.reply-addresses-list"),this.to=$("#public-reply-to"),this.forwardingAddress=this.recipientField(".add-forwarding"),this.resetReplyRecipients(),this.currentTab()){case"reply":this.model.hasMultipleReplyableUsers()&&this.to.show();break;case"forward":this.forwardingAddress.show()}return this.ccField&&this.showRecipient(".cc"),this.bccField&&this.showRecipient(".bcc"),this.setReplyListStyles()},i.prototype.recipient=function(e,t){return t(this.recipientLink(e),this.recipientFieldFor(e))},i.prototype.recipientLink=function(e){var t;return null!=(t=this.recipientLinks)[e]?t[e]:t[e]=this.recipientLinks.find(e)},i.prototype.recipientField=function(e){var t;return null!=(t=this.recipientFields)[e]?t[e]:t[e]=this.recipientFields.find(e)},i.prototype.recipientFieldFor=function(e){var t;return t=e.slice(1),this.recipientField(".add-"+t)},i.prototype.resetReplyRecipients=function(){var e,t,n,i,o;for(this.recipientFields.removeClass("showing-recipients"),this.to.hide(),this.forwardingAddress.hide(),n=[".from",".cc",".bcc"],i=[],e=0,t=n.length;t>e;e++)o=n[e],i.push(this.hideRecipient(o));return i},i.prototype.privateReplyRecipients=function(){return this.recipientLinks.hide(),this.recipientFields.removeClass("showing-recipients").find("li").hide()},i.prototype.publicReplyRecipients=function(e){var t,n,i,o,r;for(null==e&&(e=this.currentTab()),n="reply"===e,this.to.toggle(n&&this.model.hasMultipleReplyableUsers()),this.recipientField(".add-forwarding").toggle(!n),this.recipientLinks.show(),o=[".from",".cc",".bcc"],t=0,i=o.length;i>t;t++)r=o[t],this.isActiveRecipient(r)&&this.showRecipient(r);return this.setReplyListStyles()},i.prototype.isActiveRecipient=function(e){return this.recipientLink(e).hasClass("active")},i.prototype.hideRecipient=function(e){return this.recipient(e,function(e,t){return e.removeClass("active"),t.hide()})},i.prototype.showRecipient=function(e){return this.recipient(e,function(e,t){return e.addClass("active"),t.show()})},i.prototype.toggleFrom=function(e){return this.toggleReplyListItem(e,".add-from")},i.prototype.toggleCc=function(e){return this.toggleReplyListItem(e,".add-cc")},i.prototype.toggleBcc=function(e){return this.toggleReplyListItem(e,".add-bcc")},i.prototype.toggleReplyListItem=function(e,t){return e.preventDefault(),this.recipientField(t).toggle(),this.$(e.target).toggleClass("active"),this.setReplyListStyles(),this.resizeEditor()},i.prototype.setReplyListStyles=function(){var e;return e=this.recipientLinks.find("li.active").length>0,this.recipientLinks.toggleClass("inactive",!e),this.recipientFields.toggleClass("showing-recipients",e||this.model.hasMultipleReplyableUsers())},i.prototype.setLabelInputStyles=function(e){return $(e.target).parent("li").addClass("active"),this.removeLabelInputPlaceholder(),this.removeTokenInputPlaceholder()},i.prototype.setLabelInputPlaceholder=function(){return this.$("#token-input-public-reply-add_ticket_label_string").css("width","10px")},i.prototype.removeLabelInputStyles=function(e){return $(e.target).parent("li").removeClass("active"),this.setLabelInputPlaceholder(),this.removeTokenInputPlaceholder()},i.prototype.removeLabelInputPlaceholder=function(){return this.$("#token-input-public-reply-add_ticket_label_string").attr("placeholder","").css("width","12px")},i.prototype.removeTokenInputPlaceholder=function(){return this.$(".token-input-placeholder").remove()},i.prototype.trackReply=function(){return this.track("replied"),this.model.isOnboardingTicket()?this.track("onboarding:replied_to_ticket_from_groove",{onboarding_replied_to_ticket:1,onboarding_last_ticket_replied_to:this.model.typeWithoutNamespace()}):void 0},i.prototype.trackNote=function(){return this.isPrivate?this.track("created_private_note"):void 0},i.prototype.discardDraft=function(){var e;return this.renderTab("reply"),
this.setTextarea("",this.focusOnTextarea),this.$("#ticket_state").val(this.model.get("state")),clearTimeout(this.draftTimeout),e=function(e){return function(){return e.model.saveAndClearDraft(e.formSerialize(),{wait:!0,global:!1,success:e.draftSaved})}}(this),this.draftTimeout=setTimeout(e,this.saveDraftDelay),!1},i.prototype.showCommentTemplatePicker=function(){var e,t;return e=this.insertCommentTemplate,t=new GrooveClient.Views.CommentTemplatePicker({callback:e}),t.appear()},i.prototype.insertCannedReply=function(e){var t,n,i,o,r,s;return n=GrooveClient.data.currentUser.attributes,o=this.$("#recipient_id"),o.length&&(t=TicketActions.getActor(parseInt(o.val()))),s=t||this.model.enduser.attributes,i={full_name:s.name,first_name:s.first_name,last_name:s.last_name,email:s.email,agent_firstname:n.first_name},r=GrooveClient.data.commentTemplates.get(e),this.$("#comment_template_id").val(e),this.$("#ticket_title").val(r.get("title")).trigger("focus"),this.editor.insertHtml(r.interpolatedBody(i),this.focusOnTextArea),this.$("textarea.reply").trigger("change"),this.track("inserted_canned_text",{has_used_canned_text:1})},i.prototype.insertCommentTemplate=function(e){var t,n,i,o,r,s;return t=GrooveClient.data.currentUser,r=this.model.enduser,n={full_name:r.get("name"),first_name:r.get("first_name"),last_name:r.get("last_name"),email:r.get("email"),agent_firstname:t.get("first_name")},o=this.editor.getData(),i="&nbsp;"===o.slice(-6)&&"<br />"===o.slice(-13,-7)?o.replace(/(&nbsp;)+$/g,""):o,s=e.interpolatedBody(n),s=$("<div>").text(s).html(),this.setTextarea(i+s,this.focusOnTextarea),this.track("inserted_canned_text",{has_used_canned_text:1})},i.prototype.showMailboxList=function(){return this.$(".from-address .selector").css("display","inline-block"),this.$(".from-address span.current-mailbox").attr("style","display: none !important")},i.prototype.updateFromAddress=function(){var e,t;return t=this.$("select#mailbox_id :selected"),e=this.$(".from-address span.current-mailbox"),e.text(t.text())},i.prototype.followLabelLink=function(e){return GrooveClient.navigate($(e.target).closest("li").data("url"))},i.prototype.saveAsCannedReply=function(e){var t;return e.preventDefault(),t=$.trim(this.editor.getData()),(t.length=0)?void 0:(new GrooveClient.Views.CannedReplyFancybox({templates:this.commentTemplates,body:t}).appear(),$("#comment_template_title").focus())},i.prototype.defaultReplyState=function(){return GrooveClient.data.account.get("prefers_reply_button")},i.prototype._showNotePlaceholder=function(){return this._notePlaceholder=new GrooveClient.Views.NotePlaceholder({editor:this.editor,userInput:this.noteComment}),this.appendChild(this._notePlaceholder)},i}(GrooveClient.Views.TicketForm),_.extend(GrooveClient.Views.ReplyForm.prototype,GrooveClient.Mixins.GroupAndAssigneeDropdowns)}).call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.SnoozeState=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/snooze_state"],n.prototype.className="snooze-state TicketBanner",n.prototype.tagName="div",n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model,this.isSnoozed=this.model.get("is_snoozed")||!1,this.snoozedUntil=this.snoozedUntil(this.model)},n.prototype.snoozedUntil=function(e){var t;if(t=e.get("snoozed_until"))return moment(t).fromNow()},n.prototype.renderTemplate=function(){var e,t;return t=this.model.get("revert_to_state"),e=function(){switch(t){case"opened":return"reopened";default:return"marked as "+t}}(),n.__super__.renderTemplate.call(this,{isSnoozed:this.isSnoozed,snoozedUntil:this.snoozedUntil,action:e})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Ticket=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click .selectable":"select","change :checkbox":"updateChecked"},n.prototype.initialize=function(){return null!=this.model.enduser&&(this.enduserView=new GrooveClient.Views.User({model:this.model.enduser})),null!=this.model.assignee&&(this.assigneeView=new GrooveClient.Views.User({model:this.model.assignee})),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"remove",this.remove)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,ticket:this.model,enduserView:this.enduserView,assigneeView:this.assigneeView})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$(":checkbox").prop("checked",this.model.checked).change(),this.$el.attr("data-ticket-id",this.model.id),this},n.prototype.statusLabel=function(){var e;return this.model.isOpened()?"Open":this.model.isFollowUp()?"Follow Up":(e=this.model.state(),e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())},n.prototype.updateChecked=function(e,t){return this.model.checked=this.$(":checkbox").is(":checked"),this.$el.toggleClass("selected",this.model.checked),t?void 0:GrooveClient.trigger("ticket-selection:update")},n.prototype.select=function(){return this.$(":checkbox").change()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){this.TicketBanner=React.createClass({displayName:"TicketBanner",getInitialState:function(){return{avatar:null,hidden:!1,typing:!1,stacked:!1,name:null,ids:[]}},workingAgentsText:function(e,t){if(!(1>e)){if(1===e)return t+" is viewing this ticket";switch(e){case 2:return t+" and another agent are viewing this ticket";default:return t+" and "+(e-1)+" other agents are viewing this ticket"}}},typingAgentsText:function(e){return e+" is typing"},updateState:function(e){return this.setState(e)},parseAvatar:function(){var e,t;if(e=this.state.avatar)return"string"==typeof e?this.state.avatar:(t=$(this.state.avatar).html(),"<span class='initials'>"+t+"</span>")},caption:function(){var e,t,n;return n="workingAgents ",this.state.stacked&&(n+="stacked "),t=this.state.typing?(n+="workingAgents-typing",this.typingAgentsText(this.state.name)):this.workingAgentsText(this.state.ids.length,this.state.name),e=this.parseAvatar(),React.createElement("div",{className:n},React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),React.createElement("span",{className:"workingAgents_message"},t))},render:function(){return this.state.hidden||this.state.ids.length<=0?React.createElement("div",null):React.createElement("div",{className:"TicketBanner"},this.caption())}})}.call(this),function(){window.TicketActions={},function(e){var t,n,i,o,r,s,a,l,c,p,u,d,h,m,f,g,v,y,w,b,k,C,x,T,S,G,A,M,z,V,R,E,O,I,F,N,L,P,J,H,D,j,B,U,W,q,Y,K,Z,X,Q,ee,te;return _.extend(e,Backbone.Events),X=_.bind(e.trigger,e),o=_.bind(e.on,e),t={Comment:0,MergeComment:1},r={ttl:18e4,shared:{}},C={ticket:{},grouped_actions:{}},c=_.clone(C),S=!1,T=null,x=[],GrooveClient.once("bootstrap",function(e,t){var n,i,o;return n=t.account,o=t.currentUser,i=t.agents,j(n),n.on("change",j),s(i),i.on("change",function(e){return function(){return s(i)}}(this))}),p=function(e){return r[e]=void 0,delete r[e]},q=function(e){var t;return t=function(){return e===c.ticket.id?_.delay(t,r.ttl):p(e)},_.delay(t,r.ttl),r[e]={}},u=function(e){var t,n,i;return t=c.ticket.id,n=function(){switch(e.split("../index.html")[2]){case"users":return"shared";default:return t}}(),i=r[n]||q(n),null==i[e]&&(i[e]=$.Deferred(function(n){return $.get(e).done(function(e){return t===c.ticket.id?n.resolve(e):void 0})})),T&&!T.isResolved()&&x.push(i[e]),i[e]},E=function(e){return $.Deferred(function(t){return t.resolve(e)})},a=function(e){return r.shared[te(e.id)]=E(e)},w=function(e){var t;return null!=(t=r[e.ticket_id])?t[e.links.change]:void 0},s=function(e){var t,n,i,o,r;for(o=e.models,r=[],n=0,i=o.length;i>n;n++)t=o[n].attributes,r.push(a(t));return r},D=function(e,t,n){return null==n&&(n={}),c[e]=t,n.silent?void 0:X("sync",c)},j=function(e){var t;return C.account=t=e.pick("prefers_grouping_filters_by_mailbox"),D("account",t,{silent:!0})},ee=function(e,t,n,i){return null==i&&(i={silent:!1}),e[t]=n,i.silent?void 0:X("sync",c)},i=function(e,t,n){return null==n&&(n={silent:!1}),c.grouped_actions[e]=t,n.silent?void 0:X("sync",c)},M=function(e,t){return(null!=e?e.preview:void 0)?t===e.preview.change[0]:!1},z=function(e){return M(e,1)},d=function(e,t){var n;return null==t&&(t={silent:!1}),n=function(){switch(e.actor_type){case"User":return te(e.actor_id);default:return e.links.actor}}(),"User"===e.actor_type&&e.actor&&a(e.actor),u(n).then(function(n){return ee(e,"actor",n,t)})},h=function(e,t){var n;return null==t&&(t={silent:!1}),(n=e.change?(r[e.ticket_id]?void 0:r[e.ticket_id]={},r[e.ticket_id][e.links.change]=E(e.change)):e.links.change?u(e.links.change):!1)?n.then(function(n){return I(e,n,t)}):void 0},m=function(e,t){var n,i,o,s,a;return null==t&&(t={silent:!1}),i=_.chain(c.grouped_actions).flatten().indexBy("id").value(),n=_.chain(e).map(function(e){var t,n,o,s;if(t=i[e],t&&(o=t.links,s=t.ticket_id,n=r[s]||q(s),o&&!n[o.change]))if(t.change)h(t,{silent:!0});else if(o&&o.change)return t}).filter().value(),a=!1,n.length>0&&(o=_.groupBy(n,"change_type"),s=_.reduce(o,function(e,t,n){return e[n]=_.pluck(t,"change_id").join(","),e},{}),a=$.getJSON("/api/ticket/changes",s),T&&!T.isResolved()&&x.push(a),a.then(function(e){var i,o,r,s,a;for(null==e&&(e=[]),r=_.indexBy(e,"id"),s=0,a=n.length;a>s;s++)i=n[s],o=r[i.change_id],o&&(i.change=o),h(i,{silent:!0});return t.silent?void 0:X("sync",c)})),a},g=function(e,t){var n,i;return null==t&&(t={silent:!1}),i=function(){var i,o,r,s;for(r=_.keys(e.links),s=[],i=0,o=r.length;o>i;i++)n=r[i],s.push(f(e,n,t));return s}(),$.when.apply($,i)},f=function(e,t,n){return null==n&&(n={silent:!1}),u(e.links[t]).done(function(i){return e[t]=i,n.silent?void 0:X("sync",c)})},I=function(e,t,n){var i;switch(null==n&&(n={silent:!1}),e.isLegacyMergeComment&&(n.silent=!1,t={child_ticket_number:null!=(i=t.body)?i.substring(1):void 0}),e.change_type){case"Ticket::AgentChange":O(e,t);break;case"Ticket::GroupChange":F(e,t,n)}return ee(e,"change",t,n),t.links&&g(t),Q()},O=function(e,t){return null===t.agent_id?W(e):void 0},F=function(e,t,n){return null===t.group_id?U(e,n):void 0},te=function(e){return"/api/users/"+e},V=function(e){return e&&e.preview&&"Comment"===e.change_type?e.preview.change[3]===t.MergeComment:!1},Z=function(e){var t;return e.isLegacyMergeComment=!0,e.preview=void 0,e.change_type="Ticket::Merger",(t=e.change)?e.change={child_ticket_number:t.body}:void 0},G=function(e){return"Comment"===e.change_type},l=function(t){var n,i,o,r,s;for(o=i=0,r=t.length;r>i;o=++i)if(n=t[o],e.isGroupChange(n)){if(s=t[o+1],s&&e.isAgentChange(s)){if(n.change&&s.change&&s.change.links.agent){if(!n.change.group_id)return n.hidden=!0,t;n.change.agent_id=s.change.agent_id}s.hidden=!0}return t}return t},B=function(e){var t,n,i,o,r,s,a,p,u,m,f,g,y,b,k,C,x,T,S;if(_.isEmpty(e))return void D("grouped_actions",[]);n=_.groupBy(e,"changeset_id"),i=[[]],k=0;for(s in n)r=n[s],p=r[0],V(p)&&Z(p),m="Ticket::Merger"===p.change_type,f="Ticket::CustomerActionOpen"===p.change_type,g="Rating"===p.change_type,a=_.find(r,G),T=_.compact(_.flatten([a,_.without(l(r),a)])),m?(i.push(r),k=(null!=(C=T[0].preview)?C.change[0]:void 0)||0):a?(k>0&&(T[0].partOfMerge=!0,k--),1===T.length?i.push(T):i.push([T[0],T.slice(1)])):f||g?_.find(i,function(e,t){var n;return e[0]&&"Comment"===e[0].change_type&&e[0].change_id===(null!=(n=p.change)?n.comment_id:void 0)?(i[t]=_.chain(e).push(T).sortBy(function(e){return new Date(e.updated_at).getTime()}).sortBy("id").value(),!0):!1}):(y=_.last(i),(null!=(x=y[0])?x.partOfMerge:void 0)?i.push([void 0,T]):_.last(i).push(T));for(i=_.reject(i,function(e){return 0===e.length}),D("grouped_actions",i),S=!1,u=0,b=e.length;b>u;u++)t=e[u],d(t),o=w(t),o&&(h(t,{silent:o}),null==S&&(S=o));return S&&X("sync",c),setTimeout(function(){return v()},1)},U=function(t){var n;try{return n=t.previous=e.getPrevious(t),n.change||h(n),n}catch(i){}},W=function(t){var n;try{return n=t.previousGroup=e.getPrevious(t,e.isGroupChange),n.change||h(n),n}catch(i){}},P=function(e){var t;return t=_.chain(c.grouped_actions).flatten().filter().reject({id:e.id}).value(),B(t)},J=[],n=[],R=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},H=null,b=null,Y=null,k=0,K=0,L=function(){return k=b.offsetHeight,K=Y.offsetHeight},v=function(){return R(function(){return clearTimeout(H),H=setTimeout(function(){return R(function(){var t;return t=null,_.each(J,function(n){var i,o;return o=n.component,i=n.actionIds,A(o)&&(N(i),e.unregisterScrollComponent(o)),t=n}),y(),S=!0,Q()})},100)})},N=function(e){return n=n.concat(e)},y=function(){return n.length>0?(m(n),n=[]):void 0},A=function(e){var t,n,i,o,r,s;return t=e.getDOMNode(),o=t.getBoundingClientRect(),s=window.pageYOffset,r=window.pageYOffset+window.innerHeight,document.body.className.indexOf("scrolled")>=0&&(s+=k),Y.className.indexOf("fixed-header")>=0&&(s+=K),i=o.top+window.pageYOffset,n=o.bottom+window.pageYOffset,i>=s&&r>=i||n>=s&&r>=n},Q=function(){var e;return S&&T&&!T.isResolved()&&(e=!_.chain(x).invoke("isResolved").contains(!1).value())?T.resolve():void 0},_.extend(e,{resetState:function(){return c=_.clone(C)},getAgent:function(e){return GrooveClient.data.agents.get(e).attributes},getActor:function(e){var t,n,i,o,r,s,a;for(o=function(t){return t&&t.id===e},s=_.flatten(c.grouped_actions),i=0,r=s.length;r>i;i++){if(a=s[i],t=a.actor,n=a.change,o(t))return t;if(n&&o(n.recipient))return n.recipient}},getState:function(){return _.clone(c)},getChangeset:function(e){return _.where(_.flatten(c.grouped_actions),{changeset_id:e})},getStateChange:function(e){return null==e&&(e=_.flatten(c.grouped_actions)),_.findWhere(e,{change_type:"Ticket::StateChange"})},getPrevious:function(e,t){var n,i,o,r;for(null==t&&(t=function(t){return t.change_type===e.change_type}),r=_.flatten(c.grouped_actions).reverse(),i=0,o=r.length;o>i;i++)if(n=r[i],t(n)&&n.id<e.id)return n},getLastComment:function(t){var n,i,o,r,s,a,l,p;for(o=t?[t]:c.grouped_actions,r=0,a=o.length;a>r;r++)for(i=o[r],p=_.clone(i).reverse(),s=0,l=p.length;l>s;s++)if(n=p[s],e.isComment(n))return n},isActor:function(e,t){return t.id===e.actor_id},isAgentChange:function(e){return"Ticket::AgentChange"===e.change_type},isByAgent:function(e){return null!=GrooveClient.data.agents.get(e.actor_id)},isComment:function(e){return e?"Comment"===e.change_type:!1},isCurrentTicket:function(e){return e.id===c.ticket.id},isGroupChange:function(e){return"Ticket::GroupChange"===e.change_type},isIncomingEmail:function(e){return e.change?e.change.is_incoming_email:!1},isForward:function(e){return e.preview?e.preview.change[2]>0:void 0},isMerger:function(e){return e?"Ticket::Merger"===e.change_type:!1},isNote:function(t){return t&&t.preview?e.isComment(t)&&M(t,1):!1},isRating:function(e){return"Rating"===e.change_type},isThirdPartyConversation:function(e){return M(e,2)},isUnassigning:function(e){if(!e.change)return!1;switch(e.change_type){case"Ticket::AgentChange":return null===e.change.agent_id;case"Ticket::GroupChange":return null===e.change.group_id;default:return!1}},isUndoable:function(e){var t,n;return!e.change||_.isEmpty(e.change.deliver_by)?!1:(n=new Date(e.change.deliver_by).getTime(),t=(new Date).getTime(),n>t)},hasAttachments:function(e){return e.preview?e.preview.change[1]>0:void 0},setTicket:function(t){var n,i,o,s;return D("ticket",_.pick(t,"id"),{silent:!0}),s=t.id,o=_.map(r[s],function(e,t){return e.isResolved()?void 0:(e.reject(),t)}),r[s]=_.omit(r[s],o),(i=t.enduser)&&e.updateEnduser(i),(n=t.ticket_actions)?B(n):void 0},invalidateTicketCache:function(e){return r[e]={}},invalidateUserCache:function(e){return delete r.shared[te(e)]},secondsUntilSent:function(e){var t,n;return(t=e.change.deliver_by)?(n=moment(t).diff(moment(),"seconds"),n?n:0):0},updateTicketActions:function(e,t){var n,i,o,s,a;for(null==e&&(e=[]),null==t&&(t={}),t=_.defaults(t,{removeAbsent:!0,ignoreCache:!1}),i=_.chain(c.grouped_actions).flatten().filter().indexBy("id"),i=t.removeAbsent?i.pick(_.pluck(e,"id")).value():i.value(),o=0,s=e.length;s>o;o++)n=e[o],t.ignoreCache?(null!=(a=r[n.ticket_id])&&delete a[n.links.change],i[n.id]=n,h(n)):i[n.id]&&!t.ignoreCache?i[n.id].change&&h(i[n.id],{silent:!0}):(i[n.id]=n,h(n));return B(_.values(i))},updateEnduser:function(e){return D("enduser",e,{silent:!0}),a(e)},undo:function(e){var t;return P(e),t=$.Deferred(),e.change.links.attachments&&!e.change.attachments?f(e.change,"attachments",{silent:!0}).done(function(){return t.resolve()}).fail(function(){return delete e.change.attachment_ids,t.resolve()}):t.resolve(),$.when(t,$.ajax({type:"POST",url:"/api/comments/"+e.change_id+"/undo",data:{_method:"PUT"}})).then(function(t){return function(){return X("undo",e),e}}(this))},activateScrollListener:function(){return $(window).on("resize scroll",v),$(window).on("resize",L),b=document.querySelector(".box-a-header"),Y=document.querySelector("#ticket-inspector .ticket-actions"),L()},deactivateScrollListener:function(){return $(window).off("resize scroll",v),$(window).off("resize",L),J=[],n=[]},registerScrollComponent:function(e,t){return t=_.isArray(t)?_.flatten(t):[t],J.push({component:e,actionIds:_.pluck(t,"id")})},unregisterScrollComponent:function(e){return J=_.reject(J,{component:e})},getInitialFetchPromise:function(){return x=[],T=jQuery.Deferred(),T.then(function(){return X("sync",c)}),T.promise()},leaveTicket:function(){return e.deactivateScrollListener(),S=!1,x=[],T&&!T.isResolved()&&T.reject(),T=null},lastReplyableComment:function(){var t,n,i,o,r;for(o=_.clone(c.grouped_actions).reverse(),n=0,i=o.length;i>n;n++)if(r=o[n],t=r[0],e.isComment(t)&&!e.isByAgent(t))return t;return void 0}})}(TicketActions)}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};!function(t){var n,i,o,r,s,a,l,c,p,u,d,h,m,f,g,v,y,w,b,k,C,x,T,S,G,A,M,z,V,R,E,O,I,F,N,L;return L={group:function(e){var t;return t=GrooveClient.data.groups.get(e),t?t.get("name"):"Group"},mailbox:function(e){var t,n,i,o;return e?(o=GrooveClient.data,n=o.mailboxes,t=o.inaccessibleMailboxes,i=n.get(e)||(null!=t?t.get(e):void 0),i?i.labelName():"Mailbox"):"Mailbox"},state:function(e){return"opened"===e?"open":e}},t.List=React.createClass({displayName:"List",getInitialState:function(){return t.getState()},componentWillMount:function(){return this.comments=[],this.initialFetchesPromise=t.getInitialFetchPromise()},componentWillUpdate:function(){return this.prevHeight=$(document).height(),this.prevPageYOffset=window.pageYOffset},componentDidUpdate:function(){var e;return 0===this.prevPageYOffset?window.scrollTo(window.pageXOffset,0):(e=$(document).height()-this.prevHeight,window.scrollTo(window.pageXOffset,window.pageYOffset+e))},componentDidMount:function(){return t.on("sync",this.setState,this),e.call(window.history,"scrollRestoration")>=0&&(history.scrollRestoration="manual"),this.scrollToBottom(),this.initialFetchesPromise.then(function(e){return function(){return e.scrollToBottom()}}(this)),t.activateScrollListener()},scrollToBottom:function(){return 1===_.compact(this.comments).length?window.scrollTo(window.pageXOffset,0):window.scrollTo(window.pageXOffset,_.last(this.comments).getDOMNode().offsetTop-($(".TicketBanner").height()||0))},componentWillUnmount:function(){return t.resetState(),t.off("sync",this.setState,this),t.leaveTicket(),this.comments=[]},render:function(){var e,n,i,o,r,s,a,l,c,p;return this.comments=[],e=this,p=this.state,n=p.account,r=p.enduser,i=function(){var i,p,u,d;for(u=this.state.grouped_actions,d=[],a=i=0,p=u.length;p>i;a=++i)o=u[a],s=o[0],c=this.state.grouped_actions[a-1]||[],s&&t.isMerger(s)?d.push(React.createElement(C,{action:s,key:a,ref:function(t){e.comments.push(t)}})):(l=t.isMerger(c[0])&&c[0],d.push(React.createElement(m,{account:n,actions:o,enduser:r,merger:l,key:a,index:a,ref:function(t){e.comments.push(t)}})));return d}.call(this),React.createElement("div",null,i)}}),C=React.createClass({displayName:"Merger",componentDidMount:function(){return t.registerScrollComponent(this,this.props.action)},componentWillUnmount:function(){return t.unregisterScrollComponent(this)},render:function(){var e,t,n,i,o,r;return e=this.props.action,t=e.actor,n=e.change,r=(null!=n?n.child_ticket_number:void 0)&&"#"+n.child_ticket_number,o=React.addons.classSet({Ticket_to:!0,loading:_.isEmpty(n)}),i=React.addons.classSet({Ticket:!0,"Ticket-mergedheader":!0,"Ticket-mergedheader-legacy":e.isLegacyMergeComment}),React.createElement("div",{className:i},React.createElement("div",{className:"Ticket_content",key:"content"},React.createElement(I,{className:"Ticket_time",time:e.created_at,key:"time"}),React.createElement("div",{className:"Ticket_byline"},React.createElement(S,{className:"Ticket_from",user:t}),"\xa0merged\xa0",React.createElement("div",{className:o},"Ticket ",r))))}}),m=React.createClass({displayName:"Email",getInitialState:function(){return{showUndo:this.props.index>0&&this.props.actions[0]&&t.isUndoable(this.props.actions[0])}},componentDidMount:function(){return t.registerScrollComponent(this,this.props.actions)},componentWillUnmount:function(){return t.unregisterScrollComponent(this)},onUndoExpired:function(){return this.setState({showUndo:!1})},render:function(){var e,n,s,a,c,p,d,h,m,f,g,v,y;return y=this.props,e=y.account,n=y.actions,d=y.enduser,h=y.index,m=y.merger,c=n[0],v=(null!=c?c.partOfMerge:void 0)||!1,p=[],c&&(h&&(s=React.createElement(o,{id:c.actor_id,key:"avatar"})),p.push(React.createElement(I,{className:"Ticket_time",time:c.created_at,key:"time"})),p.push(t.isIncomingEmail(c)?React.createElement(M,{commentId:c.change_id,key:"rawemail"}):void 0),p.push(0===h||m?React.createElement(R,{account:e,action:c,enduser:d,key:"byline"}):React.createElement(u,{comment:c,merger:m,key:"byline"})),c.change&&(c.change.reply_cc_address||c.change.reply_bcc_address)&&p.push(React.createElement(l,{comment:c,key:"ccbcc"}))),c&&(p.push(React.createElement(r,{namespace:"Ticket",action:c,key:"body"})),t.hasAttachments(c)&&p.push(React.createElement(i,{namespace:"Ticket",action:c}))),g=_.map(this.otherActions(c),function(e){return function(t,n){return e.metadata(c,t,n,v)}}(this)),p.push(g),h>0&&c&&t.isUndoable(c)&&!v&&(f=this.undoMessage(c),p.push(React.createElement(N,{namespace:"Ticket",message:f,undoCallback:function(){t.undo(c)},action:c,expires:c.change.deliver_by,key:"undo"+c.id}))),a=React.addons.classSet({Ticket:!0,"Ticket-collaborator":t.isThirdPartyConversation(c),"Ticket-note":t.isNote(c),"Ticket-merged":!_.isEmpty(m)&&!m.isLegacyMergeComment||v,"Ticket-no-avatar":_.isUndefined(s)}),React.createElement("div",{className:a},s,React.createElement("div",{className:"Ticket_content",key:"content"},p))},undoMessage:function(e){var n,i;return n=t.isNote,i="<%= timeAmount %> <%= timeUnit %>",n(e)?e.actor_id===GrooveClient.data.currentUser.id?"You have "+i+" to edit":"and has "+i+" to edit":"Sending message in "+i},otherActions:function(e){var t,n,i;return t=this.props.actions,t.length<2?void 0:(i=t.slice(1),n=i[0],n[0].changeset_id!==(null!=e?e.changeset_id:void 0)?i:this.withoutStateChangeInFirstChangeset(i))},metadata:function(e,t,n,i){var o;return o={actions:t,withPublicReply:this.inSameChangeset(e,t,n),key:"metadata-"+n,commentExists:!_.isEmpty(e),metadataIndex:n,partOfMerge:i},React.createElement(T,React.__spread({},o))},inSameChangeset:function(e,t,n){return void 0===e?1>n:t[0].changeset_id===e.changeset_id},withoutStateChangeInFirstChangeset:function(e){var n,i;return n=e[0],(i=t.getStateChange(n))?1===n.length?e.slice(1):(e[0]=_.without(n,i),e):e}}),s=React.createClass({displayName:"Byline",render:function(){var e,t,n;return t=this.props,e=t.from,n=t.useFullName,React.createElement("div",{className:"Ticket_byline",key:"byline"},React.createElement(S,{className:"Ticket_from",user:e,key:"from",useFullName:n}),this.props.children)}}),R=React.createClass({displayName:"StartingByline",render:function(){var e,n,i,o,r;return i=t.isByAgent,o=this.props,e=o.account,n=o.action,i(n)?this.agentByline(n):(r=!e.prefers_grouping_filters_by_mailbox&&GrooveClient.data.mailboxes.length>1?React.createElement(F,{id:n.mailbox_id}):void 0,React.createElement(s,{from:n.actor,useFullName:!0},r))},agentByline:function(e){var n,i,o,r,a,l,c;return r=t.isNote,n=e.actor,i=e.change,c=r(e)?["started a ticket for",this.props.enduser]:(l=i&&i.recipient,["emailed",l]),a=c[0],o=c[1],React.createElement(s,{from:n},"\xa0",a,"\xa0",React.createElement(z,{user:o,useFullName:!0}))}}),u=React.createClass({displayName:"CommentByline",render:function(){var e,n,i,o,r,l,c;return r=this.props.comment,e=r.actor,n=r.change,l=n&&n.recipient,o=[React.createElement(a,{action:r,recipient:l,key:"action"})],l&&o.push(React.createElement(z,{user:l})),i=t.getChangeset(r.changeset_id),(c=t.getStateChange(i))&&o.push(React.createElement(O,{action:c,key:"state"})),React.createElement(s,{from:e},o)}}),F=React.createClass({displayName:"ToMailbox",render:function(){var e;return e=this.props.id,React.createElement("span",{key:"toMailbox"}," to ",React.createElement(b,{id:e}))}}),z=React.createClass({displayName:"Recipient",render:function(){return React.createElement(S,React.__spread({className:"Ticket_to"},this.props,{key:"to"}))}}),a=React.createClass({displayName:"BylineAction",render:function(){var e,t,n;return n=this.props,e=n.action,t=n.recipient,React.createElement("span",null,"\xa0",this.label(e),t&&" to ")},label:function(e){var n,i;switch(n=t.isForward,i=t.isNote,!1){case!n(e):return"forwarded";case!i(e):return"left a note";default:return"replied"}}}),l=React.createClass({displayName:"CcBcc",render:function(){var e,t,n;return n=this.props.comment.change,n.reply_cc_address&&(t=React.createElement(c,{className:"cc",title:"Cc",recipients:n.reply_cc_address,key:"cc"})),n.reply_bcc_address&&(e=React.createElement(c,{className:"bcc",title:"Bcc",recipients:n.reply_bcc_address,key:"bcc"})),React.createElement("div",{className:"Ticket_ccbcc"},t,e)}}),c=React.createClass({displayName:"CcBccLine",render:function(){return React.createElement("div",{className:this.props.className},React.createElement("span",{className:"title"},React.createElement("strong",null,this.props.title,": ")),React.createElement("span",{className:"emails"},Groove.Util.truncateString(this.props.recipients,120)))}}),O=React.createClass({displayName:"StateLabel",render:function(){var e,t,n;return e=this.props.action,t=e.change,n=L.state(t&&t.state),React.createElement("span",{className:"Ticket_label Ticket_label-state-"+n},n)}}),I=React.createClass({displayName:"Time",render:function(){return React.createElement("div",{className:this.props.className},this.formattedTime())},formattedTime:function(){return this.props.time?Groove.Util.formattedDateTime(this.props.time):void 0}}),M=React.createClass({displayName:"RawEmailLink",render:function(){var e,t,n,i;return i=this.props,e=i.commentId,n=i.key,t="/raw_emails/"+e,React.createElement("div",{className:"Ticket_raw"},React.createElement(h,{position:"bottom-right",hoverOnly:!0,key:n+"Dropdown"},React.createElement("a",{href:t,target:"_blank",key:n+"Link"},"show original")))}}),h=React.createClass({displayName:"Dropdown",getInitialState:function(){return{active:!1}},toggleActive:function(){return this.props.hoverOnly?void 0:this.setState({active:!this.state.active})},render:function(){var e,t,n,i,o;return o=this.props,e=o.children,n=o.key,i=o.label,t=React.addons.classSet({Dropdown:!0,"Dropdown-active":this.state.active,"Dropdown-bottom-right":"bottom-right"===this.props.position,"Dropdown-bottom-left":"bottom-left"===this.props.position}),React.createElement("div",{className:t},React.createElement("a",{className:"Dropdown_label",onClick:this.toggleActive,key:n+"Label"},i),React.createElement("ul",{className:"Dropdown_options",key:n+"Options"},React.Children.map(e,function(e){return React.DOM.li(null,e)})))}}),o=React.createClass({displayName:"Avatar",render:function(){var e,t;return t=this.props.id,e=t?"/api/avatars/"+t:"",React.createElement("div",{className:"Ticket_avatar"},React.createElement("img",{src:e}))}}),r=React.createClass({displayName:"Body",handleLinkClick:function(e){return e.target.getAttribute("href")?e.target.setAttribute("target","_blank"):void 0},render:function(){var e,t,n,i,o,r,s;return o=this.props,e=o.action,i=o.namespace,n={loading:_.isEmpty(e.change)},n[i+"_body"]=!0,t=(null!=(r=e.change)?r.body:void 0)||this.generateLoremIpsum(e),s={__html:t},React.createElement("div",{className:React.addons.classSet(n),dangerouslySetInnerHTML:s,onClick:this.handleLinkClick})},generateLoremIpsum:function(e){var t,n,i,o;return this.cachedLoremIpsum?this.cachedLoremIpsum:(t=function(){var t,r,s,a;for(s=this.paragraphWordCounts(e),a=[],t=0,r=s.length;r>t;t++)i=s[t],o=function(){var e,t,o,r;for(o=generateLoremIpsum(i).split(" "),r=[],e=0,t=o.length;t>e;e++)n=o[e],r.push("<span>"+n+"</span>");return r}(),a.push(o.join(" "));return a}.call(this),this.cachedLoremIpsum=t.join("<br><br>"))},paragraphWordCounts:function(e){var n,i;return i=e.preview,i&&i.change?(n=t.isRating(e)?1:4,i.change.slice(n)):100}}),T=React.createClass({displayName:"Metadata",render:function(){var e,t,n,i,o,r;return this.props.withPublicReply||(i=this.props.actions[0],r=React.createElement(I,{className:"TicketMeta_time",time:i.created_at,key:"timestamp"})),t=function(){var t,n,i,r;for(i=this.props.actions,r=[],o=t=0,n=i.length;n>t;o=++t)e=i[o],e.hidden!==!0&&r.push(this.action(e,o));return r}.call(this),n=React.addons.classSet({TicketMeta:!0,"TicketMeta-samechangeset":this.props.withPublicReply}),React.createElement("div",{className:n},r,t)},action:function(e,t){var i;switch(i={action:e,index:t,key:e.id,withPublicReply:this.props.withPublicReply},e.change_type){case"Ticket::StateChange":return React.createElement(E,React.__spread({},i));case"Ticket::AgentChange":return React.createElement(n,React.__spread({},i));case"Ticket::GroupChange":return React.createElement(v,React.__spread({},i));case"Ticket::PriorityChange":return React.createElement(G,React.__spread({},i));case"Ticket::MailboxChange":return React.createElement(k,React.__spread({},i));case"Ticket::CustomerActionOpen":return React.createElement(d,React.__spread({},i));case"Rating":return React.createElement(A,React.__spread({},i));case"Snooze::State":case"Unsnooze::State":return React.createElement(V,React.__spread({},i))}}}),p=React.createClass({displayName:"Change",render:function(){var e,t;return t=this.props.className.concat(" TicketMeta_action"),e=0!==this.props.index||this.props.withPublicReply?this.isAutomaticActionAfterCustomerReply()?"which":"and":React.createElement(S,{user:this.props.action.actor,actorType:this.props.action.actor_type}),React.createElement("div",{className:t},e,"\xa0",this.props.children)},isAutomaticActionAfterCustomerReply:function(){var e;return 0===this.props.index&&!(null!=(e=this.props.action.actor)?e.agent_type:void 0)}}),b=React.createClass({displayName:"Mailbox",render:function(){var e,t,n,i;return i=this.props,n=i.id,e=i.className,t=React.addons.classSet(_.tap({loading:null==n},function(t){return t[e||"TicketMeta_mailbox"]=!0})),React.createElement("div",{className:t,key:"mailbox"},n&&L.mailbox(n))}}),S=React.createClass({displayName:"Person",render:function(){var e,t,n,i,o,r;return o=this.props,r=o.user,t=o.className,e=o.actorType,null==t&&(t="TicketMeta_person"),n=[t,_.isEmpty(r)&&"loading"].join(" "),i=this.wrapped(this.label(r,e)),React.createElement("div",{className:n},i)},agentName:function(e){return GrooveClient.Helpers.agentLabel(e)},label:function(e,t){var n;if(e)return"AutomationRule"===t?"Rule":this.isCurrentUser(e)?this.props.currentUser||"You":e.self?"self":this.isAgent(e)?this.agentName(e):(n=this.props.useFullName?e.name:e.first_name,n||e.email)},isCurrentUser:function(e){return e.id===GrooveClient.data.currentUser.id},isAgent:function(e){var t;return"agent"===(t=e.role)||"admin"===t||"owner"===t},wrapped:function(e){var t,n,i;return(i=this.props.wrapper)?(t=i[0],n=i[1],[t,e,n].join("")):e}}),g=React.createClass({displayName:"Group",render:function(){var e,t,n,i,o;return o=this.props,n=o.id,e=o.className,null==e&&(e="TicketMeta_person"),t=React.addons.classSet(_.tap({loading:void 0===n},function(t){return t[e]=!0})),n&&(i=L.group(n)),React.createElement("div",{
className:t},i)}}),w=React.createClass({displayName:"Label",render:function(){var e,t;return t=this.props.text,e=React.addons.classSet({TicketMeta_label:!0,loading:_.isEmpty(t)}),React.createElement("div",{className:e},t)}}),x=React.createClass({displayName:"MetaContent",render:function(){var e;return e=this.props.children,React.createElement("div",{className:"TicketMeta_content"},e)}}),i=React.createClass({displayName:"Attachments",render:function(){var e,t,n,i,o,r,s,a,l,c,p;return c=this.props,l=c.namespace,e=c.action,n=e.change&&e.change.attachments?e.change.attachments:_.times(e.preview.change[1],function(){return{className:"loading"}}),p=_.partition(n,function(e){return function(t){return e.isImage(t.name)}}(this)),s=p[0],o=p[1],i=l+"_attachments",a=function(){var n,i,o;for(o=[],n=0,i=s.length;i>n;n++)t=s[n],o.push(React.createElement(y,React.__spread({},t,{key:t.id,rel:e.change.id})));return o}(),r=function(){var e,n,i;for(i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(React.createElement(f,React.__spread({},t,{key:t.id})));return i}(),React.createElement("div",{className:i},React.createElement("div",null,a),React.createElement("div",null,r))},componentDidUpdate:function(){var e;return e=$(this.getDOMNode()).find("a.js-fancybox-image"),e.fancybox({type:"image",padding:0,margin:70,titleShow:!0,titlePosition:"outside",changeSpeed:0,autoResize:!1,overlayColor:"black",overlayOpacity:.85,centerOnScroll:!0,showCloseButton:!1,onStart:function(e){return function(){var e;return $(document.body).addClass("fancybox-image-gallery fancybox-multiple"),e=$("<div>",{id:"fancybox-custom-close",html:"&times;"}),e.on("click",function(){return $.fancybox.close()}),$("#fancybox-overlay").append(e)}}(this),onClosed:function(e){return function(){return $(document.body).removeClass("fancybox-image-gallery fancybox-multiple"),$("#fancybox-custom-close").remove()}}(this),onComplete:function(t){return function(n,i,o){var r,s,a,l,c;return e.length>1&&t.renderSmallPreviews(n,i),$("#fancybox-view-full-size").remove(),l=o.ratio,null!=l&&1!==l?(s="#",a="fancybox-view-full-size",c="View full size",r=$("<a>",{href:s,id:a,text:c}),r.on("click",function(){return t.openImageInNewWindow(o)}),$("#fancybox-title-outside").append(r)):void 0}}(this)})},isImage:function(e){var t;return e?(t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),"jpg"===t||"jpeg"===t||"png"===t||"gif"===t):!1},openImageInNewWindow:function(e){var t,n,i,o,r;return t=$("#fancybox-img"),i=t.attr("src"),o=t.attr("alt"),n=["width="+e.width,"height="+e.height,"resizeable","scrollbars"],r=window.open("","",n.join("")),r.document.write('<img src="'+i+'" alt="'+o+'"/>'),r.document.close()},renderSmallPreviews:function(e,t){var n;return $("#fancybox-gallery-previews").remove(),n=$("<ul>",{id:"fancybox-gallery-previews"}),e.each(function(e,i){var o;return o=$("<li>").toggleClass("current",e===t),o.click(function(){return $.fancybox.pos(e)}),o.append($(i).find("img").clone()),n.append(o)}),$("#fancybox-content").append(n)}}),f=React.createClass({displayName:"GenericAttachment",render:function(){var e,t,n,i,o,r;return o=this.props,t=o.content_type,i=o.name,r=o.url,n=_.isEmpty(r),e="TicketAttachment_name"+(n?" loading":""),React.createElement("a",{className:"TicketAttachment TicketAttachment-generic",href:r,target:"_blank"},React.createElement("div",{className:e},i))}}),y=React.createClass({displayName:"ImageAttachment",render:function(){var e,t,n,i,o,r,s,a,l;return s=this.props,e=s.content_type,i=s.name,l=s.url,a=s.rel,n=_.isEmpty(l),r=React.addons.classSet({TicketAttachment_preview:!0,loading:n}),o=React.addons.classSet({TicketAttachment_name:!0,loading:n}),t=n?void 0:React.createElement("img",{src:l}),React.createElement("a",{className:"TicketAttachment js-fancybox-image",href:l,title:i,rel:a},React.createElement("div",{className:r},t),React.createElement("div",{className:o},i))}}),V=React.createClass({displayName:"SnoozeState",render:function(){var e,t;return e=React.addons.classSet({"TicketMeta_action-state":!0,"TicketMeta_action-state-snoozed":!0}),t="Unsnooze::State"===this.props.action.change_type?"unsnoozed":"snoozed",React.createElement(p,React.__spread({className:e},this.props),t,"\xa0")}}),d=React.createClass({displayName:"CommentOpened",render:function(){var e,t,n;return n=this.props.action,e=n.actor,t=n.change,React.createElement("div",{className:"TicketMeta_action TicketMeta_action-opened"},React.createElement(S,{user:e}),"\xa0read")}}),A=React.createClass({displayName:"Rating",gradeFromInt:function(e){return["awesome","ok","bad"][e]},render:function(){var e,t,n,i,o,s,a,l,c,p;return l=this.props.action,e=l.actor,n=l.change,o=(null!=n?n.grade:void 0)||this.gradeFromInt(null!=(c=this.props.action.preview)?c.change[0]:void 0)||"",s=(null!=(p=this.props.action.preview)?p.change.length:void 0)>1,i=_.isEmpty(o)?React.addons.classSet({TicketMeta_action:!0,"TicketMeta_action-rating":!0,loading:!0}):React.addons.classSet((a={TicketMeta_action:!0,"TicketMeta_action-rating":!0},a["TicketMeta_action-rating-"+o]=!0,a)),s&&(t=React.createElement("div",{className:"TicketMeta_content"},React.createElement(r,{namespace:"TicketMeta_content",action:this.props.action}))),React.createElement("div",{className:i},React.createElement(S,{user:e}),"\xa0rated as\xa0",React.createElement(w,{text:o}),t)}}),n=React.createClass({displayName:"AgentChange",render:function(){var e,t,n,i;return e=this.props.action,i=this.labelAndAssignee(e),n=i[0],t=i[1],React.createElement(p,React.__spread({className:"TicketMeta_action-assign"},this.props),n,"\xa0",t)},labelAndAssignee:function(e){var n,i,o,r,s,a;return r=t.isUnassigning,n=e.actor_id,o=e.change,o?r(e)?(a=e.previousGroup,a&&(null!=a?a.change:void 0)&&!r(a)&&(i=this.group(a)),s=i?"assigned to anyone in":"assigned to anyone",[s,i]):this.isAssigningToSelf(e)?["took ownership",void 0]:["assigned to",this.person(this.assignee(e))]:[void 0,void 0]},assignee:function(e){var t,n;if(e&&e.change)switch(n=e.change,t=e.actor_id,n.agent_id){case t:return{id:t,self:!0};default:return n.agent}},group:function(e){return React.createElement(g,{id:e.change.group_id})},isAssigningToSelf:function(e){return e.actor_id===e.change.agent_id},person:function(e){var t,n;return t=this.props.action,n=this.currentUserLabel(t,e),React.createElement(S,{user:e,currentUser:n})},currentUserLabel:function(e,t){return t?t.id===e.actor_id?"yourself":"you":void 0}}),v=React.createClass({displayName:"GroupChange",render:function(){var e,n,i,o,r,s,a,l;return e=this.props.action,o=e.change,o&&(l=null!=o.group_id?["assigned to",o.group_id]:["unassigned",null!=(s=e.previous)&&null!=(a=s.change)?a.group_id:void 0],n=l[0],r=l[1],o.agent_id&&(i=React.createElement(S,{user:t.getAgent(o.agent_id),wrapper:"()"}))),React.createElement(p,React.__spread({className:"TicketMeta_action-assignGroup"},this.props),n,"\xa0",React.createElement(g,{id:r}),"\xa0",i)}}),G=React.createClass({displayName:"PriorityChange",render:function(){var e,t,n,i,o;return e=this.props.action,i=e.change?(n=e.change.is_priority,t=React.addons.classSet({"TicketMeta_action-state-starred":n,"TicketMeta_action-state-unstarred":!n}),o=n?"added":"removed",[t,o]):["TicketMeta_action-state-starred","changed"],t=i[0],o=i[1],React.createElement(p,React.__spread({className:t},this.props),o," star\xa0")}}),E=React.createClass({displayName:"StateChange",render:function(){var e,t,n,i,o;return e=this.props.action,t=e.change,o=t?L.state(t.state):void 0,n=React.addons.classSet((i={"TicketMeta_action-state":!0},i["TicketMeta_action-state-"+o]=!0,i)),React.createElement(p,React.__spread({className:n},this.props),"marked as\xa0",React.createElement(w,{text:o}))}}),k=React.createClass({displayName:"MailboxChange",render:function(){var e,t,n;return e=this.props.action,t=e.change,n=null!=t?t.mailbox_id:void 0,React.createElement(p,React.__spread({className:"TicketMeta_action-moveMailbox"},this.props),"moved to\xa0",React.createElement(b,{id:n}))},mailboxName:function(e){return e.mailbox_name||"a different mailbox"}}),N=React.createClass({displayName:"UndoButton",getInitialState:function(){return this.timeLeft()},secondsLeft:function(){return Math.max(moment(this.props.expires).diff(moment(),"seconds"),0)},timeLeft:function(){var e,t;return t=this.secondsLeft(),t>30?(e=Math.ceil(t/60),{timeAmount:e,timeUnit:1===e?"minute":"minutes"}):{timeAmount:t,timeUnit:1===t?"second":"seconds"}},componentWillMount:function(){return this.messageTemplate=_.template(this.props.message)},shouldComponentUpdate:function(e,t){return!(e===this.props&&_.isEqual(t,this.state))},componentDidMount:function(){return this.secondsLeft()>0?this.timer=setInterval(function(e){return function(){return e.secondsLeft()>0?e.setState(e.timeLeft()):(e.props.expireCallback?e.props.expireCallback():e.setState(e.timeLeft()),clearInterval(e.timer))}}(this),1e3):void 0},componentWillUnmount:function(){return clearInterval(this.timer)},render:function(){var e;return this.props.action.actor_id===GrooveClient.data.currentUser.id&&(e=React.createElement("a",{className:"TicketCellar_button",role:"undo",onClick:this.onUndo}," Undo")),this.secondsLeft()?React.createElement("div",{className:"TicketCellar"},React.createElement("div",{className:"TicketCellar_info"},this.messageTemplate(this.state)),e):React.createElement("div",null)},onUndo:function(e){return e.preventDefault(),e.stopPropagation(),this.state.disabled?void 0:(this.setState({disabled:!0}),this.props.undoCallback())}})}(TicketActions)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketInspector=function(n){function i(){return this.renderUndo=e(this.renderUndo,this),this.goBackAfterSnoozeChange=e(this.goBackAfterSnoozeChange,this),this.renderSnoozeChange=e(this.renderSnoozeChange,this),this.agentLeftTicket=e(this.agentLeftTicket,this),this.keyDownGlobal=e(this.keyDownGlobal,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/inspector"],i.prototype.id="ticket-inspector",i.prototype.events={"click #delete_action":"deleteTicket","click .attach-toggle":"toggleAttach","click a.unsnooze":"unsnoozeTicket","change #assignee-dropdowns input":"saveChanges","change #priority-toggle input":"savePriority","change .snooze-dropdown input":"snoozeTicket","change .state-dropdown":"saveState","click #ticket-subject:not(input)":"editTicketTitle","keyup #ticket-subject":"editingTicketTitle","click a.edit-blank-ticket-title":"editBlankTicketTitle","change .box-c-toolbar [name=ticket-actions]":"takeAction","click .edit-enduser-info":"editEnduserInfo","click [data-editor-tab]":function(e){return this.replyView.selectTab(e)},"click a[href^=/groove_client]":function(e){var t;return e.preventDefault(),t=$(e.target),this.model.isOnboardingTicket()&&this._trackOnboardingClick(t),GrooveClient.navigate(t.prop("href"),{trigger:!0})},"click a[href^=mailto]":function(e){return this.model.isOnboardingTicket()?void 0:Groove.Util.handleMailToClick(e)}},i.prototype.initialize=function(e){var t;return this.components={},this.currentUser=GrooveClient.data.currentUser,this.parentFilter=this.model.parentFilter()||GrooveClient.data.filters.first(),this.ticketView=new GrooveClient.Views.Ticket({model:this.model}),this.agent=e.agent,this.typingAgents=[],t=this.model.enduser,TicketActions.setTicket(this.model.attributes),this.listenTo(this.model,"change",this.renderTicketUpdateNotification),this.listenTo(this.model,"remove",this.renderTicketUpdateNotification),this.listenTo(this.model,"change:working_agent",this.renderTicketBanner),this.listenTo(this.model,"change:priority",this.updateTicketPriority),this.listenTo(this.model,"change:is_priority",this.updateTicketPriority),this.listenTo(this.model,"change:assignee_id",this.updateTicketAssignee),this.listenTo(this.model,"change:assignee_group_id",this.updateTicketAssigneeGroup),this.listenTo(this.model,"change:mailbox_id",this.renderTicketActions),this.listenTo(this.model,"change:state",this.updateTicketStatus),this.listenTo(this.model,"change:title",this.renderTicketTitle),this.listenTo(this.model,"agent_typing",this.startedTyping),this.listenTo(this.model,"agent_stopped_typing",this.stoppedTyping),this.listenTo(this.model,"change:state change:is_snoozed",this.renderSnoozeChange),this.listenTo(t,"change",function(e){return function(t){return TicketActions.invalidateUserCache(t.id),e.model.set({enduser:t.attributes},{silent:!0})}}(this)),this.listenTo(this.model,"change",function(e){return function(){return e.model.hasChanged("enduser")?(e.reRenderTicketAuthor(),TicketActions.updateEnduser(e.model.get("enduser")),e.updateActions(e.model.get("ticket_actions"),!0)):e.model.hasChanged("ticket_actions")?e.updateActions(e.model.get("ticket_actions")):void 0}}(this)),this.listenTo(TicketActions,"undo",this.renderUndo),this.listenTo(TicketActions,"note:edit",function(e){return function(e){var t,n;return t=new GrooveClient.Models.Comment(e.change),t.once("change",function(){return e.change.body=t.get("body"),TicketActions.updateTicketActions(e,{removeAbsent:!1})}),n=new GrooveClient.Views.CommentEditForm({model:t}),n.appear()}}(this)),this.listenTo(GrooveClient,"window:unload",this.agentLeftTicket),this.listenTo(GrooveClient,"refresh",function(e){return function(){return e.model.set("updater_agent_id",null,{silent:!0}),e.model.fetch(),Socket.send({type:"agentViewedTicket",data:e.model.id})}}(this)),this.listenTo(GrooveClient,"socket_disconnected",this.renderTicketBanner),this.listenToDocument("keydown",this.keyDownGlobal),this.on("leave",this.agentLeftTicket)},i.prototype.keyDownGlobal=function(e){return 73===e.which&&(e.metaKey||e.ctrlKey)&&e.shiftKey&&(e.preventDefault(),null!=this.replyView)?this.replyView.clickInsertReply():void 0},i.prototype.agentLeftTicket=function(){return Socket.send({type:"agentLeftTicket",data:this.model.id})},i.prototype.startedTyping=function(e){return void 0!==this.components.TicketBanner?(this.renderTicketBanner(e),this.components.TicketBanner.updateState({typing:!0})):void 0},i.prototype.stoppedTyping=function(){return void 0!==this.components.TicketBanner?this.components.TicketBanner.updateState({typing:!1}):void 0},i.prototype.renderTicketBanner=function(e){var t,n,i,o,r,s;return void 0!==this.components.TicketBanner&&this.components.TicketBanner.updateState({hidden:!0}),i=_.without(GrooveClient.data.workingTickets[this.model.id]||[],this.currentUser.id),i&&(t=GrooveClient.data.agents.get(e||_.last(i)),void 0!==t&&t.id!==this.currentUser.id)?(s=this.$("#ticket-banner")[0],o=t.attributes.name,n=this.agentAvatar(t),r=this.model.get("is_snoozed"),this.components.TicketBanner||(this.components.TicketBanner=React.render(React.createElement(TicketBanner),s)),this.components.TicketBanner.updateState({hidden:!1,name:o,ids:i,avatar:n,stacked:r||!1})):void 0},i.prototype.renderActions=function(){var e;if(!this.leaving)return e=document.getElementById("activity"),this.components.TicketActions=React.render(React.createElement(TicketActions.List),e)},i.prototype.updateActions=function(e,t){return null==t&&(t=!1),TicketActions.updateTicketActions(this.model.get("ticket_actions"),{ignoreCache:t})},i.prototype.agentAvatar=function(e){var t,n;return null!=e.get("avatar_url")?(n=new GrooveClient.Views.User({model:e}),t=n.avatarImage({size:27})):t=jQuery("<span/>",{"class":"initials",text:e.initials()})},i.prototype.goBackUrl=function(){var e;return e=GrooveClient.previousUrl(),null!=e?e:this.model.mailbox&&GrooveClient.data.account.get("prefers_grouping_filters_by_mailbox")?this.model.mailbox.filters.first().url():GrooveClient.path()},i.prototype.unsnoozeTicket=function(){return this.model.unsnooze().then(this.goBackAfterSnoozeChange)},i.prototype.snoozeTicket=function(e){var t;return t=$(e.target).val(),this.model.snooze(t).then(this.goBackAfterSnoozeChange)},i.prototype.renderSnoozeState=function(){return this.snoozeState=new GrooveClient.Views.SnoozeState({model:this.model}),this.replaceWithChild(this.snoozeState,".snooze-state")},i.prototype.renderSnoozeChange=function(){return this.model.get("is_snoozed")?this.snoozeDropDown.$el.hide():this.renderSnoozeDropdown(),this.renderSnoozeState(),this.renderTicketBanner()},i.prototype.renderDropdowns=function(){return this.renderGroupAndAssignee("#assignee-dropdowns"),this.renderPriority(),this.model.isSnoozable()&&this.renderSnoozeDropdown(),this.renderTicketActions(),this.showRawEmailLink()?this.renderInitialCommentActions():void 0},i.prototype.renderSnoozeDropdown=function(){var e,t,n,i,o;return!this.model.isSnoozable()&&this.snoozeDropDown?this.snoozeDropDown.$el.hide():this.snoozeDropDown?this.snoozeDropDown.$el.show():(i=["Snooze","in 4 hours","tomorrow morning","tomorrow afternoon","in 2 days","in 4 days","in 1 week","in 2 weeks","in 1 month"],t="snooze",n=function(){var t;t=[];for(e in i)o=i[e],t.push([o,o]);return t}(),this.snoozeDropDown=new GrooveClient.Views.SelectDropDown({name:t,options:n}),this.replaceWithChild(this.snoozeDropDown,"#snooze-dropdown"))},i.prototype.renderPriority=function(){var e;return e=this.model.get("is_priority"),this.priorityToggle=new GrooveClient.Views.TicketPriority({priority:e}),this.replaceWithChild(this.priorityToggle,"#priority-toggle")},i.prototype.renderTicketActions=function(){var e,t,n,i,o,r;for(i=[],this.model.isClosed()||i.push(["Merge Ticket","merge"]),this.currentUser.isAdmin()&&i.unshift(["Delete Ticket","delete"]),o=this.model.accessibleMailboxesToMove(),e=0,t=o.length;t>e;e++)n=o[e],i.push(["Move to "+n.get("name"),"move-"+n.id]);return null!=(r=this.ticketActionsDropDown)&&r.leave(),this.ticketActionsDropDown=new GrooveClient.Views.TicketActionsDropDown({name:"ticket-actions",options:i}),this.ticketActionsDropDown.$el.addClass("last"),this.renderChildInto(this.ticketActionsDropDown,"#ticket-actions-dropdown")},i.prototype.showRawEmailLink=function(){return!this.model.isEmailTicket()||this.model.isOnboardingTicket()?!1:this.model.enduser.id===this.model.get("creator_id")},i.prototype.renderInitialCommentActions=function(){var e,t,n;return e=_.findWhere(this.model.get("ticket_actions"),{change_type:"Comment"}),t=[["Show Original","show_original","/raw_emails/"+(null!=e?e.change_id:void 0)]],null!=(n=this.commentActionsDropDown)&&n.leave(),this.commentActionsDropDown=new GrooveClient.Views.TicketCommentActionsDropDown({name:"comment-actions",selected:!1,options:t}),this.commentActionsDropDown.$el.addClass("last"),this.renderChildInto(this.commentActionsDropDown,".comment-actions-dropdown")},i.prototype.renderTicketTitle=function(e){var t,n,i;return n=$("#ticket-subject"),t={id:n.attr("id"),"class":n.attr("class")},i=function(){var t;switch(!1){case!(!e&&(null!=(t=n.val())?t.trim():void 0)):return $("<span>").text(n.val());case!this.model.get("title"):return $("<span>").text(this.model.get("title"));default:return $('<span class="is-empty">').text("Add Subject")}}.call(this),n.is("input")?n.replaceWith($("<div>",t).append(i)):n.empty().append(i)},i.prototype.renderTicketLabels=function(){var e,t,n,i,o,r,s,a,l;for(l=this.$(".box-c-secondary-toolbar"),l.find(".ticket-label").remove(),r=this.model.labels.sortBy("name"),s=[],n=0,o=r.length;o>n;n++)i=r[n],t=i.path(),a=i.get("name"),e=$("<a>",{href:t,text:a}),e.data("label-id",i.id),e.addClass("ticket-label"),e.append($("<span>",{html:"&times;"}).addClass("remove")),s.push(l.append(e));return s},i.prototype.renderTicketStatus=function(){var e,t;return e=this.model.isUnread()?"opened":this.model.get("state"),null!=(t=this.stateDropDown)&&t.leave(),this.stateDropDown=new GrooveClient.Views.SelectDropDown({name:"state",selected:e,options:GrooveClient.data.ticketSettings.states}),this.stateDropDown.$el.addClass("first "+e),this.replaceWithChild(this.stateDropDown,".ticket-status")},i.prototype.reRenderTicketAuthor=function(){return this.$(".Ticket_envelopeHeader .Ticket_to").html(this.model.enduser.get("name"))},i.prototype.toggleAttach=function(){return localStorage.permanentlyAttached?delete localStorage.permanentlyAttached:(localStorage.permanentlyAttached=!0,this.attachCommentBox())},i.prototype.renderTemplate=function(){var e,t,n,o;return o=this,n=this.model,t=this.ticketView.enduserView,e=GrooveClient.data.account.get("company_name"),i.__super__.renderTemplate.call(this,{view:o,ticket:n,enduserView:t,agent:this.agent,companyName:e}),this.feed=this.$(".box-c-tickets-show"),this.model.get("comments_count")<2&&this.feed.addClass("single"),this},i.prototype.reRender=function(){var e;return React.unmountComponentAtNode(null!=(e=this.components.TicketActions)?e.getDOMNode().parentNode:void 0),TicketActions.invalidateTicketCache(this.model.id),TicketActions.setTicket(this.model.attributes),this.render(),this.onSwap(),this},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.renderTicketStatus(),this.renderDropdowns(),this.renderSnoozeState(),this.renderTicketBanner(),this.renderTicketContents(),this.renderReplyForm(),this.updateViews(),this.model.isOnboardingTicket()&&this._trackOnboardingView(),this},i.prototype._trackOnboardingView=function(){var e,t;return t=this.model.typeWithoutNamespace(),e={onboarding_last_viewed_ticket:t},this.model.isUnread()&&(e["onboarding_viewed_"+t]=1,this.track("onboarding:read_ticket"),this.track("onboarding:read_"+t)),this.track("onboarding:viewed_ticket",e),this.track("onboarding:viewed_"+t)},i.prototype._trackOnboardingClick=function(e){var t,n,i;return t=this.model.typeWithoutNamespace()+"_link",n={},n["onboarding_clicked_"+t]=1,(i=e.prop("role"))&&(n["onboarding_clicked_"+i]=1,this.track("onboarding:clicked_"+i)),this.track("onboarding:clicked_"+t,n)},i.prototype.renderTicketContents=function(){return this.renderTicketTitle(),this.renderTicketLabels(),_.delay(function(e){return function(){return e.renderActions()}}(this))},i.prototype.updateTicketMailbox=function(){return this.mailboxDropDown.selectValue(this.model.get("mailbox_id")),$.uniform.update()},i.prototype.updateTicketStatus=function(){var e,t,n;return t=this.model.get("state"),"unread"===t&&(this.model.markAsRead(),t="opened"),n=this.stateDropDown,e=this.model.previous("state"),n.selectValue(t),n.$el.removeClass(e).addClass(t),n.$el.find(".pretty-selector span").text(n.getOptionByValue(t)[0]),this.renderSnoozeDropdown(),$.uniform.update()},i.prototype.updateTicketPriority=function(){return this.renderPriority()},i.prototype.updateViews=function(){return Groove.UI.gravatars(this.el),Groove.UI.tooltips(this.el),Groove.UI.dropdowns()},i.prototype.ticketTypeClass=function(){return this.model.isTwitterTicket()?"twitter":this.model.isEmailTicket()?"email":this.model.isFacebookTicket()?"facebook":this.model.isChatTicket()?"chat":"regular"},i.prototype.adjustFixedToolbars=function(){var e,t,n;return e=0,t=$(".box-a-header").outerHeight(),n=this.$(".box-c-toolbar"),n.each(function(n,i){var o;return o=$(i),o.css({top:t+e}),e+=o.outerHeight()}),n.last().addClass("last"),this.$(".box-c-ticket-show").css({marginTop:e})},i.prototype.onSwap=function(){return this.model.markAsRead(),this.adjustFixedToolbars(),GrooveClient.Views.TicketItem.lastViewedId=this.model.id},i.prototype.showUpdateNotification=function(e,t){var n;return null==t&&(t={}),t.title='<a href="'+this.model.path()+'">Ticket #'+this.model.get("account_ticket_number")+"</a> has been updated.",e&&(n=_.last(_.where(this.model.get("ticket_actions"),{change_type:"Comment"})),n&&TicketActions.isUndoable(n)&&(t.title+=' <a href="#" role="undo" class="notification-warning">Undo</a>',_.extend(t,{delay:1e3*TicketActions.secondsUntilSent(n)-150,onClick:function(e){return function(t){return"undo"===$(t.currentTarget).attr("role")?TicketActions.undo(n).then(function(){var t;return TicketActions.isNote(n)&&(e.model.draftNote=null!=(t=n.change)?t.body:void 0),GrooveClient.navigate(e.model.path(),!0)}):void 0}}(this)}))),new GrooveClient.Views.Notification(t).show()},i.prototype.goBackAfterSnoozeChange=function(){var e,t,n;if(this.currentUser.get("open_folder_on_ticket_save"))return n='<a href="'+this.model.path()+'">Ticket #'+this.model.get("account_ticket_number")+"</a>",e=this.model.get("is_snoozed")?"snoozed":this.model.isOpened()?"reopened":"marked as "+this.model.get("state"),t=new GrooveClient.Views.Notification({title:n+" has been "+e+"."}),t.show(),this.goBack()},i.prototype.goBackAfterTicketUpdate=function(e){var t;return null==e&&(e=!1),(t=e?this.currentUser.get("open_folder_on_ticket_reply"):this.currentUser.get("open_folder_on_ticket_save"))?(this.showUpdateNotification(e),this.goBack(),!0):!1},i.prototype.deleteTicket=function(){return confirm("Are you sure you want to delete this ticket?")?(this.model.destroy({wait:!0,success:function(e){return function(t,n){return GrooveClient.trigger("tickets:delete",n),GrooveClient.trigger("flashMessage",{type:"notice",body:"Ticket successfully deleted."}),e.goBack()}}(this)}),!1):void 0},i.prototype.renderUndo=function(e){var t;return t=TicketActions.isNote(e)?"note":"reply",this.replyView.renderTab(t,e.change)},i.prototype.goBack=function(){return GrooveClient.navigate(this.goBackUrl())},i.prototype.renderReplyForm=function(){return this.replyView=new GrooveClient.Views.ReplyForm({model:this.model}),this.renderChildInto(this.replyView,".ticket-reply-form"),this.replyFormBox=this.replyView.$el},i.prototype.renderTicketUpdateNotification=function(e){var t,n,i,o,r,s,a;return n=this.currentUser.id,i="updater_agent_id",a="function"==typeof e.get?e.get(i):void 0,t="function"==typeof e.get?e.get("client_id"):void 0,a===n||e[i]===n||e.get("skip_realtime_update_message")||t===GrooveChat.getClientId()?void 0:(r=(s=GrooveClient.data.agents.get(a))?s.get("name")+" updated this ticket.":"Ticket was updated.",o=_.extend({title:r},o),new GrooveClient.Views.Notification(o).show(),this.renderTicketContents(),this.highlightChanges())},i.prototype.highlightChanges=function(){return this.$(".ticket-actions").effect("highlight",1500)},i.prototype.savePriority=function(e){var t,n;return t=$(e.target),n=t.val(),""!==n?(this.model.updatePriority(n,function(e){return function(t){return GrooveClient.trigger("tickets:update",t),e.goBackAfterTicketUpdate()}}(this)),!1):void 0},i.prototype.saveChanges=function(e){var t,n,i;return i=$(e.target),t=i.attr("name"),n={},n[t]=i.val(),this.saveTicket(n),!1},i.prototype.saveState=function(e){return this.saveTicket({state:$(e.target).val(),client_id:GrooveChat.getClientId(),updater_agent_id:this.currentUser.id})},i.prototype.takeAction=function(e){var t,n;if(e.preventDefault(),t=this.$("input[name='ticket-actions']").val(),t.match(/^move/))return n=t.split("-")[1],this.moveTicket(n);switch(t){case"merge":return this.showMergeTicketForm();case"delete":return this.deleteTicket()}},i.prototype.showMergeTicketForm=function(){return new GrooveClient.Views.MergeTicketFancybox({model:this.model}).appear(),!1},i.prototype.moveTicket=function(e){return this.saveTicket({mailbox_id:e})},i.prototype.saveTicket=function(e){return this.model.save(e,{wait:!0,global:!1,success:function(e){return function(t,n){return GrooveClient.trigger("tickets:update",n),e.goBackAfterTicketUpdate()}}(this)})},i.prototype.editTicketTitle=function(e){var t,n,i,o;return n=this.$("#ticket-subject"),o=this.model.get("title"),t={name:"title",type:"text",id:n.attr("id"),"class":n.attr("class")},i=$("<input>",t).val(o),i.on("focusout.ticket-inspector",$.proxy(this,"saveTicketTitle")),n.replaceWith(i),i.focusPos()},i.prototype.saveTicketTitle=function(e){var t;return t=$(e.target).val().trim(),this.renderTicketTitle(),t!==this.model.get("title")?this.model.save({title:t},{wait:!0,global:!1,success:function(e,t){return GrooveClient.trigger("tickets:update",t)}}):void 0},i.prototype.editingTicketTitle=function(e){return 27===e.keyCode?this.renderTicketTitle(!0):13===e.keyCode?$(e.target).focusout():void 0},i.prototype.editEnduserInfo=function(){var e,t,n;return t=this.model,e=t.enduser,n=new GrooveClient.Views.CustomerEditForm({model:e,ticket:t}),n.appear(),!1},i.prototype.assigneeGroupDropDownId=function(){return this.model.get("assignee_group_id")},i.prototype.leave=function(){var e,t,n;this.leaving=!0,n=this.components;for(t in n)e=n[t],React.unmountComponentAtNode(e.getDOMNode().parentNode);return i.__super__.leave.apply(this,arguments)},i}(GrooveClient.Views.MainView),_.extend(GrooveClient.Views.TicketInspector.prototype,GrooveClient.Mixins.GroupAndAssigneeDropdowns)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketItem=function(n){function i(){return this.renderState=e(this.renderState,this),this.updateTimeAgo=e(this.updateTimeAgo,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.className="ticket item",i.prototype.template=JST["tickets/ticket_item"],i.prototype.initialize=function(e){return null==e&&(e={}),i.__super__.initialize.apply(this,arguments),this.on("leave",function(e){return function(){return e.clearInterval(),e.$el.previewer("cleanup")}}(this)),this.listenTo(this.model,"change",this.highlight),this.listenTo(this.model,"change:working_agent",this.renderWorkingAgents),this.listenTo(this.model,"agent_typing",this.renderTypingAgent),this.listenTo(this.model,"agent_stopped_typing",this.renderWorkingAgents),this.listenTo(this.model,"change:state",this.renderState),this.sortColumn=function(){switch(e.sortColumn){case"created_at":return"created_at";case"user_updated_at":return"user_updated_at";default:return"updated_at"}}(),this.isSnoozed=this.model.get("is_snoozed")||!1},i.prototype.events={"change #priority-toggle input":"savePriority","click div.item-selector":function(e){var t;return t=$(e.target),t.is("input")?void 0:(e.stopPropagation(),this.proxySelection(t))}},i.prototype.savePriority=function(e){var t,n;return t=$(e.target),n=t.val(),""!==n?this.model.updatePriority(n,function(e){return function(e){return GrooveClient.trigger("tickets:update",e)}}(this)):void 0},i.prototype.renderPriority=function(){var e;return e=this.model.get("is_priority"),this.priorityToggle=new GrooveClient.Views.TicketPriority({priority:e}),this.replaceWithChild(this.priorityToggle,"#priority-toggle")},i.prototype.renderWorkingAgents=function(){var e,t,n,i,o,r;return i=GrooveClient.data.currentUser,n=_.without(GrooveClient.data.workingTickets[this.model.id]||[],i.id),n?(e=GrooveClient.data.agents.get(_.last(n)),o=this.$(".Badge"),void 0===e||e.id===i.id?o.hide():(null!=e.get("avatar_url")?(r=new GrooveClient.Views.User({model:e}),t=r.avatarImage({size:32,"class":"BadgeContent BadgeContent-avatar"})):t=jQuery("<span/>",{"class":"BadgeContent BadgeContent-text",text:e.initials()}),o.html(t).show())):void 0},i.prototype.renderTypingAgent=function(e){var t,n,i,o;return n=GrooveClient.data.currentUser,t=GrooveClient.data.agents.get(e),i=this.$(".Badge"),void 0===t||t.id===n.id?i.hide():(o=jQuery("<span/>",{"class":"BadgeContent BadgeContent-animation-typing",text:"..."}),i.html(o).show())},i.prototype.createBadgeElement=function(e){var t,n;return t=jQuery("<span/>",{"class":"BadgeContent BadgeContent-icon"}),n=jQuery("<img/>",{src:e}),t.html(n)},i.prototype.renderSnoozeState=function(){var e,t;if(this.isSnoozed)return e=this.$(".Badge"),t=this.createBadgeElement("../assets/icons/clock.svg"),e.html(t).show()},i.prototype.ticketTypeIcon=function(){var e;return e="/assets/icons",this.model.isTwitterTicket()?e+"/twitter-gray.svg":this.model.isFacebookTicket()?e+"/facebook-gray.svg":this.model.isEmailTicket()?e+"/email-gray.svg":this.model.isChatTicket()?e+"/chat-gray.svg":this.model.isWidgetTicket()?e+"/chat-gray.svg":e+"/email-gray.svg"},i.prototype.renderTicketTypeBadge=function(){var e,t;return e=this.$(".Badge"),t=this.createBadgeElement(this.ticketTypeIcon()),e.html(t).show()},i.prototype.render=function(){var e,t,n,o;return o=TicketActions.isNote,n=TicketActions.getLastComment,e=this.model.get("ticket_actions"),i.__super__.render.apply(this,arguments),this.renderState(),t=_.tap(["ticket_"+this.model.id],function(t){return function(i){return t.model.isUnread()&&i.push("unread"),o(n(e))?i.push("private"):void 0}}(this)),this.$el.addClass(t.join(" ")),this.renderWorkingAgents(),this.renderPriority(),this.updateView(),this.updateInterval(),this.markLastViewedTicket(),this},i.prototype.mailboxLabel=function(){var e,t;return null!=(e=this.model)&&null!=(t=e.mailbox)?t.labelName():void 0},i.prototype.mailboxRestrictedClass=function(){
var e,t;return(null!=(e=this.model)&&null!=(t=e.mailbox)?t.get("restricted?"):void 0)?"restricted":""},i.prototype.body=function(){var e;return this.model.has("body")?(e=this.model.get("body"),e.replace(/\<(\/?b)\>/g,"%%$1%%").replace(/<\/?[^>]+>/g," ").replace(/\%%(\/?b)\%%/g,"<$1>")):this.model.get("snippet")},i.prototype.highlight=function(){return this.$el.effect("highlight",{},2e3)},i.prototype.updateTimeAgo=function(){var e;return e=this.model.get(this.sortColumn),this.$el.find(".updated-at.autoupdate").text(Groove.Util.timeAgo(e))},i.prototype.markLastViewedTicket=function(){var e,t,n,i;return n=GrooveClient.Views.TicketItem,e=GrooveClient.data.historyItems,t=n.lastViewedId||(null!=(i=e.topTicket())?i.id:void 0),this.model.id===t?this.$el.addClass("last-viewed"):void 0},i.prototype.updateInterval=function(){return this.clearInterval(),this.interval=setInterval(this.updateTimeAgo,6e4),this.updateTimeAgo()},i.prototype.clearInterval=function(){return null!=this.interval?clearInterval(this.interval):void 0},i.prototype.updateView=function(){return this.updateTimeAgo(),this.setupPreviewer({hoverableSelector:".author-image",wrapperOffset:{left:0,top:15}})},i.prototype.renderState=function(){var e;return e=this.model.isUnread()?"opened":this.model.state(),this.$el.addClass(e)},i.prototype.setupPreviewer=function(e){return null==e&&(e={}),e=_.extend({},e,{htmlContent:function(e){return function(){var t;return t=new GrooveClient.Views.TicketPreview({model:e.model}),e.renderChild(t).el}}(this)}),this.$el.previewer(e)},i.prototype.ticketListDateFormat=function(){var e,t;return e=this.model.get(this.sortColumn),t=new Date,this.updatedIsToday()?Groove.Util.timeAgo(this.dateUpdated):Groove.Util.formattedDate(e)},i.prototype.updatedIsToday=function(e){var t,n;return this.dateUpdated=this.model.get(this.sortColumn),t=new Date,n=new Date(this.dateUpdated),n.setHours(0,0,0,0)===t.setHours(0,0,0,0)},i.prototype.proxySelection=function(e){var t,n;return n=e.find("input"),t=n.is(":checked"),n.prop("checked",!t).click().prop("checked",!t)},i}(GrooveClient.Views.Ticket)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketListItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/ticket_list_item"],n.prototype.initialize=function(){return this.listenTo(this.model.enduser,"change",this.render,this)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.updateView(),this.model.isOnboardingTicket()&&this._trackOnboardingView(),this},n.prototype._trackOnboardingView=function(){var e,t;return t=this.model.typeWithoutNamespace(),e={},e["onboarding_viewed_"+t+"_in_ticket_list"]=1,this.model.isUnread()&&(e["onboarding_viewed_unread_"+t+"_in_ticket_list"]=1,this.track("onboarding:viewed_unread_"+t+"_in_ticket_list")),this.track("onboarding:viewed_"+t+"_in_ticket_list",e),this.track},n.prototype.updateView=function(){return this.setupPreviewer({hoverableSelector:".author",wrapperOffset:{left:-5,top:-12}})},n.prototype.createdAtHuman=function(){var e;return e=this.model.get("created_at"),Groove.Util.strftime("%D")===Groove.Util.strftime("%D",e)?Groove.Util.strftime("%l:%M %p",e):Groove.Util.strftime("%b %d",e)},n.prototype.assignees=function(){var e,t,n,i,o,r;return n=[],(r=this.model.assignee)&&(i=r.initials(),t=GrooveClient.path("agents/"+r.id+"/tickets"),o=r.get("name"),n.push($("<a>",{text:i,href:t,title:o}).outerHTML())),(e=this.model.assigneeGroup)&&n.push(e.get("name")),n.join(", ")},n}(GrooveClient.Views.TicketItem)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketPriority=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/priority"],n.prototype.id="priority-toggle",n.prototype.className="PriorityToggleContainer",n.prototype.tagName="div",n.prototype.events={click:"toggle"},n.prototype.initialize=function(e){return null==e&&(e={}),this.priority=e.priority,this.priorityInt=this.booleanToPriorityInt(this.priority)},n.prototype.booleanToPriorityInt=function(e){return e===!0?GrooveClient.Models.Ticket.PRIORITY_ON:GrooveClient.Models.Ticket.PRIORITY_OFF},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{priority:this.priority,priorityInt:this.priorityInt})},n.prototype.toggle=function(){return this.priority=!this.priority,this.priorityInt=this.booleanToPriorityInt(this.priority),this.render(),this.$("input").change()},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketShow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.TicketInspector,n.prototype.leftSidebar=GrooveClient.Views.TicketsLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.TicketShowRightSidebar,n.prototype.initialize=function(e){return e.agent?this.leftSidebar=GrooveClient.Views.AgentsLeftSidebar:void 0},n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketSimpleItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="simple-item",n.prototype.template=JST["tickets/ticket_simple_item"],n.prototype.updateView=function(){return this.setupPreviewer({hoverableSelector:".user a",wrapperOffset:{left:0,top:15}})},n}(GrooveClient.Views.TicketListItem)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketTimelineEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="box-c-ticket-event box-c-comment",n.prototype.initialize=function(){var e;return e=new GrooveClient.Models.User(this.model.get("actor")),this.actorView=new GrooveClient.Views.User({model:e})},n.prototype.render=function(){return this.renderActorImage(),this.renderBody(),this},n.prototype.renderActorImage=function(){var e;return e=this.actorView.avatarImage({size:50}),this.$el.append($("<div>").addClass("author-image").append(e))},n.prototype.renderBody=function(){var e,t,n;return e=$("<div>").addClass("description"),e.html(this.model.get("body")),t=$("<p>").addClass("date"),n=moment(this.model.get("created_at")),t.text(Groove.Util.formattedDateTime(n)),t.appendTo(e),e.appendTo(this.$el)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketToMergeItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/ticket_to_merge_item"],n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{view:this,ticket:this.model})},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketUpdateNotification=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click a.show-changes":"showChanged","click a.ignore-changes":"remove"},n.prototype.template=JST["tickets/ticket_update_notification"],n.prototype.className="box-c-toolbar ticket-update-notification fixed-header",n.prototype.initialize=function(e){return this.inspector=e.inspector,this.model=this.inspector.model},n.prototype.renderTemplate=function(){var e,t;return e=this.model.get("filter_diff"),t=e&&e.plus&&e.minus?"This ticket has just been updated and moved to a different folder.":e&&e.minus?"This ticket has just been moved to a different folder or deleted.":"This ticket has just been updated.",n.__super__.renderTemplate.call(this,{message:t})},n.prototype.showChanged=function(){return this.inspector.renderTicketContents(),this.inspector.updateViews(),this.remove(),!1},n.prototype.remove=function(){return n.__super__.remove.apply(this,arguments),this.inspector.adjustFixedToolbars(),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){window.TicketImport={Components:{},dispatcher:null},function(e){var t,n;return t=e,t.dispatcher=_.clone(Backbone.Events),n={fetchImports:function(t){return $.get("/api/imports.json?account_id="+t).done(function(t){return function(t){return e.dispatcher.trigger("change",t.imports)}}(this))}},t.actions={fetchImports:function(e){return n.fetchImports(e)}}}(TicketImport)}.call(this),function(){TicketImport.Components.TicketImportNotification=React.createClass({displayName:"TicketImportNotification",getInitialState:function(){return{imports:[]}},componentWillMount:function(){return TicketImport.dispatcher.on("started",this.handleImportStarted),TicketImport.dispatcher.on("change",this.handleImportsChanged),TicketImport.dispatcher.on("completed",this.handleImportCompleted)},componentDidMount:function(){return TicketImport.actions.fetchImports(this.props.account_id)},componentWillUnmount:function(){return TicketImport.dispatcher.off("started",this.handleImportStarted),TicketImport.dispatcher.off("change",this.handleImportsChanged),TicketImport.dispatcher.off("completed",this.handleImportCompleted)},handleImportStarted:function(e){var t;return t=this.state.imports,_.isEmpty(t)?t=[e]:t.push(e),this.setState({imports:t})},handleImportsChanged:function(e){return this.setState({imports:e})},handleImportCompleted:function(e){var t;return t=_.reject(this.state.imports,function(t){return t.id===e.id}),this.setState({imports:t})},render:function(){return _.isEmpty(this.state.imports)?React.createElement("div",null):React.createElement("div",{className:"TicketImport TicketImport-inline"},React.createElement("div",{className:"TicketImport_message"},React.createElement("strong",null,"You have a ticket import in progress"),"\xa0 We'll refresh the page when it's completed"))}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TicketsList=function(n){function i(){return this.scrollToLastPosition=e(this.scrollToLastPosition,this),this.sortTickets=e(this.sortTickets,this),this.resort=e(this.resort,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["tickets/list"],i.lastScrollTop=null,i.prototype.events={"click .mass-selector input:checkbox":"massSelect","click .item-selector.check":"updateSelection","click .heading.sortable span":"sortTickets","click .ticket":"clickTicket"},i.prototype.initialize=function(e){return this.announcement=GrooveClient.data.systemAnnouncement,this.listenTo(this.collection,"add",this.appendOrInsertAt),this.listenTo(this.collection,"change:latest_enduser_comment_at",this.fixPosition),this.listenTo(this.collection,"change:priority",this.fixPosition),this.listenTo(this.collection,"reset",this.renderTicketItems),this.listenTo(GrooveClient,"ticket-selection:update",this.updateSelection),this.listenTo(GrooveClient,"ticket-selection:hide",this.resetSelection),this.listenTo(GrooveClient,"document:scroll",this.documentScroll),this.listenTo(GrooveClient,"refresh",this.refresh),this.listenTo(GrooveClient,"tickets:resort",this.resort),this._collectionHasNoFilters()||this.listenTo(this.collection.filter,"change:num_tickets",this.updateDocumentTitle),this.listenTo(GrooveClient,"import:started",this.importStarted),this.listenTo(GrooveClient,"import:completed",this.importCompleted),this.listenTo(GrooveClient,"import:progress",this.updateImportProgress),this.sidebarCollapsable=e.sidebarCollapsable},i.prototype.render=function(){var e,t;return e=this.collection.mailbox,t=e?!e.isState("confirmed","active"):!1,this.renderTemplate(e&&t),this.initializeTabs(),this.renderMassActions(),this.renderTicketSorter(),this.renderTicketItems(),this.renderSystemAnnouncement(),this.renderBlankState(),this.updateViews(),this.showPanelOverflow(),this._collectionHasNoFilters()||this.updateDocumentTitle(),this.renderTicketImport(),t&&(this.renderSetupMailboxReminder(),e.isState("demo")&&this.collection.any(function(e){return e.isOnboardingTicket()})&&this._trackOnboardingView()),this.track("ticket_list:viewed"),this},i.prototype.updateDocumentTitle=function(){var e;return this.collection.filter.has("num_tickets")?(e="",this.collection.filter.get("num_tickets")>0&&(e="("+this.collection.filter.get("num_tickets")+")"),document.title=$.trim(e+" "+this.collection.title()+" - Groove")):void 0},i.prototype._trackOnboardingView=function(){return this.track("onboarding:viewed_ticket_list"),this.collection.any(function(e){return e.isUnread()})?this.track("onboarding:viewed_unread_ticket_in_ticket_list"):void 0},i.prototype.renderTemplate=function(e){return i.__super__.renderTemplate.call(this,{tickets:this.collection,title:this.collection.title(),emptyTitle:this.collection.emptyTitle(),emptyMessage:this.collection.emptyMessage(),sidebarCollapsable:this.sidebarCollapsable,withReminder:e?"withReminder":""})},i.prototype.initializeTabs=function(){return this.$(".tabs-views").tabs({cookie:{expires:7,name:"tabs-views-1"}})},i.prototype.renderMassActions=function(){var e;return e=new GrooveClient.Views.TicketsMassActions({indexView:this}),this.appendChildTo(e,".box-c-toolbar")},i.prototype.renderTicketSorter=function(){var e;return e=new GrooveClient.Views.TicketsSorter({collection:this.collection}),this.appendChildTo(e,".box-c-toolbar")},i.prototype.resort=function(e){return this.collection.fetch({reset:!0})},i.prototype.sortTickets=function(e){var t,n,i;return e.preventDefault(),t=$(e.target).parent(".heading"),$(".heading.sortable").not(t).removeClass("asc desc"),t.hasClass("desc")?(t.removeClass("desc").addClass("asc"),i="asc"):(t.removeClass("asc").addClass("desc"),i="desc"),n=t.data("sort-column"),null!=n&&null!=i&&(this.collection.order_by={column:n,direction:i},this.collection.currentPage=1,this.collection.fetch({reset:!0})),!1},i.prototype.renderSystemAnnouncement=function(){var e;return this.announcement?(e=new GrooveClient.Views.SystemAnnouncement({announcement:this.announcement}),this.prependChildTo(e,".box-c-main")):void 0},i.prototype.renderTicketItems=function(){var e,t,n,i;for(this.$("#expanded-tickets, #list-tickets").empty(),n=this.collection.models,e=0,t=n.length;t>e;e++)i=n[e],this.appendItem(i);return this},i.prototype.renderBlankState=function(){return this.renderChild(new GrooveClient.Views.Blankable({collection:this.collection,el:this.el}))},i.prototype.renderTicketImport=function(){var e,t;return t={account_id:GrooveClient.data.account.get("id")},e=document.createElement("div"),e.setAttribute("id","ticketImport"),this.$el.append(e),this.ticketImportComponent=React.render(React.createElement(TicketImport.Components.TicketImportNotification,t),e)},i.prototype.importStarted=function(e){return TicketImport.dispatcher.trigger("started",e["import"])},i.prototype.importCompleted=function(e){return TicketImport.dispatcher.trigger("completed",e["import"])},i.prototype.updateImportProgress=function(){},i.prototype.renderSetupMailboxReminder=function(){var e,t;this.mailboxReminderContainer=document.createElement("div"),this.mailboxReminderContainer.setAttribute("id","setupReminder"),this.$el.append(this.mailboxReminderContainer),e=this.collection.mailbox,t={initialMailbox:{id:e.get("id"),email:e.get("email"),provider:e.get("provider"),state:e.get("state"),forward_email_address:e.get("forward_email_address")}},React.render(React.createElement(MailboxOnboarding.Components.TicketListNotification,t),this.mailboxReminderContainer)},i.prototype.updateViews=function(){return Groove.UI.tooltips(this.el),this||this.$(".sidebar-collapse-button").hide(),this.updateSelection()},i.prototype.refresh=function(){return this.collection.fetch({reset:!0,error:function(){var e,t;return t="Connection to the server failed",e="Please <a href='javascript:window.location.reload()'>reload</a> Groove to try to fix the problem.",new GrooveClient.Views.Alert({title:t,message:e}).show()}})},i.prototype.documentScroll=function(){return Groove.Util.spaceToBottom()<100&&!$("body").hasClass("fancyboxed")?this.fetchMoreTickets():void 0},i.prototype.fetchMoreTickets=function(){return this.collection.fetchMore()},i.prototype.appendOrInsertAt=function(e){return this.permissionToView(e)?e.get("filter_diff")?(this.insertItemAtIndex(e),this.collection.fetching?void 0:e.trigger("highlight")):this.appendItem(e):void 0},i.prototype.permissionToView=function(e){return this.mailbox_ids||(this.mailbox_ids=GrooveClient.data.mailboxes.map(function(e){return e.id})),_.contains(this.mailbox_ids,e.get("mailbox_id"))},i.prototype.fixPosition=function(e){var t,n;return this.collection.sort({silent:!0}),t=this.collection.indexOf(e),n=this.$("#expanded-tickets .ticket_"+e.id).index(),-1!==t&&-1!==n&&t!==n?(_.each(this.filterViewsByModel(e),function(e){return e.remove(),e.leave()}),this.appendItem(e,t)):void 0},i.prototype.appendExpandedTicket=function(e,t){var n;return n=new GrooveClient.Views.TicketItem({model:e,sortColumn:this.collection.order_by.column}),this.appendViewTo(n,t,"#expanded-tickets")},i.prototype.appendListTicket=function(e,t){var n;return n=new GrooveClient.Views.TicketListItem({model:e}),this.appendViewTo(n,t,"#list-tickets")},i.prototype.appendViewTo=function(e,t,n){var i;return i=this.$(n).find(e.siblingSelector()).length-1,null!=t&&i>=t?this.insertChildAtIndexTo(e,t,n):this.appendChildTo(e,n)},i.prototype.appendItem=function(e,t){return this.appendExpandedTicket(e,t)},i.prototype.insertItemAtIndex=function(e){var t;return t=this.collection.indexOf(e),-1===t&&(t=0),this.appendItem(e,t)},i.prototype.getSelectedTicketIds=function(){var e;return e=this.currentTab().find(":checkbox:checked").map(function(){return this.value}),_.uniq(e)},i.prototype.getSelectedTickets=function(){var e,t,n,i,o;for(i=this.getSelectedTicketIds(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this.collection.get(t));return o},i.prototype.currentTab=function(){return this.$(".box-c-tickets-index:not(.ui-tabs-hide)")},i.prototype.massSelect=function(e){var t;return t=$(e.target),(null!=t?t.is(":checked"):void 0)?this.selectAll():this.selectNothing()},i.prototype.selectAll=function(){return this.selectTickets(!0),this.updateSelection()},i.prototype.selectNothing=function(){return this.selectTickets(!1),this.updateSelection()},i.prototype.selectTickets=function(e){return this.currentTab().find(".item-selector :checkbox").prop({checked:e}).trigger("change",!0)},i.prototype.resetSelection=function(){return this.selectNothing(),this.$(".box-c-mass-actions").trigger("reset")},i.prototype.clickTicket=function(e){var t,n,i,o,r;return o=$(e.target),o.parents(".attachments").length||o.is("a, input, .label-name, .selectable")?void 0:(t=$(e.currentTarget),n=t.data("ticket-id"),r=this.collection.get(n),r?(i=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,this.constructor.lastScrollTop=i,GrooveClient.navigate(r.path()),!1):void 0)},i.prototype.updateSelection=function(){var e,t,n,i;return i=this.currentTab(),t=i.find(":checkbox"),n=t.filter('[name="ticket_ids[]"]:checked'),e=t.length===n.length,this.$(".select").toggleClass("enabled",e),n.length?(this.$("h1").hide(),this.$(".box-c-mass-actions").show()):(this.$("h1").css({display:"inline-block"}),this.$(".box-c-mass-actions").hide())},i.prototype.showPanelOverflow=function(){return this.$(".box-b-wrap.center-panel").css("overflow","visible")},i.prototype.scrollToLastPosition=function(e){return e=this.constructor.lastScrollTop,$("html, body").scrollTop(e),delete this.constructor.lastScrollTop},i.prototype.onSwap=function(){return _.defer(this.scrollToLastPosition)},i.prototype._collectionHasNoFilters=function(){return _.isFunction(this.collection.filter)},i.prototype.leave=function(){return this.mailboxReminderContainer&&React.unmountComponentAtNode(this.mailboxReminderContainer),i.__super__.leave.apply(this,arguments)},i}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.TwoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.TicketsList,n.prototype.leftSidebar=GrooveClient.Views.TicketsLeftSidebar,n.prototype.rightSidebar=GrooveClient.Views.TicketsRightSidebar,n.prototype.render=function(){var e;return n.__super__.render.call(this),e=this.$el.find(".box-b-sidebar-right"),e.is(":empty")&&(e.remove(),this.$el.find(".box-b-sidebar-right-fake, .sidebar-collapse-button").remove()),this},n.prototype.layoutComponents=function(){var e,t,i;return i={},t=GrooveClient.data.timelineEvents.isEmpty(),e=GrooveClient.data.labels.isEmpty(),t&&e&&(i.rightSidebar=!1),n.__super__.layoutComponents.call(this,i)},n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsSearchResults=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["tickets/search_results"],n.prototype.id="ticketsSearchResults",n.lastClickedTicket=null,n.prototype.events={"click #sortSearchResults a":function(e){return e.preventDefault(),this._sort($(e.target))},"click .mass-selector input:checkbox":"massSelect","click .ticket":"clickTicket","click .item-selector.check":"updateSelection"},n.prototype.initialize=function(e){return this.announcement=GrooveClient.data.systemAnnouncement,this.listenTo(this.collection,"add",this.appendOrInsertAt),this.listenTo(this.collection,"change:latest_enduser_comment_at",this.fixPosition),this.listenTo(this.collection,"reset",this.renderResults),this.listenTo(GrooveClient,"ticket-selection:update",this.updateSelection),this.listenTo(GrooveClient,"ticket-selection:hide",this.resetSelection),this.listenTo(GrooveClient,"document:scroll",_.throttle(this.documentScroll)),this.lastViewedTicket=GrooveClient.data.historyItems.topTicket(),this.sidebarCollapsable=e.sidebarCollapsable},n.prototype.render=function(){var e;return e=this.collection.query.get("order").split(" ")[0],this.renderTemplate({tickets:this.collection,title:this.collection.title(),totalCount:this.collection.query.get("total_count"),emptyTitle:this.collection.emptyTitle(),emptyMessage:this.collection.emptyMessage(),isSecondPass:this.collection.query.get("second_pass"),isOrder:function(t){return t===e?"on":void 0}}),this.renderMassActions(),this.renderResults(),this.renderSystemAnnouncement(),this.renderBlankState(),this.updateViews(),this.showPanelOverflow(),this},n.prototype.renderMassActions=function(){var e;return e=new GrooveClient.Views.TicketsMassActions({indexView:this}),this.appendChildTo(e,".box-c-toolbar")},n.prototype.renderSystemAnnouncement=function(){var e;return this.announcement?(e=new GrooveClient.Views.SystemAnnouncement({announcement:this.announcement}),this.prependChildTo(e,".box-c-main")):void 0},n.prototype.renderResults=function(){return $("#totalCount").text(this.collection.query.get("total_count")),this.renderTicketItems()},n.prototype.renderTicketItems=function(){var e,t,n,i;for(this.$("#expanded-tickets, #list-tickets").empty(),n=this.collection.models,e=0,t=n.length;t>e;e++)i=n[e],this.appendItem(i);return this},n.prototype.renderBlankState=function(){return this.renderChild(new GrooveClient.Views.Blankable({collection:this.collection,el:this.el}))},n.prototype.updateViews=function(){return Groove.UI.tooltips(this.el),this||this.$(".sidebar-collapse-button").hide(),this.updateSelection()},n.prototype.documentScroll=function(){return $("body").hasClass("fancyboxed")||null==this.collection.wasFetched?void 0:this.collection.hasUnfetchedModels()&&Groove.Util.spaceToBottom()<500?this.fetchMoreTickets():void 0},n.prototype.fetchMoreTickets=function(){return this.collection.fetchMore()},n.prototype.appendOrInsertAt=function(e){return e.get("filter_diff")?(this.insertItemAtIndex(e),this.collection.fetching?void 0:e.trigger("highlight")):this.appendItem(e)},n.prototype.fixPosition=function(e){var t,n;return this.collection.sort({silent:!0}),t=this.collection.indexOf(e),n=this.$("#expanded-tickets .ticket_"+e.id).index(),-1!==t&&-1!==n&&t!==n?(_.each(this.filterViewsByModel(e),function(e){return e.remove(),e.leave()}),this.appendItem(e,t)):void 0},n.prototype.appendItem=function(e,t){var n;return n=new GrooveClient.Views.TicketItem({model:e,lastViewedTicket:this.lastViewedTicket}),this.appendViewTo(n,t,"#expanded-tickets")},n.prototype.appendViewTo=function(e,t,n){var i;return i=this.$(n).find(e.siblingSelector()).length-1,null!=t&&i>=t?this.insertChildAtIndexTo(e,t,n):this.appendChildTo(e,n)},n.prototype.insertItemAtIndex=function(e){var t;return t=this.collection.indexOf(e),-1===t&&(t=0),this.appendItem(e,t)},n.prototype.getSelectedTicketIds=function(){var e;return e=this.currentTab().find(":checkbox:checked").map(function(){return this.value}),_.uniq(e)},n.prototype.getSelectedTickets=function(){var e,t,n,i,o;for(i=this.getSelectedTicketIds(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this.collection.get(t));return o},n.prototype.currentTab=function(){return this.$(".box-c-tickets-index:not(.ui-tabs-hide)")},n.prototype.massSelect=function(e){var t;return t=$(e.target),(null!=t?t.is(":checked"):void 0)?this.selectAll():this.selectNothing()},n.prototype.selectAll=function(){return this.selectTickets(!0),this.updateSelection()},n.prototype.selectNothing=function(){return this.selectTickets(!1),this.updateSelection()},n.prototype.selectTickets=function(e){return this.currentTab().find(":checkbox").prop({checked:e}).trigger("change",!0)},n.prototype.resetSelection=function(){return this.selectNothing(),this.$(".box-c-mass-actions").trigger("reset")},n.prototype.clickTicket=function(e){var t,n,i,o;return i=$(e.target),i.parents(".attachments").length||i.is("a, input, .label-name, .selectable")?void 0:(t=$(e.currentTarget),n=t.data("ticket-id"),o=this.collection.get(n),o?(this.constructor.lastClickedTicket=o.id,GrooveClient.navigate(o.path()),!1):void 0)},n.prototype.updateSelection=function(){var e,t,n,i;return i=this.currentTab(),t=i.find(":checkbox"),n=t.filter('[name="ticket_ids[]"]:checked'),e=t.length===n.length,this.$(".select").toggleClass("enabled",e),n.length?(this.$("h1").hide(),this.$(".box-c-mass-actions").show()):(this.$("h1").css({display:"inline-block"}),this.$(".box-c-mass-actions").hide())},n.prototype.showPanelOverflow=function(){return this.$(".box-b-wrap.center-panel").css("overflow","visible")},n.prototype.scrollToLastVisited=function(e,t){var n;return n=e.$(".ticket_"+t+":visible"),n.length?$("html, body").scrollTop(n.offset().top-140):void 0},n.prototype.onSwap=function(){var e,t;return(e=this.constructor.lastClickedTicket)&&(delete this.constructor.lastClickedTicket,t=this.collection.get(e))?_.defer(this.scrollToLastVisited,this,t.id):void 0},n.prototype._sort=function(e){return this.collection.query.set("order",this._withDirection(e.data("field"))),this.$("#sortSearchResults li.on").removeClass("on"),e.parent().addClass("on"),this.collection.fetch({reset:!0})},n.prototype._withDirection=function(e){return"relevance"===e?e:e+" DESC"},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsSearchIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.mainView=GrooveClient.Views.TicketsSearchResults,n.prototype.leftSidebar=GrooveClient.Views.TicketsSearchSidebar,n.prototype.initialize=function(){return this.on("swap",function(e){return function(){var t;return $("#search input").val(e.collection.query.get("term")),t=$("<a>",{"class":"close",href:GrooveClient.path()}),$("#search").append(t)}}(this)),this.on("leave",function(){return $("#search input").val(""),$("#search .close").remove()})},n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketsSorter=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="ticket-sorter",n.prototype.sortables=[{column:"user_updated_at",direction:"desc",name:"Updated - by Newest"},{column:"user_updated_at",direction:"asc",name:"Updated - by Oldest"},{column:"created_at",direction:"desc",name:"Created - by Newest"},{column:"created_at",direction:"asc",name:"Created - by Oldest"},{column:"priority",direction:"desc",name:"Starred - Highest"},{column:"priority",direction:"asc",name:"Starred - Lowest"},{column:"status",direction:"asc",name:"Status (New-Closed)"},{column:"status",direction:"desc",name:"Status (Closed-New)"}],n.prototype.resort=function(){return n.__super__.resort.apply(this,arguments),$.cookie("order_by_column",this.collection.order_by.column,{expires:1e4}),$.cookie("order_by_direction",this.collection.order_by.direction,{expires:1e4})},n}(GrooveClient.Views.Sorter)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendByGroup=function(n){function i(){return this.emptyList=e(this.emptyList,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["trends/by_group"],i.prototype.tagName="section",i.prototype.className="byGroup",i.prototype.initialize=function(e){return this.trend=e.trend,this.listenTo(this.collection,"sync",function(e){return function(){return e.collection.wasFetched=!0,e.render()}}(this))},i.prototype.renderTemplate=function(){var e,t,n,o,r,s,a,l,c,p;return this.collection.isEmpty()?i.__super__.renderTemplate.call(this,{headline:this.headline}):(n=function(){var t,n,i,o;for(i=this.trend.from,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(_.last(e.split(".")));return o}.call(this),p=this.calculateValues(n),s=_.max(p),l=this._sum(p),o=function(){var e,n,i,o;for(i=this.collection.models,o=[],r=e=0,n=i.length;n>e;r=++e)a=i[r],null!==p[r]&&a.has(this.collection.groupedBy)&&(c=p[r],t=_.extend(_.clone(a.attributes),{label:this.label(a),value:this.trend._format(c),percentage:this._percentage(c,l),style:"background-size: "+this._percentage(c,s)+" 100%"}),o.push(t));return o}.call(this),i.__super__.renderTemplate.call(this,{headline:this.headline,groups:this.sort(o)}))},i.prototype.sort=function(e){return e},i.prototype.render=function(){return this.collection.wasFetched||this.collection.fetching?(this.listenToOnce(this.collection,"request",this.emptyList),i.__super__.render.apply(this,arguments)):this.collection.fetch()},i.prototype.calculateValues=function(e){
var t,n,i,o;return o=function(){var o,r,s,a;for(s=this.collection.models,a=[],o=0,r=s.length;r>o;o++)i=s[o],n=function(){var n,o,r;for(r=[],n=0,o=e.length;o>n;n++)t=e[n],r.push(i.get(t));return r}(),a.push(this.trend._calculate(n));return a}.call(this)},i.prototype.emptyList=function(){return this.$("ul").empty()},i.prototype._sum=function(e){return _.reduce(e,function(e,t){return e+=t},0)},i.prototype._percentage=function(e,t){return this.trend._formatPercentage(e/t*100)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendByTimeElapsed=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="byTimeElapsed",n.prototype.label=function(e){return e.get("time_elapsed")},n.prototype.sort=function(e){var t;return t={"0-1 hour":0,"1-3 hours":1,"3-6 hours":2,"6-12 hours":3,"12-24 hours":4,"1-2 days":5,"2+ days":6},_.sortBy(e,function(e){return t[e.time_elapsed]})},n.prototype.calculateValues=function(){return this.collection.pluck(this._countKey(this.collection.first()))},n.prototype._countKey=function(e){return _.find(_.keys(e.attributes),function(e){return e.match(/_count$/)})},n}(GrooveClient.Views.TrendByGroup)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageFirstReplyTimeByTimeElapsed=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/average_first_reply_time_by_time_elapsed"],n}(GrooveClient.Views.TrendByTimeElapsed)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.Trend=function(t){function n(e){this.model=e.model,this.name=e.name,this.calculate=e.calculate,this.from=e.from,this.format=e.format,this.goal=e.goal,this.inspector=e.inspector,this.slug=e.slug,this.help=e.help,n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.attributes=function(){return{"class":"trend","data-cid":this.cid}},n.prototype.initialize=function(){return _.isArray(this.from)||(this.from=[this.from]),null!=this.goal?this.goal:this.goal="decrease"},n.prototype.renderTemplate=function(e){return null==e&&(e={}),n.__super__.renderTemplate.call(this,_.extend({name:this.name,range:this.model.query.get("range")},e))},n.prototype.render=function(){return this.renderTemplate(),this.model.wasFetched&&this.renderValueAndChange(),this.listenTo(this.model,"sync:facts",this.renderValueAndChange)},n.prototype.renderValueAndChange=function(){var e,t,n;return n=function(){var t,n,i,o;for(i=this.from,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.model.get(e));return o}.call(this),this.value=this._calculate(n),this.$("span.value:first").html(this._format(this.value)),t=this.change(this.value),this.$("span.change:first").text(this._formatChange(t)),this.direction=this._directionOf(t),this.$el.prop("class","trend goal-"+this.goal+" "+this.direction)},n.prototype._allFetched=function(e){return _.every(e,function(e){return null!=e})},n.prototype.change=function(e){var t,n,i;return i=this._calculatePrevious(),_.any([i,e],function(e){return _.isNull(e)||_.isNaN(e)})?0:(t=e>i?(e-i)/e:(i-e)/i*-1,0===t||_.isNaN(t)?0:(n=100*t,n>999?999.9:n))},n.prototype._directionOf=function(e){var t;return e?(t="increase"===this.goal?e>0:0>e,t?"better":"worse"):"flat"},n.prototype._calculate=function(e){var t;return t=this.calculate?this.calculate.apply(this,e):e[0],_.isNaN(t)?null:t},n.prototype._calculatePrevious=function(){var e,t;return t=function(){var t,n,i,o;for(i=this.from,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(this.model.getPrevious(e));return o}.call(this),this._calculate(t)},n.prototype.BLANK_VALUE="\u2014",n.prototype._format=function(e){if(null==e)return this.BLANK_VALUE;switch(this.format){case void 0:return this._formatInt(e);case"decimal":return e.toFixed(1).toLocaleString();case"time":return this._formatTime(e);case"percentage":return this._formatPercentage(e)}},n.prototype._formatInt=function(e){return 0===e?this.BLANK_VALUE:e.toLocaleString()},n.prototype._formatTime=function(e){var t,n,i,o;return i=Math.floor(e/3600),e%=3600,o=Math.floor(e/60),n="",t=function(e,t){return e>0?n+=e+"<span class=unit>"+t+"</span>":void 0},t(i,"h"),t(o,"m"),_.isEmpty(n)?this.BLANK_VALUE:n},n.prototype._formatChange=function(e){var t;return t=Math.abs(e.toFixed(0)),t+"%"},n.prototype._formatPercentage=function(e){return e.toFixed(0)+"%"},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsTilesInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/tiles_inspector"],n.prototype.id="trend",n.prototype.events={'mouseenter a[data-event="leave"]':function(){return this.$el.addClass("leaving")},'mouseleave a[data-event="leave"]':function(){return this.$el.removeClass("leaving")},'click a[data-event="leave"]':function(e){return e.preventDefault(),this.trigger("leave",this)}},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$el.addClass("clearfix"),_.defer(function(e){return function(){var t;return t={has_used_trends:1,has_used_trends_inspector:1},t["has_used_"+e.slug+"_inspector"]=1,e.track("Used_Trends",t),e.track("Used_Trends_Inspector"),e.track("Used_Trends_"+e.slug+"_Inspector")}}(this))},n.prototype.renderByGroup=function(e,t,n){var i;return null==n&&(n={}),i=this.model.grouped(t,n),this.appendChild(new e({collection:i,trend:this}))},n.prototype.renderBy=function(e,t,n){var i,o,r;return null==n&&(n={}),null==n.fact_type&&(n.fact_type=o=this.from[0].split(".")[0]),i=function(){var e,t,n,i;for(n=this.from,i=[],e=0,t=n.length;t>e;e++)r=n[e],i.push(_.last(r.split(".")));return i}.call(this),this.renderByGroup(t,n.fact_type,{by:e,select:i.join(","),order:n.order})},n.prototype.renderByAgent=function(){var e,t,n;return t=this.from[0].split(".")[0],e=function(){var e,t,i,o;for(i=this.from,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(_.last(n.split(".")));return o}.call(this),this.renderByGroup(GrooveClient.Views.TrendByAgent,t,{by:"agent_id",select:e.join(",")})},n}(GrooveClient.Views.Trend)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageFirstReplyTimeInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderByAgent()},n.prototype.renderByTimeElapsed=function(){return this.renderByGroup(GrooveClient.Views.AverageFirstReplyTimeByTimeElapsed,"ticket_facts",{by:"time_elapsed",select:"time_until_first_reply,first_reply_count"})},n}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageHandleTimeByTimeElapsed=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/average_handle_time_by_time_elapsed"],n}(GrooveClient.Views.TrendByTimeElapsed)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageHandleTimeInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.slug="average_handle_time",n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderByAgent()},n.prototype.renderByTimeElapsed=function(){return this.renderByGroup(GrooveClient.Views.AverageReplyTimeByTimeElapsed,"ticket_facts",{by:"time_elapsed",select:"time_until_resolved,resolved_ticket_count"})},n}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageReplyTimeByTimeElapsed=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/average_reply_time_by_time_elapsed"],n}(GrooveClient.Views.TrendByTimeElapsed)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.AverageReplyTimeInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.slug="average_reply_time",n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderByAgent()},n.prototype.renderByTimeElapsed=function(){return this.renderByGroup(GrooveClient.Views.AverageReplyTimeByTimeElapsed,"ticket_facts",{by:"time_elapsed",select:"time_until_reply,reply_count"})},n}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/dashboard"],n.prototype.initialize=function(e){this.current=e.current},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.prependChild(new GrooveClient.Views.TrendsToolbar({model:this.model})),this.content=this.$("div.has-fixed-header"),this.tiles=this.content.find("#tiles"),_.defer(function(e){return function(){return e.tiles.css("min-height",e.tiles.outerHeight()),e.track("Used_Trends",{has_used_trends:1}),e.track("Used_Trends_Dashboard",{has_used_trends_dashboard:1})}}(this)),this},n.prototype.renderLeaderboard=function(e){var t;return t=new GrooveClient.Views.TrendsLeaderboard({model:this.model,trends:e}),this.prependChildTo(t,this.content)},n.prototype.renderTiles=function(e){var t;return t=new GrooveClient.Views.TrendsTiles({model:this.model,trends:e}),this.appendChildTo(t,this.tiles)},n.prototype.renderRankedLists=function(e){var t,n,i,o,r;for(o=[],t=0,n=e.length;n>t;t++)i=e[t],i.collection=this.model.lists[i.type],r=new GrooveClient.Views.TrendsRankedList(_.omit(i,"type")),o.push(this.appendChildTo(r,this.content));return o},n.prototype.average=function(e,t){return e/t},n.prototype.percentage=function(e,t){return e/t*100},n.prototype.percentageOfSum=function(e,t){var n;return n=e+t,e/n*100},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendsGraph=function(n){function i(){return this._drawLine=e(this._drawLine,this),this.renderCollection=e(this.renderCollection,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["trends/graph"],i.prototype.id="graph",i.prototype.LABELS={had_new_ticket:"Customers",query_count:"Searches"},i.prototype.events={"mousemove canvas":function(e){var t,n;return n=$(e.target).offset(),t=e.clientX-n.left,this._renderPoint(this._modelAt(t))}},i.prototype.initialize=function(){return this.label=this.LABELS[this.collection.column],this.query=this.collection.query},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.canvas=this.$("canvas"),this.point=this.$("#graphPoint"),this.listenTo(this.collection,"sync",this.renderCollection),this.listenTo(GrooveClient,"window:resize",this.renderCollection),this.collection.fetching||_.defer(this.renderCollection),this},i.prototype.renderCollection=function(){return delete this._cachedZoneWidth,this._drawLine(),this._renderPoint(this.collection.last())},i.prototype._renderPoint=function(e){var t,n,i,o,r;return n=e.get("date"),this._renderedDate&&n===this._renderedDate?void 0:(i=this.collection.indexOf(e),r=this._pointSide(i),t={value:this._formatValue(e),label:this.label,date:Groove.Util.formattedDate(e.get("date")),side:r,position:this._pointPosition(i,r)},o=$(JST["trends/graph_point"](t)),this.point.replaceWith(o),this.point=o,this._renderedDate=n)},i.prototype._pointSide=function(e){return 3>e?"left":"right"},i.prototype._pointPosition=function(e,t){var n;return"right"===t?(n=this.collection.length-e-1,0===n?0:n*this._zoneWidth()-1):(n=e,0===n?0:n*this._zoneWidth())},i.prototype._drawLine=function(){var e,t,n,i,o,r,s,a,l,c,p,u,d;for(c=this.collection.pluck("value"),o=_.max(c),r=_.min(c),p=this.canvas.outerWidth(),t=this.canvas.outerHeight(),e=this._beginPath(p,t),u=0,a=this._zoneWidth(),n=0,i=c.length;i>n;n++)l=c[n],s=l-r,d=t-t*(s/(o-r))-1,d=d>=t||_.isNaN(d)?t-1:d,1>d&&(d=1),e.lineTo(u,d),u+=a;return e.stroke(),this},i.prototype.PATH_SETTINGS={lineWidth:2,strokeStyle:"#763585",lineCap:"round",lineJoin:"round"},i.prototype._beginPath=function(e,t){var n,i,o,r,s;i=this.canvas[0],i.width=e,i.height=t,n=i.getContext("2d"),n.beginPath(),o=this.PATH_SETTINGS;for(r in o)s=o[r],n[r]=s;return n},i.prototype._zoneWidth=function(){return null!=this._cachedZoneWidth?this._cachedZoneWidth:this._cachedZoneWidth=this.canvas.outerWidth()/(this.collection.length-1)},i.prototype._modelAt=function(e){var t;return t=Math.round(e/this._zoneWidth()),this.collection.at(t)},i.prototype._formatValue=function(e){var t;return t=e.get("value"),0===t?"No":t},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.LeftSidebarLayout,n.prototype.leftSidebar=GrooveClient.Views.TrendsLeftSidebar,n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$el.prop("id","trends"),this},n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendByKnowledgeBaseTopic=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.id="byTopic",i.prototype.headline="Articles",i.prototype.render=function(){return this.collection.fetching?void 0:this.collection.wasFetched?i.__super__.render.apply(this,arguments):this.collection.fetch({success:function(e){return function(){var t;return t=_.uniq(e.collection.pluck("topic_id")),GrooveClient.data.kb.topics["with"](t,e.render)}}(this)})},i.prototype.label=function(e){var t;return t=GrooveClient.data.kb.topics.get(e.get("topic_id")),null==t?"Deleted":GrooveClient.Helpers.label(t.get("title"),{max:35})},i}(GrooveClient.Views.TrendByGroup)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.KnowledgeBaseRatingCountInspector=function(n){function i(){return this._renderByTopic=e(this._renderByTopic,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.ratingColumn=this.from[0].split(".")[1]},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this._renderByTopic()},i.prototype._renderByTopic=function(){return this.renderBy("topic_id",GrooveClient.Views.TrendByKnowledgeBaseTopic,{fact_type:"knowledge_base_topic_facts",label:"topic.title",order:this.ratingColumn})},i}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.KnowledgeBaseTrendsDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderLeaderboard([{name:"Total Searches",from:"knowledge_base_search_facts.query_count",goal:"increase"},{name:"Contacted Us",from:"knowledge_base_facts.new_ticket_count"}]),this.renderTiles([{name:"Self Help Success",calculate:this.selfHelpSuccess,from:["knowledge_base_facts.new_ticket_count","knowledge_base_facts.session_count"],format:"percentage",goal:"increase",slug:"self_help_success",help:"Percent of all sessions that ended without a customer creating a ticket. "},{name:"Voted Useful",from:"knowledge_base_facts.helpful_rating_count",goal:"increase",inspector:GrooveClient.Views.KnowledgeBaseRatingCountInspector,slug:"useful"},{name:"Voted Not Useful",from:"knowledge_base_facts.unhelpful_rating_count",inspector:GrooveClient.Views.KnowledgeBaseRatingCountInspector,slug:"not_useful"}]),this.renderRankedLists([{type:"knowledge_base_search_terms",headline:"Top Searches"},{type:"knowledge_base_topics",headline:"Top Articles"}]),_.defer(function(e){return function(){return e.track("Used_KB_Trends",{has_used_kb_trends:1}),e.track("Used_KB_Trends_Dashboard",{has_used_kb_trends_dashboard:1})}}(this))},n.prototype.selfHelpSuccess=function(e,t){var n;return n=e/t,100*(1-n)},n}(GrooveClient.Views.TrendsDashboard)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.KnowledgeBaseTrendsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.title="Knowledge Base Trends - Groove",n.prototype.mainView=GrooveClient.Views.KnowledgeBaseTrendsDashboard,n.prototype.initialize=function(){var e;return n.__super__.initialize.apply(this,arguments),null!=(e=GrooveClient.data).kb?e.kb:e.kb={topics:new GrooveClient.Collections.KnowledgeBaseTopics}},n}(GrooveClient.Views.TrendsIndex)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendsLeaderboard=function(n){function i(){return this.rightAlignValues=e(this.rightAlignValues,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.tagName="section",i.prototype.className="clearfix",i.prototype.id="volume",i.prototype.initialize=function(e){this.trends=e.trends},i.prototype.render=function(){var e,t,n,i,o;for(this.appendChild(new GrooveClient.Views.TrendsGraph({collection:this.model.daily})),n=this.trends,e=0,t=n.length;t>e;e++)i=n[e],i.model=this.model,o=new GrooveClient.Views.TrendsLeaderboardItem(i),this.appendChild(o);return this.listenTo(this.model,"sync:facts",this.rightAlignValues),this},i.prototype.rightAlignValues=function(){var e,t,n;return t=this.$("span.value"),n=function(){var n,i,o,r;for(o=t.toArray(),r=[],n=0,i=o.length;i>n;n++)e=o[n],r.push($(e).outerWidth());return r}(),t.css("min-width",_.max(n))},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsLeaderboardItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/leaderboard_item"],n}(GrooveClient.Views.Trend)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendsRankedList=function(n){function i(){return this.renderList=e(this.renderList,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["trends/ranked_list"],i.prototype.tagName="section",i.prototype.className="list",i.prototype.initialize=function(e){this.headline=e.headline,this.collection=e.collection},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{headline:this.headline})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.listenTo(this.collection,"sync",this.renderList),this.collection.isEmpty()?void 0:this.renderList()},i.prototype.renderList=function(){var e,t;return t=function(){var t,n,i,o;for(i=this.collection.models,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push({name:GrooveClient.Helpers.label(e.get("name"),{max:35}),position:this.collection.indexOf(e)+1,direction:"up",value:e.attributes[this.collection.rank_by]});return o}.call(this),this.$("ol").html(JST["trends/ranked_list_records"]({records:t}))},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.RepliesPerTicketInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.slug="replies_per_ticket",n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderByAgent()},n}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TeamTrendsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.title="Team Trends - Groove",n.prototype.events={"submit .dateRange form":function(e){return e.preventDefault(),this._changeDateRange($("select",e.target).val())}},n.prototype.render=function(){return $.get("/tickets/leaderboard"+document.location.search,function(e){return function(t){return e.$el.html($("div.box-a-main",t).html()),_.delay(function(){return Groove.UI.gravatars()})}}(this)),this},n.prototype._changeDateRange=function(e){return History.pushState(null,null,"?"+$.param({past:e}))},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketRatingInspector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderByAgent()},n}(GrooveClient.Views.TrendsTilesInspector)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketTrendsDashboard=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.renderLeaderboard([{name:"Customers",from:"ticket_enduser_facts.had_new_ticket",goal:"increase"},{name:"Replies Sent",from:"ticket_facts.reply_count",goal:"increase"}]),this.renderTiles([{name:"Avg. Reply Time",calculate:this.average,from:["ticket_facts.time_until_reply","ticket_facts.reply_count"],format:"time",inspector:GrooveClient.Views.AverageReplyTimeInspector,slug:"average_reply_time"},{name:"Avg. First Reply Time",calculate:this.average,from:["ticket_facts.time_until_first_reply","ticket_facts.first_reply_count"],format:"time",inspector:GrooveClient.Views.AverageFirstReplyTimeInspector,slug:"average_first_reply_time"},{name:"Avg. Handle Time",calculate:this.average,from:["ticket_facts.time_until_resolved","ticket_facts.resolved_ticket_count"],format:"time",inspector:GrooveClient.Views.AverageHandleTimeInspector,slug:"average_handle_time"},{name:"Replies / Ticket",calculate:this.average,from:["ticket_facts.resolved_ticket_reply_count","ticket_facts.resolved_ticket_count"],format:"decimal",inspector:GrooveClient.Views.RepliesPerTicketInspector,slug:"replies_per_ticket"}]),GrooveClient.data.account.hasRatingsInstalled()&&this.renderTiles([{name:"Total Ratings",from:"rating_facts.count",goal:"increase",inspector:GrooveClient.Views.TicketRatingInspector,slug:"total_ratings"},{name:"Awesome Replies",from:["rating_facts.awesome_count"],goal:"increase",inspector:GrooveClient.Views.TicketRatingInspector,slug:"awesome_replies"},{name:"OK Replies",from:["rating_facts.ok_count"],inspector:GrooveClient.Views.TicketRatingInspector,slug:"ok_replies"},{name:"Bad Replies",from:["rating_facts.bad_count"],inspector:GrooveClient.Views.TicketRatingInspector,slug:"bad_replies"}]),this.renderRankedLists([{type:"labels",headline:"Top Labels"},{type:"comment_templates",headline:"Top Canned Replies"}]),_.defer(function(e){return function(){return e.track("Used_Ticketing_Trends",{has_used_ticketing_trends:1}),e.track("Used_Ticketing_Trends_Dashboard",{has_used_ticketing_trends_dashboard:1}),e.model.query.has("mailbox_id")?e.track("Used_Ticketing_Trends_by_Mailbox",{has_used_ticketing_trends_by_mailbox:1}):void 0}}(this))},n}(GrooveClient.Views.TrendsDashboard)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TicketTrendsIndex=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.title="Ticket Trends - Groove",n.prototype.mainView=GrooveClient.Views.TicketTrendsDashboard,n}(GrooveClient.Views.TrendsIndex)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsTiles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="section",n.prototype.className="tiles clearfix",n.prototype.initialize=function(e){this.trends=e.trends},n.prototype.events={"mouseenter div.trend":function(e){return this._tile(e).focus()},"mouseleave div.trend":function(e){return this._tile(e).blur()},"click div.inspectable.trend":function(e){return this._navigateToInspector(this._tile(e))},'mouseenter a[role="renderHelpMessage"]':function(e){return this._tile(e).renderHelpMessage()},'mouseleave a[role="renderHelpMessage"]':function(e){return this._tile(e).removeHelpMessage()},'click a[role="renderHelpMessage"]':function(e){return e.preventDefault()}},n.prototype.render=function(){var e,t,n,i,o,r,s;for(i=this.trends,t=0,n=i.length;n>t;t++)r=i[t],s=this._buildTile(r),this.appendChild(s),o=this.model.get("current"),null!=o&&r.slug===o&&(e=s,_.defer(function(t){return function(){return t._renderInspector(e)}}(this)));return this},n.prototype._renderInspector=function(e){var t,n,i,o,r;return o=this.parent.$("section.tiles").hide(),r=_.pick(e,"model","name","calculate","from","format","goal","slug"),i=document.location.pathname,t=i.replace("/"+e.slug,""),this.model.set("current",e.slug),n=new e.inspector(r),n.once("leave",function(e){return function(){return e.parent._removeChild(n),n.remove(),e.model.unset("current"),document.location.pathname===i?(o.show(),GrooveClient.navigate(t)):void 0}}(this)),this.parent.appendChildTo(n,"#tiles")},n.prototype._navigateToInspector=function(e){var t,n;return n=e.model.query.get("range"),t=document.location.pathname.replace(n,e.slug+"/"+n),GrooveClient.navigate(t)},n.prototype._buildTile=function(e){return e.model=this.model,new GrooveClient.Views.TrendsTilesItem(e)},n.prototype._tile=function(e){var t;return t=$(e.target).closest("div.trend"),this._children[t.data("cid")]},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsTilesFeedback=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/tiles_feedback"],n.prototype.className="feedback message",n.prototype.initialize=function(e){this.direction=e.direction,this.value=e.value,this.goal=e.goal},n.prototype.renderTemplate=function(){var e,t;return e=function(){switch(this.direction){case"better":return{change:"Better than",message:"Great work!"};case"worse":return{change:"Worse than",message:"But today is a new day."};default:return"increase"===this.goal||this.value?{change:"Same as the",message:"But that's no reason to rest."}:{change:"Same as the",message:"But you can't top perfection!"}}}.call(this),t=this.model.query.get("range"),e.range="yesterday"===t?"day":_.last(t.split("_")),n.__super__.renderTemplate.call(this,e)},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsTilesHelpMessage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="help message",n.prototype.initialize=function(e){this.html=e.html},n.prototype.render=function(){return this.$el.html(this.html),this},n}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendsTilesItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["trends/tiles_item"],n.prototype.focus=function(){return this._renderFeedback(),this._isInspectable()&&this.$el.addClass("inspectable"),this.trigger("focus",this)},n.prototype.blur=function(){return this.feedback&&this._hideFeedback(),this.$el.removeClass("inspectable"),this.trigger("blur",this)},n.prototype.renderTemplate=function(){return n.__super__.renderTemplate.call(this,{help:this.help})},n.prototype._isInspectable=function(){return this.inspector&&null!=this.value&&0!==this.value},n.prototype._renderFeedback=function(){return null==this.$change&&(this.$change=this.$("span.change")),this.$change.hide(),this.feedback=new GrooveClient.Views.TrendsTilesFeedback({model:this.model,direction:this.direction,value:this.value,goal:this.goal}),this.appendChild(this.feedback)},n.prototype._hideFeedback=function(){return this._removeChild(this.feedback),this.feedback.remove(),delete this.feedback,this.$change.show()},n.prototype.renderHelpMessage=function(){return this.helpMessage=new GrooveClient.Views.TrendsTilesHelpMessage({html:this.help}),this.feedback.$el.hide(),this.appendChild(this.helpMessage)},n.prototype.removeHelpMessage=function(){
return this._removeChild(this.helpMessage),this.helpMessage.remove(),delete this.helpMessage,this.feedback.$el.show()},n}(GrooveClient.Views.Trend)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.TrendsToolbar=function(n){function i(){return this._renderCurrentRange=e(this._renderCurrentRange,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["trends/toolbar"],i.prototype.className="box-c-toolbar tickets-toolbar fixed-header-no-sidebar last",i.prototype.initialize=function(e){return this.query=this.model.query,this.listenTo(this.query,"change:range",function(e){return function(){return e.model.once("sync:facts",e._renderCurrentRange)}}(this))},i.prototype.renderTemplate=function(){return i.__super__.renderTemplate.call(this,{reportName:this.model.get("name"),currentRange:this._currentRangeLabel()})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this._radioButton(this.query.get("range")).prop("checked",!0)},i.prototype._currentRangeLabel=function(){return this.query.humanizedRange()},i.prototype._renderCurrentRange=function(){return this.$("#currentRange").text(this._currentRangeLabel())},i.prototype._radioButton=function(e){return this.$("#"+e)},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TrendByAgent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="byAgent",n.prototype.headline="Agent",n.prototype.label=function(e){var t,n;return n=e.get("agent_id"),null==n?"Automated":(t=GrooveClient.data.agents.get(n),null==t?"Archived":GrooveClient.Helpers.label(t.get("name"),{max:35}))},n}(GrooveClient.Views.TrendByGroup)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TwitterNoAccounts=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template=JST["twitter/no_accounts"],n.prototype.render=function(){return n.__super__.render.call(this),this.setupFancybox(),this},n.prototype.setupFancybox=function(){return this.$(".fancybox").fancybox(Groove.Fancybox.params.one)},n}(GrooveClient.Views.MainView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.TwitterBlankSlate=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=GrooveClient.Views.NoSidebarsLayout,n.prototype.mainView=GrooveClient.Views.TwitterNoAccounts,n}(GrooveClient.Support.LayoutView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;GrooveClient.Views.User=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.avatarImage=function(e){var t,n,i;return null==e&&(e={}),i=e.size||50,t=this.model.get("email"),n=location.protocol+"//"+location.host.replace(/\.dev$/,".com")+"/avatars/original/missing.png","alex@groovehq.com"===t?this.imageTag("../assets/headshots/alex-turnbull.jpg",e,i):"hello@groovehq.com"===t?this.imageTag("../assets/headshots/lesley-yarbrough.jpg",e,i):this.model.get("avatar_present")?this.imageTag(this.model.get("original"===e.type?"avatar_original_url":"avatar_url"),e,i):this.model.get("twitter_avatar")&&_.isEmpty(t)?this.imageTag(this.model.get("twitter_avatar"),e,i):this.model.get("fb_uid")?this.imageTag("http://graph.facebook.com/"+this.model.get("fb_uid")+"/picture?size=square",e,i):this.model.hasInvalidEmail()?this.imageTag(n,e,i):t?$.gravatar(t,{size:i,image:n}).attr({width:i}).outerHTML():void 0},n.prototype.hasAvatar=function(){return!(!this.model.get("avatar_present")&&!this.model.get("twitter_username")&&!this.model.get("fb_uid")&&this.model.hasInvalidEmail())},n.prototype.imageTag=function(e,t,n){return $("<img>").attr(_.extend({width:n,src:e},t)).outerHTML()},n}(Backbone.View)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.AvatarForm=function(n){function i(){return this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["users/avatar_form"],i.prototype.id="edit-user-avatar-form",i.prototype.events={"change .file":"uploadAvatar","click .delete":"deleteAvatar"},i.prototype.initialize=function(e){return this.buttonText=e.buttonText,this.enduserView=new GrooveClient.Views.User({model:this.model}),this.listenTo(this.model,"change:avatar_file_name",this.renderAvatar)},i.prototype.render=function(){return this.renderTemplate({view:this,user:this.model,enduserView:this.enduserView}),this.renderAvatar(),this},i.prototype.renderAvatar=function(){return this.$(".user-avatar-thumb").html(this.enduserView.avatarImage({size:45,id:"user_avatar_thumb"})),GrooveClient.trigger("customer:profile-updated",this.model)},i.prototype.uploadAvatar=function(e){var t,n,i;return t=$("meta[name='csrf-param']").attr("content"),n=$("meta[name='csrf-token']").attr("content"),(i={_method:"PUT"})[t]=n,Backbone.sync("update",this.model,{url:this.model.url(),files:this.$("input.file"),data:i,iframe:!0,complete:function(e){return function(t,n){return e.model.fetch(),e.trigger("upload",e)}}(this)}),this.$(".file").val("")},i.prototype.deleteAvatar=function(e){return this.model.save({json:{avatar_delete:"1"}},{wait:!0,success:function(e){return function(){return e.trigger("delete",e)}}(this)})},i}(GrooveClient.Support.CompositeView)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;GrooveClient.Views.CustomerEditForm=function(n){function i(){return this.userSaved=e(this.userSaved,this),this.userSaveFailed=e(this.userSaveFailed,this),this.saveUser=e(this.saveUser,this),this.renderAvatarForm=e(this.renderAvatarForm,this),i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=JST["users/customer_edit_form"],i.prototype.events={"submit form.user":"saveUser"},i.prototype.initialize=function(e){return this.enduser=this.model,this.ticket=e.ticket},i.prototype.render=function(){return this.renderTemplate({view:this,user:this.model}),this.initCompanyNameAutocomplete(),this.renderAvatarForm(),this.errorForm=new GrooveClient.Views.ErrorForm({el:this.$(".box-c-user-edit").get(0)}),this},i.prototype.renderAvatarForm=function(){var e;return e=new GrooveClient.Views.AvatarForm({model:this.enduser}),this.listenTo(e,"upload",this._trackAvatarUploaded),this.listenTo(e,"delete",this._trackAvatarDeleted),this.prependChildTo(e,".box-c-user-edit")},i.prototype.saveUser=function(e){return this.model.save(this.formSerialize(),{wait:!0,success:this.userSaved,error:this.userSaveFailed}),!1},i.prototype.userSaveFailed=function(e,t){return this.errorForm.showErrors(t.responseText)},i.prototype.initCompanyNameAutocomplete=function(){return $.ajax({type:"GET",dataType:"json",url:"/api/contacts/companies/autocomplete_by_name",success:function(e){return function(t){return e.$("#user_company_name").autocomplete({source:t})}}(this)})},i.prototype.userSaved=function(e,t){var n;return $.fancybox.close(),null!=this.ticket&&GrooveClient.trigger("tickets:update",{id:this.ticket.id,enduser:t,updater_agent_id:GrooveClient.data.currentUser.id,filter_diff:{}}),GrooveClient.trigger("customer:profile-updated",e),GrooveClient.trigger("flashMessage",{type:"notice",body:"Customer information has been updated."}),null!=(n=this.ticket)?n.enduser=this.enduser:void 0},i.prototype.formSerialize=function(){return{json:this.$("form.user").toObject({skipEmpty:!1})}},i.prototype._trackAvatarUploaded=function(){return this.track("uploaded_avater:end_user")},i.prototype._trackAvatarDeleted=function(){return this.track("deleted_avatar:end_user")},i}(GrooveClient.Views.FancyboxView)}.call(this),GrooveClient.Models.Account.pricing={"helpdesk+chat":2700,helpdesk:1500,chat:1200},GrooveClient.Models.User.agentTypes={helpdesk:"Ticketing"},GrooveClient.data.airAppUrl="http://groovehq.s3.amazonaws.com/air/GrooveLiveChat.air",GrooveClient.Views.CommentTemplatesEditor.VARIABLES={full_name:"Full name",first_name:"First name",last_name:"Last name",email:"Email address",agent_firstname:"Agent first name"},GrooveClient.data.ticketSettings={states:[["Open","opened"],["Follow Up","follow_up"],["Pending","pending"],["Closed","closed"],["Spam","spam"]],priorities:{1000:"Low",2000:"Medium",3000:"High",4000:"Urgent"}},GrooveClient.data.widgetLocales=[{name:"Czech",locale:"cs"},{name:"Danish",locale:"da"},{name:"Dutch",locale:"nl"},{name:"English",locale:"en"},{name:"French",locale:"fr"},{name:"German",locale:"de"},{name:"Hungarian",locale:"hu"},{name:"Italian",locale:"it"},{name:"Korean",locale:"ko"},{name:"Norwegian",locale:"nb"},{name:"Polish",locale:"pl"},{name:"Portuguese (BR)",locale:"pt-BR"},{name:"Romanian",locale:"ro"},{name:"Russian",locale:"ru"},{name:"Slovenian",locale:"sl"},{name:"Spanish",locale:"es"},{name:"Swedish",locale:"sv"},{name:"Turkish",locale:"tr"}],GrooveClient.data.widgetPositions=[{name:"Bottom left",position:"left"},{name:"Bottom right",position:"right"}],$.browser.msie&&"/groove_client"==location.pathname&&(window.location.pathname="../groove_client/index.html");var heartBeat=function(){$.getJSON("/api/heartbeat")};setInterval(heartBeat,6e4);